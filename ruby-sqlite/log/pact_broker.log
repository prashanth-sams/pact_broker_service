2021-09-06 01:04:20.309089 I [72416:4380] pact-broker -- (0.000458s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.309160 I [72416:4380] pact-broker -- (0.000021s) PRAGMA case_sensitive_like = 1
2021-09-06 01:04:20.310556 I [72416:4380] pact-broker -- (0.000062s) SELECT sqlite_version()
2021-09-06 01:04:20.310724 I [72416:4380] pact-broker -- (0.000074s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:04:20.310891 I [72416:4380] pact-broker -- (0.000090s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:04:20.310903 I [72416:4380] PactBroker::App -- Database schema version is 0
2021-09-06 01:04:20.312131 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_migrations: SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 01:04:20.313913 I [72416:4380] pact-broker -- (0.000868s) CREATE TABLE `schema_migrations` (`filename` varchar(255) NOT NULL PRIMARY KEY)
2021-09-06 01:04:20.314081 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_info: SELECT NULL AS 'nil' FROM `schema_info` LIMIT 1
2021-09-06 01:04:20.314348 I [72416:4380] pact-broker -- (0.000107s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 01:04:20.351811 I [72416:4380] PactBroker::App -- Migrating database schema
2021-09-06 01:04:20.353154 I [72416:4380] pact-broker -- (0.000114s) SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 01:04:20.353276 I [72416:4380] pact-broker -- (0.000072s) SELECT * FROM `schema_migrations` LIMIT 1
2021-09-06 01:04:20.353397 I [72416:4380] pact-broker -- (0.000054s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 01:04:20.388195 I [72416:4380] pact-broker -- Begin applying migration 000001_create_pacticipant_table.rb, direction: up
2021-09-06 01:04:20.389887 I [72416:4380] pact-broker -- (0.001497s) CREATE TABLE `pacticipants` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) UNIQUE, `repository_url` varchar(255))
2021-09-06 01:04:20.390877 I [72416:4380] pact-broker -- (0.000848s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000001_create_pacticipant_table.rb')
2021-09-06 01:04:20.390917 I [72416:4380] pact-broker -- Finished applying migration 000001_create_pacticipant_table.rb, direction: up, took 0.002721 seconds
2021-09-06 01:04:20.390925 I [72416:4380] pact-broker -- Begin applying migration 000002_create_versions_table.rb, direction: up
2021-09-06 01:04:20.391906 I [72416:4380] pact-broker -- (0.000788s) CREATE TABLE `versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255), `repository_ref` varchar(255), `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 01:04:20.392697 I [72416:4380] pact-broker -- (0.000710s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:04:20.393430 I [72416:4380] pact-broker -- (0.000665s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000002_create_versions_table.rb')
2021-09-06 01:04:20.393447 I [72416:4380] pact-broker -- Finished applying migration 000002_create_versions_table.rb, direction: up, took 0.002519 seconds
2021-09-06 01:04:20.393454 I [72416:4380] pact-broker -- Begin applying migration 000003_create_pacts_table.rb, direction: up
2021-09-06 01:04:20.394286 I [72416:4380] pact-broker -- (0.000684s) CREATE TABLE `pacts` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` text, `version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 01:04:20.394995 I [72416:4380] pact-broker -- (0.000648s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.395565 I [72416:4380] pact-broker -- (0.000514s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000003_create_pacts_table.rb')
2021-09-06 01:04:20.395581 I [72416:4380] pact-broker -- Finished applying migration 000003_create_pacts_table.rb, direction: up, took 0.002124 seconds
2021-09-06 01:04:20.395587 I [72416:4380] pact-broker -- Begin applying migration 000004_create_tags_table.rb, direction: up
2021-09-06 01:04:20.396431 I [72416:4380] pact-broker -- (0.000703s) CREATE TABLE `tags` (`name` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, CONSTRAINT `tags_pk` PRIMARY KEY (`version_id`, `name`))
2021-09-06 01:04:20.397021 I [72416:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000004_create_tags_table.rb')
2021-09-06 01:04:20.397037 I [72416:4380] pact-broker -- Finished applying migration 000004_create_tags_table.rb, direction: up, took 0.001446 seconds
2021-09-06 01:04:20.397044 I [72416:4380] pact-broker -- Begin applying migration 000005_add_order_column_to_version.rb, direction: up
2021-09-06 01:04:20.397111 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.397141 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.397189 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:20.397516 I [72416:4380] pact-broker -- (0.000277s) ALTER TABLE `versions` ADD COLUMN `order` integer
2021-09-06 01:04:20.397870 I [72416:4380] pact-broker -- (0.000328s) COMMIT
2021-09-06 01:04:20.397926 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.397956 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.398089 I [72416:4380] pact-broker -- (0.000058s) UPDATE `versions` SET `order` = `id`
2021-09-06 01:04:20.398682 I [72416:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000005_add_order_column_to_version.rb')
2021-09-06 01:04:20.398697 I [72416:4380] pact-broker -- Finished applying migration 000005_add_order_column_to_version.rb, direction: up, took 0.001651 seconds
2021-09-06 01:04:20.398704 I [72416:4380] pact-broker -- Begin applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up
2021-09-06 01:04:20.398798 I [72416:4380] pact-broker -- (0.000054s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.398828 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.398859 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.399021 I [72416:4380] pact-broker -- (0.000102s) PRAGMA table_info('tags')
2021-09-06 01:04:20.399104 I [72416:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('tags')
2021-09-06 01:04:20.399211 I [72416:4380] pact-broker -- (0.000034s) PRAGMA index_list('tags')
2021-09-06 01:04:20.399270 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:04:20.399434 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.399518 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:04:20.399731 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.399824 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_list('tags')
2021-09-06 01:04:20.400418 I [72416:4380] pact-broker -- (0.000570s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:04:20.400536 I [72416:4380] pact-broker -- (0.000095s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:04:20.400615 I [72416:4380] pact-broker -- (0.000059s) INSERT INTO `tags`(`name`, `version_id`) SELECT `name`, `version_id` FROM `tags_backup0`
2021-09-06 01:04:20.400721 I [72416:4380] pact-broker -- (0.000088s) DROP TABLE `tags_backup0`
2021-09-06 01:04:20.401210 I [72416:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 01:04:20.401263 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.401291 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.401877 I [72416:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000006_make_version_foreign_key_mandatory.rb')
2021-09-06 01:04:20.401893 I [72416:4380] pact-broker -- Finished applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up, took 0.003186 seconds
2021-09-06 01:04:20.401900 I [72416:4380] pact-broker -- Begin applying migration 000007_increase_json_content_length.rb, direction: up
2021-09-06 01:04:20.401958 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.401985 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.402062 I [72416:4380] pact-broker -- (0.000056s) BEGIN
2021-09-06 01:04:20.402200 I [72416:4380] pact-broker -- (0.000095s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.402278 I [72416:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.402336 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.402499 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.402568 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.402748 I [72416:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.402838 I [72416:4380] pact-broker -- (0.000033s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.402951 I [72416:4380] pact-broker -- (0.000083s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.403508 I [72416:4380] pact-broker -- (0.000513s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.403625 I [72416:4380] pact-broker -- (0.000094s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.403695 I [72416:4380] pact-broker -- (0.000050s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`) SELECT `id`, `json_content`, `version_id`, `provider_id` FROM `pacts_backup0`
2021-09-06 01:04:20.403800 I [72416:4380] pact-broker -- (0.000086s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.403884 I [72416:4380] pact-broker -- (0.000065s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.404423 I [72416:4380] pact-broker -- (0.000517s) COMMIT
2021-09-06 01:04:20.404474 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.404502 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.405186 I [72416:4380] pact-broker -- (0.000637s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000007_increase_json_content_length.rb')
2021-09-06 01:04:20.405201 I [72416:4380] pact-broker -- Finished applying migration 000007_increase_json_content_length.rb, direction: up, took 0.003299 seconds
2021-09-06 01:04:20.405208 I [72416:4380] pact-broker -- Begin applying migration 000008_create_latest_pact_view.rb, direction: up
2021-09-06 01:04:20.406074 I [72416:4380] pact-broker -- (0.000585s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 01:04:20.406612 I [72416:4380] pact-broker -- (0.000493s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:04:20.407196 I [72416:4380] pact-broker -- (0.000540s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.407878 I [72416:4380] pact-broker -- (0.000563s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000008_create_latest_pact_view.rb')
2021-09-06 01:04:20.407894 I [72416:4380] pact-broker -- Finished applying migration 000008_create_latest_pact_view.rb, direction: up, took 0.002684 seconds
2021-09-06 01:04:20.407901 I [72416:4380] pact-broker -- Begin applying migration 000009_add_timestamps.rb, direction: up
2021-09-06 01:04:20.407956 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.407985 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.408015 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.408418 I [72416:4380] pact-broker -- (0.000356s) ALTER TABLE `pacts` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.408827 I [72416:4380] pact-broker -- (0.000385s) COMMIT
2021-09-06 01:04:20.408879 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.408907 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.408955 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.408979 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.409008 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.409446 I [72416:4380] pact-broker -- (0.000344s) ALTER TABLE `pacts` ADD COLUMN `updated_at` timestamp
2021-09-06 01:04:20.409813 I [72416:4380] pact-broker -- (0.000342s) COMMIT
2021-09-06 01:04:20.409864 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.409893 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.409940 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.409965 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.409994 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.410377 I [72416:4380] pact-broker -- (0.000341s) ALTER TABLE `tags` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.410842 I [72416:4380] pact-broker -- (0.000437s) COMMIT
2021-09-06 01:04:20.410907 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.410937 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.410987 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.411046 I [72416:4380] pact-broker -- (0.000042s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.411078 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.411484 I [72416:4380] pact-broker -- (0.000360s) ALTER TABLE `tags` ADD COLUMN `updated_at` timestamp
2021-09-06 01:04:20.411866 I [72416:4380] pact-broker -- (0.000358s) COMMIT
2021-09-06 01:04:20.411920 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.411952 I [72416:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.411998 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.412023 I [72416:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.412051 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.412475 I [72416:4380] pact-broker -- (0.000349s) ALTER TABLE `versions` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.412839 I [72416:4380] pact-broker -- (0.000341s) COMMIT
2021-09-06 01:04:20.412890 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.412918 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.412963 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.412988 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.413017 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.413448 I [72416:4380] pact-broker -- (0.000352s) ALTER TABLE `versions` ADD COLUMN `updated_at` timestamp
2021-09-06 01:04:20.413762 I [72416:4380] pact-broker -- (0.000290s) COMMIT
2021-09-06 01:04:20.413813 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.413841 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.413887 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.413912 I [72416:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.413940 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.414326 I [72416:4380] pact-broker -- (0.000344s) ALTER TABLE `pacticipants` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.414725 I [72416:4380] pact-broker -- (0.000336s) COMMIT
2021-09-06 01:04:20.414777 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.414805 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.414850 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.414876 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.414905 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.415293 I [72416:4380] pact-broker -- (0.000347s) ALTER TABLE `pacticipants` ADD COLUMN `updated_at` timestamp
2021-09-06 01:04:20.415661 I [72416:4380] pact-broker -- (0.000344s) COMMIT
2021-09-06 01:04:20.415711 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.415771 I [72416:4380] pact-broker -- (0.000041s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.416420 I [72416:4380] pact-broker -- (0.000592s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000009_add_timestamps.rb')
2021-09-06 01:04:20.416437 I [72416:4380] pact-broker -- Finished applying migration 000009_add_timestamps.rb, direction: up, took 0.008533 seconds
2021-09-06 01:04:20.416444 I [72416:4380] pact-broker -- Begin applying migration 000010_populate_timestamps.rb, direction: up
2021-09-06 01:04:20.416709 I [72416:4380] pact-broker -- (0.000065s) UPDATE `pacts` SET `created_at` = '2021-09-05 21:04:20.416482', `updated_at` = '2021-09-05 21:04:20.416496'
2021-09-06 01:04:20.416885 I [72416:4380] pact-broker -- (0.000048s) UPDATE `versions` SET `created_at` = '2021-09-05 21:04:20.416729', `updated_at` = '2021-09-05 21:04:20.416731'
2021-09-06 01:04:20.417002 I [72416:4380] pact-broker -- (0.000045s) UPDATE `pacticipants` SET `created_at` = '2021-09-05 21:04:20.416905', `updated_at` = '2021-09-05 21:04:20.416907'
2021-09-06 01:04:20.417119 I [72416:4380] pact-broker -- (0.000044s) UPDATE `tags` SET `created_at` = '2021-09-05 21:04:20.417021', `updated_at` = '2021-09-05 21:04:20.417023'
2021-09-06 01:04:20.417848 I [72416:4380] pact-broker -- (0.000680s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000010_populate_timestamps.rb')
2021-09-06 01:04:20.417863 I [72416:4380] pact-broker -- Finished applying migration 000010_populate_timestamps.rb, direction: up, took 0.001417 seconds
2021-09-06 01:04:20.417870 I [72416:4380] pact-broker -- Begin applying migration 000011_made_timestamps_mandatory.rb, direction: up
2021-09-06 01:04:20.417924 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.418002 I [72416:4380] pact-broker -- (0.000059s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.418033 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.418200 I [72416:4380] pact-broker -- (0.000115s) PRAGMA table_info('tags')
2021-09-06 01:04:20.418279 I [72416:4380] pact-broker -- (0.000036s) PRAGMA foreign_key_list('tags')
2021-09-06 01:04:20.418398 I [72416:4380] pact-broker -- (0.000086s) PRAGMA index_list('tags')
2021-09-06 01:04:20.418455 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.418507 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:04:20.418677 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.418753 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:04:20.418944 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.419087 I [72416:4380] pact-broker -- (0.000037s) PRAGMA index_list('tags')
2021-09-06 01:04:20.419144 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.419956 I [72416:4380] pact-broker -- (0.000785s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:04:20.420106 I [72416:4380] pact-broker -- (0.000127s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:04:20.420152 I [72416:4380] pact-broker -- (0.000027s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:04:20.420271 I [72416:4380] pact-broker -- (0.000100s) DROP TABLE `tags_backup0`
2021-09-06 01:04:20.420408 I [72416:4380] pact-broker -- (0.000068s) PRAGMA table_info('tags')
2021-09-06 01:04:20.420505 I [72416:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('tags')
2021-09-06 01:04:20.420591 I [72416:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 01:04:20.420670 I [72416:4380] pact-broker -- (0.000049s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.420725 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:04:20.420912 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.420978 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:04:20.421163 I [72416:4380] pact-broker -- (0.000028s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.421435 I [72416:4380] pact-broker -- (0.000170s) PRAGMA index_list('tags')
2021-09-06 01:04:20.421534 I [72416:4380] pact-broker -- (0.000061s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.422174 I [72416:4380] pact-broker -- (0.000609s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:04:20.422281 I [72416:4380] pact-broker -- (0.000086s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:04:20.422325 I [72416:4380] pact-broker -- (0.000026s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:04:20.422393 I [72416:4380] pact-broker -- (0.000051s) DROP TABLE `tags_backup0`
2021-09-06 01:04:20.422538 I [72416:4380] pact-broker -- (0.000067s) PRAGMA table_info('tags')
2021-09-06 01:04:20.422621 I [72416:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('tags')
2021-09-06 01:04:20.422723 I [72416:4380] pact-broker -- (0.000062s) PRAGMA index_list('tags')
2021-09-06 01:04:20.422778 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.422852 I [72416:4380] pact-broker -- (0.000044s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:04:20.423010 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.423089 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:04:20.423279 I [72416:4380] pact-broker -- (0.000028s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.423547 I [72416:4380] pact-broker -- (0.000164s) PRAGMA index_list('tags')
2021-09-06 01:04:20.423607 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:04:20.424242 I [72416:4380] pact-broker -- (0.000593s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:04:20.424358 I [72416:4380] pact-broker -- (0.000093s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:04:20.424401 I [72416:4380] pact-broker -- (0.000024s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:04:20.424500 I [72416:4380] pact-broker -- (0.000081s) DROP TABLE `tags_backup0`
2021-09-06 01:04:20.425169 I [72416:4380] pact-broker -- (0.000643s) COMMIT
2021-09-06 01:04:20.425256 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.425288 I [72416:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.425378 I [72416:4380] pact-broker -- (0.000044s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.425408 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.425440 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.425622 I [72416:4380] pact-broker -- (0.000130s) PRAGMA table_info('pacticipants')
2021-09-06 01:04:20.425710 I [72416:4380] pact-broker -- (0.000026s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:04:20.425794 I [72416:4380] pact-broker -- (0.000034s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.425867 I [72416:4380] pact-broker -- (0.000042s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.426034 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.426145 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:04:20.426300 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.426528 I [72416:4380] pact-broker -- (0.000138s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.426584 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.427473 I [72416:4380] pact-broker -- (0.000850s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:04:20.427607 I [72416:4380] pact-broker -- (0.000110s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:04:20.427683 I [72416:4380] pact-broker -- (0.000055s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:04:20.427800 I [72416:4380] pact-broker -- (0.000094s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:04:20.427960 I [72416:4380] pact-broker -- (0.000096s) PRAGMA table_info('pacticipants')
2021-09-06 01:04:20.428024 I [72416:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:04:20.428109 I [72416:4380] pact-broker -- (0.000031s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.428163 I [72416:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.428337 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.428407 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:04:20.428618 I [72416:4380] pact-broker -- (0.000031s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.428885 I [72416:4380] pact-broker -- (0.000179s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.428947 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.429618 I [72416:4380] pact-broker -- (0.000645s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:04:20.429724 I [72416:4380] pact-broker -- (0.000082s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:04:20.429776 I [72416:4380] pact-broker -- (0.000033s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:04:20.429876 I [72416:4380] pact-broker -- (0.000076s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:04:20.430038 I [72416:4380] pact-broker -- (0.000083s) PRAGMA table_info('pacticipants')
2021-09-06 01:04:20.430103 I [72416:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:04:20.430186 I [72416:4380] pact-broker -- (0.000031s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.430244 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.430393 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.430474 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:04:20.430657 I [72416:4380] pact-broker -- (0.000039s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.430949 I [72416:4380] pact-broker -- (0.000191s) PRAGMA index_list('pacticipants')
2021-09-06 01:04:20.431013 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:04:20.431770 I [72416:4380] pact-broker -- (0.000723s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:04:20.431890 I [72416:4380] pact-broker -- (0.000092s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:04:20.431946 I [72416:4380] pact-broker -- (0.000035s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:04:20.432028 I [72416:4380] pact-broker -- (0.000054s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:04:20.432642 I [72416:4380] pact-broker -- (0.000589s) COMMIT
2021-09-06 01:04:20.432719 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.432749 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.432821 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.432847 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.432880 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.433090 I [72416:4380] pact-broker -- (0.000149s) PRAGMA table_info('versions')
2021-09-06 01:04:20.433178 I [72416:4380] pact-broker -- (0.000037s) PRAGMA foreign_key_list('versions')
2021-09-06 01:04:20.433249 I [72416:4380] pact-broker -- (0.000035s) PRAGMA index_list('versions')
2021-09-06 01:04:20.434783 I [72416:4380] pact-broker -- (0.000018s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.434898 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:04:20.435083 I [72416:4380] pact-broker -- (0.000015s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.435240 I [72416:4380] pact-broker -- (0.000040s) PRAGMA index_list('versions')
2021-09-06 01:04:20.435301 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:04:20.436224 I [72416:4380] pact-broker -- (0.000876s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:04:20.436389 I [72416:4380] pact-broker -- (0.000137s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.436467 I [72416:4380] pact-broker -- (0.000057s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:04:20.436582 I [72416:4380] pact-broker -- (0.000096s) DROP TABLE `versions_backup0`
2021-09-06 01:04:20.436660 I [72416:4380] pact-broker -- (0.000059s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:04:20.436838 I [72416:4380] pact-broker -- (0.000129s) PRAGMA table_info('versions')
2021-09-06 01:04:20.436915 I [72416:4380] pact-broker -- (0.000034s) PRAGMA foreign_key_list('versions')
2021-09-06 01:04:20.436988 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_list('versions')
2021-09-06 01:04:20.437189 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.437289 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:04:20.437455 I [72416:4380] pact-broker -- (0.000031s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.437748 I [72416:4380] pact-broker -- (0.000176s) PRAGMA index_list('versions')
2021-09-06 01:04:20.437838 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:04:20.438560 I [72416:4380] pact-broker -- (0.000652s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:04:20.438655 I [72416:4380] pact-broker -- (0.000073s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.438704 I [72416:4380] pact-broker -- (0.000030s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:04:20.438764 I [72416:4380] pact-broker -- (0.000043s) DROP TABLE `versions_backup0`
2021-09-06 01:04:20.438842 I [72416:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:04:20.439010 I [72416:4380] pact-broker -- (0.000083s) PRAGMA table_info('versions')
2021-09-06 01:04:20.439081 I [72416:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('versions')
2021-09-06 01:04:20.439185 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_list('versions')
2021-09-06 01:04:20.439344 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.439410 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:04:20.439602 I [72416:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.439888 I [72416:4380] pact-broker -- (0.000181s) PRAGMA index_list('versions')
2021-09-06 01:04:20.439950 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:04:20.440688 I [72416:4380] pact-broker -- (0.000662s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:04:20.440781 I [72416:4380] pact-broker -- (0.000070s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.440832 I [72416:4380] pact-broker -- (0.000032s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:04:20.440899 I [72416:4380] pact-broker -- (0.000050s) DROP TABLE `versions_backup0`
2021-09-06 01:04:20.441691 I [72416:4380] pact-broker -- (0.000769s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:04:20.442275 I [72416:4380] pact-broker -- (0.000557s) COMMIT
2021-09-06 01:04:20.442339 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.442369 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.442457 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.442483 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.442515 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.442728 I [72416:4380] pact-broker -- (0.000134s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.442840 I [72416:4380] pact-broker -- (0.000070s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.442900 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.443120 I [72416:4380] pact-broker -- (0.000045s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.443198 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.443371 I [72416:4380] pact-broker -- (0.000035s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.443489 I [72416:4380] pact-broker -- (0.000053s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.443545 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.444455 I [72416:4380] pact-broker -- (0.000865s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.444591 I [72416:4380] pact-broker -- (0.000113s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.444646 I [72416:4380] pact-broker -- (0.000036s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:04:20.444755 I [72416:4380] pact-broker -- (0.000091s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.444874 I [72416:4380] pact-broker -- (0.000066s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.445005 I [72416:4380] pact-broker -- (0.000083s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.445107 I [72416:4380] pact-broker -- (0.000062s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.445167 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.445340 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.445410 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.445589 I [72416:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.445823 I [72416:4380] pact-broker -- (0.000169s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.445920 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.446605 I [72416:4380] pact-broker -- (0.000641s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.446696 I [72416:4380] pact-broker -- (0.000070s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.446745 I [72416:4380] pact-broker -- (0.000031s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:04:20.446811 I [72416:4380] pact-broker -- (0.000049s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.446907 I [72416:4380] pact-broker -- (0.000078s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.447059 I [72416:4380] pact-broker -- (0.000106s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.447135 I [72416:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.447193 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.447377 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.447438 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.447613 I [72416:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.447846 I [72416:4380] pact-broker -- (0.000170s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.447932 I [72416:4380] pact-broker -- (0.000053s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.448626 I [72416:4380] pact-broker -- (0.000650s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.448718 I [72416:4380] pact-broker -- (0.000070s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.448767 I [72416:4380] pact-broker -- (0.000030s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:04:20.449075 I [72416:4380] pact-broker -- (0.000287s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.449220 I [72416:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.449814 I [72416:4380] pact-broker -- (0.000569s) COMMIT
2021-09-06 01:04:20.449895 I [72416:4380] pact-broker -- (0.000035s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.449927 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.450741 I [72416:4380] pact-broker -- (0.000756s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000011_made_timestamps_mandatory.rb')
2021-09-06 01:04:20.450760 I [72416:4380] pact-broker -- Finished applying migration 000011_made_timestamps_mandatory.rb, direction: up, took 0.032886 seconds
2021-09-06 01:04:20.450768 I [72416:4380] pact-broker -- Begin applying migration 000012_create_webhooks_table.rb, direction: up
2021-09-06 01:04:20.451884 I [72416:4380] pact-broker -- (0.000898s) CREATE TABLE `webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_webhook_uuid` UNIQUE, `method` varchar(255) NOT NULL, `url` varchar(255) NOT NULL, `body` varchar(255), `is_json_request_body` Boolean, `consumer_id` integer NOT NULL CONSTRAINT `fk_webhooks_consumer` REFERENCES `pacticipants`, `provider_id` integer NOT NULL CONSTRAINT `fk_webhooks_provider` REFERENCES `pacticipants`)
2021-09-06 01:04:20.452881 I [72416:4380] pact-broker -- (0.000856s) CREATE TABLE `webhook_headers` (`name` varchar(255) NOT NULL, `value` varchar(255), `webhook_id` integer NOT NULL CONSTRAINT `fk_webhookheaders_webhooks` REFERENCES `webhooks`, CONSTRAINT `webhooks_headers_pk` PRIMARY KEY (`webhook_id`, `name`))
2021-09-06 01:04:20.453566 I [72416:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000012_create_webhooks_table.rb')
2021-09-06 01:04:20.453582 I [72416:4380] pact-broker -- Finished applying migration 000012_create_webhooks_table.rb, direction: up, took 0.002812 seconds
2021-09-06 01:04:20.453606 I [72416:4380] pact-broker -- Begin applying migration 000013_add_columns_to_webhooks.rb, direction: up
2021-09-06 01:04:20.453664 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.453692 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.453723 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.454180 I [72416:4380] pact-broker -- (0.000402s) ALTER TABLE `webhooks` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.454691 I [72416:4380] pact-broker -- (0.000486s) COMMIT
2021-09-06 01:04:20.454753 I [72416:4380] pact-broker -- (0.000023s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.454781 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.454853 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.454878 I [72416:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.454907 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.455345 I [72416:4380] pact-broker -- (0.000387s) ALTER TABLE `webhooks` ADD COLUMN `updated_at` timestamp
2021-09-06 01:04:20.455731 I [72416:4380] pact-broker -- (0.000362s) COMMIT
2021-09-06 01:04:20.455791 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.455835 I [72416:4380] pact-broker -- (0.000024s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.455882 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.455922 I [72416:4380] pact-broker -- (0.000021s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.455951 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.456402 I [72416:4380] pact-broker -- (0.000397s) ALTER TABLE `webhooks` ADD COLUMN `username` varchar(255)
2021-09-06 01:04:20.456821 I [72416:4380] pact-broker -- (0.000386s) COMMIT
2021-09-06 01:04:20.456873 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.456932 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.456979 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.457004 I [72416:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.457033 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.457476 I [72416:4380] pact-broker -- (0.000390s) ALTER TABLE `webhooks` ADD COLUMN `password` varchar(255)
2021-09-06 01:04:20.457989 I [72416:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 01:04:20.458043 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.458072 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.458691 I [72416:4380] pact-broker -- (0.000568s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000013_add_columns_to_webhooks.rb')
2021-09-06 01:04:20.458721 I [72416:4380] pact-broker -- Finished applying migration 000013_add_columns_to_webhooks.rb, direction: up, took 0.005129 seconds
2021-09-06 01:04:20.458728 I [72416:4380] pact-broker -- Begin applying migration 000014_add_timestamps_to_pact_views.rb, direction: up
2021-09-06 01:04:20.459522 I [72416:4380] pact-broker -- (0.000640s) DROP VIEW `all_pacts`
2021-09-06 01:04:20.460370 I [72416:4380] pact-broker -- (0.000678s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content`, `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 01:04:20.460961 I [72416:4380] pact-broker -- (0.000531s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:04:20.461574 I [72416:4380] pact-broker -- (0.000571s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:04:20.462093 I [72416:4380] pact-broker -- (0.000478s) DROP VIEW `latest_pacts`
2021-09-06 01:04:20.462748 I [72416:4380] pact-broker -- (0.000594s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.463364 I [72416:4380] pact-broker -- (0.000551s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000014_add_timestamps_to_pact_views.rb')
2021-09-06 01:04:20.463380 I [72416:4380] pact-broker -- Finished applying migration 000014_add_timestamps_to_pact_views.rb, direction: up, took 0.004648 seconds
2021-09-06 01:04:20.463387 I [72416:4380] pact-broker -- Begin applying migration 000015_create_pact_version_content.rb, direction: up
2021-09-06 01:04:20.464153 I [72416:4380] pact-broker -- (0.000629s) CREATE TABLE `pact_version_contents` (`sha` varchar(255) NOT NULL CONSTRAINT `pk_pact_version_contents` PRIMARY KEY, `content` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:04:20.464750 I [72416:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000015_create_pact_version_content.rb')
2021-09-06 01:04:20.464774 I [72416:4380] pact-broker -- Finished applying migration 000015_create_pact_version_content.rb, direction: up, took 0.001376 seconds
2021-09-06 01:04:20.464782 I [72416:4380] pact-broker -- Begin applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up
2021-09-06 01:04:20.464854 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.464897 I [72416:4380] pact-broker -- (0.000023s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.464929 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.465407 I [72416:4380] pact-broker -- (0.000412s) ALTER TABLE `pacts` ADD COLUMN `pact_version_content_sha` varchar(255) NULL CONSTRAINT `fk_pact_version_content` REFERENCES `pact_version_contents`
2021-09-06 01:04:20.465770 I [72416:4380] pact-broker -- (0.000339s) COMMIT
2021-09-06 01:04:20.466294 I [72416:4380] pact-broker -- (0.000467s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.466328 I [72416:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.466935 I [72416:4380] pact-broker -- (0.000558s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000016_add_pact_content_foreign_key_to_pacts.rb')
2021-09-06 01:04:20.466951 I [72416:4380] pact-broker -- Finished applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up, took 0.002167 seconds
2021-09-06 01:04:20.466958 I [72416:4380] pact-broker -- Begin applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up
2021-09-06 01:04:20.467093 I [72416:4380] pact-broker -- (0.000086s) SELECT * FROM `pacts`
2021-09-06 01:04:20.467700 I [72416:4380] pact-broker -- (0.000558s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000017_migrate_json_content_to_pact_version_content_table.rb')
2021-09-06 01:04:20.467716 I [72416:4380] pact-broker -- Finished applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up, took 0.000755 seconds
2021-09-06 01:04:20.467723 I [72416:4380] pact-broker -- Begin applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up
2021-09-06 01:04:20.468243 I [72416:4380] pact-broker -- (0.000487s) DROP VIEW `latest_pacts`
2021-09-06 01:04:20.468912 I [72416:4380] pact-broker -- (0.000625s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:04:20.469575 I [72416:4380] pact-broker -- (0.000615s) DROP VIEW `all_pacts`
2021-09-06 01:04:20.469644 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.469676 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.469709 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.470270 I [72416:4380] pact-broker -- (0.000136s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.470369 I [72416:4380] pact-broker -- (0.000049s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.470438 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.471107 I [72416:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.471185 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.471340 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.472079 I [72416:4380] pact-broker -- (0.000035s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.472140 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.472990 I [72416:4380] pact-broker -- (0.000804s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.473097 I [72416:4380] pact-broker -- (0.000083s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.473149 I [72416:4380] pact-broker -- (0.000031s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 01:04:20.473257 I [72416:4380] pact-broker -- (0.000090s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.473338 I [72416:4380] pact-broker -- (0.000061s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.473879 I [72416:4380] pact-broker -- (0.000517s) COMMIT
2021-09-06 01:04:20.473935 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.473964 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.474724 I [72416:4380] pact-broker -- (0.000709s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000018_drop_json_content_column_from_pacts.rb')
2021-09-06 01:04:20.474743 I [72416:4380] pact-broker -- Finished applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up, took 0.007016 seconds
2021-09-06 01:04:20.474750 I [72416:4380] pact-broker -- Begin applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up
2021-09-06 01:04:20.474815 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.474845 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.474877 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.475714 I [72416:4380] pact-broker -- (0.000125s) PRAGMA table_info('pacts')
2021-09-06 01:04:20.475805 I [72416:4380] pact-broker -- (0.000047s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:04:20.475869 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.476590 I [72416:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.476664 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:04:20.476813 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.477414 I [72416:4380] pact-broker -- (0.000533s) PRAGMA index_list('pacts')
2021-09-06 01:04:20.477478 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:04:20.478328 I [72416:4380] pact-broker -- (0.000804s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:04:20.478456 I [72416:4380] pact-broker -- (0.000103s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.478511 I [72416:4380] pact-broker -- (0.000036s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 01:04:20.478619 I [72416:4380] pact-broker -- (0.000089s) DROP TABLE `pacts_backup0`
2021-09-06 01:04:20.478704 I [72416:4380] pact-broker -- (0.000065s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:04:20.479214 I [72416:4380] pact-broker -- (0.000485s) COMMIT
2021-09-06 01:04:20.479273 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.479306 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.479960 I [72416:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000019_make_pact_version_content_sha_not_nullable.rb')
2021-09-06 01:04:20.479976 I [72416:4380] pact-broker -- Finished applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up, took 0.005224 seconds
2021-09-06 01:04:20.479983 I [72416:4380] pact-broker -- Begin applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up
2021-09-06 01:04:20.480851 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_pacts: DROP VIEW `all_pacts`
2021-09-06 01:04:20.481961 I [72416:4380] pact-broker -- (0.000857s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pvc`.`sha` AS 'pact_version_content_sha', `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`) INNER JOIN `pact_version_contents` AS 'pvc' ON (`pvc`.`sha` = `pacts`.`pact_version_content_sha`)
2021-09-06 01:04:20.482664 I [72416:4380] pact-broker -- (0.000640s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000020_add_pact_version_content_sha_to_all_pacts_view.rb')
2021-09-06 01:04:20.482682 I [72416:4380] pact-broker -- Finished applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up, took 0.002696 seconds
2021-09-06 01:04:20.482689 I [72416:4380] pact-broker -- Begin applying migration 000021_recreate_latest_pacts_view.rb, direction: up
2021-09-06 01:04:20.482771 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pact_consumer_version_orders: DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:04:20.484245 I [72416:4380] pact-broker -- (0.000744s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:04:20.484336 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pacts: DROP VIEW `latest_pacts`
2021-09-06 01:04:20.485285 I [72416:4380] pact-broker -- (0.000825s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.486135 I [72416:4380] pact-broker -- (0.000783s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000021_recreate_latest_pacts_view.rb')
2021-09-06 01:04:20.486153 I [72416:4380] pact-broker -- Finished applying migration 000021_recreate_latest_pacts_view.rb, direction: up, took 0.003461 seconds
2021-09-06 01:04:20.486160 I [72416:4380] pact-broker -- Begin applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up
2021-09-06 01:04:20.486249 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pact_consumer_version_orders: DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:04:20.487570 I [72416:4380] pact-broker -- (0.000844s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 01:04:20.487662 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pacts: DROP VIEW `latest_tagged_pacts`
2021-09-06 01:04:20.488593 I [72416:4380] pact-broker -- (0.000808s) CREATE VIEW `latest_tagged_pacts` AS select ap.*, lp.tag_name
      from all_pacts ap
      inner join latest_tagged_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
        and ap.provider_id = lp.provider_id
        and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.489294 I [72416:4380] pact-broker -- (0.000628s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000022_create_latest_tagged_pacts_view.rb')
2021-09-06 01:04:20.489311 I [72416:4380] pact-broker -- Finished applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up, took 0.003148 seconds
2021-09-06 01:04:20.489318 I [72416:4380] pact-broker -- Begin applying migration 000023_create_pact_versions_table.rb, direction: up
2021-09-06 01:04:20.490351 I [72416:4380] pact-broker -- (0.000895s) CREATE TABLE `pact_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer REFERENCES `pacticipants`, `provider_id` integer REFERENCES `pacticipants`, `sha` varchar(255) NOT NULL, `content` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 01:04:20.491026 I [72416:4380] pact-broker -- (0.000620s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:04:20.491706 I [72416:4380] pact-broker -- (0.000620s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000023_create_pact_versions_table.rb')
2021-09-06 01:04:20.491723 I [72416:4380] pact-broker -- Finished applying migration 000023_create_pact_versions_table.rb, direction: up, took 0.002402 seconds
2021-09-06 01:04:20.491729 I [72416:4380] pact-broker -- Begin applying migration 000024_populate_pact_versions.rb, direction: up
2021-09-06 01:04:20.492251 I [72416:4380] pact-broker -- (0.000496s) insert into pact_versions (sha, content, created_at) select sha, content, created_at from pact_version_contents
2021-09-06 01:04:20.492408 I [72416:4380] pact-broker -- (0.000130s) update pact_versions set consumer_id = (select consumer_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 01:04:20.492517 I [72416:4380] pact-broker -- (0.000084s) update pact_versions set provider_id = (select provider_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 01:04:20.492587 I [72416:4380] pact-broker -- (0.000047s) delete from pact_versions where consumer_id is null
2021-09-06 01:04:20.493203 I [72416:4380] pact-broker -- (0.000563s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000024_populate_pact_versions.rb')
2021-09-06 01:04:20.493220 I [72416:4380] pact-broker -- Finished applying migration 000024_populate_pact_versions.rb, direction: up, took 0.001487 seconds
2021-09-06 01:04:20.493227 I [72416:4380] pact-broker -- Begin applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up
2021-09-06 01:04:20.493296 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.493326 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.493362 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.493907 I [72416:4380] pact-broker -- (0.000488s) PRAGMA table_info('pact_versions')
2021-09-06 01:04:20.494003 I [72416:4380] pact-broker -- (0.000047s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:04:20.494068 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.494218 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.494296 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:04:20.494951 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.495056 I [72416:4380] pact-broker -- (0.000034s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.495119 I [72416:4380] pact-broker -- (0.000032s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:04:20.496431 I [72416:4380] pact-broker -- (0.001262s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:04:20.496538 I [72416:4380] pact-broker -- (0.000083s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.496588 I [72416:4380] pact-broker -- (0.000030s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:04:20.496697 I [72416:4380] pact-broker -- (0.000090s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:04:20.496780 I [72416:4380] pact-broker -- (0.000063s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:04:20.497395 I [72416:4380] pact-broker -- (0.000564s) PRAGMA table_info('pact_versions')
2021-09-06 01:04:20.497481 I [72416:4380] pact-broker -- (0.000041s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:04:20.497543 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.497687 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.497754 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:04:20.498449 I [72416:4380] pact-broker -- (0.000044s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.498778 I [72416:4380] pact-broker -- (0.000259s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.498846 I [72416:4380] pact-broker -- (0.000033s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:04:20.499930 I [72416:4380] pact-broker -- (0.001039s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:04:20.500060 I [72416:4380] pact-broker -- (0.000106s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.500110 I [72416:4380] pact-broker -- (0.000030s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:04:20.500172 I [72416:4380] pact-broker -- (0.000044s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:04:20.500249 I [72416:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:04:20.500861 I [72416:4380] pact-broker -- (0.000085s) PRAGMA table_info('pact_versions')
2021-09-06 01:04:20.500940 I [72416:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:04:20.501000 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.501625 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.501691 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:04:20.501859 I [72416:4380] pact-broker -- (0.000042s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.502650 I [72416:4380] pact-broker -- (0.000256s) PRAGMA index_list('pact_versions')
2021-09-06 01:04:20.502722 I [72416:4380] pact-broker -- (0.000034s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:04:20.503813 I [72416:4380] pact-broker -- (0.001045s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:04:20.503910 I [72416:4380] pact-broker -- (0.000074s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.503961 I [72416:4380] pact-broker -- (0.000031s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:04:20.504266 I [72416:4380] pact-broker -- (0.000284s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:04:20.504414 I [72416:4380] pact-broker -- (0.000125s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:04:20.505175 I [72416:4380] pact-broker -- (0.000735s) COMMIT
2021-09-06 01:04:20.505235 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.505266 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.506105 I [72416:4380] pact-broker -- (0.000777s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000025_make_pv_pacticipants_mandatory.rb')
2021-09-06 01:04:20.506124 I [72416:4380] pact-broker -- Finished applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up, took 0.012893 seconds
2021-09-06 01:04:20.506130 I [72416:4380] pact-broker -- Begin applying migration 000026_create_pact_publications.rb, direction: up
2021-09-06 01:04:20.507437 I [72416:4380] pact-broker -- (0.000721s) CREATE TABLE `pact_publications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `revision_number` integer NOT NULL, `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `created_at` timestamp NOT NULL)
2021-09-06 01:04:20.508315 I [72416:4380] pact-broker -- (0.000814s) CREATE UNIQUE INDEX `cv_prov_revision_unq` ON `pact_publications` (`consumer_version_id`, `provider_id`, `revision_number`)
2021-09-06 01:04:20.509131 I [72416:4380] pact-broker -- (0.000763s) CREATE INDEX `cv_prov_id_ndx` ON `pact_publications` (`consumer_version_id`, `provider_id`, `id`)
2021-09-06 01:04:20.509886 I [72416:4380] pact-broker -- (0.000691s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000026_create_pact_publications.rb')
2021-09-06 01:04:20.509904 I [72416:4380] pact-broker -- Finished applying migration 000026_create_pact_publications.rb, direction: up, took 0.003769 seconds
2021-09-06 01:04:20.509911 I [72416:4380] pact-broker -- Begin applying migration 000027_populate_pact_publications.rb, direction: up
2021-09-06 01:04:20.510595 I [72416:4380] pact-broker -- (0.000656s) insert into pact_publications
        (consumer_version_id, provider_id, revision_number, pact_version_id, created_at)
      select ap.consumer_version_id, ap.provider_id, 1, pc.id, ap.updated_at
      from all_pacts ap inner join pact_versions pc
      on pc.sha = ap.pact_version_content_sha
2021-09-06 01:04:20.511288 I [72416:4380] pact-broker -- (0.000637s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000027_populate_pact_publications.rb')
2021-09-06 01:04:20.511304 I [72416:4380] pact-broker -- Finished applying migration 000027_populate_pact_publications.rb, direction: up, took 0.001390 seconds
2021-09-06 01:04:20.511311 I [72416:4380] pact-broker -- Begin applying migration 000028_create_all_pact_publications.rb, direction: up
2021-09-06 01:04:20.512885 I [72416:4380] pact-broker -- (0.000824s) CREATE VIEW `all_pact_publications` AS SELECT `pact_publications`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pact_publications`.`revision_number`, `pv`.`id` AS 'pact_version_id', `pv`.`sha` AS 'pact_version_sha', `pact_publications`.`created_at` FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pact_publications`.`consumer_version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`) INNER JOIN `pact_versions` AS 'pv' ON (`pv`.`id` = `pact_publications`.`pact_version_id`)
2021-09-06 01:04:20.513646 I [72416:4380] pact-broker -- (0.000707s) CREATE VIEW `latest_pact_publication_revision_numbers` AS select provider_id, consumer_id, consumer_version_order, max(revision_number) as latest_revision_number
      from all_pact_publications
      group by provider_id, consumer_id, consumer_version_order
2021-09-06 01:04:20.514337 I [72416:4380] pact-broker -- (0.000643s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
      from all_pact_publications app
      inner join latest_pact_publication_revision_numbers lr
      on app.consumer_id = lr.consumer_id
        and app.provider_id = lr.provider_id
        and app.consumer_version_order = lr.consumer_version_order
        and app.revision_number = lr.latest_revision_number
2021-09-06 01:04:20.514865 I [72416:4380] pact-broker -- (0.000483s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:04:20.515489 I [72416:4380] pact-broker -- (0.000582s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pact_publications
      group by provider_id, consumer_id
2021-09-06 01:04:20.516129 I [72416:4380] pact-broker -- (0.000594s) CREATE VIEW `latest_pact_publications` AS select lpcv.*
      from latest_pact_publications_by_consumer_versions lpcv
      inner join latest_pact_consumer_version_orders lp
      on lpcv.consumer_id = lp.consumer_id
           and lpcv.provider_id = lp.provider_id
           and lpcv.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.516717 I [72416:4380] pact-broker -- (0.000526s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000028_create_all_pact_publications.rb')
2021-09-06 01:04:20.516733 I [72416:4380] pact-broker -- Finished applying migration 000028_create_all_pact_publications.rb, direction: up, took 0.005419 seconds
2021-09-06 01:04:20.516740 I [72416:4380] pact-broker -- Begin applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up
2021-09-06 01:04:20.517893 I [72416:4380] pact-broker -- (0.000563s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:04:20.518538 I [72416:4380] pact-broker -- (0.000603s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from latest_pact_publications_by_consumer_versions ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 01:04:20.519195 I [72416:4380] pact-broker -- (0.000610s) CREATE VIEW `latest_tagged_pact_publications` AS select lp.*, o.tag_name
      from latest_pact_publications_by_consumer_versions lp
      inner join latest_tagged_pact_consumer_version_orders o
      on lp.consumer_id = o.consumer_id
        and lp.provider_id = o.provider_id
        and lp.consumer_version_order = latest_consumer_version_order
2021-09-06 01:04:20.519791 I [72416:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000029_create_latest_tagged_pact_publications.rb')
2021-09-06 01:04:20.519806 I [72416:4380] pact-broker -- Finished applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up, took 0.003064 seconds
2021-09-06 01:04:20.519813 I [72416:4380] pact-broker -- Begin applying migration 000030_drop_old_tables_and_views.rb, direction: up
2021-09-06 01:04:20.522510 I [72416:4380] pact-broker -- (0.000601s) DROP VIEW `latest_tagged_pacts`
2021-09-06 01:04:20.523140 I [72416:4380] pact-broker -- (0.000580s) DROP VIEW `latest_pacts`
2021-09-06 01:04:20.523679 I [72416:4380] pact-broker -- (0.000497s) DROP VIEW `all_pacts`
2021-09-06 01:04:20.524329 I [72416:4380] pact-broker -- (0.000605s) DROP TABLE `pacts`
2021-09-06 01:04:20.524942 I [72416:4380] pact-broker -- (0.000572s) DROP TABLE `pact_version_contents`
2021-09-06 01:04:20.525593 I [72416:4380] pact-broker -- (0.000587s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000030_drop_old_tables_and_views.rb')
2021-09-06 01:04:20.525610 I [72416:4380] pact-broker -- Finished applying migration 000030_drop_old_tables_and_views.rb, direction: up, took 0.005794 seconds
2021-09-06 01:04:20.525617 I [72416:4380] pact-broker -- Begin applying migration 000031_create_verifications.rb, direction: up
2021-09-06 01:04:20.526408 I [72416:4380] pact-broker -- (0.000631s) CREATE TABLE `verifications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer, `success` Boolean NOT NULL, `provider_version` varchar(255) NOT NULL, `build_url` varchar(255), `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `execution_date` timestamp NOT NULL, `created_at` timestamp NOT NULL)
2021-09-06 01:04:20.527020 I [72416:4380] pact-broker -- (0.000552s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 01:04:20.527610 I [72416:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000031_create_verifications.rb')
2021-09-06 01:04:20.527626 I [72416:4380] pact-broker -- Finished applying migration 000031_create_verifications.rb, direction: up, took 0.002006 seconds
2021-09-06 01:04:20.527633 I [72416:4380] pact-broker -- Begin applying migration 000032_create_latest_verifications.rb, direction: up
2021-09-06 01:04:20.528258 I [72416:4380] pact-broker -- (0.000589s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 01:04:20.528348 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications: DROP VIEW `latest_verifications`
2021-09-06 01:04:20.529139 I [72416:4380] pact-broker -- (0.000651s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, v.provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at
        FROM verifications v
        INNER JOIN latest_verification_numbers lv ON v.pact_version_id = lv.pact_version_id AND v.number = lv.latest_number
2021-09-06 01:04:20.529842 I [72416:4380] pact-broker -- (0.000643s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000032_create_latest_verifications.rb')
2021-09-06 01:04:20.529858 I [72416:4380] pact-broker -- Finished applying migration 000032_create_latest_verifications.rb, direction: up, took 0.002222 seconds
2021-09-06 01:04:20.529865 I [72416:4380] pact-broker -- Begin applying migration 000033_create_config_table.rb, direction: up
2021-09-06 01:04:20.530624 I [72416:4380] pact-broker -- (0.000623s) CREATE TABLE `config` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) NOT NULL, `type` varchar(255) NOT NULL, `value` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:04:20.531266 I [72416:4380] pact-broker -- (0.000595s) CREATE UNIQUE INDEX `unq_config_name` ON `config` (`name`)
2021-09-06 01:04:20.531865 I [72416:4380] pact-broker -- (0.000545s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000033_create_config_table.rb')
2021-09-06 01:04:20.531881 I [72416:4380] pact-broker -- Finished applying migration 000033_create_config_table.rb, direction: up, took 0.002013 seconds
2021-09-06 01:04:20.531887 I [72416:4380] pact-broker -- Begin applying migration 000034_create_index_on_consumer_version_order.rb, direction: up
2021-09-06 01:04:20.531948 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.531977 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.532013 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.532281 I [72416:4380] pact-broker -- (0.000231s) CREATE INDEX `ndx_ver_num` ON `versions` (`number`)
2021-09-06 01:04:20.532424 I [72416:4380] pact-broker -- (0.000105s) CREATE INDEX `ndx_ver_ord` ON `versions` (`order`)
2021-09-06 01:04:20.532522 I [72416:4380] pact-broker -- (0.000063s) CREATE UNIQUE INDEX `uq_ver_ppt_ord` ON `versions` (`pacticipant_id`, `order`)
2021-09-06 01:04:20.533031 I [72416:4380] pact-broker -- (0.000486s) COMMIT
2021-09-06 01:04:20.533084 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.533112 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.533715 I [72416:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000034_create_index_on_consumer_version_order.rb')
2021-09-06 01:04:20.533731 I [72416:4380] pact-broker -- Finished applying migration 000034_create_index_on_consumer_version_order.rb, direction: up, took 0.001841 seconds
2021-09-06 01:04:20.533737 I [72416:4380] pact-broker -- Begin applying migration 000035_create_index_on_names.rb, direction: up
2021-09-06 01:04:20.533791 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.533819 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.533850 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.534119 I [72416:4380] pact-broker -- (0.000235s) CREATE INDEX `ndx_ppt_name` ON `pacticipants` (`name`)
2021-09-06 01:04:20.534546 I [72416:4380] pact-broker -- (0.000405s) COMMIT
2021-09-06 01:04:20.534597 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.534625 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.534671 I [72416:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.534696 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.534724 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.534994 I [72416:4380] pact-broker -- (0.000237s) CREATE INDEX `ndx_tag_name` ON `tags` (`name`)
2021-09-06 01:04:20.535428 I [72416:4380] pact-broker -- (0.000412s) COMMIT
2021-09-06 01:04:20.535479 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.535506 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.536240 I [72416:4380] pact-broker -- (0.000686s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000035_create_index_on_names.rb')
2021-09-06 01:04:20.536255 I [72416:4380] pact-broker -- Finished applying migration 000035_create_index_on_names.rb, direction: up, took 0.002516 seconds
2021-09-06 01:04:20.536262 I [72416:4380] pact-broker -- Begin applying migration 000036_create_webhook_execution.rb, direction: up
2021-09-06 01:04:20.537090 I [72416:4380] pact-broker -- (0.000665s) CREATE TABLE `webhook_executions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks`, `pact_publication_id` integer REFERENCES `pact_publications`, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `success` Boolean NOT NULL, `logs` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 01:04:20.537676 I [72416:4380] pact-broker -- (0.000532s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000036_create_webhook_execution.rb')
2021-09-06 01:04:20.537692 I [72416:4380] pact-broker -- Finished applying migration 000036_create_webhook_execution.rb, direction: up, took 0.001427 seconds
2021-09-06 01:04:20.537698 I [72416:4380] pact-broker -- Begin applying migration 000037_create_labels_table.rb, direction: up
2021-09-06 01:04:20.538463 I [72416:4380] pact-broker -- (0.000639s) CREATE TABLE `labels` (`name` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, CONSTRAINT `labels_pk` PRIMARY KEY (`pacticipant_id`, `name`))
2021-09-06 01:04:20.539067 I [72416:4380] pact-broker -- (0.000550s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000037_create_labels_table.rb')
2021-09-06 01:04:20.539083 I [72416:4380] pact-broker -- Finished applying migration 000037_create_labels_table.rb, direction: up, took 0.001382 seconds
2021-09-06 01:04:20.539090 I [72416:4380] pact-broker -- Begin applying migration 000038_create_triggered_webhooks_table.rb, direction: up
2021-09-06 01:04:20.540009 I [72416:4380] pact-broker -- (0.000735s) CREATE TABLE `triggered_webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `trigger_uuid` varchar(255) NOT NULL, `trigger_type` varchar(255) NOT NULL, `pact_publication_id` integer NOT NULL REFERENCES `pact_publications`, `webhook_id` integer REFERENCES `webhooks`, `webhook_uuid` varchar(255) NOT NULL, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `status` varchar(255) NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:04:20.540723 I [72416:4380] pact-broker -- (0.000657s) CREATE UNIQUE INDEX `uq_triggered_webhook_wi` ON `triggered_webhooks` (`webhook_id`, `trigger_uuid`)
2021-09-06 01:04:20.541477 I [72416:4380] pact-broker -- (0.000700s) CREATE UNIQUE INDEX `uq_triggered_webhook_ppi_wi` ON `triggered_webhooks` (`pact_publication_id`, `webhook_id`, `trigger_uuid`)
2021-09-06 01:04:20.542248 I [72416:4380] pact-broker -- (0.000708s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000038_create_triggered_webhooks_table.rb')
2021-09-06 01:04:20.542266 I [72416:4380] pact-broker -- Finished applying migration 000038_create_triggered_webhooks_table.rb, direction: up, took 0.003172 seconds
2021-09-06 01:04:20.542272 I [72416:4380] pact-broker -- Begin applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up
2021-09-06 01:04:20.542336 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.542365 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.542397 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.543085 I [72416:4380] pact-broker -- (0.000633s) ALTER TABLE `webhook_executions` ADD COLUMN `triggered_webhook_id` integer REFERENCES `triggered_webhooks`
2021-09-06 01:04:20.543256 I [72416:4380] pact-broker -- (0.000111s) PRAGMA table_info('webhook_executions')
2021-09-06 01:04:20.543388 I [72416:4380] pact-broker -- (0.000086s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:04:20.543444 I [72416:4380] pact-broker -- (0.000022s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.543666 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.543748 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:04:20.543948 I [72416:4380] pact-broker -- (0.000056s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.544338 I [72416:4380] pact-broker -- (0.000318s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.545768 I [72416:4380] pact-broker -- (0.001405s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:04:20.545937 I [72416:4380] pact-broker -- (0.000147s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.546012 I [72416:4380] pact-broker -- (0.000054s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:04:20.546101 I [72416:4380] pact-broker -- (0.000070s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:04:20.546286 I [72416:4380] pact-broker -- (0.000110s) PRAGMA table_info('webhook_executions')
2021-09-06 01:04:20.546380 I [72416:4380] pact-broker -- (0.000053s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:04:20.546432 I [72416:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.546642 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.546713 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:04:20.546897 I [72416:4380] pact-broker -- (0.000052s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.547319 I [72416:4380] pact-broker -- (0.000334s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.548771 I [72416:4380] pact-broker -- (0.001427s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:04:20.548881 I [72416:4380] pact-broker -- (0.000088s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.548933 I [72416:4380] pact-broker -- (0.000033s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:04:20.548998 I [72416:4380] pact-broker -- (0.000047s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:04:20.549141 I [72416:4380] pact-broker -- (0.000097s) PRAGMA table_info('webhook_executions')
2021-09-06 01:04:20.549232 I [72416:4380] pact-broker -- (0.000051s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:04:20.549284 I [72416:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.549493 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.549556 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:04:20.549747 I [72416:4380] pact-broker -- (0.000051s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.550146 I [72416:4380] pact-broker -- (0.000329s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.551591 I [72416:4380] pact-broker -- (0.001420s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:04:20.551701 I [72416:4380] pact-broker -- (0.000087s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.551751 I [72416:4380] pact-broker -- (0.000032s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:04:20.551815 I [72416:4380] pact-broker -- (0.000047s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:04:20.551978 I [72416:4380] pact-broker -- (0.000118s) PRAGMA table_info('webhook_executions')
2021-09-06 01:04:20.552071 I [72416:4380] pact-broker -- (0.000052s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:04:20.552126 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.552339 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.552401 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:04:20.552575 I [72416:4380] pact-broker -- (0.000050s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.553003 I [72416:4380] pact-broker -- (0.000336s) PRAGMA index_list('webhook_executions')
2021-09-06 01:04:20.554475 I [72416:4380] pact-broker -- (0.001445s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:04:20.554582 I [72416:4380] pact-broker -- (0.000086s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.554632 I [72416:4380] pact-broker -- (0.000032s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:04:20.554696 I [72416:4380] pact-broker -- (0.000046s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:04:20.555374 I [72416:4380] pact-broker -- (0.000655s) COMMIT
2021-09-06 01:04:20.555435 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.555466 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.556269 I [72416:4380] pact-broker -- (0.000746s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000039_add_triggered_webhooks_fk_to_execution.rb')
2021-09-06 01:04:20.556287 I [72416:4380] pact-broker -- Finished applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up, took 0.014011 seconds
2021-09-06 01:04:20.556295 I [72416:4380] pact-broker -- Begin applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up
2021-09-06 01:04:20.556385 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_ids: DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 01:04:20.557273 I [72416:4380] pact-broker -- (0.000757s) CREATE VIEW `latest_triggered_webhook_ids` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
      from triggered_webhooks
      group by webhook_uuid, consumer_id, provider_id
2021-09-06 01:04:20.558193 I [72416:4380] pact-broker -- (0.000807s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
      from triggered_webhooks tw
      inner join latest_triggered_webhook_ids ltwi
      on tw.consumer_id = ltwi.consumer_id
      and tw.provider_id = ltwi.provider_id
      and tw.webhook_uuid = ltwi.webhook_uuid
      and tw.created_at = ltwi.latest_triggered_webhook_created_at
2021-09-06 01:04:20.558915 I [72416:4380] pact-broker -- (0.000652s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000040_create_latest_triggered_webhooks_view.rb')
2021-09-06 01:04:20.558952 I [72416:4380] pact-broker -- Finished applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up, took 0.002653 seconds
2021-09-06 01:04:20.558959 I [72416:4380] pact-broker -- Begin applying migration 000041_migrate_execution_data.rb, direction: up
2021-09-06 01:04:20.559106 I [72416:4380] pact-broker -- (0.000089s) SELECT * FROM `webhook_executions`
2021-09-06 01:04:20.559793 I [72416:4380] pact-broker -- (0.000637s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000041_migrate_execution_data.rb')
2021-09-06 01:04:20.559809 I [72416:4380] pact-broker -- Finished applying migration 000041_migrate_execution_data.rb, direction: up, took 0.000847 seconds
2021-09-06 01:04:20.559815 I [72416:4380] pact-broker -- Begin applying migration 000042_delete_orphan_webhook_data.rb, direction: up
2021-09-06 01:04:20.559992 I [72416:4380] pact-broker -- (0.000096s) SELECT * FROM `triggered_webhooks` WHERE (`webhook_id` IS NULL)
2021-09-06 01:04:20.560120 I [72416:4380] pact-broker -- (0.000056s) DELETE FROM `webhook_executions` WHERE ((`webhook_id` IS NULL) AND (`triggered_webhook_id` IS NULL))
2021-09-06 01:04:20.560784 I [72416:4380] pact-broker -- (0.000615s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000042_delete_orphan_webhook_data.rb')
2021-09-06 01:04:20.560799 I [72416:4380] pact-broker -- Finished applying migration 000042_delete_orphan_webhook_data.rb, direction: up, took 0.000980 seconds
2021-09-06 01:04:20.560805 I [72416:4380] pact-broker -- Begin applying migration 000043_add_provider_version_to_verification.rb, direction: up
2021-09-06 01:04:20.560865 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.560892 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.560926 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.561664 I [72416:4380] pact-broker -- (0.000663s) ALTER TABLE `verifications` ADD COLUMN `provider_version_id` integer CONSTRAINT `fk_verifications_versions` REFERENCES `versions`
2021-09-06 01:04:20.562147 I [72416:4380] pact-broker -- (0.000459s) COMMIT
2021-09-06 01:04:20.562200 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.562229 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.562865 I [72416:4380] pact-broker -- (0.000590s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000043_add_provider_version_to_verification.rb')
2021-09-06 01:04:20.562880 I [72416:4380] pact-broker -- Finished applying migration 000043_add_provider_version_to_verification.rb, direction: up, took 0.002073 seconds
2021-09-06 01:04:20.562887 I [72416:4380] pact-broker -- Begin applying migration 000044_populate_verifications_provider_version_id.rb, direction: up
2021-09-06 01:04:20.563091 I [72416:4380] pact-broker -- (0.000083s) SELECT `verifications`.`id`, `provider_version`, `provider_id`, `verifications`.`created_at` FROM `verifications` INNER JOIN `pact_versions` ON (`pact_versions`.`id` = `verifications`.`pact_version_id`)
2021-09-06 01:04:20.563697 I [72416:4380] pact-broker -- (0.000558s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000044_populate_verifications_provider_version_id.rb')
2021-09-06 01:04:20.563713 I [72416:4380] pact-broker -- Finished applying migration 000044_populate_verifications_provider_version_id.rb, direction: up, took 0.000823 seconds
2021-09-06 01:04:20.563720 I [72416:4380] pact-broker -- Begin applying migration 000045_set_verification_provider_number_nullable.rb, direction: up
2021-09-06 01:04:20.563774 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.563802 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.563832 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.564027 I [72416:4380] pact-broker -- (0.000148s) PRAGMA table_info('verifications')
2021-09-06 01:04:20.564112 I [72416:4380] pact-broker -- (0.000041s) PRAGMA foreign_key_list('verifications')
2021-09-06 01:04:20.564172 I [72416:4380] pact-broker -- (0.000028s) PRAGMA index_list('verifications')
2021-09-06 01:04:20.564368 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.564439 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: verifications_backup0: SELECT NULL AS 'nil' FROM `verifications_backup0` LIMIT 1
2021-09-06 01:04:20.564587 I [72416:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.564712 I [72416:4380] pact-broker -- (0.000055s) PRAGMA index_list('verifications')
2021-09-06 01:04:20.564775 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_info('verifications_pact_version_id_number_index')
2021-09-06 01:04:20.566677 I [72416:4380] pact-broker -- (0.001858s) ALTER TABLE `verifications` RENAME TO `verifications_backup0`
2021-09-06 01:04:20.566831 I [72416:4380] pact-broker -- (0.000129s) CREATE TABLE `verifications`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `provider_version` varchar(255) DEFAULT (NULL) NULL, `build_url` varchar(255) DEFAULT (NULL) NULL, `pact_version_id` integer DEFAULT (NULL) NOT NULL, `execution_date` timestamp DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `provider_version_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`provider_version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_id`) REFERENCES `pact_versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.566907 I [72416:4380] pact-broker -- (0.000055s) INSERT INTO `verifications`(`id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id`) SELECT `id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id` FROM `verifications_backup0`
2021-09-06 01:04:20.567012 I [72416:4380] pact-broker -- (0.000086s) DROP TABLE `verifications_backup0`
2021-09-06 01:04:20.567092 I [72416:4380] pact-broker -- (0.000061s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 01:04:20.567582 I [72416:4380] pact-broker -- (0.000465s) COMMIT
2021-09-06 01:04:20.567639 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.567669 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.568288 I [72416:4380] pact-broker -- (0.000570s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000045_set_verification_provider_number_nullable.rb')
2021-09-06 01:04:20.568303 I [72416:4380] pact-broker -- Finished applying migration 000045_set_verification_provider_number_nullable.rb, direction: up, took 0.004581 seconds
2021-09-06 01:04:20.568309 I [72416:4380] pact-broker -- Begin applying migration 000046_recreate_latest_verifications.rb, direction: up
2021-09-06 01:04:20.569009 I [72416:4380] pact-broker -- (0.000664s) DROP VIEW `latest_verification_numbers`
2021-09-06 01:04:20.569653 I [72416:4380] pact-broker -- (0.000599s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 01:04:20.570411 I [72416:4380] pact-broker -- (0.000715s) DROP VIEW `latest_verifications`
2021-09-06 01:04:20.571098 I [72416:4380] pact-broker -- (0.000644s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, s.number as provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at, v.provider_version_id, s.number as provider_version_number
        FROM verifications v
        INNER JOIN latest_verification_numbers lv
          ON v.pact_version_id = lv.pact_version_id
          AND v.number = lv.latest_number
        INNER JOIN versions s on v.provider_version_id = s.id
2021-09-06 01:04:20.571647 I [72416:4380] pact-broker -- (0.000490s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000046_recreate_latest_verifications.rb')
2021-09-06 01:04:20.571663 I [72416:4380] pact-broker -- Finished applying migration 000046_recreate_latest_verifications.rb, direction: up, took 0.003350 seconds
2021-09-06 01:04:20.571669 I [72416:4380] pact-broker -- Begin applying migration 000047_create_all_verifications.rb, direction: up
2021-09-06 01:04:20.571821 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_verifications: DROP VIEW `all_verifications`
2021-09-06 01:04:20.572722 I [72416:4380] pact-broker -- (0.000704s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:04:20.573398 I [72416:4380] pact-broker -- (0.000606s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000047_create_all_verifications.rb')
2021-09-06 01:04:20.573415 I [72416:4380] pact-broker -- Finished applying migration 000047_create_all_verifications.rb, direction: up, took 0.001742 seconds
2021-09-06 01:04:20.573422 I [72416:4380] pact-broker -- Begin applying migration 000048_create_matrix.rb, direction: up
2021-09-06 01:04:20.574394 I [72416:4380] pact-broker -- (0.000687s) CREATE VIEW `matrix` AS SELECT `all_pact_publications`.`consumer_id`, `all_pact_publications`.`consumer_name`, `all_pact_publications`.`consumer_version_id`, `all_pact_publications`.`consumer_version_number`, `all_pact_publications`.`consumer_version_order`, `all_pact_publications`.`id` AS 'pact_publication_id', `all_pact_publications`.`pact_version_id`, `all_pact_publications`.`pact_version_sha`, `all_pact_publications`.`revision_number` AS 'pact_revision_number', `all_pact_publications`.`created_at` AS 'pact_created_at', `all_pact_publications`.`provider_id`, `all_pact_publications`.`provider_name`, `versions`.`id` AS 'provider_version_id', `versions`.`number` AS 'provider_version_number', `versions`.`order` AS 'provider_version_order', `verifications`.`id` AS 'verification_id', `verifications`.`success`, `verifications`.`number` AS 'verification_number', `verifications`.`execution_date` AS 'verification_executed_at', `verifications`.`build_url` AS 'verification_build_url' FROM `all_pact_publications` LEFT OUTER JOIN `verifications` ON (`verifications`.`pact_version_id` = `all_pact_publications`.`pact_version_id`) LEFT OUTER JOIN `versions` ON (`versions`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:04:20.575014 I [72416:4380] pact-broker -- (0.000559s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000048_create_matrix.rb')
2021-09-06 01:04:20.575030 I [72416:4380] pact-broker -- Finished applying migration 000048_create_matrix.rb, direction: up, took 0.001605 seconds
2021-09-06 01:04:20.575036 I [72416:4380] pact-broker -- Begin applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up
2021-09-06 01:04:20.575760 I [72416:4380] pact-broker -- (0.000687s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select consumer_version_id, provider_version_id, max(verification_id) as latest_verification_id
      from matrix
      inner join latest_pact_publication_revision_numbers lr
        on matrix.consumer_id = lr.consumer_id
        and matrix.provider_id = lr.provider_id
        and matrix.consumer_version_order = lr.consumer_version_order
        and matrix.pact_revision_number = lr.latest_revision_number
        group by consumer_version_id, provider_version_id
2021-09-06 01:04:20.576353 I [72416:4380] pact-broker -- (0.000532s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000049_create_latest_verifications_for_cv_and_pv.rb')
2021-09-06 01:04:20.576369 I [72416:4380] pact-broker -- Finished applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up, took 0.001329 seconds
2021-09-06 01:04:20.576375 I [72416:4380] pact-broker -- Begin applying migration 000050_create_latest_matrix.rb, direction: up
2021-09-06 01:04:20.577036 I [72416:4380] pact-broker -- (0.000625s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:04:20.577650 I [72416:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000050_create_latest_matrix.rb')
2021-09-06 01:04:20.577667 I [72416:4380] pact-broker -- Finished applying migration 000050_create_latest_matrix.rb, direction: up, took 0.001289 seconds
2021-09-06 01:04:20.577674 I [72416:4380] pact-broker -- Begin applying migration 20171112_add_test_results.rb, direction: up
2021-09-06 01:04:20.577741 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.577771 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.577804 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.578668 I [72416:4380] pact-broker -- (0.000812s) ALTER TABLE `verifications` ADD COLUMN `test_results` mediumtext
2021-09-06 01:04:20.579069 I [72416:4380] pact-broker -- (0.000376s) COMMIT
2021-09-06 01:04:20.579124 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.579153 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.579695 I [72416:4380] pact-broker -- (0.000495s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171112_add_test_results.rb')
2021-09-06 01:04:20.579710 I [72416:4380] pact-broker -- Finished applying migration 20171112_add_test_results.rb, direction: up, took 0.002034 seconds
2021-09-06 01:04:20.579716 I [72416:4380] pact-broker -- Begin applying migration 20171117_create_webhook_events.rb, direction: up
2021-09-06 01:04:20.580620 I [72416:4380] pact-broker -- (0.000781s) CREATE TABLE `webhook_events` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks` ON DELETE CASCADE, `name` varchar(255), `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:04:20.581341 I [72416:4380] pact-broker -- (0.000669s) CREATE UNIQUE INDEX `uq_webhook_id_name` ON `webhook_events` (`id`, `name`)
2021-09-06 01:04:20.581950 I [72416:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171117_create_webhook_events.rb')
2021-09-06 01:04:20.581966 I [72416:4380] pact-broker -- Finished applying migration 20171117_create_webhook_events.rb, direction: up, took 0.002246 seconds
2021-09-06 01:04:20.581972 I [72416:4380] pact-broker -- Begin applying migration 20171118_create_webhook_events.rb, direction: up
2021-09-06 01:04:20.582149 I [72416:4380] pact-broker -- (0.000099s) SELECT * FROM `webhooks`
2021-09-06 01:04:20.582752 I [72416:4380] pact-broker -- (0.000550s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171118_create_webhook_events.rb')
2021-09-06 01:04:20.582768 I [72416:4380] pact-broker -- Finished applying migration 20171118_create_webhook_events.rb, direction: up, took 0.000793 seconds
2021-09-06 01:04:20.582775 I [72416:4380] pact-broker -- Begin applying migration 20180108_create_certificates_table.rb, direction: up
2021-09-06 01:04:20.583681 I [72416:4380] pact-broker -- (0.000778s) CREATE TABLE `certificates` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_certificate_uuid` UNIQUE, `description` varchar(255) NULL, `content` mediumtext NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:04:20.584294 I [72416:4380] pact-broker -- (0.000555s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180108_create_certificates_table.rb')
2021-09-06 01:04:20.584311 I [72416:4380] pact-broker -- Finished applying migration 20180108_create_certificates_table.rb, direction: up, took 0.001533 seconds
2021-09-06 01:04:20.584317 I [72416:4380] pact-broker -- Begin applying migration 20180109_migrate_trigger_type.rb, direction: up
2021-09-06 01:04:20.584472 I [72416:4380] pact-broker -- (0.000067s) UPDATE `triggered_webhooks` SET `trigger_type` = 'resource_creation' WHERE (`trigger_type` = 'pact_publication')
2021-09-06 01:04:20.585003 I [72416:4380] pact-broker -- (0.000482s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180109_migrate_trigger_type.rb')
2021-09-06 01:04:20.585018 I [72416:4380] pact-broker -- Finished applying migration 20180109_migrate_trigger_type.rb, direction: up, took 0.000698 seconds
2021-09-06 01:04:20.585024 I [72416:4380] pact-broker -- Begin applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 01:04:20.585110 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_creation_dates: DROP VIEW `latest_triggered_webhook_creation_dates`
2021-09-06 01:04:20.585903 I [72416:4380] pact-broker -- (0.000643s) CREATE VIEW `latest_triggered_webhook_creation_dates` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
  from triggered_webhooks
  group by webhook_uuid, consumer_id, provider_id
2021-09-06 01:04:20.586483 I [72416:4380] pact-broker -- (0.000538s) DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 01:04:20.587159 I [72416:4380] pact-broker -- (0.000634s) CREATE VIEW `latest_triggered_webhook_ids` AS select tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at, max(tw.id) as latest_triggered_webhook_id
  from latest_triggered_webhook_creation_dates ltwcd
  inner join triggered_webhooks tw
  on tw.consumer_id = ltwcd.consumer_id
  and tw.provider_id = ltwcd.provider_id
  and tw.webhook_uuid = ltwcd.webhook_uuid
  and tw.created_at = ltwcd.latest_triggered_webhook_created_at
  group by tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at
2021-09-06 01:04:20.587738 I [72416:4380] pact-broker -- (0.000536s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 01:04:20.588389 I [72416:4380] pact-broker -- (0.000610s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
  from triggered_webhooks tw
  inner join latest_triggered_webhook_ids ltwi
  on tw.consumer_id = ltwi.consumer_id
  and tw.provider_id = ltwi.provider_id
  and tw.webhook_uuid = ltwi.webhook_uuid
  and tw.id = ltwi.latest_triggered_webhook_id
2021-09-06 01:04:20.588979 I [72416:4380] pact-broker -- (0.000530s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180119_update_latest_triggered_webhooks.rb')
2021-09-06 01:04:20.588994 I [72416:4380] pact-broker -- Finished applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up, took 0.003967 seconds
2021-09-06 01:04:20.589001 I [72416:4380] pact-broker -- Begin applying migration 20180122_create_head_pact_publications.rb, direction: up
2021-09-06 01:04:20.589694 I [72416:4380] pact-broker -- (0.000656s) CREATE VIEW `head_pact_publications` AS select lp.*, null as tag_name, 1 as latest
      from latest_pact_publications lp

      UNION

      select ltp.*, null as latest
      from latest_tagged_pact_publications ltp
      
2021-09-06 01:04:20.590395 I [72416:4380] pact-broker -- (0.000639s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180122_create_head_pact_publications.rb')
2021-09-06 01:04:20.590413 I [72416:4380] pact-broker -- Finished applying migration 20180122_create_head_pact_publications.rb, direction: up, took 0.001409 seconds
2021-09-06 01:04:20.590419 I [72416:4380] pact-broker -- Begin applying migration 20180123_create_tags_with_latest_flag.rb, direction: up
2021-09-06 01:04:20.591224 I [72416:4380] pact-broker -- (0.000756s) CREATE VIEW `latest_tagged_version_orders` AS 
        select v.pacticipant_id, t.name as tag_name, max(v.`order`) as latest_version_order, 1 as latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        group by v.pacticipant_id, t.name
      
2021-09-06 01:04:20.591931 I [72416:4380] pact-broker -- (0.000627s) CREATE VIEW `tags_with_latest_flag` AS 
        select t.*, ltvo.latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        left outer join latest_tagged_version_orders ltvo
        on t.name = ltvo.tag_name
        and v.pacticipant_id = ltvo.pacticipant_id
        and v.`order` = ltvo.latest_version_order
      
2021-09-06 01:04:20.592542 I [72416:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180123_create_tags_with_latest_flag.rb')
2021-09-06 01:04:20.592558 I [72416:4380] pact-broker -- Finished applying migration 20180123_create_tags_with_latest_flag.rb, direction: up, took 0.002135 seconds
2021-09-06 01:04:20.592564 I [72416:4380] pact-broker -- Begin applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 01:04:20.593254 I [72416:4380] pact-broker -- (0.000652s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:04:20.594052 I [72416:4380] pact-broker -- (0.000753s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider` AS select matrix.consumer_version_id, matrix.provider_id, max(verification_id) as latest_verification_id
      from latest_matrix_for_consumer_version_and_provider_version matrix
      where matrix.verification_id is not null
      group by matrix.consumer_version_id, matrix.provider_id
      
2021-09-06 01:04:20.594634 I [72416:4380] pact-broker -- (0.000540s) DROP VIEW `latest_matrix`
2021-09-06 01:04:20.595407 I [72416:4380] pact-broker -- (0.000731s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_id = lv.provider_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      where verification_id is null
      
2021-09-06 01:04:20.596052 I [72416:4380] pact-broker -- (0.000576s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180129_create_latest_matrix_for_cv_and_pv.rb')
2021-09-06 01:04:20.596069 I [72416:4380] pact-broker -- Finished applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.003500 seconds
2021-09-06 01:04:20.596075 I [72416:4380] pact-broker -- Begin applying migration 20180130_create_materialized_matrix.rb, direction: up
2021-09-06 01:04:20.596985 I [72416:4380] pact-broker -- (0.000643s) CREATE TABLE `materialized_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 01:04:20.597697 I [72416:4380] pact-broker -- (0.000661s) CREATE INDEX `ndx_mm_consumer_id` ON `materialized_matrix` (`consumer_id`)
2021-09-06 01:04:20.598389 I [72416:4380] pact-broker -- (0.000642s) CREATE INDEX `ndx_mm_provider_id` ON `materialized_matrix` (`provider_id`)
2021-09-06 01:04:20.599093 I [72416:4380] pact-broker -- (0.000659s) CREATE INDEX `ndx_mm_cv_ord` ON `materialized_matrix` (`consumer_version_order`)
2021-09-06 01:04:20.599435 I [72416:4380] pact-broker -- (0.000242s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 01:04:20.600029 I [72416:4380] pact-broker -- (0.000536s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180130_create_materialized_matrix.rb')
2021-09-06 01:04:20.600046 I [72416:4380] pact-broker -- Finished applying migration 20180130_create_materialized_matrix.rb, direction: up, took 0.003967 seconds
2021-09-06 01:04:20.600052 I [72416:4380] pact-broker -- Begin applying migration 20180131_create_materialized_latest_matrix.rb, direction: up
2021-09-06 01:04:20.601049 I [72416:4380] pact-broker -- (0.000742s) CREATE TABLE `materialized_latest_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 01:04:20.601739 I [72416:4380] pact-broker -- (0.000644s) CREATE INDEX `ndx_mlm_consumer_id` ON `materialized_latest_matrix` (`consumer_id`)
2021-09-06 01:04:20.602502 I [72416:4380] pact-broker -- (0.000689s) CREATE INDEX `ndx_mlm_provider_id` ON `materialized_latest_matrix` (`provider_id`)
2021-09-06 01:04:20.603359 I [72416:4380] pact-broker -- (0.000801s) CREATE INDEX `ndx_mlm_cv_ord` ON `materialized_latest_matrix` (`consumer_version_order`)
2021-09-06 01:04:20.607647 I [72416:4380] pact-broker -- (0.004161s) INSERT INTO `materialized_latest_matrix` SELECT * FROM `latest_matrix`
2021-09-06 01:04:20.608903 I [72416:4380] pact-broker -- (0.000999s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180131_create_materialized_latest_matrix.rb')
2021-09-06 01:04:20.608937 I [72416:4380] pact-broker -- Finished applying migration 20180131_create_materialized_latest_matrix.rb, direction: up, took 0.008876 seconds
2021-09-06 01:04:20.608948 I [72416:4380] pact-broker -- Begin applying migration 20180201_create_head_matrix.rb, direction: up
2021-09-06 01:04:20.610310 I [72416:4380] pact-broker -- (0.001252s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:04:20.611212 I [72416:4380] pact-broker -- (0.000752s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180201_create_head_matrix.rb')
2021-09-06 01:04:20.611241 I [72416:4380] pact-broker -- Finished applying migration 20180201_create_head_matrix.rb, direction: up, took 0.002289 seconds
2021-09-06 01:04:20.611249 I [72416:4380] pact-broker -- Begin applying migration 20180202_create_materialized_head_matrix.rb, direction: up
2021-09-06 01:04:20.612497 I [72416:4380] pact-broker -- (0.000901s) CREATE TABLE `materialized_head_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255), `consumer_tag_name` varchar(255))
2021-09-06 01:04:20.613332 I [72416:4380] pact-broker -- (0.000768s) CREATE INDEX `ndx_mhm_consumer_id` ON `materialized_head_matrix` (`consumer_id`)
2021-09-06 01:04:20.614168 I [72416:4380] pact-broker -- (0.000774s) CREATE INDEX `ndx_mhm_provider_id` ON `materialized_head_matrix` (`provider_id`)
2021-09-06 01:04:20.614958 I [72416:4380] pact-broker -- (0.000734s) CREATE INDEX `ndx_mhm_cv_ord` ON `materialized_head_matrix` (`consumer_version_order`)
2021-09-06 01:04:20.615801 I [72416:4380] pact-broker -- (0.000752s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180202_create_materialized_head_matrix.rb')
2021-09-06 01:04:20.615843 I [72416:4380] pact-broker -- Finished applying migration 20180202_create_materialized_head_matrix.rb, direction: up, took 0.004567 seconds
2021-09-06 01:04:20.615850 I [72416:4380] pact-broker -- Begin applying migration 20180203_fix_head_matrix.rb, direction: up
2021-09-06 01:04:20.616546 I [72416:4380] pact-broker -- (0.000651s) DROP VIEW `head_matrix`
2021-09-06 01:04:20.617546 I [72416:4380] pact-broker -- (0.000937s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      where verification_id is null
      
2021-09-06 01:04:20.618255 I [72416:4380] pact-broker -- (0.000619s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180203_fix_head_matrix.rb')
2021-09-06 01:04:20.618278 I [72416:4380] pact-broker -- Finished applying migration 20180203_fix_head_matrix.rb, direction: up, took 0.002421 seconds
2021-09-06 01:04:20.618288 I [72416:4380] pact-broker -- Begin applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 01:04:20.619127 I [72416:4380] pact-broker -- (0.000790s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:04:20.619967 I [72416:4380] pact-broker -- (0.000786s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS 
      SELECT matrix.* FROM matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:04:20.620815 I [72416:4380] pact-broker -- (0.000749s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180204_fix_latest_matrix_for_cv_and_pv.rb')
2021-09-06 01:04:20.620836 I [72416:4380] pact-broker -- Finished applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.002544 seconds
2021-09-06 01:04:20.620843 I [72416:4380] pact-broker -- Begin applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up
2021-09-06 01:04:20.621693 I [72416:4380] pact-broker -- (0.000809s) DROP TABLE `materialized_latest_matrix`
2021-09-06 01:04:20.622452 I [72416:4380] pact-broker -- (0.000675s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180205_drop_materialized_latest_matrix.rb')
2021-09-06 01:04:20.622471 I [72416:4380] pact-broker -- Finished applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up, took 0.001624 seconds
2021-09-06 01:04:20.622478 I [72416:4380] pact-broker -- Begin applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up
2021-09-06 01:04:20.623226 I [72416:4380] pact-broker -- (0.000707s) DROP VIEW `head_matrix`
2021-09-06 01:04:20.624076 I [72416:4380] pact-broker -- (0.000796s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:04:20.624157 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.624188 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.624234 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:20.642300 I [72416:4380] pact-broker -- (0.017983s) ALTER TABLE `materialized_head_matrix` RENAME COLUMN `consumer_tag_name` TO `consumer_version_tag_name`
2021-09-06 01:04:20.643195 I [72416:4380] pact-broker -- (0.000847s) COMMIT
2021-09-06 01:04:20.643287 I [72416:4380] pact-broker -- (0.000022s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.643318 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.644107 I [72416:4380] pact-broker -- (0.000718s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180206_recreate_head_matrix_rename_consumer_tag_name.rb')
2021-09-06 01:04:20.644128 I [72416:4380] pact-broker -- Finished applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up, took 0.021645 seconds
2021-09-06 01:04:20.644135 I [72416:4380] pact-broker -- Begin applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up
2021-09-06 01:04:20.644753 I [72416:4380] pact-broker -- (0.000572s) DROP VIEW `head_matrix`
2021-09-06 01:04:20.645526 I [72416:4380] pact-broker -- (0.000727s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION ALL

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:04:20.646208 I [72416:4380] pact-broker -- (0.000616s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180207_recreate_head_matrix_union_all.rb')
2021-09-06 01:04:20.646224 I [72416:4380] pact-broker -- Finished applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up, took 0.002086 seconds
2021-09-06 01:04:20.646230 I [72416:4380] pact-broker -- Begin applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up
2021-09-06 01:04:20.646293 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.646321 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.646355 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.646662 I [72416:4380] pact-broker -- (0.000255s) CREATE INDEX `materialized_head_matrix_consumer_version_tag_name_index` ON `materialized_head_matrix` (`consumer_version_tag_name`)
2021-09-06 01:04:20.647156 I [72416:4380] pact-broker -- (0.000468s) COMMIT
2021-09-06 01:04:20.647216 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.647246 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.647928 I [72416:4380] pact-broker -- (0.000629s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180208_add_cv_tag_name_index_to_mat_head_matrix.rb')
2021-09-06 01:04:20.647945 I [72416:4380] pact-broker -- Finished applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up, took 0.001711 seconds
2021-09-06 01:04:20.647952 I [72416:4380] pact-broker -- Begin applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up
2021-09-06 01:04:20.648626 I [72416:4380] pact-broker -- (0.000630s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:04:20.649416 I [72416:4380] pact-broker -- (0.000722s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:04:20.649968 I [72416:4380] pact-broker -- (0.000491s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb')
2021-09-06 01:04:20.649984 I [72416:4380] pact-broker -- Finished applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up, took 0.002028 seconds
2021-09-06 01:04:20.649991 I [72416:4380] pact-broker -- Begin applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up
2021-09-06 01:04:20.650046 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.650079 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.650111 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.650405 I [72416:4380] pact-broker -- (0.000253s) CREATE INDEX `ndx_mm_verif_id` ON `materialized_matrix` (`verification_id`)
2021-09-06 01:04:20.650512 I [72416:4380] pact-broker -- (0.000065s) CREATE INDEX `ndx_mm_pact_rev_num` ON `materialized_matrix` (`pact_revision_number`)
2021-09-06 01:04:20.650921 I [72416:4380] pact-broker -- (0.000386s) COMMIT
2021-09-06 01:04:20.650971 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.650998 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.651571 I [72416:4380] pact-broker -- (0.000542s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:04:20.652219 I [72416:4380] pact-broker -- (0.000606s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:04:20.652376 I [72416:4380] pact-broker -- (0.000063s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:04:20.658864 I [72416:4380] pact-broker -- (0.006415s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 01:04:20.659615 I [72416:4380] pact-broker -- (0.000689s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180210_fix_latest_matrix_for_cv_and_pv_again.rb')
2021-09-06 01:04:20.659634 I [72416:4380] pact-broker -- Finished applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up, took 0.009639 seconds
2021-09-06 01:04:20.659641 I [72416:4380] pact-broker -- Begin applying migration 20180311_optimise_head_matrix.rb, direction: up
2021-09-06 01:04:20.660494 I [72416:4380] pact-broker -- (0.000691s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:04:20.661449 I [72416:4380] pact-broker -- (0.000812s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `pact_publications`.`provider_id`, `cv`.`pacticipant_id` AS 'consumer_id', `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `pact_publications`.`consumer_version_id`) GROUP BY `pact_publications`.`provider_id`, `cv`.`pacticipant_id`, `t`.`name`
2021-09-06 01:04:20.662321 I [72416:4380] pact-broker -- (0.000730s) DROP VIEW `latest_verifications`
2021-09-06 01:04:20.663302 I [72416:4380] pact-broker -- (0.000843s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:04:20.664161 I [72416:4380] pact-broker -- (0.000812s) DROP VIEW `head_matrix`
2021-09-06 01:04:20.665092 I [72416:4380] pact-broker -- (0.000884s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 01:04:20.665812 I [72416:4380] pact-broker -- (0.000651s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180311_optimise_head_matrix.rb')
2021-09-06 01:04:20.665828 I [72416:4380] pact-broker -- Finished applying migration 20180311_optimise_head_matrix.rb, direction: up, took 0.006184 seconds
2021-09-06 01:04:20.665835 I [72416:4380] pact-broker -- Begin applying migration 20180315_create_verification_sequence.rb, direction: up
2021-09-06 01:04:20.666549 I [72416:4380] pact-broker -- (0.000639s) CREATE TABLE `verification_sequence_number` (`value` integer NOT NULL)
2021-09-06 01:04:20.666745 I [72416:4380] pact-broker -- (0.000087s) SELECT max(`number`) AS 'max' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.667330 I [72416:4380] pact-broker -- (0.000515s) INSERT INTO `verification_sequence_number` (`value`) VALUES (100)
2021-09-06 01:04:20.667913 I [72416:4380] pact-broker -- (0.000530s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180315_create_verification_sequence.rb')
2021-09-06 01:04:20.667929 I [72416:4380] pact-broker -- Finished applying migration 20180315_create_verification_sequence.rb, direction: up, took 0.002090 seconds
2021-09-06 01:04:20.667935 I [72416:4380] pact-broker -- Begin applying migration 20180330_refresh_matrix.rb, direction: up
2021-09-06 01:04:20.668064 I [72416:4380] pact-broker -- (0.000063s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 01:04:20.668337 I [72416:4380] pact-broker -- (0.000212s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 01:04:20.668448 I [72416:4380] pact-broker -- (0.000049s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:04:20.669979 I [72416:4380] pact-broker -- (0.001455s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 01:04:20.670601 I [72416:4380] pact-broker -- (0.000564s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180330_refresh_matrix.rb')
2021-09-06 01:04:20.670617 I [72416:4380] pact-broker -- Finished applying migration 20180330_refresh_matrix.rb, direction: up, took 0.002678 seconds
2021-09-06 01:04:20.670623 I [72416:4380] pact-broker -- Begin applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up
2021-09-06 01:04:20.671316 I [72416:4380] pact-broker -- (0.000655s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:04:20.671516 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_version_tags: DROP VIEW `latest_verifications_for_consumer_version_tags`
2021-09-06 01:04:20.672419 I [72416:4380] pact-broker -- (0.000674s) CREATE VIEW `latest_verifications_for_consumer_version_tags` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `lv`.`consumer_version_tag_name`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_version_tags` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 01:04:20.673097 I [72416:4380] pact-broker -- (0.000612s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180523_create_latest_verifications_for_consumer_version_tags.rb')
2021-09-06 01:04:20.673113 I [72416:4380] pact-broker -- Finished applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up, took 0.002487 seconds
2021-09-06 01:04:20.673120 I [72416:4380] pact-broker -- Begin applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up
2021-09-06 01:04:20.673744 I [72416:4380] pact-broker -- (0.000586s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id
2021-09-06 01:04:20.673933 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_and_provider: DROP VIEW `latest_verifications_for_consumer_and_provider`
2021-09-06 01:04:20.674892 I [72416:4380] pact-broker -- (0.000761s) CREATE VIEW `latest_verifications_for_consumer_and_provider` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_and_provider` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 01:04:20.675604 I [72416:4380] pact-broker -- (0.000649s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180524_create_latest_verifications_for_consumer_and_provider.rb')
2021-09-06 01:04:20.675622 I [72416:4380] pact-broker -- Finished applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up, took 0.002499 seconds
2021-09-06 01:04:20.675629 I [72416:4380] pact-broker -- Begin applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up
2021-09-06 01:04:20.675722 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.675753 I [72416:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.675790 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.677098 I [72416:4380] pact-broker -- (0.001247s) ALTER TABLE `triggered_webhooks` ADD COLUMN `verification_id` integer REFERENCES `verifications`
2021-09-06 01:04:20.677495 I [72416:4380] pact-broker -- (0.000371s) COMMIT
2021-09-06 01:04:20.677550 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.677580 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.678156 I [72416:4380] pact-broker -- (0.000528s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180608_add_verification_to_triggered_webhook.rb')
2021-09-06 01:04:20.678175 I [72416:4380] pact-broker -- Finished applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up, took 0.002543 seconds
2021-09-06 01:04:20.678181 I [72416:4380] pact-broker -- Begin applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up
2021-09-06 01:04:20.678237 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.678265 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.678296 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.678503 I [72416:4380] pact-broker -- (0.000154s) PRAGMA table_info('webhooks')
2021-09-06 01:04:20.678607 I [72416:4380] pact-broker -- (0.000058s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:04:20.678674 I [72416:4380] pact-broker -- (0.000033s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.678733 I [72416:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.678968 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.679046 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:04:20.679197 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.679326 I [72416:4380] pact-broker -- (0.000033s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.679382 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.683161 I [72416:4380] pact-broker -- (0.003750s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:04:20.683338 I [72416:4380] pact-broker -- (0.000151s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.683418 I [72416:4380] pact-broker -- (0.000059s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:04:20.683539 I [72416:4380] pact-broker -- (0.000101s) DROP TABLE `webhooks_backup0`
2021-09-06 01:04:20.683717 I [72416:4380] pact-broker -- (0.000125s) PRAGMA table_info('webhooks')
2021-09-06 01:04:20.683804 I [72416:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:04:20.683896 I [72416:4380] pact-broker -- (0.000033s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.683949 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.684175 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.684250 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:04:20.684499 I [72416:4380] pact-broker -- (0.000120s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.685439 I [72416:4380] pact-broker -- (0.000843s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.685501 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.689038 I [72416:4380] pact-broker -- (0.003510s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:04:20.689169 I [72416:4380] pact-broker -- (0.000108s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.689228 I [72416:4380] pact-broker -- (0.000034s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:04:20.689301 I [72416:4380] pact-broker -- (0.000054s) DROP TABLE `webhooks_backup0`
2021-09-06 01:04:20.689467 I [72416:4380] pact-broker -- (0.000118s) PRAGMA table_info('webhooks')
2021-09-06 01:04:20.689546 I [72416:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:04:20.689641 I [72416:4380] pact-broker -- (0.000062s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.689695 I [72416:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.689900 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.689997 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:04:20.690238 I [72416:4380] pact-broker -- (0.000119s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.691166 I [72416:4380] pact-broker -- (0.000849s) PRAGMA index_list('webhooks')
2021-09-06 01:04:20.691227 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:04:20.694774 I [72416:4380] pact-broker -- (0.003521s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:04:20.694909 I [72416:4380] pact-broker -- (0.000112s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.694964 I [72416:4380] pact-broker -- (0.000036s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:04:20.695044 I [72416:4380] pact-broker -- (0.000061s) DROP TABLE `webhooks_backup0`
2021-09-06 01:04:20.695919 I [72416:4380] pact-broker -- (0.000848s) COMMIT
2021-09-06 01:04:20.696019 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.696053 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.696855 I [72416:4380] pact-broker -- (0.000739s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180611_make_webhook_pacticipant_ids_optional.rb')
2021-09-06 01:04:20.696883 I [72416:4380] pact-broker -- Finished applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up, took 0.018693 seconds
2021-09-06 01:04:20.696893 I [72416:4380] pact-broker -- Begin applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up
2021-09-06 01:04:20.697012 I [72416:4380] pact-broker -- (0.000031s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.697050 I [72416:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.697093 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:20.698369 I [72416:4380] pact-broker -- (0.001214s) ALTER TABLE `verifications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 01:04:20.699383 I [72416:4380] pact-broker -- (0.000960s) ALTER TABLE `verifications` ADD COLUMN `provider_id` integer REFERENCES `pacticipants`
2021-09-06 01:04:20.699541 I [72416:4380] pact-broker -- (0.000115s) CREATE INDEX `verifications_consumer_id_index` ON `verifications` (`consumer_id`)
2021-09-06 01:04:20.699642 I [72416:4380] pact-broker -- (0.000061s) CREATE INDEX `verifications_provider_id_index` ON `verifications` (`provider_id`)
2021-09-06 01:04:20.699742 I [72416:4380] pact-broker -- (0.000064s) CREATE INDEX `verifications_provider_id_consumer_id_index` ON `verifications` (`provider_id`, `consumer_id`)
2021-09-06 01:04:20.700480 I [72416:4380] pact-broker -- (0.000711s) COMMIT
2021-09-06 01:04:20.700546 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.700576 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.701383 I [72416:4380] pact-broker -- (0.000745s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180612_add_pacticipant_ids_to_verifications.rb')
2021-09-06 01:04:20.701401 I [72416:4380] pact-broker -- Finished applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up, took 0.004505 seconds
2021-09-06 01:04:20.701434 I [72416:4380] pact-broker -- Begin applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up
2021-09-06 01:04:20.701610 I [72416:4380] pact-broker -- (0.000076s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.701831 I [72416:4380] pact-broker -- (0.000156s) PRAGMA table_info('verifications')
2021-09-06 01:04:20.702005 I [72416:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.702165 I [72416:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.702297 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.702466 I [72416:4380] pact-broker -- (0.000100s) PRAGMA table_info('pact_versions')
2021-09-06 01:04:20.702603 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.702736 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.702844 I [72416:4380] pact-broker -- (0.000076s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 01:04:20.703756 I [72416:4380] pact-broker -- (0.000855s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180613_migrate_pacticipant_ids_for_verifications.rb')
2021-09-06 01:04:20.703776 I [72416:4380] pact-broker -- Finished applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up, took 0.002340 seconds
2021-09-06 01:04:20.703782 I [72416:4380] pact-broker -- Begin applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 01:04:20.704673 I [72416:4380] pact-broker -- (0.000845s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 01:04:20.705512 I [72416:4380] pact-broker -- (0.000782s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(id) as latest_verification_id
        from verifications v
        group by provider_id, consumer_id
2021-09-06 01:04:20.706287 I [72416:4380] pact-broker -- (0.000694s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180614_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 01:04:20.706305 I [72416:4380] pact-broker -- Finished applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.002519 seconds
2021-09-06 01:04:20.706312 I [72416:4380] pact-broker -- Begin applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up
2021-09-06 01:04:20.706405 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.706435 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.706470 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.707736 I [72416:4380] pact-broker -- (0.001210s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 01:04:20.707882 I [72416:4380] pact-broker -- (0.000103s) CREATE INDEX `pact_publications_consumer_id_index` ON `pact_publications` (`consumer_id`)
2021-09-06 01:04:20.708468 I [72416:4380] pact-broker -- (0.000561s) COMMIT
2021-09-06 01:04:20.708525 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.708561 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.709236 I [72416:4380] pact-broker -- (0.000623s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180615_add_consumer_id_to_pact_publications.rb')
2021-09-06 01:04:20.709254 I [72416:4380] pact-broker -- Finished applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up, took 0.002937 seconds
2021-09-06 01:04:20.709260 I [72416:4380] pact-broker -- Begin applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up
2021-09-06 01:04:20.709438 I [72416:4380] pact-broker -- (0.000075s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.709615 I [72416:4380] pact-broker -- (0.000118s) PRAGMA table_info('pact_publications')
2021-09-06 01:04:20.709764 I [72416:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.709919 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.710077 I [72416:4380] pact-broker -- (0.000111s) PRAGMA table_info('versions')
2021-09-06 01:04:20.710214 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.710309 I [72416:4380] pact-broker -- (0.000063s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 01:04:20.711051 I [72416:4380] pact-broker -- (0.000688s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180616_migrate_consumer_ids_for_pact_publications.rb')
2021-09-06 01:04:20.711068 I [72416:4380] pact-broker -- Finished applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up, took 0.001804 seconds
2021-09-06 01:04:20.711075 I [72416:4380] pact-broker -- Begin applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up
2021-09-06 01:04:20.712052 I [72416:4380] pact-broker -- (0.000821s) CREATE TABLE `latest_pact_publication_ids_for_consumer_versions` (`consumer_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `consumer_version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `provider_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `pact_publication_id` integer NOT NULL UNIQUE REFERENCES `pact_publications` ON DELETE CASCADE, `pact_version_id` integer NOT NULL REFERENCES `pact_versions` ON DELETE CASCADE)
2021-09-06 01:04:20.712795 I [72416:4380] pact-broker -- (0.000689s) CREATE UNIQUE INDEX `unq_latest_ppid_prov_conver` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_version_id`)
2021-09-06 01:04:20.713544 I [72416:4380] pact-broker -- (0.000699s) CREATE INDEX `lpp_provider_id_consumer_id_index` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_id`)
2021-09-06 01:04:20.714567 I [72416:4380] pact-broker -- (0.000963s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180720_create_latest_pact_publication_ids.rb')
2021-09-06 01:04:20.714588 I [72416:4380] pact-broker -- Finished applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up, took 0.003509 seconds
2021-09-06 01:04:20.714599 I [72416:4380] pact-broker -- Begin applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up
2021-09-06 01:04:20.715105 I [72416:4380] pact-broker -- (0.000405s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` SELECT `consumer_id`, `consumer_version_id`, `provider_id`, `id`, `pact_version_id` FROM `latest_pact_publications_by_consumer_versions`
2021-09-06 01:04:20.715847 I [72416:4380] pact-broker -- (0.000681s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180721_migrate_latest_pact_publication_ids.rb')
2021-09-06 01:04:20.715865 I [72416:4380] pact-broker -- Finished applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up, took 0.001263 seconds
2021-09-06 01:04:20.715871 I [72416:4380] pact-broker -- Begin applying migration 20180722_recreate_views.rb, direction: up
2021-09-06 01:04:20.716551 I [72416:4380] pact-broker -- (0.000640s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 01:04:20.717367 I [72416:4380] pact-broker -- (0.000768s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.consumer_version_id = app.consumer_version_id
  and lpp.pact_publication_id = app.id
  and lpp.provider_id = app.provider_id
2021-09-06 01:04:20.718239 I [72416:4380] pact-broker -- (0.000692s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:04:20.719092 I [72416:4380] pact-broker -- (0.000752s) CREATE VIEW `latest_pact_consumer_version_orders` AS SELECT `provider_id`, `consumer_id`, max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) GROUP BY `provider_id`, `consumer_id`
2021-09-06 01:04:20.719759 I [72416:4380] pact-broker -- (0.000604s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180722_recreate_views.rb')
2021-09-06 01:04:20.719775 I [72416:4380] pact-broker -- Finished applying migration 20180722_recreate_views.rb, direction: up, took 0.003900 seconds
2021-09-06 01:04:20.719782 I [72416:4380] pact-broker -- Begin applying migration 20180723_create_latest_verification_ids.rb, direction: up
2021-09-06 01:04:20.720745 I [72416:4380] pact-broker -- (0.000817s) CREATE TABLE `latest_verification_id_for_pact_version_and_provider_version` (`consumer_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_consumer_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `pact_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_pact_version_id_fk` REFERENCES `pact_versions` ON DELETE CASCADE, `provider_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `provider_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_version_id_fk` REFERENCES `versions` ON DELETE CASCADE, `verification_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_verification_id_fk` REFERENCES `verifications` ON DELETE CASCADE)
2021-09-06 01:04:20.721448 I [72416:4380] pact-broker -- (0.000656s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_v_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`verification_id`)
2021-09-06 01:04:20.722178 I [72416:4380] pact-broker -- (0.000681s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_pv_id_pv_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`)
2021-09-06 01:04:20.722919 I [72416:4380] pact-broker -- (0.000670s) CREATE INDEX `latest_v_id_for_pv_and_pv_pv_id_v_id` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `verification_id`)
2021-09-06 01:04:20.723610 I [72416:4380] pact-broker -- (0.000635s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180723_create_latest_verification_ids.rb')
2021-09-06 01:04:20.723626 I [72416:4380] pact-broker -- Finished applying migration 20180723_create_latest_verification_ids.rb, direction: up, took 0.003841 seconds
2021-09-06 01:04:20.723632 I [72416:4380] pact-broker -- Begin applying migration 20180724_migrate_latest_verification_ids.rb, direction: up
2021-09-06 01:04:20.723874 I [72416:4380] pact-broker -- (0.000091s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` SELECT `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`, max(`verifications`.`id`) AS 'verification_id' FROM `verifications` GROUP BY `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`
2021-09-06 01:04:20.724577 I [72416:4380] pact-broker -- (0.000654s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180724_migrate_latest_verification_ids.rb')
2021-09-06 01:04:20.724592 I [72416:4380] pact-broker -- Finished applying migration 20180724_migrate_latest_verification_ids.rb, direction: up, took 0.000957 seconds
2021-09-06 01:04:20.724599 I [72416:4380] pact-broker -- Begin applying migration 20180726_recreate_views.rb, direction: up
2021-09-06 01:04:20.725178 I [72416:4380] pact-broker -- (0.000544s) DROP VIEW `latest_verification_id_for_consumer_version_and_provider_version`
2021-09-06 01:04:20.725787 I [72416:4380] pact-broker -- (0.000566s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select pp.consumer_version_id, lv.provider_version_id, lv.verification_id as latest_verification_id
      from latest_pact_publication_ids_for_consumer_versions lpp
      inner join pact_publications pp
        on pp.id = lpp.pact_publication_id
      left outer join latest_verification_id_for_pact_version_and_provider_version lv
          on lv.pact_version_id = pp.pact_version_id
2021-09-06 01:04:20.726382 I [72416:4380] pact-broker -- (0.000536s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180726_recreate_views.rb')
2021-09-06 01:04:20.726397 I [72416:4380] pact-broker -- Finished applying migration 20180726_recreate_views.rb, direction: up, took 0.001795 seconds
2021-09-06 01:04:20.726403 I [72416:4380] pact-broker -- Begin applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:04:20.727044 I [72416:4380] pact-broker -- (0.000604s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:04:20.727857 I [72416:4380] pact-broker -- (0.000767s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
      v.provider_id,
      v.consumer_id,
      t.name as consumer_version_tag_name,
      max(v.verification_id) as latest_verification_id
    from latest_verification_id_for_pact_version_and_provider_version v
    join latest_pact_publication_ids_for_consumer_versions lpp
      on v.pact_version_id = lpp.pact_version_id
    join tags t
      on lpp.consumer_version_id = t.version_id
    group by v.provider_id, v.consumer_id, t.name
2021-09-06 01:04:20.728504 I [72416:4380] pact-broker -- (0.000586s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:04:20.728520 I [72416:4380] pact-broker -- Finished applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.002113 seconds
2021-09-06 01:04:20.728526 I [72416:4380] pact-broker -- Begin applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up
2021-09-06 01:04:20.728697 I [72416:4380] pact-broker -- (0.000067s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 01:04:20.728815 I [72416:4380] pact-broker -- (0.000061s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:04:20.729496 I [72416:4380] pact-broker -- (0.000631s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180728_truncate_materialized_matrix_tables.rb')
2021-09-06 01:04:20.729518 I [72416:4380] pact-broker -- Finished applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up, took 0.000988 seconds
2021-09-06 01:04:20.729525 I [72416:4380] pact-broker -- Begin applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up
2021-09-06 01:04:20.730190 I [72416:4380] pact-broker -- (0.000626s) CREATE VIEW `latest_verification_ids_for_pact_versions` AS select pact_version_id, MAX(verification_id) latest_verification_id
    FROM latest_verification_id_for_pact_version_and_provider_version
    GROUP BY pact_version_id
2021-09-06 01:04:20.730795 I [72416:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180729_create_latest_verification_ids_for_provider_versions.rb')
2021-09-06 01:04:20.730811 I [72416:4380] pact-broker -- Finished applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up, took 0.001283 seconds
2021-09-06 01:04:20.730817 I [72416:4380] pact-broker -- Begin applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up
2021-09-06 01:04:20.731796 I [72416:4380] pact-broker -- (0.000757s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:04:20.732393 I [72416:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180730_create_latest_verifications_for_provider_versions.rb')
2021-09-06 01:04:20.732409 I [72416:4380] pact-broker -- Finished applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up, took 0.001588 seconds
2021-09-06 01:04:20.732419 I [72416:4380] pact-broker -- Begin applying migration 20180731_update_head_matrix.rb, direction: up
2021-09-06 01:04:20.733003 I [72416:4380] pact-broker -- (0.000550s) DROP VIEW `head_matrix`
2021-09-06 01:04:20.733837 I [72416:4380] pact-broker -- (0.000793s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 01:04:20.734433 I [72416:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180731_update_head_matrix.rb')
2021-09-06 01:04:20.734448 I [72416:4380] pact-broker -- Finished applying migration 20180731_update_head_matrix.rb, direction: up, took 0.002027 seconds
2021-09-06 01:04:20.734455 I [72416:4380] pact-broker -- Begin applying migration 20180828_create_latest_versions.rb, direction: up
2021-09-06 01:04:20.734604 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_version_orders: DROP VIEW `latest_version_orders`
2021-09-06 01:04:20.735370 I [72416:4380] pact-broker -- (0.000605s) CREATE VIEW `latest_version_orders` AS SELECT `pacticipant_id`, max(`order`) AS 'latest_version_order' FROM `versions` GROUP BY `pacticipant_id`
2021-09-06 01:04:20.735515 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_versions: DROP VIEW `latest_versions`
2021-09-06 01:04:20.736272 I [72416:4380] pact-broker -- (0.000590s) CREATE VIEW `latest_versions` AS SELECT `versions`.* FROM `versions` INNER JOIN `latest_version_orders` ON ((`versions`.`pacticipant_id` = `latest_version_orders`.`pacticipant_id`) AND (`versions`.`order` = `latest_version_orders`.`latest_version_order`))
2021-09-06 01:04:20.736866 I [72416:4380] pact-broker -- (0.000536s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180828_create_latest_versions.rb')
2021-09-06 01:04:20.736882 I [72416:4380] pact-broker -- Finished applying migration 20180828_create_latest_versions.rb, direction: up, took 0.002424 seconds
2021-09-06 01:04:20.736892 I [72416:4380] pact-broker -- Begin applying migration 20190509_create_version_sequence.rb, direction: up
2021-09-06 01:04:20.737693 I [72416:4380] pact-broker -- (0.000699s) CREATE TABLE `version_sequence_number` (`value` integer NOT NULL)
2021-09-06 01:04:20.738306 I [72416:4380] pact-broker -- (0.000556s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190509_create_version_sequence.rb')
2021-09-06 01:04:20.738322 I [72416:4380] pact-broker -- Finished applying migration 20190509_create_version_sequence.rb, direction: up, took 0.001428 seconds
2021-09-06 01:04:20.738329 I [72416:4380] pact-broker -- Begin applying migration 20190510_set_version_sequence.rb, direction: up
2021-09-06 01:04:20.738483 I [72416:4380] pact-broker -- (0.000071s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.738625 I [72416:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:20.738750 I [72416:4380] pact-broker -- (0.000068s) PRAGMA table_info('version_sequence_number')
2021-09-06 01:04:20.738903 I [72416:4380] pact-broker -- (0.000066s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 01:04:20.738999 I [72416:4380] pact-broker -- (0.000048s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:20.739647 I [72416:4380] pact-broker -- (0.000599s) INSERT INTO `version_sequence_number` (`value`) VALUES (100)
2021-09-06 01:04:20.739777 I [72416:4380] pact-broker -- (0.000061s) DELETE FROM `version_sequence_number` WHERE (`value` != 100)
2021-09-06 01:04:20.740391 I [72416:4380] pact-broker -- (0.000528s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190510_set_version_sequence.rb')
2021-09-06 01:04:20.740409 I [72416:4380] pact-broker -- Finished applying migration 20190510_set_version_sequence.rb, direction: up, took 0.002076 seconds
2021-09-06 01:04:20.740415 I [72416:4380] pact-broker -- Begin applying migration 20190511_create_integrations_view.rb, direction: up
2021-09-06 01:04:20.741371 I [72416:4380] pact-broker -- (0.000802s) CREATE VIEW `integrations` AS SELECT DISTINCT `consumer_id`, `c`.`name` AS 'consumer_name', `provider_id`, `p`.`name` AS 'provider_name' FROM `pact_publications` INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `pact_publications`.`consumer_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`)
2021-09-06 01:04:20.742036 I [72416:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190511_create_integrations_view.rb')
2021-09-06 01:04:20.742055 I [72416:4380] pact-broker -- Finished applying migration 20190511_create_integrations_view.rb, direction: up, took 0.001636 seconds
2021-09-06 01:04:20.742062 I [72416:4380] pact-broker -- Begin applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up
2021-09-06 01:04:20.742126 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.742155 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.742192 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:20.743650 I [72416:4380] pact-broker -- (0.001398s) ALTER TABLE `webhooks` ADD COLUMN `enabled` boolean DEFAULT (1)
2021-09-06 01:04:20.744180 I [72416:4380] pact-broker -- (0.000499s) COMMIT
2021-09-06 01:04:20.744235 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.744264 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.744971 I [72416:4380] pact-broker -- (0.000655s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190523_add_enabled_column_to_webhooks.rb')
2021-09-06 01:04:20.744988 I [72416:4380] pact-broker -- Finished applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up, took 0.002923 seconds
2021-09-06 01:04:20.744995 I [72416:4380] pact-broker -- Begin applying migration 20190524_set_webhooks_enabled.rb, direction: up
2021-09-06 01:04:20.745192 I [72416:4380] pact-broker -- (0.000107s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:04:20.745413 I [72416:4380] pact-broker -- (0.000159s) PRAGMA table_info('webhooks')
2021-09-06 01:04:20.745602 I [72416:4380] pact-broker -- (0.000054s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 01:04:20.746163 I [72416:4380] pact-broker -- (0.000512s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190524_set_webhooks_enabled.rb')
2021-09-06 01:04:20.746179 I [72416:4380] pact-broker -- Finished applying migration 20190524_set_webhooks_enabled.rb, direction: up, took 0.001181 seconds
2021-09-06 01:04:20.746186 I [72416:4380] pact-broker -- Begin applying migration 20190525_add_description_column_to_webhooks.rb, direction: up
2021-09-06 01:04:20.746248 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.746277 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.746310 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.747683 I [72416:4380] pact-broker -- (0.001321s) ALTER TABLE `webhooks` ADD COLUMN `description` varchar(255)
2021-09-06 01:04:20.748196 I [72416:4380] pact-broker -- (0.000485s) COMMIT
2021-09-06 01:04:20.748254 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.748284 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.748969 I [72416:4380] pact-broker -- (0.000628s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190525_add_description_column_to_webhooks.rb')
2021-09-06 01:04:20.748985 I [72416:4380] pact-broker -- Finished applying migration 20190525_add_description_column_to_webhooks.rb, direction: up, took 0.002796 seconds
2021-09-06 01:04:20.748992 I [72416:4380] pact-broker -- Begin applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up
2021-09-06 01:04:20.749081 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.749110 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.749141 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.750492 I [72416:4380] pact-broker -- (0.001304s) ALTER TABLE `webhooks` ADD COLUMN `headers` varchar(255)
2021-09-06 01:04:20.750893 I [72416:4380] pact-broker -- (0.000376s) COMMIT
2021-09-06 01:04:20.750949 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.750978 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.751533 I [72416:4380] pact-broker -- (0.000507s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190602_add_headers_column_to_webhooks.rb')
2021-09-06 01:04:20.751548 I [72416:4380] pact-broker -- Finished applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up, took 0.002553 seconds
2021-09-06 01:04:20.751554 I [72416:4380] pact-broker -- Begin applying migration 20190603_migrate_webhook_headers.rb, direction: up
2021-09-06 01:04:20.751710 I [72416:4380] pact-broker -- (0.000068s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:04:20.751932 I [72416:4380] pact-broker -- (0.000166s) PRAGMA table_info('webhooks')
2021-09-06 01:04:20.752150 I [72416:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:04:20.752277 I [72416:4380] pact-broker -- (0.000075s) PRAGMA table_info('webhook_headers')
2021-09-06 01:04:20.752410 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:04:20.752550 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:04:20.752650 I [72416:4380] pact-broker -- (0.000054s) SELECT * FROM `webhook_headers`
2021-09-06 01:04:20.753242 I [72416:4380] pact-broker -- (0.000545s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190603_migrate_webhook_headers.rb')
2021-09-06 01:04:20.753261 I [72416:4380] pact-broker -- Finished applying migration 20190603_migrate_webhook_headers.rb, direction: up, took 0.001703 seconds
2021-09-06 01:04:20.753267 I [72416:4380] pact-broker -- Begin applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up
2021-09-06 01:04:20.753917 I [72416:4380] pact-broker -- (0.000562s) DROP VIEW `all_verifications`
2021-09-06 01:04:20.754604 I [72416:4380] pact-broker -- (0.000585s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at`, `test_results` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:04:20.755211 I [72416:4380] pact-broker -- (0.000543s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190909_add_test_results_to_all_verifications.rb')
2021-09-06 01:04:20.755227 I [72416:4380] pact-broker -- Finished applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up, took 0.001956 seconds
2021-09-06 01:04:20.755263 I [72416:4380] pact-broker -- Begin applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up
2021-09-06 01:04:20.755939 I [72416:4380] pact-broker -- (0.000547s) DROP VIEW `latest_verifications`
2021-09-06 01:04:20.756772 I [72416:4380] pact-broker -- (0.000696s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:04:20.757338 I [72416:4380] pact-broker -- (0.000505s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190910_add_test_results_to_latest_verifications.rb')
2021-09-06 01:04:20.757354 I [72416:4380] pact-broker -- Finished applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up, took 0.002088 seconds
2021-09-06 01:04:20.757360 I [72416:4380] pact-broker -- Begin applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up
2021-09-06 01:04:20.758141 I [72416:4380] pact-broker -- (0.000661s) DROP VIEW `latest_verifications_for_pact_versions`
2021-09-06 01:04:20.759155 I [72416:4380] pact-broker -- (0.000811s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:04:20.759878 I [72416:4380] pact-broker -- (0.000644s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190911_add_test_results_to_latest_verifications_for_pact_versions.rb')
2021-09-06 01:04:20.759895 I [72416:4380] pact-broker -- Finished applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up, took 0.002532 seconds
2021-09-06 01:04:20.759901 I [72416:4380] pact-broker -- Begin applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up
2021-09-06 01:04:20.760604 I [72416:4380] pact-broker -- (0.000665s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:04:20.761352 I [72416:4380] pact-broker -- (0.000701s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:04:20.761963 I [72416:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191025_optimise_latest_verification_ids_for_cv_tags.rb')
2021-09-06 01:04:20.761979 I [72416:4380] pact-broker -- Finished applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up, took 0.002074 seconds
2021-09-06 01:04:20.761986 I [72416:4380] pact-broker -- Begin applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 01:04:20.762676 I [72416:4380] pact-broker -- (0.000560s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:04:20.763509 I [72416:4380] pact-broker -- (0.000708s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 01:04:20.764115 I [72416:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191028_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 01:04:20.764131 I [72416:4380] pact-broker -- Finished applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002142 seconds
2021-09-06 01:04:20.764137 I [72416:4380] pact-broker -- Begin applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up
2021-09-06 01:04:20.764728 I [72416:4380] pact-broker -- (0.000556s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 01:04:20.765373 I [72416:4380] pact-broker -- (0.000573s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.pact_publication_id = app.id
2021-09-06 01:04:20.765996 I [72416:4380] pact-broker -- (0.000559s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191030_optimise_latest_pact_publications_by_consumer_versions_.rb')
2021-09-06 01:04:20.766011 I [72416:4380] pact-broker -- Finished applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up, took 0.001871 seconds
2021-09-06 01:04:20.766018 I [72416:4380] pact-broker -- Begin applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:04:20.766575 I [72416:4380] pact-broker -- (0.000524s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:04:20.767263 I [72416:4380] pact-broker -- (0.000645s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      where v.id in (select latest_verification_id from latest_verification_ids_for_pact_versions)
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:04:20.767866 I [72416:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:04:20.767882 I [72416:4380] pact-broker -- Finished applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001862 seconds
2021-09-06 01:04:20.767888 I [72416:4380] pact-broker -- Begin applying migration 20191101_create_head_pact_tags.rb, direction: up
2021-09-06 01:04:20.768761 I [72416:4380] pact-broker -- (0.000667s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`))
2021-09-06 01:04:20.769435 I [72416:4380] pact-broker -- (0.000610s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191101_create_head_pact_tags.rb')
2021-09-06 01:04:20.769459 I [72416:4380] pact-broker -- Finished applying migration 20191101_create_head_pact_tags.rb, direction: up, took 0.001567 seconds
2021-09-06 01:04:20.769465 I [72416:4380] pact-broker -- Begin applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up
2021-09-06 01:04:20.769528 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.769587 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.769625 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:20.771037 I [72416:4380] pact-broker -- (0.001356s) ALTER TABLE `latest_pact_publication_ids_for_consumer_versions` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.771440 I [72416:4380] pact-broker -- (0.000377s) COMMIT
2021-09-06 01:04:20.771496 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.771529 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.772183 I [72416:4380] pact-broker -- (0.000604s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200318_add_created_at_to_latest_pact_publications.rb')
2021-09-06 01:04:20.772201 I [72416:4380] pact-broker -- Finished applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up, took 0.002731 seconds
2021-09-06 01:04:20.772208 I [72416:4380] pact-broker -- Begin applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up
2021-09-06 01:04:20.772271 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.772300 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.772334 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.773745 I [72416:4380] pact-broker -- (0.001355s) ALTER TABLE `latest_verification_id_for_pact_version_and_provider_version` ADD COLUMN `created_at` timestamp
2021-09-06 01:04:20.774134 I [72416:4380] pact-broker -- (0.000365s) COMMIT
2021-09-06 01:04:20.774186 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.774215 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.774803 I [72416:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200319_add_created_at_to_latest_verifications.rb')
2021-09-06 01:04:20.774819 I [72416:4380] pact-broker -- Finished applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up, took 0.002608 seconds
2021-09-06 01:04:20.774825 I [72416:4380] pact-broker -- Begin applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up
2021-09-06 01:04:20.774882 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.774909 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.774940 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.776334 I [72416:4380] pact-broker -- (0.001349s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_name` varchar(255)
2021-09-06 01:04:20.776682 I [72416:4380] pact-broker -- (0.000324s) COMMIT
2021-09-06 01:04:20.776733 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.776761 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.777357 I [72416:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200922_add_event_to_triggered_webhook.rb')
2021-09-06 01:04:20.777373 I [72416:4380] pact-broker -- Finished applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up, took 0.002545 seconds
2021-09-06 01:04:20.777380 I [72416:4380] pact-broker -- Begin applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 01:04:20.777957 I [72416:4380] pact-broker -- (0.000541s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 01:04:20.778711 I [72416:4380] pact-broker -- (0.000711s) CREATE VIEW `latest_triggered_webhooks` AS select tw.id, tw.trigger_uuid, tw.trigger_type, tw.pact_publication_id, tw.webhook_id, tw.webhook_uuid, tw.consumer_id, tw.provider_id, tw.status, tw.created_at, tw.updated_at, tw.verification_id, tw.event_name
  from triggered_webhooks tw
  inner join (select max(id) as max_id
    from triggered_webhooks
    group by webhook_uuid, consumer_id, provider_id, event_name) latest_ids
  on latest_ids.max_id = tw.id
2021-09-06 01:04:20.779271 I [72416:4380] pact-broker -- (0.000499s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200930_update_latest_triggered_webhooks.rb')
2021-09-06 01:04:20.779287 I [72416:4380] pact-broker -- Finished applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up, took 0.001904 seconds
2021-09-06 01:04:20.779294 I [72416:4380] pact-broker -- Begin applying migration 20201006_add_wip_to_verification.rb, direction: up
2021-09-06 01:04:20.779354 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.779382 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.779413 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.780800 I [72416:4380] pact-broker -- (0.001332s) ALTER TABLE `verifications` ADD COLUMN `wip` boolean DEFAULT (0) NOT NULL
2021-09-06 01:04:20.781341 I [72416:4380] pact-broker -- (0.000516s) COMMIT
2021-09-06 01:04:20.781397 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.781426 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.782079 I [72416:4380] pact-broker -- (0.000565s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201006_add_wip_to_verification.rb')
2021-09-06 01:04:20.782095 I [72416:4380] pact-broker -- Finished applying migration 20201006_add_wip_to_verification.rb, direction: up, took 0.002798 seconds
2021-09-06 01:04:20.782101 I [72416:4380] pact-broker -- Begin applying migration 20201023_create_verification_number_sequence.rb, direction: up
2021-09-06 01:04:20.782655 I [72416:4380] pact-broker -- (0.000500s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201023_create_verification_number_sequence.rb')
2021-09-06 01:04:20.782670 I [72416:4380] pact-broker -- Finished applying migration 20201023_create_verification_number_sequence.rb, direction: up, took 0.000566 seconds
2021-09-06 01:04:20.782677 I [72416:4380] pact-broker -- Begin applying migration 20201024_create_version_order_sequence.rb, direction: up
2021-09-06 01:04:20.783271 I [72416:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201024_create_version_order_sequence.rb')
2021-09-06 01:04:20.783286 I [72416:4380] pact-broker -- Finished applying migration 20201024_create_version_order_sequence.rb, direction: up, took 0.000607 seconds
2021-09-06 01:04:20.783292 I [72416:4380] pact-broker -- Begin applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 01:04:20.783825 I [72416:4380] pact-broker -- (0.000497s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 01:04:20.784483 I [72416:4380] pact-broker -- (0.000615s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(verification_id) as latest_verification_id
        from latest_verification_id_for_pact_version_and_provider_version v
        group by provider_id, consumer_id
2021-09-06 01:04:20.785123 I [72416:4380] pact-broker -- (0.000579s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201026_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 01:04:20.785138 I [72416:4380] pact-broker -- Finished applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.001843 seconds
2021-09-06 01:04:20.785145 I [72416:4380] pact-broker -- Begin applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up
2021-09-06 01:04:20.785210 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.785238 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.785269 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.785556 I [72416:4380] pact-broker -- (0.000251s) CREATE INDEX `webhook_executions_triggered_webhook_id_index` ON `webhook_executions` (`triggered_webhook_id`)
2021-09-06 01:04:20.786010 I [72416:4380] pact-broker -- (0.000432s) COMMIT
2021-09-06 01:04:20.786061 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.786089 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.786142 I [72416:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.786167 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.786219 I [72416:4380] pact-broker -- (0.000032s) BEGIN
2021-09-06 01:04:20.786540 I [72416:4380] pact-broker -- (0.000285s) CREATE INDEX `triggered_webhooks_webhook_id_index` ON `triggered_webhooks` (`webhook_id`)
2021-09-06 01:04:20.786649 I [72416:4380] pact-broker -- (0.000071s) CREATE INDEX `triggered_webhooks_consumer_id_index` ON `triggered_webhooks` (`consumer_id`)
2021-09-06 01:04:20.786748 I [72416:4380] pact-broker -- (0.000064s) CREATE INDEX `triggered_webhooks_provider_id_index` ON `triggered_webhooks` (`provider_id`)
2021-09-06 01:04:20.786848 I [72416:4380] pact-broker -- (0.000063s) CREATE INDEX `triggered_webhooks_verification_id_index` ON `triggered_webhooks` (`verification_id`)
2021-09-06 01:04:20.786941 I [72416:4380] pact-broker -- (0.000061s) CREATE INDEX `triggered_webhooks_pact_publication_id_index` ON `triggered_webhooks` (`pact_publication_id`)
2021-09-06 01:04:20.787472 I [72416:4380] pact-broker -- (0.000511s) COMMIT
2021-09-06 01:04:20.787523 I [72416:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.787550 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.788154 I [72416:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210115_add_webhook_foreign_key_indexes.rb')
2021-09-06 01:04:20.788169 I [72416:4380] pact-broker -- Finished applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up, took 0.003021 seconds
2021-09-06 01:04:20.788175 I [72416:4380] pact-broker -- Begin applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up
2021-09-06 01:04:20.788229 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.788257 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.788287 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.789689 I [72416:4380] pact-broker -- (0.001356s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_context` varchar(255)
2021-09-06 01:04:20.790116 I [72416:4380] pact-broker -- (0.000402s) COMMIT
2021-09-06 01:04:20.790170 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.790198 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.790761 I [72416:4380] pact-broker -- (0.000510s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210116_add_context_to_triggered_webhook.rb')
2021-09-06 01:04:20.790776 I [72416:4380] pact-broker -- Finished applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up, took 0.002598 seconds
2021-09-06 01:04:20.790783 I [72416:4380] pact-broker -- Begin applying migration 20210117_add_branch_to_version.rb, direction: up
2021-09-06 01:04:20.790868 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.790898 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.790929 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.792336 I [72416:4380] pact-broker -- (0.001362s) ALTER TABLE `versions` ADD COLUMN `branch` varchar(255)
2021-09-06 01:04:20.793553 I [72416:4380] pact-broker -- (0.001165s) ALTER TABLE `versions` ADD COLUMN `build_url` varchar(255)
2021-09-06 01:04:20.793713 I [72416:4380] pact-broker -- (0.000111s) CREATE INDEX `versions_pacticipant_id_branch_order_index` ON `versions` (`pacticipant_id`, `branch`, `order`)
2021-09-06 01:04:20.794215 I [72416:4380] pact-broker -- (0.000477s) COMMIT
2021-09-06 01:04:20.794271 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.794300 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.794953 I [72416:4380] pact-broker -- (0.000604s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210117_add_branch_to_version.rb')
2021-09-06 01:04:20.794969 I [72416:4380] pact-broker -- Finished applying migration 20210117_add_branch_to_version.rb, direction: up, took 0.004183 seconds
2021-09-06 01:04:20.794975 I [72416:4380] pact-broker -- Begin applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up
2021-09-06 01:04:20.795705 I [72416:4380] pact-broker -- (0.000568s) DROP VIEW `head_pact_tags`
2021-09-06 01:04:20.796494 I [72416:4380] pact-broker -- (0.000618s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id`, `tags`.`created_at` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`)) INNER JOIN `tags` ON ((`tags`.`version_id` = `cv`.`id`) AND (`tags`.`name` = `o`.`tag_name`))
2021-09-06 01:04:20.797125 I [72416:4380] pact-broker -- (0.000565s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210202_add_created_at_to_head_pact_tags.rb')
2021-09-06 01:04:20.797143 I [72416:4380] pact-broker -- Finished applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up, took 0.002164 seconds
2021-09-06 01:04:20.797150 I [72416:4380] pact-broker -- Begin applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up
2021-09-06 01:04:20.797213 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.797248 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.797280 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.798718 I [72416:4380] pact-broker -- (0.001388s) ALTER TABLE `tags` ADD COLUMN `pacticipant_id` integer
2021-09-06 01:04:20.799935 I [72416:4380] pact-broker -- (0.001167s) ALTER TABLE `tags` ADD COLUMN `version_order` integer
2021-09-06 01:04:20.800089 I [72416:4380] pact-broker -- (0.000108s) CREATE INDEX `tags_version_order_index` ON `tags` (`version_order`)
2021-09-06 01:04:20.800196 I [72416:4380] pact-broker -- (0.000071s) CREATE INDEX `tags_version_id_index` ON `tags` (`version_id`)
2021-09-06 01:04:20.800297 I [72416:4380] pact-broker -- (0.000066s) CREATE INDEX `tags_pacticipant_id_index` ON `tags` (`pacticipant_id`)
2021-09-06 01:04:20.800935 I [72416:4380] pact-broker -- (0.000615s) COMMIT
2021-09-06 01:04:20.800991 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.801020 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.801637 I [72416:4380] pact-broker -- (0.000564s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210205_add_pacticipant_id_to_tag.rb')
2021-09-06 01:04:20.801685 I [72416:4380] pact-broker -- Finished applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up, took 0.004500 seconds
2021-09-06 01:04:20.801692 I [72416:4380] pact-broker -- Begin applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up
2021-09-06 01:04:20.801750 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.801778 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.801809 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.802110 I [72416:4380] pact-broker -- (0.000261s) CREATE INDEX `tags_pacticipant_id_name_version_order_index` ON `tags` (`pacticipant_id`, `name`, `version_order`)
2021-09-06 01:04:20.802628 I [72416:4380] pact-broker -- (0.000495s) COMMIT
2021-09-06 01:04:20.802681 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.802709 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.803309 I [72416:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210206_add_index_to_tags_and_versions.rb')
2021-09-06 01:04:20.803324 I [72416:4380] pact-broker -- Finished applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up, took 0.001630 seconds
2021-09-06 01:04:20.803331 I [72416:4380] pact-broker -- Begin applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:04:20.803918 I [72416:4380] pact-broker -- (0.000553s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:04:20.804588 I [72416:4380] pact-broker -- (0.000625s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
    lpp.provider_id,
    lpp.consumer_id,
    t.name as consumer_version_tag_name,
    max(lv.latest_verification_id) as latest_verification_id
  from latest_verification_ids_for_pact_versions lv
  join latest_pact_publication_ids_for_consumer_versions lpp
    on lv.pact_version_id = lpp.pact_version_id
  join tags t
    on lpp.consumer_version_id = t.version_id
  group by lpp.provider_id, lpp.consumer_id, t.name

2021-09-06 01:04:20.805242 I [72416:4380] pact-broker -- (0.000591s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:04:20.805258 I [72416:4380] pact-broker -- Finished applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001924 seconds
2021-09-06 01:04:20.805265 I [72416:4380] pact-broker -- Begin applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 01:04:20.806054 I [72416:4380] pact-broker -- (0.000675s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:04:20.806870 I [72416:4380] pact-broker -- (0.000675s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`version_order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 01:04:20.807434 I [72416:4380] pact-broker -- (0.000503s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210208_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 01:04:20.807450 I [72416:4380] pact-broker -- Finished applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002183 seconds
2021-09-06 01:04:20.807457 I [72416:4380] pact-broker -- Begin applying migration 20210210_create_environments_table.rb, direction: up
2021-09-06 01:04:20.808312 I [72416:4380] pact-broker -- (0.000716s) CREATE TABLE `environments` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255), `name` varchar(255), `display_name` varchar(255), `production` Boolean, `contacts` varchar(255), `created_at` timestamp, `updated_at` timestamp)
2021-09-06 01:04:20.809011 I [72416:4380] pact-broker -- (0.000645s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.809705 I [72416:4380] pact-broker -- (0.000648s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.810263 I [72416:4380] pact-broker -- (0.000499s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210210_create_environments_table.rb')
2021-09-06 01:04:20.810279 I [72416:4380] pact-broker -- Finished applying migration 20210210_create_environments_table.rb, direction: up, took 0.002819 seconds
2021-09-06 01:04:20.810285 I [72416:4380] pact-broker -- Begin applying migration 20210216_create_deployed_versions_table.rb, direction: up
2021-09-06 01:04:20.811161 I [72416:4380] pact-broker -- (0.000695s) CREATE TABLE `deployed_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `currently_deployed` Boolean NOT NULL, `replaced_previous_deployed_version` Boolean NOT NULL, `created_at` timestamp, `updated_at` timestamp, `undeployed_at` timestamp)
2021-09-06 01:04:20.811855 I [72416:4380] pact-broker -- (0.000647s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.812624 I [72416:4380] pact-broker -- (0.000719s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.813316 I [72416:4380] pact-broker -- (0.000634s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210216_create_deployed_versions_table.rb')
2021-09-06 01:04:20.813345 I [72416:4380] pact-broker -- Finished applying migration 20210216_create_deployed_versions_table.rb, direction: up, took 0.003044 seconds
2021-09-06 01:04:20.813356 I [72416:4380] pact-broker -- Begin applying migration 20210226_set_deployment_columns_not_null.rb, direction: up
2021-09-06 01:04:20.813417 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.813445 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.813479 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.813709 I [72416:4380] pact-broker -- (0.000173s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.813799 I [72416:4380] pact-broker -- (0.000045s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.813865 I [72416:4380] pact-broker -- (0.000032s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.814073 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.814156 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.814343 I [72416:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.814483 I [72416:4380] pact-broker -- (0.000048s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.814588 I [72416:4380] pact-broker -- (0.000042s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:04:20.814655 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.819374 I [72416:4380] pact-broker -- (0.004657s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.819528 I [72416:4380] pact-broker -- (0.000129s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.819612 I [72416:4380] pact-broker -- (0.000063s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.819755 I [72416:4380] pact-broker -- (0.000123s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.819849 I [72416:4380] pact-broker -- (0.000075s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.819935 I [72416:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.820096 I [72416:4380] pact-broker -- (0.000113s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.820180 I [72416:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.820243 I [72416:4380] pact-broker -- (0.000031s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.820433 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.820505 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.820807 I [72416:4380] pact-broker -- (0.000149s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.821956 I [72416:4380] pact-broker -- (0.001074s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.822017 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.822073 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:04:20.826698 I [72416:4380] pact-broker -- (0.004566s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.826881 I [72416:4380] pact-broker -- (0.000157s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.826935 I [72416:4380] pact-broker -- (0.000034s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.827016 I [72416:4380] pact-broker -- (0.000064s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.827140 I [72416:4380] pact-broker -- (0.000074s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.827225 I [72416:4380] pact-broker -- (0.000066s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.827393 I [72416:4380] pact-broker -- (0.000116s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.827473 I [72416:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.827535 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.827732 I [72416:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.827807 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.828080 I [72416:4380] pact-broker -- (0.000145s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.829232 I [72416:4380] pact-broker -- (0.001064s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.829295 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:04:20.829354 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.833896 I [72416:4380] pact-broker -- (0.004486s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.834016 I [72416:4380] pact-broker -- (0.000097s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.834066 I [72416:4380] pact-broker -- (0.000031s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.834402 I [72416:4380] pact-broker -- (0.000315s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.834504 I [72416:4380] pact-broker -- (0.000081s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.834653 I [72416:4380] pact-broker -- (0.000129s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.836471 I [72416:4380] pact-broker -- (0.001769s) COMMIT
2021-09-06 01:04:20.836644 I [72416:4380] pact-broker -- (0.000047s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.836780 I [72416:4380] pact-broker -- (0.000035s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.836927 I [72416:4380] pact-broker -- (0.000032s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.837004 I [72416:4380] pact-broker -- (0.000016s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.837060 I [72416:4380] pact-broker -- (0.000020s) BEGIN
2021-09-06 01:04:20.837389 I [72416:4380] pact-broker -- (0.000238s) PRAGMA table_info('environments')
2021-09-06 01:04:20.837516 I [72416:4380] pact-broker -- (0.000050s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.837630 I [72416:4380] pact-broker -- (0.000056s) PRAGMA index_list('environments')
2021-09-06 01:04:20.837896 I [72416:4380] pact-broker -- (0.000023s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.838025 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.838287 I [72416:4380] pact-broker -- (0.000024s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.838520 I [72416:4380] pact-broker -- (0.000074s) PRAGMA index_list('environments')
2021-09-06 01:04:20.838621 I [72416:4380] pact-broker -- (0.000045s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.838715 I [72416:4380] pact-broker -- (0.000040s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.845049 I [72416:4380] pact-broker -- (0.006243s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.845224 I [72416:4380] pact-broker -- (0.000138s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:04:20.845328 I [72416:4380] pact-broker -- (0.000076s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.845498 I [72416:4380] pact-broker -- (0.000144s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.845606 I [72416:4380] pact-broker -- (0.000084s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.845702 I [72416:4380] pact-broker -- (0.000075s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.845904 I [72416:4380] pact-broker -- (0.000135s) PRAGMA table_info('environments')
2021-09-06 01:04:20.845983 I [72416:4380] pact-broker -- (0.000029s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.846054 I [72416:4380] pact-broker -- (0.000036s) PRAGMA index_list('environments')
2021-09-06 01:04:20.846230 I [72416:4380] pact-broker -- (0.000016s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.846318 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.846646 I [72416:4380] pact-broker -- (0.000173s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.847962 I [72416:4380] pact-broker -- (0.001216s) PRAGMA index_list('environments')
2021-09-06 01:04:20.848024 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.848084 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.852492 I [72416:4380] pact-broker -- (0.004353s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.852602 I [72416:4380] pact-broker -- (0.000087s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:04:20.852651 I [72416:4380] pact-broker -- (0.000030s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.852734 I [72416:4380] pact-broker -- (0.000065s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.852824 I [72416:4380] pact-broker -- (0.000071s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.852907 I [72416:4380] pact-broker -- (0.000065s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.853064 I [72416:4380] pact-broker -- (0.000105s) PRAGMA table_info('environments')
2021-09-06 01:04:20.853132 I [72416:4380] pact-broker -- (0.000026s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.853202 I [72416:4380] pact-broker -- (0.000037s) PRAGMA index_list('environments')
2021-09-06 01:04:20.853337 I [72416:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.853429 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.853719 I [72416:4380] pact-broker -- (0.000143s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.854872 I [72416:4380] pact-broker -- (0.001059s) PRAGMA index_list('environments')
2021-09-06 01:04:20.854933 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.855002 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.859702 I [72416:4380] pact-broker -- (0.004635s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.859840 I [72416:4380] pact-broker -- (0.000113s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:04:20.859921 I [72416:4380] pact-broker -- (0.000060s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.860093 I [72416:4380] pact-broker -- (0.000151s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.860243 I [72416:4380] pact-broker -- (0.000130s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.860388 I [72416:4380] pact-broker -- (0.000124s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.860563 I [72416:4380] pact-broker -- (0.000115s) PRAGMA table_info('environments')
2021-09-06 01:04:20.860629 I [72416:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.860704 I [72416:4380] pact-broker -- (0.000035s) PRAGMA index_list('environments')
2021-09-06 01:04:20.860860 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.860940 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.861225 I [72416:4380] pact-broker -- (0.000144s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.862377 I [72416:4380] pact-broker -- (0.001065s) PRAGMA index_list('environments')
2021-09-06 01:04:20.862453 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.862512 I [72416:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.867083 I [72416:4380] pact-broker -- (0.004517s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.867226 I [72416:4380] pact-broker -- (0.000113s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:04:20.867299 I [72416:4380] pact-broker -- (0.000052s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.867469 I [72416:4380] pact-broker -- (0.000150s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.867618 I [72416:4380] pact-broker -- (0.000130s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.867763 I [72416:4380] pact-broker -- (0.000124s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.867923 I [72416:4380] pact-broker -- (0.000108s) PRAGMA table_info('environments')
2021-09-06 01:04:20.867990 I [72416:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.868062 I [72416:4380] pact-broker -- (0.000032s) PRAGMA index_list('environments')
2021-09-06 01:04:20.868217 I [72416:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.868296 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.868586 I [72416:4380] pact-broker -- (0.000142s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.869764 I [72416:4380] pact-broker -- (0.001080s) PRAGMA index_list('environments')
2021-09-06 01:04:20.869834 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.869896 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.874361 I [72416:4380] pact-broker -- (0.004401s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.874503 I [72416:4380] pact-broker -- (0.000118s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:04:20.874575 I [72416:4380] pact-broker -- (0.000052s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.874745 I [72416:4380] pact-broker -- (0.000149s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.874901 I [72416:4380] pact-broker -- (0.000132s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.875059 I [72416:4380] pact-broker -- (0.000134s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.876293 I [72416:4380] pact-broker -- (0.001173s) PRAGMA table_info('environments')
2021-09-06 01:04:20.876364 I [72416:4380] pact-broker -- (0.000027s) PRAGMA foreign_key_list('environments')
2021-09-06 01:04:20.876432 I [72416:4380] pact-broker -- (0.000035s) PRAGMA index_list('environments')
2021-09-06 01:04:20.876581 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.876656 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:04:20.876935 I [72416:4380] pact-broker -- (0.000147s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.878103 I [72416:4380] pact-broker -- (0.001069s) PRAGMA index_list('environments')
2021-09-06 01:04:20.878166 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:04:20.878224 I [72416:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_name_index')
2021-09-06 01:04:20.882852 I [72416:4380] pact-broker -- (0.004554s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:04:20.882990 I [72416:4380] pact-broker -- (0.000114s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:04:20.883064 I [72416:4380] pact-broker -- (0.000053s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:04:20.883235 I [72416:4380] pact-broker -- (0.000151s) DROP TABLE `environments_backup0`
2021-09-06 01:04:20.883386 I [72416:4380] pact-broker -- (0.000130s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:04:20.883534 I [72416:4380] pact-broker -- (0.000125s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:04:20.884241 I [72416:4380] pact-broker -- (0.000680s) COMMIT
2021-09-06 01:04:20.884305 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.884336 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.885143 I [72416:4380] pact-broker -- (0.000745s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210226_set_deployment_columns_not_null.rb')
2021-09-06 01:04:20.885163 I [72416:4380] pact-broker -- Finished applying migration 20210226_set_deployment_columns_not_null.rb, direction: up, took 0.071802 seconds
2021-09-06 01:04:20.885170 I [72416:4380] pact-broker -- Begin applying migration 20210301_add_pacticipant_columns.rb, direction: up
2021-09-06 01:04:20.885240 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.885270 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.885303 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.886780 I [72416:4380] pact-broker -- (0.001407s) ALTER TABLE `pacticipants` ADD COLUMN `display_name` varchar(255)
2021-09-06 01:04:20.888035 I [72416:4380] pact-broker -- (0.001203s) ALTER TABLE `pacticipants` ADD COLUMN `repository_name` varchar(255)
2021-09-06 01:04:20.889286 I [72416:4380] pact-broker -- (0.001203s) ALTER TABLE `pacticipants` ADD COLUMN `repository_namespace` varchar(255)
2021-09-06 01:04:20.890539 I [72416:4380] pact-broker -- (0.001204s) ALTER TABLE `pacticipants` ADD COLUMN `main_development_branches` varchar(255)
2021-09-06 01:04:20.891039 I [72416:4380] pact-broker -- (0.000473s) COMMIT
2021-09-06 01:04:20.891097 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.891133 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.891854 I [72416:4380] pact-broker -- (0.000662s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210301_add_pacticipant_columns.rb')
2021-09-06 01:04:20.891873 I [72416:4380] pact-broker -- Finished applying migration 20210301_add_pacticipant_columns.rb, direction: up, took 0.006699 seconds
2021-09-06 01:04:20.891880 I [72416:4380] pact-broker -- Begin applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up
2021-09-06 01:04:20.892821 I [72416:4380] pact-broker -- (0.000774s) CREATE TABLE `currently_deployed_version_ids` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `target_for_index` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `environment_id` integer NOT NULL REFERENCES `environments` ON DELETE CASCADE, `version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `deployed_version_id` integer NOT NULL)
2021-09-06 01:04:20.893744 I [72416:4380] pact-broker -- (0.000860s) CREATE UNIQUE INDEX `currently_deployed_version_pacticipant_environment_target_index` ON `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `target_for_index`)
2021-09-06 01:04:20.894520 I [72416:4380] pact-broker -- (0.000691s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210413_create_currently_deployed_version_ids_table.rb')
2021-09-06 01:04:20.894538 I [72416:4380] pact-broker -- Finished applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up, took 0.002655 seconds
2021-09-06 01:04:20.894545 I [72416:4380] pact-broker -- Begin applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up
2021-09-06 01:04:20.894611 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.894641 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.894674 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.896150 I [72416:4380] pact-broker -- (0.001429s) ALTER TABLE `deployed_versions` ADD COLUMN `target` varchar(255)
2021-09-06 01:04:20.897544 I [72416:4380] pact-broker -- (0.001337s) ALTER TABLE `deployed_versions` ADD COLUMN `target_for_index` varchar(255) DEFAULT ('') NOT NULL
2021-09-06 01:04:20.897775 I [72416:4380] pact-broker -- (0.000167s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.897868 I [72416:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.897933 I [72416:4380] pact-broker -- (0.000031s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.898187 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.898269 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.898561 I [72416:4380] pact-broker -- (0.000145s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.899781 I [72416:4380] pact-broker -- (0.001119s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.899843 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.899900 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:04:20.904542 I [72416:4380] pact-broker -- (0.004561s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.904672 I [72416:4380] pact-broker -- (0.000107s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.904729 I [72416:4380] pact-broker -- (0.000038s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.904883 I [72416:4380] pact-broker -- (0.000135s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.904983 I [72416:4380] pact-broker -- (0.000080s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.905070 I [72416:4380] pact-broker -- (0.000068s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.905261 I [72416:4380] pact-broker -- (0.000144s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.905342 I [72416:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.905404 I [72416:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.905604 I [72416:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.905669 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.905966 I [72416:4380] pact-broker -- (0.000153s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.907167 I [72416:4380] pact-broker -- (0.001103s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.907230 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:04:20.907284 I [72416:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.911814 I [72416:4380] pact-broker -- (0.004477s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.911945 I [72416:4380] pact-broker -- (0.000106s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.912000 I [72416:4380] pact-broker -- (0.000036s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.912094 I [72416:4380] pact-broker -- (0.000075s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.912183 I [72416:4380] pact-broker -- (0.000071s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:04:20.912273 I [72416:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.912355 I [72416:4380] pact-broker -- (0.000054s) DROP INDEX `deployed_versions_pacticipant_id_currently_deployed_index`
2021-09-06 01:04:20.913041 I [72416:4380] pact-broker -- (0.000660s) COMMIT
2021-09-06 01:04:20.913135 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.913166 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.914171 I [72416:4380] pact-broker -- (0.000945s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210415_add_target_column_to_deployed_version.rb')
2021-09-06 01:04:20.914190 I [72416:4380] pact-broker -- Finished applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up, took 0.019641 seconds
2021-09-06 01:04:20.914197 I [72416:4380] pact-broker -- Begin applying migration 20210419_create_released_versions_table.rb, direction: up
2021-09-06 01:04:20.915181 I [72416:4380] pact-broker -- (0.000801s) CREATE TABLE `released_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `created_at` timestamp, `updated_at` timestamp, `support_ended_at` timestamp)
2021-09-06 01:04:20.916103 I [72416:4380] pact-broker -- (0.000870s) CREATE UNIQUE INDEX `released_versions_uuid_index` ON `released_versions` (`uuid`)
2021-09-06 01:04:20.916963 I [72416:4380] pact-broker -- (0.000809s) CREATE UNIQUE INDEX `released_versions_version_id_environment_id_index` ON `released_versions` (`version_id`, `environment_id`)
2021-09-06 01:04:20.917810 I [72416:4380] pact-broker -- (0.000792s) CREATE INDEX `released_version_support_ended_at_index` ON `released_versions` (`support_ended_at`)
2021-09-06 01:04:20.918623 I [72416:4380] pact-broker -- (0.000751s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210419_create_released_versions_table.rb')
2021-09-06 01:04:20.918644 I [72416:4380] pact-broker -- Finished applying migration 20210419_create_released_versions_table.rb, direction: up, took 0.004442 seconds
2021-09-06 01:04:20.918651 I [72416:4380] pact-broker -- Begin applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up
2021-09-06 01:04:20.918713 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.918742 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.918777 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.920341 I [72416:4380] pact-broker -- (0.001514s) ALTER TABLE `pacticipants` ADD COLUMN `main_branch` varchar(255)
2021-09-06 01:04:20.920813 I [72416:4380] pact-broker -- (0.000445s) COMMIT
2021-09-06 01:04:20.920869 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.920898 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.921704 I [72416:4380] pact-broker -- (0.000756s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210529_add_main_branch_to_pacticipant.rb')
2021-09-06 01:04:20.921721 I [72416:4380] pact-broker -- Finished applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up, took 0.003067 seconds
2021-09-06 01:04:20.921727 I [72416:4380] pact-broker -- Begin applying migration 20210608_add_uuid_to_webhook.rb, direction: up
2021-09-06 01:04:20.921790 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.921819 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.921852 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.923463 I [72416:4380] pact-broker -- (0.001563s) ALTER TABLE `triggered_webhooks` ADD COLUMN `uuid` varchar(255)
2021-09-06 01:04:20.923636 I [72416:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `triggered_webhooks_uuid` ON `triggered_webhooks` (`uuid`)
2021-09-06 01:04:20.924273 I [72416:4380] pact-broker -- (0.000612s) COMMIT
2021-09-06 01:04:20.924331 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.924361 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.925066 I [72416:4380] pact-broker -- (0.000653s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210608_add_uuid_to_webhook.rb')
2021-09-06 01:04:20.925084 I [72416:4380] pact-broker -- Finished applying migration 20210608_add_uuid_to_webhook.rb, direction: up, took 0.003352 seconds
2021-09-06 01:04:20.925091 I [72416:4380] pact-broker -- Begin applying migration 20210609_set_webhook_uuid.rb, direction: up
2021-09-06 01:04:20.925267 I [72416:4380] pact-broker -- (0.000076s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 01:04:20.925500 I [72416:4380] pact-broker -- (0.000173s) PRAGMA table_info('triggered_webhooks')
2021-09-06 01:04:20.925797 I [72416:4380] pact-broker -- (0.000062s) UPDATE `triggered_webhooks` SET `uuid` = ('6eca9bc6-467b-49fd-84e2-31678664b7f4' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 01:04:20.926537 I [72416:4380] pact-broker -- (0.000689s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210609_set_webhook_uuid.rb')
2021-09-06 01:04:20.926554 I [72416:4380] pact-broker -- Finished applying migration 20210609_set_webhook_uuid.rb, direction: up, took 0.001460 seconds
2021-09-06 01:04:20.926561 I [72416:4380] pact-broker -- Begin applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up
2021-09-06 01:04:20.926620 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.926649 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.926680 I [72416:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:04:20.926907 I [72416:4380] pact-broker -- (0.000157s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.927018 I [72416:4380] pact-broker -- (0.000061s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.927086 I [72416:4380] pact-broker -- (0.000029s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.927293 I [72416:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.927365 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.927542 I [72416:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.927662 I [72416:4380] pact-broker -- (0.000046s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.927717 I [72416:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.932601 I [72416:4380] pact-broker -- (0.004842s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.932784 I [72416:4380] pact-broker -- (0.000159s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.932839 I [72416:4380] pact-broker -- (0.000034s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.932960 I [72416:4380] pact-broker -- (0.000102s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.933051 I [72416:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.933230 I [72416:4380] pact-broker -- (0.000130s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:20.933315 I [72416:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:04:20.933377 I [72416:4380] pact-broker -- (0.000026s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.933556 I [72416:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:04:20.933620 E [72416:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:04:20.933916 I [72416:4380] pact-broker -- (0.000157s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:04:20.935101 I [72416:4380] pact-broker -- (0.001111s) PRAGMA index_list('deployed_versions')
2021-09-06 01:04:20.935187 I [72416:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:04:20.939785 I [72416:4380] pact-broker -- (0.004556s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:04:20.939904 I [72416:4380] pact-broker -- (0.000097s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:04:20.939957 I [72416:4380] pact-broker -- (0.000033s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:04:20.940035 I [72416:4380] pact-broker -- (0.000061s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:04:20.940122 I [72416:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:04:20.940682 I [72416:4380] pact-broker -- (0.000536s) COMMIT
2021-09-06 01:04:20.940741 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.940771 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.941519 I [72416:4380] pact-broker -- (0.000693s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210702_drop_unused_columns_from_deployed_versions.rb')
2021-09-06 01:04:20.941537 I [72416:4380] pact-broker -- Finished applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up, took 0.014973 seconds
2021-09-06 01:04:20.941544 I [72416:4380] pact-broker -- Begin applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up
2021-09-06 01:04:20.941614 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.941665 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.941702 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.943231 I [72416:4380] pact-broker -- (0.001478s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_version_order` integer
2021-09-06 01:04:20.943730 I [72416:4380] pact-broker -- (0.000473s) COMMIT
2021-09-06 01:04:20.943789 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.943819 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.944604 I [72416:4380] pact-broker -- (0.000727s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210711_add_consumer_version_order_to_pact_publication.rb')
2021-09-06 01:04:20.944624 I [72416:4380] pact-broker -- Finished applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up, took 0.003076 seconds
2021-09-06 01:04:20.944631 I [72416:4380] pact-broker -- Begin applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up
2021-09-06 01:04:20.944695 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.944725 I [72416:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.944757 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.946332 I [72416:4380] pact-broker -- (0.001502s) ALTER TABLE `pact_versions` ADD COLUMN `messages_count` integer
2021-09-06 01:04:20.947681 I [72416:4380] pact-broker -- (0.001297s) ALTER TABLE `pact_versions` ADD COLUMN `interactions_count` integer
2021-09-06 01:04:20.948310 I [72416:4380] pact-broker -- (0.000603s) COMMIT
2021-09-06 01:04:20.948368 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.948399 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.949156 I [72416:4380] pact-broker -- (0.000700s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210712_add_interaction_count_to_pact_versions.rb')
2021-09-06 01:04:20.949174 I [72416:4380] pact-broker -- Finished applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up, took 0.004540 seconds
2021-09-06 01:04:20.949181 I [72416:4380] pact-broker -- Begin applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up
2021-09-06 01:04:20.949241 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.949271 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.949304 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.949646 I [72416:4380] pact-broker -- (0.000277s) CREATE INDEX `triggered_webhooks_webhook_uuid_index` ON `triggered_webhooks` (`webhook_uuid`)
2021-09-06 01:04:20.950186 I [72416:4380] pact-broker -- (0.000515s) COMMIT
2021-09-06 01:04:20.950243 I [72416:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.950272 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.951194 I [72416:4380] pact-broker -- (0.000872s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210722_add_index_to_triggered_webhooks_webhook_uuid.rb')
2021-09-06 01:04:20.951211 I [72416:4380] pact-broker -- Finished applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up, took 0.002027 seconds
2021-09-06 01:04:20.951218 I [72416:4380] pact-broker -- Begin applying migration 20210810_set_allow_contract_modification.rb, direction: up
2021-09-06 01:04:20.951394 I [72416:4380] pact-broker -- (0.000083s) SELECT count(*) AS 'count' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.952142 I [72416:4380] pact-broker -- (0.000693s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210810_set_allow_contract_modification.rb')
2021-09-06 01:04:20.952159 I [72416:4380] pact-broker -- Finished applying migration 20210810_set_allow_contract_modification.rb, direction: up, took 0.000938 seconds
2021-09-06 01:04:20.952166 I [72416:4380] pact-broker -- Begin applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up
2021-09-06 01:04:20.952224 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.952254 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.952321 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:20.952626 I [72416:4380] pact-broker -- (0.000268s) CREATE INDEX `verifications_pact_version_id_id_index` ON `verifications` (`pact_version_id`, `id`)
2021-09-06 01:04:20.953217 I [72416:4380] pact-broker -- (0.000565s) COMMIT
2021-09-06 01:04:20.953275 I [72416:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.953305 I [72416:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.953990 I [72416:4380] pact-broker -- (0.000636s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210815_add_provider_version_id_index_to_verifications.rb')
2021-09-06 01:04:20.954006 I [72416:4380] pact-broker -- Finished applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up, took 0.001838 seconds
2021-09-06 01:04:20.954013 I [72416:4380] pact-broker -- Begin applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up
2021-09-06 01:04:20.954069 I [72416:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:04:20.954097 I [72416:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:04:20.954126 I [72416:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:04:20.955710 I [72416:4380] pact-broker -- (0.001520s) ALTER TABLE `verifications` ADD COLUMN `consumer_version_selector_hashes` varchar(255)
2021-09-06 01:04:20.956985 I [72416:4380] pact-broker -- (0.001227s) ALTER TABLE `verifications` ADD COLUMN `tag_names` varchar(255)
2021-09-06 01:04:20.957554 I [72416:4380] pact-broker -- (0.000542s) COMMIT
2021-09-06 01:04:20.957619 I [72416:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:04:20.957653 I [72416:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:04:20.958435 I [72416:4380] pact-broker -- (0.000720s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210818_add_consumer_version_selectors_to_verification.rb')
2021-09-06 01:04:20.958453 I [72416:4380] pact-broker -- Finished applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up, took 0.004437 seconds
2021-09-06 01:04:20.958824 I [72416:4380] pact-broker -- (0.000257s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:04:20.958983 I [72416:4380] pact-broker -- (0.000071s) SELECT * FROM `schema_migrations` ORDER BY `filename` DESC LIMIT 1
2021-09-06 01:04:20.958999 I [72416:4380] PactBroker::App -- Database schema version is now 20210818
2021-09-06 01:04:20.959009 I [72416:4380] PactBroker::App -- Migrating data
2021-09-06 01:04:20.959167 I [72416:4380] pact-broker -- (0.000081s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.959396 I [72416:4380] pact-broker -- (0.000172s) PRAGMA table_info('verifications')
2021-09-06 01:04:20.959570 I [72416:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.959735 I [72416:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:04:20.959860 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.960024 I [72416:4380] pact-broker -- (0.000116s) PRAGMA table_info('pact_versions')
2021-09-06 01:04:20.960188 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.960318 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:20.960430 I [72416:4380] pact-broker -- (0.000079s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 01:04:20.960550 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.960723 I [72416:4380] pact-broker -- (0.000127s) PRAGMA table_info('pact_publications')
2021-09-06 01:04:20.960860 I [72416:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.960994 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.961178 I [72416:4380] pact-broker -- (0.000137s) PRAGMA table_info('versions')
2021-09-06 01:04:20.961323 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.961417 I [72416:4380] pact-broker -- (0.000061s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 01:04:20.961543 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.961692 I [72416:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:20.961832 I [72416:4380] pact-broker -- (0.000060s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 01:04:20.961931 I [72416:4380] pact-broker -- (0.000055s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:20.962046 I [72416:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:04:20.962171 I [72416:4380] pact-broker -- (0.000051s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 01:04:20.962311 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `webhook_executions` LIMIT 1
2021-09-06 01:04:20.962481 I [72416:4380] pact-broker -- (0.000123s) PRAGMA table_info('webhook_executions')
2021-09-06 01:04:20.962613 I [72416:4380] pact-broker -- (0.000054s) DELETE FROM `webhook_executions` WHERE (`triggered_webhook_id` IS NULL)
2021-09-06 01:04:20.962708 I [72416:4380] pact-broker -- (0.000055s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 01:04:20.962813 I [72416:4380] pact-broker -- (0.000069s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 01:04:20.962938 I [72416:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.963085 I [72416:4380] pact-broker -- (0.000099s) PRAGMA table_info('tags')
2021-09-06 01:04:20.963225 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.963344 I [72416:4380] pact-broker -- (0.000070s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.963437 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.963612 I [72416:4380] pact-broker -- (0.000061s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:04:20.963757 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.963852 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.963945 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.964058 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.964221 I [72416:4380] pact-broker -- (0.000060s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:04:20.964341 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:04:20.964528 I [72416:4380] pact-broker -- (0.000140s) PRAGMA table_info('pacticipants')
2021-09-06 01:04:20.964681 I [72416:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:04:20.964815 I [72416:4380] pact-broker -- (0.000072s) SELECT * FROM `pacticipants` WHERE (`display_name` IS NULL)
2021-09-06 01:04:20.964961 I [72416:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:04:20.965056 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:04:20.965146 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:04:20.965239 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.965327 I [72416:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.965446 I [72416:4380] pact-broker -- (0.000053s) SELECT `id`, `name` FROM `pacticipants` WHERE (`main_branch` IS NULL)
2021-09-06 01:04:20.965585 I [72416:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 01:04:20.965775 I [72416:4380] pact-broker -- (0.000144s) PRAGMA table_info('triggered_webhooks')
2021-09-06 01:04:20.966004 I [72416:4380] pact-broker -- (0.000059s) UPDATE `triggered_webhooks` SET `uuid` = ('2615b160-f77a-4a4c-8219-a1d57c6a06ca' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 01:04:20.966162 I [72416:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.966261 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:04:20.966355 I [72416:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.966445 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.966627 I [72416:4380] pact-broker -- (0.000058s) UPDATE `pact_publications` SET `consumer_version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `pact_publications`.`consumer_version_id`)) WHERE (`consumer_version_order` IS NULL)
2021-09-06 01:04:20.966718 I [72416:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.966810 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.966901 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.966991 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.967149 I [72416:4380] pact-broker -- (0.000059s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:04:20.967237 I [72416:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.967355 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:04:20.967446 I [72416:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.967536 I [72416:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:04:20.967692 I [72416:4380] pact-broker -- (0.000058s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:04:20.975915 I [72416:4380] pact-broker -- (0.000208s) PRAGMA table_info('tags_with_latest_flag')
2021-09-06 01:04:20.981034 I [72416:4380] pact-broker -- (0.000194s) PRAGMA table_info('latest_versions')
2021-09-06 01:04:20.981779 I [72416:4380] pact-broker -- (0.000120s) PRAGMA table_info('labels')
2021-09-06 01:04:21.194633 I [72416:4380] pact-broker -- (0.000160s) PRAGMA table_info('webhook_events')
2021-09-06 01:04:21.213683 I [72416:4380] pact-broker -- (0.000254s) PRAGMA table_info('latest_verifications_for_pact_versions')
2021-09-06 01:04:21.214719 I [72416:4380] pact-broker -- (0.000136s) PRAGMA table_info('latest_verification_id_for_pact_version_and_provider_version')
2021-09-06 01:04:21.220556 I [72416:4380] pact-broker -- (0.000092s) SELECT `webhook_executions`.`id`, `triggered_webhook_id`, `success`, `logs`, `webhook_executions`.`created_at` FROM `webhook_executions` LIMIT 1
2021-09-06 01:04:21.225806 I [72416:4380] pact-broker -- (0.000189s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' LIMIT 1
2021-09-06 01:04:21.231327 I [72416:4380] pact-broker -- (0.000142s) PRAGMA table_info('integrations')
2021-09-06 01:04:21.234085 I [72416:4380] pact-broker -- (0.000145s) PRAGMA table_info('head_pact_tags')
2021-09-06 01:04:21.247267 I [72416:4380] pact-broker -- (0.000220s) PRAGMA table_info('all_pact_publications')
2021-09-06 01:04:21.251790 I [72416:4380] pact-broker -- (0.000231s) PRAGMA table_info('latest_pact_publications_by_consumer_versions')
2021-09-06 01:04:21.255236 I [72416:4380] pact-broker -- (0.000246s) PRAGMA table_info('latest_pact_publications')
2021-09-06 01:04:21.256380 I [72416:4380] pact-broker -- (0.000240s) PRAGMA table_info('latest_tagged_pact_publications')
2021-09-06 01:04:21.260093 I [72416:4380] pact-broker -- (0.000322s) PRAGMA table_info('latest_verifications_for_consumer_version_tags')
2021-09-06 01:04:21.261507 I [72416:4380] pact-broker -- (0.000271s) PRAGMA table_info('latest_verifications_for_consumer_and_provider')
2021-09-06 01:04:21.262293 I [72416:4380] pact-broker -- (0.000275s) PRAGMA table_info('matrix')
2021-09-06 01:04:21.264813 I [72416:4380] pact-broker -- (0.000490s) PRAGMA table_info('head_matrix')
2021-09-06 01:04:21.266084 I [72416:4380] pact-broker -- (0.000113s) PRAGMA table_info('latest_pact_publication_ids_for_consumer_versions')
2021-09-06 01:04:21.296678 I [72416:4380] pact-broker -- (0.000101s) UPDATE `triggered_webhooks` SET `status` = 'failure' WHERE (`status` = 'retrying')
2021-09-06 01:04:21.297990 I [72416:4380] pact-broker -- (0.000138s) PRAGMA table_info('config')
2021-09-06 01:04:21.298672 I [72416:4380] pact-broker -- (0.000107s) SELECT * FROM `config`
2021-09-06 01:04:21.298690 I [72416:4380] PactBroker::App -- Seeding example data
2021-09-06 01:04:21.319948 I [72416:4380] pact-broker -- (0.000121s) PRAGMA table_info('verification_sequence_number')
2021-09-06 01:04:21.323705 I [72416:4380] pact-broker -- (0.000135s) PRAGMA table_info('certificates')
2021-09-06 01:04:21.325164 I [72416:4380] pact-broker -- (0.000129s) PRAGMA table_info('environments')
2021-09-06 01:04:21.327457 I [72416:4380] pact-broker -- (0.000115s) PRAGMA table_info('currently_deployed_version_ids')
2021-09-06 01:04:21.328299 I [72416:4380] pact-broker -- (0.000142s) PRAGMA table_info('deployed_versions')
2021-09-06 01:04:21.330717 I [72416:4380] pact-broker -- (0.000123s) PRAGMA table_info('released_versions')
2021-09-06 01:04:21.332065 I [72416:4380] pact-broker -- (0.000128s) SELECT `pacticipants`.* FROM `pacticipants` ORDER BY lower(`pacticipants`.`name`)
2021-09-06 01:04:21.332419 I [72416:4380] pact-broker -- (0.000018s) BEGIN
2021-09-06 01:04:21.332835 I [72416:4380] pact-broker -- (0.000277s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Test', 0, 'test', 'b678ef20-c7c8-4662-99eb-ff3a99c2c52c', '2021-09-05 21:04:21.332300', '2021-09-05 21:04:21.332300')
2021-09-06 01:04:21.333326 I [72416:4380] pact-broker -- (0.000386s) SELECT * FROM `environments` WHERE `id` = 1
2021-09-06 01:04:21.334211 I [72416:4380] pact-broker -- (0.000854s) COMMIT
2021-09-06 01:04:21.334833 I [72416:4380] pact-broker -- (0.000506s) UPDATE `environments` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 1)
2021-09-06 01:04:21.335470 I [72416:4380] pact-broker -- (0.000541s) UPDATE `environments` SET `updated_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 1)
2021-09-06 01:04:21.335620 I [72416:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:04:21.335949 I [72416:4380] pact-broker -- (0.000236s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Production', 1, 'production', '3563be3e-effd-407c-9c14-47404f78027a', '2021-09-05 21:04:21.335554', '2021-09-05 21:04:21.335554')
2021-09-06 01:04:21.336168 I [72416:4380] pact-broker -- (0.000141s) SELECT * FROM `environments` WHERE `id` = 2
2021-09-06 01:04:21.336627 I [72416:4380] pact-broker -- (0.000433s) COMMIT
2021-09-06 01:04:21.337304 I [72416:4380] pact-broker -- (0.000578s) UPDATE `environments` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 2)
2021-09-06 01:04:21.338052 I [72416:4380] pact-broker -- (0.000657s) UPDATE `environments` SET `updated_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 2)
2021-09-06 01:04:21.338308 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.338732 I [72416:4380] pact-broker -- (0.000241s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example App', 'https://github.com/example-organization/Example App', '2021-08-20 21:04:21.338063', '2021-09-05 21:04:21.338255', 'Example App', NULL)
2021-09-06 01:04:21.338933 I [72416:4380] pact-broker -- (0.000143s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.339502 I [72416:4380] pact-broker -- (0.000539s) COMMIT
2021-09-06 01:04:21.339631 I [72416:4380] pact-broker -- (0.000017s) BEGIN
2021-09-06 01:04:21.340045 I [72416:4380] pact-broker -- (0.000243s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example API', 'https://github.com/example-organization/Example API', '2021-08-20 21:04:21.339524', '2021-09-05 21:04:21.339577', 'Example API', NULL)
2021-09-06 01:04:21.340253 I [72416:4380] pact-broker -- (0.000149s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.340683 I [72416:4380] pact-broker -- (0.000404s) COMMIT
2021-09-06 01:04:21.341107 I [72416:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:04:21.341508 I [72416:4380] pact-broker -- (0.000295s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('e15da45d3943bf10793a6d04cfb9f5dabe430fe2', 1, 'main', NULL, '2021-09-05 21:04:21.341037', '2021-09-05 21:04:21.341037')
2021-09-06 01:04:21.341764 I [72416:4380] pact-broker -- (0.000183s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:04:21.341976 I [72416:4380] pact-broker -- (0.000129s) SELECT * FROM `versions` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:04:21.342107 I [72416:4380] pact-broker -- (0.000045s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.342241 I [72416:4380] pact-broker -- (0.000056s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.342324 I [72416:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.342474 I [72416:4380] pact-broker -- (0.000040s) UPDATE `versions` SET `order` = 101 WHERE (`id` = 1)
2021-09-06 01:04:21.342656 I [72416:4380] pact-broker -- (0.000148s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:04:21.343172 I [72416:4380] pact-broker -- (0.000491s) COMMIT
2021-09-06 01:04:21.343802 I [72416:4380] pact-broker -- (0.000537s) UPDATE `versions` SET `created_at` = '2021-08-20 21:04:21.340702' WHERE (`id` = 1)
2021-09-06 01:04:21.344434 I [72416:4380] pact-broker -- (0.000541s) UPDATE `versions` SET `updated_at` = '2021-08-20 21:04:21.340702' WHERE (`id` = 1)
2021-09-06 01:04:21.344815 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.345249 I [72416:4380] pact-broker -- (0.000301s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('prod', 1, '2021-09-05 21:04:21.344742', '2021-09-05 21:04:21.344742', 101, 1)
2021-09-06 01:04:21.345529 I [72416:4380] pact-broker -- (0.000176s) SELECT * FROM `tags` WHERE ((`name` = 'prod') AND (`version_id` = 1)) LIMIT 1
2021-09-06 01:04:21.345999 I [72416:4380] pact-broker -- (0.000441s) COMMIT
2021-09-06 01:04:21.346648 I [72416:4380] pact-broker -- (0.000536s) UPDATE `tags` SET `created_at` = '2021-08-20 21:04:21.344444' WHERE ((`name` = 'prod') AND (`version_id` = 1))
2021-09-06 01:04:21.347370 I [72416:4380] pact-broker -- (0.000632s) UPDATE `tags` SET `updated_at` = '2021-08-20 21:04:21.344444' WHERE (`name` = 'prod')
2021-09-06 01:04:21.347493 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.347907 I [72416:4380] pact-broker -- (0.000294s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 1, '2021-09-05 21:04:21.347431', '2021-09-05 21:04:21.347431', 101, 1)
2021-09-06 01:04:21.348157 I [72416:4380] pact-broker -- (0.000154s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 1)) LIMIT 1
2021-09-06 01:04:21.348640 I [72416:4380] pact-broker -- (0.000460s) COMMIT
2021-09-06 01:04:21.349259 I [72416:4380] pact-broker -- (0.000519s) UPDATE `tags` SET `created_at` = '2021-08-20 21:04:21.347380' WHERE ((`name` = 'main') AND (`version_id` = 1))
2021-09-06 01:04:21.349870 I [72416:4380] pact-broker -- (0.000525s) UPDATE `tags` SET `updated_at` = '2021-08-20 21:04:21.347380' WHERE (`name` = 'main')
2021-09-06 01:04:21.350220 I [72416:4380] pact-broker -- (0.000209s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:04:21.350530 I [72416:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:04:21.350746 I [72416:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.350962 I [72416:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.350817' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.351284 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.351623 I [72416:4380] pact-broker -- (0.000211s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('50ee6c2f-aa0d-4314-993e-1f49af5fb346', 1, 1, 2, NULL, '2021-09-05 21:04:21.351212', '2021-09-05 21:04:21.351212', '')
2021-09-06 01:04:21.351821 I [72416:4380] pact-broker -- (0.000137s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 01:04:21.352123 I [72416:4380] pact-broker -- (0.000045s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:04:21.352277 I [72416:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 1)
2021-09-06 01:04:21.352372 I [72416:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 01:04:21.352876 I [72416:4380] pact-broker -- (0.000479s) COMMIT
2021-09-06 01:04:21.353179 I [72416:4380] pact-broker -- (0.000094s) SELECT * FROM `currently_deployed_version_ids` WHERE (`currently_deployed_version_ids`.`deployed_version_id` = 1) LIMIT 1
2021-09-06 01:04:21.353751 I [72416:4380] pact-broker -- (0.000529s) DELETE FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 01:04:21.354570 I [72416:4380] pact-broker -- (0.000696s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.353797' WHERE ((`id` = 1) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.354811 I [72416:4380] pact-broker -- (0.000206s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 01:04:21.355412 I [72416:4380] pact-broker -- (0.000513s) UPDATE `deployed_versions` SET `created_at` = '2021-08-20 21:04:21.349879' WHERE (`id` = 1)
2021-09-06 01:04:21.356089 I [72416:4380] pact-broker -- (0.000589s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-20 21:04:21.349879' WHERE (`id` = 1)
2021-09-06 01:04:21.356671 I [72416:4380] pact-broker -- (0.000081s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.356921 I [72416:4380] pact-broker -- (0.000081s) SELECT * FROM `pact_versions` WHERE ((`sha` = '64cae7e32cafa53621693e516338df283a2160f1') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.357340 I [72416:4380] pact-broker -- (0.000079s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:04:21.357398 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.357723 I [72416:4380] pact-broker -- (0.000221s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '64cae7e32cafa53621693e516338df283a2160f1', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:04:21.356933', 1, 0)
2021-09-06 01:04:21.357939 I [72416:4380] pact-broker -- (0.000108s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 01:04:21.358440 I [72416:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 01:04:21.358904 I [72416:4380] pact-broker -- (0.000091s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:04:21.359016 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.359358 I [72416:4380] pact-broker -- (0.000250s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (1, 2, 1, 1, 1, 101, '2021-09-05 21:04:21.358926')
2021-09-06 01:04:21.359517 I [72416:4380] pact-broker -- (0.000100s) SELECT * FROM `pact_publications` WHERE `id` = 1
2021-09-06 01:04:21.359997 I [72416:4380] pact-broker -- (0.000455s) COMMIT
2021-09-06 01:04:21.360262 I [72416:4380] pact-broker -- (0.000182s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:04:21.360624 I [72416:4380] pact-broker -- (0.000077s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.360674 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.360985 I [72416:4380] pact-broker -- (0.000227s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (1, 2, 1, 1, 1, '2021-08-20 21:04:21.340702')
2021-09-06 01:04:21.361177 I [72416:4380] pact-broker -- (0.000099s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 01:04:21.361617 I [72416:4380] pact-broker -- (0.000414s) COMMIT
2021-09-06 01:04:21.361839 I [72416:4380] pact-broker -- (0.000174s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 01:04:21.362073 I [72416:4380] pact-broker -- (0.000166s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.362309 I [72416:4380] pact-broker -- (0.000156s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.362795 I [72416:4380] pact-broker -- (0.000242s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 01:04:21.363122 I [72416:4380] pact-broker -- (0.000130s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.363404 I [72416:4380] pact-broker -- (0.000094s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.363732 I [72416:4380] pact-broker -- (0.000144s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 01:04:21.363860 I [72416:4380] pact-broker -- (0.000069s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.364519 I [72416:4380] pact-broker -- (0.000570s) UPDATE `pact_publications` SET `created_at` = '2021-08-20 21:04:21.356291' WHERE (`id` = 1)
2021-09-06 01:04:21.365248 I [72416:4380] pact-broker -- (0.000627s) UPDATE `pact_versions` SET `created_at` = '2021-08-20 21:04:21.356291' WHERE (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')
2021-09-06 01:04:21.365885 I [72416:4380] pact-broker -- (0.000523s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-20 21:04:21.356291' WHERE (`consumer_version_id` = 1)
2021-09-06 01:04:21.366140 I [72416:4380] pact-broker -- (0.000152s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:04:21.366345 I [72416:4380] pact-broker -- (0.000167s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.366556 I [72416:4380] pact-broker -- (0.000172s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.366747 I [72416:4380] pact-broker -- (0.000153s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:04:21.367066 I [72416:4380] pact-broker -- (0.000273s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 01:04:21.367332 I [72416:4380] pact-broker -- (0.000118s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.367522 I [72416:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.367717 I [72416:4380] pact-broker -- (0.000152s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 01:04:21.368009 I [72416:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 01:04:21.368475 I [72416:4380] pact-broker -- (0.000142s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:04:21.368656 I [72416:4380] pact-broker -- (0.000075s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.368682 I [72416:4380] PactBroker::Versions::Repository -- Upserting version 1315e0b1924cb6f42751f977789be3559373033a for pacticipant_id=2
2021-09-06 01:04:21.368926 I [72416:4380] pact-broker -- (0.000076s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.369001 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.369377 I [72416:4380] pact-broker -- (0.000279s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('1315e0b1924cb6f42751f977789be3559373033a', 2, '2021-09-05 21:04:21.368686', '2021-09-05 21:04:21.368947')
2021-09-06 01:04:21.369570 I [72416:4380] pact-broker -- (0.000136s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 01:04:21.369793 I [72416:4380] pact-broker -- (0.000153s) SELECT * FROM `versions` WHERE (`id` = 2) LIMIT 1
2021-09-06 01:04:21.369876 I [72416:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.369993 I [72416:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.370050 I [72416:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.370135 I [72416:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 102 WHERE (`id` = 2)
2021-09-06 01:04:21.370289 I [72416:4380] pact-broker -- (0.000126s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 01:04:21.370808 I [72416:4380] pact-broker -- (0.000492s) COMMIT
2021-09-06 01:04:21.371044 I [72416:4380] pact-broker -- (0.000095s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 2) ORDER BY `created_at`
2021-09-06 01:04:21.371154 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.371562 I [72416:4380] pact-broker -- (0.000291s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-08-21 21:04:21.368035', 1, 2, 2, 1, '2021-09-05 21:04:21.371073', '{"some":"results"}', '[]')
2021-09-06 01:04:21.371779 I [72416:4380] pact-broker -- (0.000157s) SELECT * FROM `verifications` WHERE `id` = 1
2021-09-06 01:04:21.372364 I [72416:4380] pact-broker -- (0.000540s) COMMIT
2021-09-06 01:04:21.372705 I [72416:4380] pact-broker -- (0.000089s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:04:21.372757 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.373075 I [72416:4380] pact-broker -- (0.000233s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 2, 2, 1, 1, '2021-09-05 21:04:21.371073')
2021-09-06 01:04:21.373306 I [72416:4380] pact-broker -- (0.000137s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:04:21.373828 I [72416:4380] pact-broker -- (0.000495s) COMMIT
2021-09-06 01:04:21.374027 I [72416:4380] pact-broker -- (0.000151s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:04:21.374298 I [72416:4380] pact-broker -- (0.000171s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '1315e0b1924cb6f42751f977789be3559373033a')) LIMIT 1
2021-09-06 01:04:21.374366 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.374724 I [72416:4380] pact-broker -- (0.000201s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.374377', `branch` = 'main' WHERE (`id` = 2)
2021-09-06 01:04:21.375352 I [72416:4380] pact-broker -- (0.000596s) COMMIT
2021-09-06 01:04:21.376102 I [72416:4380] pact-broker -- (0.000637s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 1)
2021-09-06 01:04:21.376790 I [72416:4380] pact-broker -- (0.000591s) UPDATE `versions` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 2)
2021-09-06 01:04:21.377439 I [72416:4380] pact-broker -- (0.000562s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 2)
2021-09-06 01:04:21.377680 I [72416:4380] pact-broker -- (0.000152s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:04:21.378366 I [72416:4380] pact-broker -- (0.000594s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2))
2021-09-06 01:04:21.378747 I [72416:4380] pact-broker -- (0.000223s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:04:21.379027 I [72416:4380] pact-broker -- (0.000119s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:04:21.379233 I [72416:4380] pact-broker -- (0.000164s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.379453 I [72416:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.379292' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.379616 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.379942 I [72416:4380] pact-broker -- (0.000216s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('d59bde79-4c34-4b42-b153-addcbf535c0c', 2, 2, 2, NULL, '2021-09-05 21:04:21.379544', '2021-09-05 21:04:21.379544', '')
2021-09-06 01:04:21.380142 I [72416:4380] pact-broker -- (0.000138s) SELECT * FROM `deployed_versions` WHERE `id` = 2
2021-09-06 01:04:21.380364 I [72416:4380] pact-broker -- (0.000084s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:04:21.380525 I [72416:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 2, 2, '', 2)
2021-09-06 01:04:21.380622 I [72416:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 2
2021-09-06 01:04:21.381101 I [72416:4380] pact-broker -- (0.000453s) COMMIT
2021-09-06 01:04:21.381819 I [72416:4380] pact-broker -- (0.000628s) UPDATE `deployed_versions` SET `created_at` = '2021-08-21 21:04:21.378388' WHERE (`id` = 2)
2021-09-06 01:04:21.382487 I [72416:4380] pact-broker -- (0.000580s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-21 21:04:21.378388' WHERE (`id` = 2)
2021-09-06 01:04:21.382800 I [72416:4380] pact-broker -- (0.000186s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:04:21.383111 I [72416:4380] pact-broker -- (0.000118s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:04:21.383297 I [72416:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.383162' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.383439 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.383746 I [72416:4380] pact-broker -- (0.000209s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('ce562ddb-af72-45f7-a05b-5f36f40b03de', 1, 1, 2, NULL, '2021-09-05 21:04:21.383369', '2021-09-05 21:04:21.383369', '')
2021-09-06 01:04:21.383942 I [72416:4380] pact-broker -- (0.000139s) SELECT * FROM `deployed_versions` WHERE `id` = 3
2021-09-06 01:04:21.384149 I [72416:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:04:21.384296 I [72416:4380] pact-broker -- (0.000074s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 3)
2021-09-06 01:04:21.384393 I [72416:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 3
2021-09-06 01:04:21.384863 I [72416:4380] pact-broker -- (0.000447s) COMMIT
2021-09-06 01:04:21.385489 I [72416:4380] pact-broker -- (0.000538s) UPDATE `deployed_versions` SET `created_at` = '2021-08-22 21:04:21.382497' WHERE (`id` = 3)
2021-09-06 01:04:21.386104 I [72416:4380] pact-broker -- (0.000528s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-22 21:04:21.382497' WHERE (`id` = 3)
2021-09-06 01:04:21.386464 I [72416:4380] pact-broker -- (0.000178s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:04:21.386645 I [72416:4380] pact-broker -- (0.000077s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.386660 I [72416:4380] PactBroker::Versions::Repository -- Upserting version 480e5aeb30467856ca995d0024d2c1800b0719e5 for pacticipant_id=2
2021-09-06 01:04:21.386875 I [72416:4380] pact-broker -- (0.000073s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.386943 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.387308 I [72416:4380] pact-broker -- (0.000276s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('480e5aeb30467856ca995d0024d2c1800b0719e5', 2, '2021-09-05 21:04:21.386664', '2021-09-05 21:04:21.386893')
2021-09-06 01:04:21.387531 I [72416:4380] pact-broker -- (0.000167s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 01:04:21.387725 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `versions` WHERE (`id` = 3) LIMIT 1
2021-09-06 01:04:21.387806 I [72416:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.387924 I [72416:4380] pact-broker -- (0.000052s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.387980 I [72416:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.388081 I [72416:4380] pact-broker -- (0.000028s) UPDATE `versions` SET `order` = 103 WHERE (`id` = 3)
2021-09-06 01:04:21.388235 I [72416:4380] pact-broker -- (0.000128s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 01:04:21.388753 I [72416:4380] pact-broker -- (0.000494s) COMMIT
2021-09-06 01:04:21.388933 I [72416:4380] pact-broker -- (0.000091s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 3) ORDER BY `created_at`
2021-09-06 01:04:21.389027 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.389414 I [72416:4380] pact-broker -- (0.000281s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (0, 2, 0, '2021-08-22 21:04:21.386114', 1, 3, 2, 1, '2021-09-05 21:04:21.388959', '{"some":"results"}', '[]')
2021-09-06 01:04:21.389681 I [72416:4380] pact-broker -- (0.000210s) SELECT * FROM `verifications` WHERE `id` = 2
2021-09-06 01:04:21.390229 I [72416:4380] pact-broker -- (0.000521s) COMMIT
2021-09-06 01:04:21.390474 I [72416:4380] pact-broker -- (0.000083s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:04:21.390523 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.390833 I [72416:4380] pact-broker -- (0.000225s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 3, 2, 2, 1, '2021-09-05 21:04:21.388959')
2021-09-06 01:04:21.391027 I [72416:4380] pact-broker -- (0.000105s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:04:21.391520 I [72416:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 01:04:21.391738 I [72416:4380] pact-broker -- (0.000140s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:04:21.392007 I [72416:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5')) LIMIT 1
2021-09-06 01:04:21.392072 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.392380 I [72416:4380] pact-broker -- (0.000191s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.392080', `branch` = 'main' WHERE (`id` = 3)
2021-09-06 01:04:21.392872 I [72416:4380] pact-broker -- (0.000466s) COMMIT
2021-09-06 01:04:21.393536 I [72416:4380] pact-broker -- (0.000572s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 2)
2021-09-06 01:04:21.394147 I [72416:4380] pact-broker -- (0.000521s) UPDATE `versions` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 3)
2021-09-06 01:04:21.394776 I [72416:4380] pact-broker -- (0.000520s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 3)
2021-09-06 01:04:21.395040 I [72416:4380] pact-broker -- (0.000144s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:04:21.395654 I [72416:4380] pact-broker -- (0.000519s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3))
2021-09-06 01:04:21.395810 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.396230 I [72416:4380] pact-broker -- (0.000296s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 3, '2021-09-05 21:04:21.395743', '2021-09-05 21:04:21.395743', 103, 2)
2021-09-06 01:04:21.396496 I [72416:4380] pact-broker -- (0.000136s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 3)) LIMIT 1
2021-09-06 01:04:21.396980 I [72416:4380] pact-broker -- (0.000458s) COMMIT
2021-09-06 01:04:21.397605 I [72416:4380] pact-broker -- (0.000522s) UPDATE `tags` SET `created_at` = '2021-08-22 21:04:21.395675' WHERE ((`name` = 'main') AND (`version_id` = 3))
2021-09-06 01:04:21.398221 I [72416:4380] pact-broker -- (0.000529s) UPDATE `tags` SET `updated_at` = '2021-08-22 21:04:21.395675' WHERE (`name` = 'main')
2021-09-06 01:04:21.398365 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.398744 I [72416:4380] pact-broker -- (0.000282s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('725c6ccb7cf7efc51b4394f9828585eea9c379d9', 1, 'feat/new-thing', NULL, '2021-09-05 21:04:21.398301', '2021-09-05 21:04:21.398301')
2021-09-06 01:04:21.398979 I [72416:4380] pact-broker -- (0.000174s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:04:21.399172 I [72416:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:04:21.399255 I [72416:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.399373 I [72416:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.399429 I [72416:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.399513 I [72416:4380] pact-broker -- (0.000028s) UPDATE `versions` SET `order` = 104 WHERE (`id` = 4)
2021-09-06 01:04:21.399694 I [72416:4380] pact-broker -- (0.000156s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:04:21.400182 I [72416:4380] pact-broker -- (0.000464s) COMMIT
2021-09-06 01:04:21.400829 I [72416:4380] pact-broker -- (0.000561s) UPDATE `versions` SET `created_at` = '2021-08-29 21:04:21.398231' WHERE (`id` = 4)
2021-09-06 01:04:21.401384 I [72416:4380] pact-broker -- (0.000469s) UPDATE `versions` SET `updated_at` = '2021-08-29 21:04:21.398231' WHERE (`id` = 4)
2021-09-06 01:04:21.401514 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.401922 I [72416:4380] pact-broker -- (0.000293s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 4, '2021-09-05 21:04:21.401445', '2021-09-05 21:04:21.401445', 104, 1)
2021-09-06 01:04:21.402184 I [72416:4380] pact-broker -- (0.000137s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4)) LIMIT 1
2021-09-06 01:04:21.402667 I [72416:4380] pact-broker -- (0.000459s) COMMIT
2021-09-06 01:04:21.403290 I [72416:4380] pact-broker -- (0.000522s) UPDATE `tags` SET `created_at` = '2021-08-29 21:04:21.401394' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4))
2021-09-06 01:04:21.403917 I [72416:4380] pact-broker -- (0.000539s) UPDATE `tags` SET `updated_at` = '2021-08-29 21:04:21.401394' WHERE (`name` = 'feat-new-thing')
2021-09-06 01:04:21.404345 I [72416:4380] pact-broker -- (0.000092s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.404598 I [72416:4380] pact-broker -- (0.000082s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.404915 I [72416:4380] pact-broker -- (0.000079s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')) LIMIT 1
2021-09-06 01:04:21.404974 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.405293 I [72416:4380] pact-broker -- (0.000223s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:04:21.404607', 1, 0)
2021-09-06 01:04:21.405459 I [72416:4380] pact-broker -- (0.000107s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:04:21.405857 I [72416:4380] pact-broker -- (0.000373s) COMMIT
2021-09-06 01:04:21.406136 I [72416:4380] pact-broker -- (0.000090s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:04:21.406215 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.406553 I [72416:4380] pact-broker -- (0.000250s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (4, 2, 1, 2, 1, 104, '2021-09-05 21:04:21.406156')
2021-09-06 01:04:21.406753 I [72416:4380] pact-broker -- (0.000105s) SELECT * FROM `pact_publications` WHERE `id` = 2
2021-09-06 01:04:21.407203 I [72416:4380] pact-broker -- (0.000425s) COMMIT
2021-09-06 01:04:21.407434 I [72416:4380] pact-broker -- (0.000178s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:04:21.407656 I [72416:4380] pact-broker -- (0.000071s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.407705 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.408050 I [72416:4380] pact-broker -- (0.000230s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (4, 2, 2, 1, 2, '2021-08-29 21:04:21.398231')
2021-09-06 01:04:21.408247 I [72416:4380] pact-broker -- (0.000102s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 01:04:21.408692 I [72416:4380] pact-broker -- (0.000421s) COMMIT
2021-09-06 01:04:21.408872 I [72416:4380] pact-broker -- (0.000136s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 01:04:21.409079 I [72416:4380] pact-broker -- (0.000165s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.409302 I [72416:4380] pact-broker -- (0.000184s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.409520 I [72416:4380] pact-broker -- (0.000165s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 01:04:21.409812 I [72416:4380] pact-broker -- (0.000127s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.410028 I [72416:4380] pact-broker -- (0.000101s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.410338 I [72416:4380] pact-broker -- (0.000136s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:04:21.410450 I [72416:4380] pact-broker -- (0.000060s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.411078 I [72416:4380] pact-broker -- (0.000542s) UPDATE `pact_publications` SET `created_at` = '2021-08-29 21:04:21.404093' WHERE (`id` = 2)
2021-09-06 01:04:21.411655 I [72416:4380] pact-broker -- (0.000484s) UPDATE `pact_versions` SET `created_at` = '2021-08-29 21:04:21.404093' WHERE (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')
2021-09-06 01:04:21.412295 I [72416:4380] pact-broker -- (0.000515s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-29 21:04:21.404093' WHERE (`consumer_version_id` = 4)
2021-09-06 01:04:21.412508 I [72416:4380] pact-broker -- (0.000146s) SELECT * FROM `pact_publications` WHERE (`id` = 2) LIMIT 1
2021-09-06 01:04:21.412709 I [72416:4380] pact-broker -- (0.000161s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.412924 I [72416:4380] pact-broker -- (0.000154s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.413128 I [72416:4380] pact-broker -- (0.000166s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:04:21.413339 I [72416:4380] pact-broker -- (0.000168s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 01:04:21.413636 I [72416:4380] pact-broker -- (0.000144s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.413828 I [72416:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.414001 I [72416:4380] pact-broker -- (0.000130s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:04:21.414293 I [72416:4380] pact-broker -- (0.000133s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:04:21.414500 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.414882 I [72416:4380] pact-broker -- (0.000282s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('6c992f831da299364cf31be6008ee4752189f6d4', 1, 'feat/new-thing', NULL, '2021-09-05 21:04:21.414431', '2021-09-05 21:04:21.414431')
2021-09-06 01:04:21.415079 I [72416:4380] pact-broker -- (0.000139s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:04:21.415270 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `versions` WHERE (`id` = 5) LIMIT 1
2021-09-06 01:04:21.415376 I [72416:4380] pact-broker -- (0.000065s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.415493 I [72416:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.415550 I [72416:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.415636 I [72416:4380] pact-broker -- (0.000032s) UPDATE `versions` SET `order` = 105 WHERE (`id` = 5)
2021-09-06 01:04:21.415789 I [72416:4380] pact-broker -- (0.000129s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:04:21.416303 I [72416:4380] pact-broker -- (0.000487s) COMMIT
2021-09-06 01:04:21.416978 I [72416:4380] pact-broker -- (0.000581s) UPDATE `versions` SET `created_at` = '2021-08-30 21:04:21.414319' WHERE (`id` = 5)
2021-09-06 01:04:21.417601 I [72416:4380] pact-broker -- (0.000530s) UPDATE `versions` SET `updated_at` = '2021-08-30 21:04:21.414319' WHERE (`id` = 5)
2021-09-06 01:04:21.417775 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.418199 I [72416:4380] pact-broker -- (0.000303s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 5, '2021-09-05 21:04:21.417671', '2021-09-05 21:04:21.417671', 105, 1)
2021-09-06 01:04:21.418440 I [72416:4380] pact-broker -- (0.000142s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5)) LIMIT 1
2021-09-06 01:04:21.418911 I [72416:4380] pact-broker -- (0.000444s) COMMIT
2021-09-06 01:04:21.419579 I [72416:4380] pact-broker -- (0.000561s) UPDATE `tags` SET `created_at` = '2021-08-30 21:04:21.417612' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5))
2021-09-06 01:04:21.420202 I [72416:4380] pact-broker -- (0.000533s) UPDATE `tags` SET `updated_at` = '2021-08-30 21:04:21.417612' WHERE (`name` = 'feat-new-thing')
2021-09-06 01:04:21.420536 I [72416:4380] pact-broker -- (0.000075s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.420863 I [72416:4380] pact-broker -- (0.000142s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.421132 I [72416:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:04:21.421209 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.421551 I [72416:4380] pact-broker -- (0.000249s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (5, 2, 1, 2, 1, 105, '2021-09-05 21:04:21.421150')
2021-09-06 01:04:21.421708 I [72416:4380] pact-broker -- (0.000099s) SELECT * FROM `pact_publications` WHERE `id` = 3
2021-09-06 01:04:21.422250 I [72416:4380] pact-broker -- (0.000516s) COMMIT
2021-09-06 01:04:21.422517 I [72416:4380] pact-broker -- (0.000215s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:04:21.422742 I [72416:4380] pact-broker -- (0.000073s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.422791 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.423103 I [72416:4380] pact-broker -- (0.000230s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (5, 2, 3, 1, 2, '2021-08-30 21:04:21.414319')
2021-09-06 01:04:21.423291 I [72416:4380] pact-broker -- (0.000097s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 01:04:21.423775 I [72416:4380] pact-broker -- (0.000459s) COMMIT
2021-09-06 01:04:21.423962 I [72416:4380] pact-broker -- (0.000143s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 01:04:21.424210 I [72416:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.424407 I [72416:4380] pact-broker -- (0.000157s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.424657 I [72416:4380] pact-broker -- (0.000200s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 01:04:21.424937 I [72416:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.425131 I [72416:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.425433 I [72416:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:04:21.425542 I [72416:4380] pact-broker -- (0.000060s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.426184 I [72416:4380] pact-broker -- (0.000536s) UPDATE `pact_publications` SET `created_at` = '2021-08-29 21:04:21.420323' WHERE (`id` = 3)
2021-09-06 01:04:21.426799 I [72416:4380] pact-broker -- (0.000521s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-29 21:04:21.420323' WHERE (`consumer_version_id` = 5)
2021-09-06 01:04:21.427015 I [72416:4380] pact-broker -- (0.000150s) SELECT * FROM `pact_publications` WHERE (`id` = 3) LIMIT 1
2021-09-06 01:04:21.427214 I [72416:4380] pact-broker -- (0.000162s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.427426 I [72416:4380] pact-broker -- (0.000174s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.427617 I [72416:4380] pact-broker -- (0.000152s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:04:21.427843 I [72416:4380] pact-broker -- (0.000179s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 01:04:21.428113 I [72416:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.428302 I [72416:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.428506 I [72416:4380] pact-broker -- (0.000160s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:04:21.428799 I [72416:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:04:21.428967 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.429351 I [72416:4380] pact-broker -- (0.000286s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('7bd4d9173522826dc3e8704fd62dde0424f4c827', 1, 'main', NULL, '2021-09-05 21:04:21.428900', '2021-09-05 21:04:21.428900')
2021-09-06 01:04:21.429571 I [72416:4380] pact-broker -- (0.000155s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:04:21.429765 I [72416:4380] pact-broker -- (0.000127s) SELECT * FROM `versions` WHERE (`id` = 6) LIMIT 1
2021-09-06 01:04:21.429845 I [72416:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.429965 I [72416:4380] pact-broker -- (0.000056s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.430021 I [72416:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.430106 I [72416:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 106 WHERE (`id` = 6)
2021-09-06 01:04:21.430273 I [72416:4380] pact-broker -- (0.000141s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:04:21.430734 I [72416:4380] pact-broker -- (0.000435s) COMMIT
2021-09-06 01:04:21.431407 I [72416:4380] pact-broker -- (0.000578s) UPDATE `versions` SET `created_at` = '2021-09-04 21:04:21.428827' WHERE (`id` = 6)
2021-09-06 01:04:21.432010 I [72416:4380] pact-broker -- (0.000495s) UPDATE `versions` SET `updated_at` = '2021-09-04 21:04:21.428827' WHERE (`id` = 6)
2021-09-06 01:04:21.432147 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.432598 I [72416:4380] pact-broker -- (0.000301s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 6, '2021-09-05 21:04:21.432079', '2021-09-05 21:04:21.432079', 106, 1)
2021-09-06 01:04:21.432836 I [72416:4380] pact-broker -- (0.000139s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 6)) LIMIT 1
2021-09-06 01:04:21.433338 I [72416:4380] pact-broker -- (0.000477s) COMMIT
2021-09-06 01:04:21.433981 I [72416:4380] pact-broker -- (0.000540s) UPDATE `tags` SET `created_at` = '2021-09-04 21:04:21.432020' WHERE ((`name` = 'main') AND (`version_id` = 6))
2021-09-06 01:04:21.434552 I [72416:4380] pact-broker -- (0.000482s) UPDATE `tags` SET `updated_at` = '2021-09-04 21:04:21.432020' WHERE (`name` = 'main')
2021-09-06 01:04:21.434958 I [72416:4380] pact-broker -- (0.000076s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.435226 I [72416:4380] pact-broker -- (0.000098s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.435518 I [72416:4380] pact-broker -- (0.000075s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 01:04:21.435574 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:21.435875 I [72416:4380] pact-broker -- (0.000213s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:04:21.435235', 3, 0)
2021-09-06 01:04:21.436056 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:04:21.436492 I [72416:4380] pact-broker -- (0.000411s) COMMIT
2021-09-06 01:04:21.436749 I [72416:4380] pact-broker -- (0.000085s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:04:21.436825 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.437161 I [72416:4380] pact-broker -- (0.000246s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (6, 2, 1, 3, 1, 106, '2021-09-05 21:04:21.436768')
2021-09-06 01:04:21.437320 I [72416:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 4
2021-09-06 01:04:21.437788 I [72416:4380] pact-broker -- (0.000443s) COMMIT
2021-09-06 01:04:21.438043 I [72416:4380] pact-broker -- (0.000210s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:04:21.438261 I [72416:4380] pact-broker -- (0.000070s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.438309 I [72416:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:04:21.438614 I [72416:4380] pact-broker -- (0.000226s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (6, 2, 4, 1, 3, '2021-09-04 21:04:21.428827')
2021-09-06 01:04:21.438840 I [72416:4380] pact-broker -- (0.000133s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 01:04:21.439292 I [72416:4380] pact-broker -- (0.000428s) COMMIT
2021-09-06 01:04:21.439476 I [72416:4380] pact-broker -- (0.000143s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 01:04:21.439686 I [72416:4380] pact-broker -- (0.000170s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.439910 I [72416:4380] pact-broker -- (0.000187s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.440121 I [72416:4380] pact-broker -- (0.000159s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 01:04:21.440402 I [72416:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.440594 I [72416:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.440905 I [72416:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:04:21.441013 I [72416:4380] pact-broker -- (0.000060s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.441730 I [72416:4380] pact-broker -- (0.000632s) UPDATE `pact_publications` SET `created_at` = '2021-09-04 21:04:21.434686' WHERE (`id` = 4)
2021-09-06 01:04:21.442417 I [72416:4380] pact-broker -- (0.000584s) UPDATE `pact_versions` SET `created_at` = '2021-09-04 21:04:21.434686' WHERE (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')
2021-09-06 01:04:21.443062 I [72416:4380] pact-broker -- (0.000547s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-04 21:04:21.434686' WHERE (`consumer_version_id` = 6)
2021-09-06 01:04:21.443293 I [72416:4380] pact-broker -- (0.000151s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:04:21.443492 I [72416:4380] pact-broker -- (0.000161s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.443701 I [72416:4380] pact-broker -- (0.000170s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.443890 I [72416:4380] pact-broker -- (0.000151s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:04:21.444095 I [72416:4380] pact-broker -- (0.000160s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 01:04:21.444392 I [72416:4380] pact-broker -- (0.000122s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.444583 I [72416:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.444752 I [72416:4380] pact-broker -- (0.000127s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:04:21.445069 I [72416:4380] pact-broker -- (0.000139s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:04:21.445393 I [72416:4380] pact-broker -- (0.000137s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 01:04:21.445586 I [72416:4380] pact-broker -- (0.000092s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.445601 I [72416:4380] PactBroker::Versions::Repository -- Upserting version 4fdf20082263d4c5038355a3b734be1c0054d1e1 for pacticipant_id=2
2021-09-06 01:04:21.445821 I [72416:4380] pact-broker -- (0.000077s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:04:21.445902 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.446287 I [72416:4380] pact-broker -- (0.000283s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('4fdf20082263d4c5038355a3b734be1c0054d1e1', 2, '2021-09-05 21:04:21.445605', '2021-09-05 21:04:21.445844')
2021-09-06 01:04:21.446503 I [72416:4380] pact-broker -- (0.000159s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 01:04:21.446694 I [72416:4380] pact-broker -- (0.000123s) SELECT * FROM `versions` WHERE (`id` = 7) LIMIT 1
2021-09-06 01:04:21.446775 I [72416:4380] pact-broker -- (0.000041s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.446891 I [72416:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.446947 I [72416:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.447031 I [72416:4380] pact-broker -- (0.000028s) UPDATE `versions` SET `order` = 107 WHERE (`id` = 7)
2021-09-06 01:04:21.447200 I [72416:4380] pact-broker -- (0.000144s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 01:04:21.447809 I [72416:4380] pact-broker -- (0.000581s) COMMIT
2021-09-06 01:04:21.448011 I [72416:4380] pact-broker -- (0.000102s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 7) ORDER BY `created_at`
2021-09-06 01:04:21.448116 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.448521 I [72416:4380] pact-broker -- (0.000294s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-09-04 21:04:21.445097', 3, 7, 2, 1, '2021-09-05 21:04:21.448040', '{"some":"results"}', '[]')
2021-09-06 01:04:21.448771 I [72416:4380] pact-broker -- (0.000189s) SELECT * FROM `verifications` WHERE `id` = 3
2021-09-06 01:04:21.449429 I [72416:4380] pact-broker -- (0.000629s) COMMIT
2021-09-06 01:04:21.449701 I [72416:4380] pact-broker -- (0.000090s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:04:21.449753 I [72416:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:04:21.450076 I [72416:4380] pact-broker -- (0.000235s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (3, 7, 2, 3, 1, '2021-09-05 21:04:21.448040')
2021-09-06 01:04:21.450275 I [72416:4380] pact-broker -- (0.000105s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:04:21.450995 I [72416:4380] pact-broker -- (0.000690s) COMMIT
2021-09-06 01:04:21.451223 I [72416:4380] pact-broker -- (0.000180s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:04:21.451494 I [72416:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1')) LIMIT 1
2021-09-06 01:04:21.451561 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.451878 I [72416:4380] pact-broker -- (0.000196s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.451571', `branch` = 'main' WHERE (`id` = 7)
2021-09-06 01:04:21.452452 I [72416:4380] pact-broker -- (0.000547s) COMMIT
2021-09-06 01:04:21.453222 I [72416:4380] pact-broker -- (0.000671s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 3)
2021-09-06 01:04:21.454203 I [72416:4380] pact-broker -- (0.000859s) UPDATE `versions` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 7)
2021-09-06 01:04:21.454977 I [72416:4380] pact-broker -- (0.000679s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:04:21.332085' WHERE (`id` = 7)
2021-09-06 01:04:21.455191 I [72416:4380] pact-broker -- (0.000154s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:04:21.455968 I [72416:4380] pact-broker -- (0.000683s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:04:21.332085' WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7))
2021-09-06 01:04:21.456322 I [72416:4380] pact-broker -- (0.000197s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 01:04:21.456616 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 7) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:04:21.456883 I [72416:4380] pact-broker -- (0.000223s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.457183 I [72416:4380] pact-broker -- (0.000085s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.456989' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.457401 I [72416:4380] pact-broker -- (0.000020s) BEGIN
2021-09-06 01:04:21.457854 I [72416:4380] pact-broker -- (0.000305s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('28ec1758-a22b-4f7c-8037-e62dd8e8d7eb', 7, 2, 1, NULL, '2021-09-05 21:04:21.457303', '2021-09-05 21:04:21.457303', '')
2021-09-06 01:04:21.458106 I [72416:4380] pact-broker -- (0.000171s) SELECT * FROM `deployed_versions` WHERE `id` = 4
2021-09-06 01:04:21.458307 I [72416:4380] pact-broker -- (0.000049s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:04:21.458487 I [72416:4380] pact-broker -- (0.000100s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 1, 7, '', 4)
2021-09-06 01:04:21.458596 I [72416:4380] pact-broker -- (0.000053s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 4
2021-09-06 01:04:21.459181 I [72416:4380] pact-broker -- (0.000554s) COMMIT
2021-09-06 01:04:21.459955 I [72416:4380] pact-broker -- (0.000660s) UPDATE `deployed_versions` SET `created_at` = '2021-09-04 21:04:21.455991' WHERE (`id` = 4)
2021-09-06 01:04:21.460718 I [72416:4380] pact-broker -- (0.000665s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-04 21:04:21.455991' WHERE (`id` = 4)
2021-09-06 01:04:21.460864 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.461313 I [72416:4380] pact-broker -- (0.000309s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 7, '2021-09-05 21:04:21.460794', '2021-09-05 21:04:21.460794', 107, 2)
2021-09-06 01:04:21.461553 I [72416:4380] pact-broker -- (0.000139s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 7)) LIMIT 1
2021-09-06 01:04:21.462209 I [72416:4380] pact-broker -- (0.000627s) COMMIT
2021-09-06 01:04:21.463189 I [72416:4380] pact-broker -- (0.000870s) UPDATE `tags` SET `created_at` = '2021-09-04 21:04:21.460729' WHERE ((`name` = 'main') AND (`version_id` = 7))
2021-09-06 01:04:21.464065 I [72416:4380] pact-broker -- (0.000776s) UPDATE `tags` SET `updated_at` = '2021-09-04 21:04:21.460729' WHERE (`name` = 'main')
2021-09-06 01:04:21.464270 I [72416:4380] pact-broker -- (0.000017s) BEGIN
2021-09-06 01:04:21.464742 I [72416:4380] pact-broker -- (0.000372s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('5556b8149bf8bac76bc30f50a8a2dd4c22c85f30', 1, 'main', NULL, '2021-09-05 21:04:21.464183', '2021-09-05 21:04:21.464183')
2021-09-06 01:04:21.464945 I [72416:4380] pact-broker -- (0.000143s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:04:21.465139 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `versions` WHERE (`id` = 8) LIMIT 1
2021-09-06 01:04:21.465245 I [72416:4380] pact-broker -- (0.000066s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.465369 I [72416:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:04:21.465426 I [72416:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:04:21.465512 I [72416:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 108 WHERE (`id` = 8)
2021-09-06 01:04:21.465684 I [72416:4380] pact-broker -- (0.000147s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:04:21.466249 I [72416:4380] pact-broker -- (0.000539s) COMMIT
2021-09-06 01:04:21.467020 I [72416:4380] pact-broker -- (0.000668s) UPDATE `versions` SET `created_at` = '2021-09-05 09:04:21.464079' WHERE (`id` = 8)
2021-09-06 01:04:21.467732 I [72416:4380] pact-broker -- (0.000619s) UPDATE `versions` SET `updated_at` = '2021-09-05 09:04:21.464079' WHERE (`id` = 8)
2021-09-06 01:04:21.467871 I [72416:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:04:21.468291 I [72416:4380] pact-broker -- (0.000303s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 8, '2021-09-05 21:04:21.467804', '2021-09-05 21:04:21.467804', 108, 1)
2021-09-06 01:04:21.468550 I [72416:4380] pact-broker -- (0.000147s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 8)) LIMIT 1
2021-09-06 01:04:21.469227 I [72416:4380] pact-broker -- (0.000652s) COMMIT
2021-09-06 01:04:21.469871 I [72416:4380] pact-broker -- (0.000528s) UPDATE `tags` SET `created_at` = '2021-09-05 09:04:21.467742' WHERE ((`name` = 'main') AND (`version_id` = 8))
2021-09-06 01:04:21.470479 I [72416:4380] pact-broker -- (0.000521s) UPDATE `tags` SET `updated_at` = '2021-09-05 09:04:21.467742' WHERE (`name` = 'main')
2021-09-06 01:04:21.470825 I [72416:4380] pact-broker -- (0.000191s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 01:04:21.471114 I [72416:4380] pact-broker -- (0.000130s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 8) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:04:21.471328 I [72416:4380] pact-broker -- (0.000173s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.471529 I [72416:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:04:21.471392' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:04:21.471689 I [72416:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:04:21.472005 I [72416:4380] pact-broker -- (0.000212s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('d6ce6d96-1f67-4a72-8f98-1de0eec4e766', 8, 1, 1, NULL, '2021-09-05 21:04:21.471613', '2021-09-05 21:04:21.471613', '')
2021-09-06 01:04:21.472219 I [72416:4380] pact-broker -- (0.000148s) SELECT * FROM `deployed_versions` WHERE `id` = 5
2021-09-06 01:04:21.472402 I [72416:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:04:21.472564 I [72416:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 1, 8, '', 5)
2021-09-06 01:04:21.472659 I [72416:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 5
2021-09-06 01:04:21.473181 I [72416:4380] pact-broker -- (0.000496s) COMMIT
2021-09-06 01:04:21.473812 I [72416:4380] pact-broker -- (0.000533s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 09:04:21.470489' WHERE (`id` = 5)
2021-09-06 01:04:21.474378 I [72416:4380] pact-broker -- (0.000478s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 09:04:21.470489' WHERE (`id` = 5)
2021-09-06 01:04:21.474640 I [72416:4380] pact-broker -- (0.000160s) SELECT * FROM `pact_versions` ORDER BY `id` DESC LIMIT 1
2021-09-06 01:04:21.474739 I [72416:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.475070 I [72416:4380] pact-broker -- (0.000157s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.475344 I [72416:4380] pact-broker -- (0.000074s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:04:21.475431 I [72416:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:04:21.475787 I [72416:4380] pact-broker -- (0.000248s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (8, 2, 1, 3, 1, 108, '2021-09-05 21:04:21.475370')
2021-09-06 01:04:21.475969 I [72416:4380] pact-broker -- (0.000123s) SELECT * FROM `pact_publications` WHERE `id` = 5
2021-09-06 01:04:21.476464 I [72416:4380] pact-broker -- (0.000470s) COMMIT
2021-09-06 01:04:21.476725 I [72416:4380] pact-broker -- (0.000208s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:04:21.476951 I [72416:4380] pact-broker -- (0.000076s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:04:21.477011 I [72416:4380] pact-broker -- (0.000023s) BEGIN
2021-09-06 01:04:21.477329 I [72416:4380] pact-broker -- (0.000227s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (8, 2, 5, 1, 3, '2021-09-05 09:04:21.464079')
2021-09-06 01:04:21.477565 I [72416:4380] pact-broker -- (0.000130s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 01:04:21.477980 I [72416:4380] pact-broker -- (0.000391s) COMMIT
2021-09-06 01:04:21.478176 I [72416:4380] pact-broker -- (0.000152s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 01:04:21.478396 I [72416:4380] pact-broker -- (0.000179s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.478646 I [72416:4380] pact-broker -- (0.000206s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.478903 I [72416:4380] pact-broker -- (0.000203s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 01:04:21.479320 I [72416:4380] pact-broker -- (0.000249s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.479609 I [72416:4380] pact-broker -- (0.000111s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.480067 I [72416:4380] pact-broker -- (0.000272s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:04:21.480278 I [72416:4380] pact-broker -- (0.000063s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:04:21.480943 I [72416:4380] pact-broker -- (0.000576s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 09:04:21.474388' WHERE (`id` = 5)
2021-09-06 01:04:21.481624 I [72416:4380] pact-broker -- (0.000572s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 09:04:21.474388' WHERE (`consumer_version_id` = 8)
2021-09-06 01:04:21.481856 I [72416:4380] pact-broker -- (0.000150s) SELECT * FROM `pact_publications` WHERE (`id` = 5) LIMIT 1
2021-09-06 01:04:21.482097 I [72416:4380] pact-broker -- (0.000203s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:04:21.482320 I [72416:4380] pact-broker -- (0.000182s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:04:21.482529 I [72416:4380] pact-broker -- (0.000171s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:04:21.482764 I [72416:4380] pact-broker -- (0.000183s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 01:04:21.483159 I [72416:4380] pact-broker -- (0.000232s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.483396 I [72416:4380] pact-broker -- (0.000096s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:04:21.483592 I [72416:4380] pact-broker -- (0.000154s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:04:21.484024 I [72416:4380] pact-broker -- (0.000261s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:04:21.484055 I [72416:4380] PactBroker::App -- Marking seed as done
2021-09-06 01:04:21.484728 I [72416:4380] pact-broker -- (0.000084s) SELECT * FROM `config` WHERE (`name` = 'seed_example_data') LIMIT 1
2021-09-06 01:04:21.484999 I [72416:4380] pact-broker -- (0.000027s) BEGIN
2021-09-06 01:04:21.485314 I [72416:4380] pact-broker -- (0.000215s) INSERT INTO `config` (`name`, `type`, `value`, `created_at`, `updated_at`) VALUES ('seed_example_data', 'boolean', '0', '2021-09-05 21:04:21.484914', '2021-09-05 21:04:21.484914')
2021-09-06 01:04:21.485538 I [72416:4380] pact-broker -- (0.000155s) SELECT * FROM `config` WHERE `id` = 1
2021-09-06 01:04:21.486131 I [72416:4380] pact-broker -- (0.000565s) COMMIT
2021-09-06 01:04:21.486160 I [72416:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:04:21.486165 I [72416:4380] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 01:04:21.486259 I [72416:4380] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 01:04:21.486270 I [72416:4380] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 01:04:21.486277 I [72416:4380] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 01:04:21.486283 I [72416:4380] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 01:04:21.486301 I [72416:4380] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 01:04:21.486307 I [72416:4380] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 01:04:21.486313 I [72416:4380] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 01:04:21.486318 I [72416:4380] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 01:04:21.486324 I [72416:4380] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 01:04:21.486336 I [72416:4380] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 01:04:21.486341 I [72416:4380] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 01:04:21.486350 I [72416:4380] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 01:04:21.486357 I [72416:4380] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 01:04:21.486365 I [72416:4380] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 01:04:21.486374 I [72416:4380] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 01:04:21.486382 I [72416:4380] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 01:04:21.486388 I [72416:4380] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 01:04:21.486395 I [72416:4380] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 01:04:21.486405 I [72416:4380] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 01:04:21.486415 I [72416:4380] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 01:04:21.486424 I [72416:4380] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 01:04:21.486433 I [72416:4380] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 01:04:21.486440 I [72416:4380] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 01:04:21.486450 I [72416:4380] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 01:04:21.488649 I [72416:4380] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 01:04:21.488661 I [72416:4380] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 01:04:21.488668 I [72416:4380] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 01:04:21.488675 I [72416:4380] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 01:04:21.488681 I [72416:4380] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 01:04:21.488687 I [72416:4380] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 01:04:21.488693 I [72416:4380] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 01:04:21.488699 I [72416:4380] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 01:04:21.488704 I [72416:4380] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 01:04:21.488710 I [72416:4380] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 01:04:21.488716 I [72416:4380] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 01:04:21.488721 I [72416:4380] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 01:04:21.488731 I [72416:4380] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/pact_broker/log source={:type=>:defaults}
2021-09-06 01:04:21.488737 I [72416:4380] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 01:04:21.488743 I [72416:4380] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 01:04:21.488749 I [72416:4380] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 01:04:21.488757 I [72416:4380] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 01:04:21.488763 I [72416:4380] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 01:04:21.488769 I [72416:4380] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 01:04:21.488775 I [72416:4380] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 01:04:21.488780 I [72416:4380] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 01:04:21.488786 I [72416:4380] pact-broker -- seed_example_data=true source={:type=>:defaults}
2021-09-06 01:04:21.488793 I [72416:4380] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 01:04:21.488799 I [72416:4380] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 01:04:21.488807 I [72416:4380] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 01:04:21.488813 I [72416:4380] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 01:04:21.488818 I [72416:4380] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 01:04:21.488823 I [72416:4380] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 01:04:21.488829 I [72416:4380] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 01:04:21.488835 I [72416:4380] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 01:04:21.488840 I [72416:4380] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 01:04:21.488846 I [72416:4380] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 01:04:21.488851 I [72416:4380] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 01:04:21.488858 I [72416:4380] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 01:04:21.488863 I [72416:4380] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 01:04:21.488871 I [72416:4380] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 01:04:21.488904 I [72416:4380] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 01:04:21.488912 I [72416:4380] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 01:04:21.488919 I [72416:4380] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 01:04:21.488923 I [72416:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:04:21.488931 I [72416:4380] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 01:07:13.735631 I [72416:4380] PactBroker::App -- Mounting HAL browser
2021-09-06 01:07:13.735672 I [72416:4380] PactBroker::App -- Mounting UI
2021-09-06 01:07:14.958636 I [72416:4380] PactBroker::App -- Mounting PactBroker::API
2021-09-06 01:07:15.410659 I [72416:4380] pact-broker -- (0.000220s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:15.410842 I [72416:4380] pact-broker -- (0.000092s) SELECT DISTINCT `consumer_id`, `provider_id` FROM `webhooks`
2021-09-06 01:07:15.411646 I [72416:4380] pact-broker -- (0.000167s) SELECT count(*) AS 'count' FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) LIMIT 1
2021-09-06 01:07:15.412311 I [72416:4380] pact-broker -- (0.000299s) SELECT `pact_publications`.* FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) ORDER BY lower(`consumers`.`name`) ASC, `cv`.`order` DESC, lower(`providers`.`name`) ASC LIMIT 100 OFFSET 0
2021-09-06 01:07:15.412763 I [72416:4380] pact-broker -- (0.000199s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (1))
2021-09-06 01:07:15.413111 I [72416:4380] pact-broker -- (0.000180s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (2))
2021-09-06 01:07:15.413414 I [72416:4380] pact-broker -- (0.000130s) SELECT * FROM `pact_versions` WHERE (`pact_versions`.`id` IN (3))
2021-09-06 01:07:15.414002 I [72416:4380] pact-broker -- (0.000245s) SELECT `verifications`.* FROM `verifications` LEFT JOIN `latest_verification_id_for_pact_version_and_provider_version` AS 'v2' ON ((`verifications`.`pact_version_id` = `v2`.`pact_version_id`) AND (`v2`.`verification_id` > `verifications`.`id`)) WHERE ((`v2`.`verification_id` IS NULL) AND (`verifications`.`pact_version_id` IN (3)))
2021-09-06 01:07:15.414390 I [72416:4380] pact-broker -- (0.000202s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:15.414862 I [72416:4380] pact-broker -- (0.000255s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:15.415236 I [72416:4380] pact-broker -- (0.000197s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:15.415564 I [72416:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:15.416102 I [72416:4380] pact-broker -- (0.000229s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:15.416448 I [72416:4380] pact-broker -- (0.000168s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (7)) ORDER BY `created_at`
2021-09-06 01:07:15.416966 I [72416:4380] pact-broker -- (0.000198s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 2) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 2) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:15.417380 I [72416:4380] pact-broker -- (0.000124s) SELECT * FROM `integrations` WHERE (((`integrations`.`consumer_id` = 1) AND (`integrations`.`provider_id` = 2)))
2021-09-06 01:07:15.417987 I [72416:4380] pact-broker -- (0.000315s) SELECT * FROM `latest_verifications_for_consumer_and_provider` WHERE (((`latest_verifications_for_consumer_and_provider`.`consumer_id` = 1) AND (`latest_verifications_for_consumer_and_provider`.`provider_id` = 2)))
2021-09-06 01:07:15.418268 I [72416:4380] pact-broker -- (0.000160s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:15.418849 I [72416:4380] pact-broker -- (0.000164s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' WHERE (((`triggered_webhooks`.`consumer_id` = 1) AND (`triggered_webhooks`.`provider_id` = 2)))
2021-09-06 01:07:15.419236 I [72416:4380] pact-broker -- (0.000168s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (8))
2021-09-06 01:07:15.419570 I [72416:4380] pact-broker -- (0.000205s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:15.419874 I [72416:4380] pact-broker -- (0.000231s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:15.420091 I [72416:4380] pact-broker -- (0.000103s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:15.420643 I [72416:4380] pact-broker -- (0.000246s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:15.420936 I [72416:4380] pact-broker -- (0.000202s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (8)) ORDER BY `created_at`
2021-09-06 01:07:15.421438 I [72416:4380] pact-broker -- (0.000202s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 1) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 1) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:15.421840 I [72416:4380] pact-broker -- (0.000192s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:07:15.422877 I [72416:4380] pact-broker -- (0.000393s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.*, `tags`.`name` AS 'tag_name' FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) LEFT JOIN (SELECT `pact_publications`.`consumer_id`, `tags`.`name` AS 'tag_name', `tags`.`version_order` FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')))) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`tags`.`name` = `pp2`.`tag_name`) AND (`pp2`.`version_order` > `tags`.`version_order`)) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')) AND (`pp2`.`version_order` IS NULL))) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:15.423285 I [72416:4380] pact-broker -- (0.000106s) SELECT 1 AS 'one' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON ((`pact_publications`.`consumer_version_id` = `cv`.`id`) AND (`cv`.`branch` = 'main') AND (`cv`.`order` > 108)) WHERE ((`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:07:19.699299 I [72416:4380] pact-broker -- (0.000422s) SELECT `latest_pact_publications_by_consumer_versions`.* FROM `latest_pact_publications_by_consumer_versions` WHERE ((`consumer_name` = 'Example App') AND (`provider_name` = 'Example API')) ORDER BY `consumer_version_order` DESC LIMIT 1
2021-09-06 01:07:19.699697 I [72416:4380] pact-broker -- (0.000211s) SELECT * FROM `tags` WHERE (`version_id` = 8)
2021-09-06 01:07:19.700092 I [72416:4380] pact-broker -- (0.000096s) SELECT 1 AS 'one' FROM `tags` INNER JOIN `pact_publications` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` = 'main') AND (`tags`.`version_order` > 108)) WHERE (`pacticipant_id` = 1) LIMIT 1
2021-09-06 01:07:19.700348 I [72416:4380] pact-broker -- (0.000162s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:07:19.700899 I [72416:4380] pact-broker -- (0.000299s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:07:19.701320 I [72416:4380] pact-broker -- (0.000199s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:07:20.146712 I [72416:4380] pact-broker -- (0.000441s) SELECT `latest_pact_publications_by_consumer_versions`.* FROM `latest_pact_publications_by_consumer_versions` WHERE ((`consumer_name` = 'Example App') AND (`provider_name` = 'Example API')) ORDER BY `consumer_version_order` DESC LIMIT 1
2021-09-06 01:07:20.147541 I [72416:4380] pact-broker -- (0.000634s) SELECT * FROM `tags` WHERE (`version_id` = 8)
2021-09-06 01:07:20.148037 I [72416:4380] pact-broker -- (0.000114s) SELECT 1 AS 'one' FROM `tags` INNER JOIN `pact_publications` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` = 'main') AND (`tags`.`version_order` > 108)) WHERE (`pacticipant_id` = 1) LIMIT 1
2021-09-06 01:07:20.148276 I [72416:4380] pact-broker -- (0.000173s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:07:20.149362 I [72416:4380] pact-broker -- (0.000317s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:07:20.150403 I [72416:4380] pact-broker -- (0.000941s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:07:20.150840 I [72416:4380] pact-broker -- (0.000232s) SELECT * FROM `pacticipants` WHERE (`name` = 'Example App')
2021-09-06 01:07:20.151611 I [72416:4380] pact-broker -- (0.000675s) SELECT * FROM `pacticipants` WHERE (`name` = 'Example API')
2021-09-06 01:07:20.152845 I [72416:4380] pact-broker -- (0.000878s) SELECT `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON ((`lp`.`pact_version_id` = `verifications`.`pact_version_id`) AND (`lp`.`consumer_id` = 1) AND (`lp`.`provider_id` = 2)) INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `lp`.`consumer_version_id`) ORDER BY `cv`.`order` DESC, `verifications`.`number` DESC LIMIT 1
2021-09-06 01:07:20.153102 I [72416:4380] pact-broker -- (0.000183s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:07:21.898212 I [72416:4380] pact-broker -- (0.000205s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:21.898418 I [72416:4380] pact-broker -- (0.000109s) SELECT DISTINCT `consumer_id`, `provider_id` FROM `webhooks`
2021-09-06 01:07:21.899292 I [72416:4380] pact-broker -- (0.000207s) SELECT count(*) AS 'count' FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) LIMIT 1
2021-09-06 01:07:21.900059 I [72416:4380] pact-broker -- (0.000341s) SELECT `pact_publications`.* FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) ORDER BY lower(`consumers`.`name`) ASC, `cv`.`order` DESC, lower(`providers`.`name`) ASC LIMIT 100 OFFSET 0
2021-09-06 01:07:21.900404 I [72416:4380] pact-broker -- (0.000205s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (1))
2021-09-06 01:07:21.900670 I [72416:4380] pact-broker -- (0.000191s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (2))
2021-09-06 01:07:21.900923 I [72416:4380] pact-broker -- (0.000153s) SELECT * FROM `pact_versions` WHERE (`pact_versions`.`id` IN (3))
2021-09-06 01:07:21.901297 I [72416:4380] pact-broker -- (0.000260s) SELECT `verifications`.* FROM `verifications` LEFT JOIN `latest_verification_id_for_pact_version_and_provider_version` AS 'v2' ON ((`verifications`.`pact_version_id` = `v2`.`pact_version_id`) AND (`v2`.`verification_id` > `verifications`.`id`)) WHERE ((`v2`.`verification_id` IS NULL) AND (`verifications`.`pact_version_id` IN (3)))
2021-09-06 01:07:21.901604 I [72416:4380] pact-broker -- (0.000194s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:21.901971 I [72416:4380] pact-broker -- (0.000251s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:21.902245 I [72416:4380] pact-broker -- (0.000192s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:21.902450 I [72416:4380] pact-broker -- (0.000094s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:21.903146 I [72416:4380] pact-broker -- (0.000305s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:21.903466 I [72416:4380] pact-broker -- (0.000205s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (7)) ORDER BY `created_at`
2021-09-06 01:07:21.904037 I [72416:4380] pact-broker -- (0.000238s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 2) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 2) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:21.904346 I [72416:4380] pact-broker -- (0.000148s) SELECT * FROM `integrations` WHERE (((`integrations`.`consumer_id` = 1) AND (`integrations`.`provider_id` = 2)))
2021-09-06 01:07:21.904883 I [72416:4380] pact-broker -- (0.000385s) SELECT * FROM `latest_verifications_for_consumer_and_provider` WHERE (((`latest_verifications_for_consumer_and_provider`.`consumer_id` = 1) AND (`latest_verifications_for_consumer_and_provider`.`provider_id` = 2)))
2021-09-06 01:07:21.905168 I [72416:4380] pact-broker -- (0.000197s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:21.905487 I [72416:4380] pact-broker -- (0.000200s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' WHERE (((`triggered_webhooks`.`consumer_id` = 1) AND (`triggered_webhooks`.`provider_id` = 2)))
2021-09-06 01:07:21.905802 I [72416:4380] pact-broker -- (0.000200s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (8))
2021-09-06 01:07:21.906176 I [72416:4380] pact-broker -- (0.000256s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:21.906453 I [72416:4380] pact-broker -- (0.000193s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:21.906655 I [72416:4380] pact-broker -- (0.000094s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:21.907269 I [72416:4380] pact-broker -- (0.000277s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:21.907570 I [72416:4380] pact-broker -- (0.000196s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (8)) ORDER BY `created_at`
2021-09-06 01:07:21.908129 I [72416:4380] pact-broker -- (0.000237s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 1) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 1) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:21.908407 I [72416:4380] pact-broker -- (0.000187s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:07:21.909507 I [72416:4380] pact-broker -- (0.000380s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.*, `tags`.`name` AS 'tag_name' FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) LEFT JOIN (SELECT `pact_publications`.`consumer_id`, `tags`.`name` AS 'tag_name', `tags`.`version_order` FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')))) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`tags`.`name` = `pp2`.`tag_name`) AND (`pp2`.`version_order` > `tags`.`version_order`)) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')) AND (`pp2`.`version_order` IS NULL))) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:21.909950 I [72416:4380] pact-broker -- (0.000098s) SELECT 1 AS 'one' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON ((`pact_publications`.`consumer_version_id` = `cv`.`id`) AND (`cv`.`branch` = 'main') AND (`cv`.`order` > 108)) WHERE ((`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:07:26.228079 I [72416:4380] pact-broker -- (0.000212s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:26.228349 I [72416:4380] pact-broker -- (0.000115s) SELECT DISTINCT `consumer_id`, `provider_id` FROM `webhooks`
2021-09-06 01:07:26.229334 I [72416:4380] pact-broker -- (0.000216s) SELECT count(*) AS 'count' FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) LIMIT 1
2021-09-06 01:07:26.230298 I [72416:4380] pact-broker -- (0.000443s) SELECT `pact_publications`.* FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) ORDER BY lower(`consumers`.`name`) ASC, `cv`.`order` DESC, lower(`providers`.`name`) ASC LIMIT 100 OFFSET 0
2021-09-06 01:07:26.230666 I [72416:4380] pact-broker -- (0.000224s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (1))
2021-09-06 01:07:26.231021 I [72416:4380] pact-broker -- (0.000275s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (2))
2021-09-06 01:07:26.231290 I [72416:4380] pact-broker -- (0.000162s) SELECT * FROM `pact_versions` WHERE (`pact_versions`.`id` IN (3))
2021-09-06 01:07:26.231771 I [72416:4380] pact-broker -- (0.000288s) SELECT `verifications`.* FROM `verifications` LEFT JOIN `latest_verification_id_for_pact_version_and_provider_version` AS 'v2' ON ((`verifications`.`pact_version_id` = `v2`.`pact_version_id`) AND (`v2`.`verification_id` > `verifications`.`id`)) WHERE ((`v2`.`verification_id` IS NULL) AND (`verifications`.`pact_version_id` IN (3)))
2021-09-06 01:07:26.232189 I [72416:4380] pact-broker -- (0.000291s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:26.232674 I [72416:4380] pact-broker -- (0.000354s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:26.232962 I [72416:4380] pact-broker -- (0.000201s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:26.233248 I [72416:4380] pact-broker -- (0.000166s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:07:26.233951 I [72416:4380] pact-broker -- (0.000356s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:26.234362 I [72416:4380] pact-broker -- (0.000296s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (7)) ORDER BY `created_at`
2021-09-06 01:07:26.235034 I [72416:4380] pact-broker -- (0.000252s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 2) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 2) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:26.235425 I [72416:4380] pact-broker -- (0.000154s) SELECT * FROM `integrations` WHERE (((`integrations`.`consumer_id` = 1) AND (`integrations`.`provider_id` = 2)))
2021-09-06 01:07:26.236044 I [72416:4380] pact-broker -- (0.000448s) SELECT * FROM `latest_verifications_for_consumer_and_provider` WHERE (((`latest_verifications_for_consumer_and_provider`.`consumer_id` = 1) AND (`latest_verifications_for_consumer_and_provider`.`provider_id` = 2)))
2021-09-06 01:07:26.236361 I [72416:4380] pact-broker -- (0.000214s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:07:26.236796 I [72416:4380] pact-broker -- (0.000307s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' WHERE (((`triggered_webhooks`.`consumer_id` = 1) AND (`triggered_webhooks`.`provider_id` = 2)))
2021-09-06 01:07:26.237125 I [72416:4380] pact-broker -- (0.000206s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (8))
2021-09-06 01:07:26.237614 I [72416:4380] pact-broker -- (0.000279s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:26.237984 I [72416:4380] pact-broker -- (0.000281s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:07:26.238206 I [72416:4380] pact-broker -- (0.000102s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:07:26.238953 I [72416:4380] pact-broker -- (0.000291s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:07:26.239345 I [72416:4380] pact-broker -- (0.000215s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (8)) ORDER BY `created_at`
2021-09-06 01:07:26.240054 I [72416:4380] pact-broker -- (0.000319s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 1) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 1) AND (`tags`.`name` IN ('main')))
2021-09-06 01:07:26.240338 I [72416:4380] pact-broker -- (0.000193s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:07:26.241605 I [72416:4380] pact-broker -- (0.000396s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.*, `tags`.`name` AS 'tag_name' FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) LEFT JOIN (SELECT `pact_publications`.`consumer_id`, `tags`.`name` AS 'tag_name', `tags`.`version_order` FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')))) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`tags`.`name` = `pp2`.`tag_name`) AND (`pp2`.`version_order` > `tags`.`version_order`)) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')) AND (`pp2`.`version_order` IS NULL))) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:07:26.242117 I [72416:4380] pact-broker -- (0.000107s) SELECT 1 AS 'one' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON ((`pact_publications`.`consumer_version_id` = `cv`.`id`) AND (`cv`.`branch` = 'main') AND (`cv`.`order` > 108)) WHERE ((`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:08:05.364333 I [72787:4380] pact-broker -- (0.001249s) PRAGMA foreign_keys = 1
2021-09-06 01:08:05.364402 I [72787:4380] pact-broker -- (0.000020s) PRAGMA case_sensitive_like = 1
2021-09-06 01:08:05.365737 I [72787:4380] pact-broker -- (0.000076s) SELECT sqlite_version()
2021-09-06 01:08:05.366067 I [72787:4380] pact-broker -- (0.000235s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:08:05.366245 I [72787:4380] pact-broker -- (0.000084s) SELECT * FROM `schema_migrations` ORDER BY `filename` DESC LIMIT 1
2021-09-06 01:08:05.366259 I [72787:4380] PactBroker::App -- Database schema version is 20210818
2021-09-06 01:08:05.367560 I [72787:4380] pact-broker -- (0.000082s) SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 01:08:05.367675 I [72787:4380] pact-broker -- (0.000062s) SELECT * FROM `schema_migrations` LIMIT 1
2021-09-06 01:08:05.369878 I [72787:4380] pact-broker -- (0.002130s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 01:08:05.370602 I [72787:4380] PactBroker::App -- Skipping database migrations as the latest migration has already been applied
2021-09-06 01:08:05.370611 I [72787:4380] PactBroker::App -- Migrating data
2021-09-06 01:08:05.370762 I [72787:4380] pact-broker -- (0.000070s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:08:05.371027 I [72787:4380] pact-broker -- (0.000173s) PRAGMA table_info('verifications')
2021-09-06 01:08:05.371242 I [72787:4380] pact-broker -- (0.000059s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:08:05.371394 I [72787:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:08:05.371560 I [72787:4380] pact-broker -- (0.000086s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:08:05.371721 I [72787:4380] pact-broker -- (0.000113s) PRAGMA table_info('pact_versions')
2021-09-06 01:08:05.371863 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:08:05.372031 I [72787:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:08:05.372160 I [72787:4380] pact-broker -- (0.000093s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 01:08:05.372302 I [72787:4380] pact-broker -- (0.000062s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:08:05.372472 I [72787:4380] pact-broker -- (0.000122s) PRAGMA table_info('pact_publications')
2021-09-06 01:08:05.372611 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:08:05.372749 I [72787:4380] pact-broker -- (0.000058s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.372977 I [72787:4380] pact-broker -- (0.000134s) PRAGMA table_info('versions')
2021-09-06 01:08:05.373138 I [72787:4380] pact-broker -- (0.000059s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.373234 I [72787:4380] pact-broker -- (0.000062s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 01:08:05.373399 I [72787:4380] pact-broker -- (0.000084s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.373546 I [72787:4380] pact-broker -- (0.000061s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 01:08:05.373692 I [72787:4380] pact-broker -- (0.000098s) PRAGMA table_info('version_sequence_number')
2021-09-06 01:08:05.373850 I [72787:4380] pact-broker -- (0.000065s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 01:08:05.373947 I [72787:4380] pact-broker -- (0.000054s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:08:05.375035 I [72787:4380] pact-broker -- (0.001020s) INSERT INTO `version_sequence_number` (`value`) VALUES (208)
2021-09-06 01:08:05.375791 I [72787:4380] pact-broker -- (0.000650s) DELETE FROM `version_sequence_number` WHERE (`value` != 208)
2021-09-06 01:08:05.375987 I [72787:4380] pact-broker -- (0.000105s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:08:05.376242 I [72787:4380] pact-broker -- (0.000202s) PRAGMA table_info('webhooks')
2021-09-06 01:08:05.376436 I [72787:4380] pact-broker -- (0.000063s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 01:08:05.376599 I [72787:4380] pact-broker -- (0.000059s) SELECT NULL AS 'nil' FROM `webhook_executions` LIMIT 1
2021-09-06 01:08:05.376772 I [72787:4380] pact-broker -- (0.000123s) PRAGMA table_info('webhook_executions')
2021-09-06 01:08:05.376942 I [72787:4380] pact-broker -- (0.000087s) DELETE FROM `webhook_executions` WHERE (`triggered_webhook_id` IS NULL)
2021-09-06 01:08:05.377051 I [72787:4380] pact-broker -- (0.000067s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 01:08:05.377148 I [72787:4380] pact-broker -- (0.000059s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 01:08:05.377290 I [72787:4380] pact-broker -- (0.000065s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.377464 I [72787:4380] pact-broker -- (0.000118s) PRAGMA table_info('tags')
2021-09-06 01:08:05.377614 I [72787:4380] pact-broker -- (0.000058s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.377732 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.377832 I [72787:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.378030 I [72787:4380] pact-broker -- (0.000063s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:08:05.378171 I [72787:4380] pact-broker -- (0.000056s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.378275 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.378375 I [72787:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.378497 I [72787:4380] pact-broker -- (0.000076s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.378679 I [72787:4380] pact-broker -- (0.000071s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:08:05.378819 I [72787:4380] pact-broker -- (0.000062s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:08:05.379015 I [72787:4380] pact-broker -- (0.000124s) PRAGMA table_info('pacticipants')
2021-09-06 01:08:05.379210 I [72787:4380] pact-broker -- (0.000088s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:08:05.379357 I [72787:4380] pact-broker -- (0.000083s) SELECT * FROM `pacticipants` WHERE (`display_name` IS NULL)
2021-09-06 01:08:05.379492 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:08:05.379614 I [72787:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:08:05.379713 I [72787:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:08:05.379827 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.379941 I [72787:4380] pact-broker -- (0.000068s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.380402 I [72787:4380] pact-broker -- (0.000118s) SELECT `name`, count(1) AS 'count' FROM (SELECT `tags`.`name` FROM `tags` WHERE ((`tags`.`name` IN ('main', 'master', 'develop')) AND (`tags`.`pacticipant_id` = 1))) AS 't1' GROUP BY `name` ORDER BY 2 DESC LIMIT 1
2021-09-06 01:08:05.381332 I [72787:4380] pact-broker -- (0.000833s) UPDATE `pacticipants` SET `main_branch` = 'main' WHERE ((`id` = 1) AND (`main_branch` IS NULL))
2021-09-06 01:08:05.381354 I [72787:4380] PactBroker::DB::DataMigrations::SetPacticipantMainBranch -- Setting main branch for pacticipant -- {:branch=>"main", :pacticipant_name=>"Example App"}
2021-09-06 01:08:05.381679 I [72787:4380] pact-broker -- (0.000114s) SELECT `name`, count(1) AS 'count' FROM (SELECT `tags`.`name` FROM `tags` WHERE ((`tags`.`name` IN ('main', 'master', 'develop')) AND (`tags`.`pacticipant_id` = 2))) AS 't1' GROUP BY `name` ORDER BY 2 DESC LIMIT 1
2021-09-06 01:08:05.382431 I [72787:4380] pact-broker -- (0.000681s) UPDATE `pacticipants` SET `main_branch` = 'main' WHERE ((`id` = 2) AND (`main_branch` IS NULL))
2021-09-06 01:08:05.382443 I [72787:4380] PactBroker::DB::DataMigrations::SetPacticipantMainBranch -- Setting main branch for pacticipant -- {:branch=>"main", :pacticipant_name=>"Example API"}
2021-09-06 01:08:05.382467 I [72787:4380] pact-broker -- (0.002458s) SELECT `id`, `name` FROM `pacticipants` WHERE (`main_branch` IS NULL)
2021-09-06 01:08:05.382669 I [72787:4380] pact-broker -- (0.000078s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 01:08:05.382871 I [72787:4380] pact-broker -- (0.000149s) PRAGMA table_info('triggered_webhooks')
2021-09-06 01:08:05.383205 I [72787:4380] pact-broker -- (0.000070s) UPDATE `triggered_webhooks` SET `uuid` = ('83777b16-0eb7-4e24-b6fa-d55d01be8ad4' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 01:08:05.383357 I [72787:4380] pact-broker -- (0.000061s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:08:05.383463 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:08:05.383566 I [72787:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.383702 I [72787:4380] pact-broker -- (0.000090s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.383885 I [72787:4380] pact-broker -- (0.000067s) UPDATE `pact_publications` SET `consumer_version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `pact_publications`.`consumer_version_id`)) WHERE (`consumer_version_order` IS NULL)
2021-09-06 01:08:05.383985 I [72787:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.384084 I [72787:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.384204 I [72787:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.384300 I [72787:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.384499 I [72787:4380] pact-broker -- (0.000063s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:08:05.384595 I [72787:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.384693 I [72787:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:08:05.384790 I [72787:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.384885 I [72787:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:08:05.385072 I [72787:4380] pact-broker -- (0.000061s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:08:05.393629 I [72787:4380] pact-broker -- (0.000222s) PRAGMA table_info('tags_with_latest_flag')
2021-09-06 01:08:05.398852 I [72787:4380] pact-broker -- (0.000181s) PRAGMA table_info('latest_versions')
2021-09-06 01:08:05.399683 I [72787:4380] pact-broker -- (0.000120s) PRAGMA table_info('labels')
2021-09-06 01:08:05.583856 I [72787:4380] pact-broker -- (0.000162s) PRAGMA table_info('webhook_events')
2021-09-06 01:08:05.600963 I [72787:4380] pact-broker -- (0.000261s) PRAGMA table_info('latest_verifications_for_pact_versions')
2021-09-06 01:08:05.601781 I [72787:4380] pact-broker -- (0.000108s) PRAGMA table_info('latest_verification_id_for_pact_version_and_provider_version')
2021-09-06 01:08:05.605976 I [72787:4380] pact-broker -- (0.000094s) SELECT `webhook_executions`.`id`, `triggered_webhook_id`, `success`, `logs`, `webhook_executions`.`created_at` FROM `webhook_executions` LIMIT 1
2021-09-06 01:08:05.609009 I [72787:4380] pact-broker -- (0.000180s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' LIMIT 1
2021-09-06 01:08:05.612263 I [72787:4380] pact-broker -- (0.000127s) PRAGMA table_info('integrations')
2021-09-06 01:08:05.613631 I [72787:4380] pact-broker -- (0.000134s) PRAGMA table_info('head_pact_tags')
2021-09-06 01:08:05.620435 I [72787:4380] pact-broker -- (0.000165s) PRAGMA table_info('all_pact_publications')
2021-09-06 01:08:05.622624 I [72787:4380] pact-broker -- (0.000239s) PRAGMA table_info('latest_pact_publications_by_consumer_versions')
2021-09-06 01:08:05.623809 I [72787:4380] pact-broker -- (0.000273s) PRAGMA table_info('latest_pact_publications')
2021-09-06 01:08:05.624847 I [72787:4380] pact-broker -- (0.000277s) PRAGMA table_info('latest_tagged_pact_publications')
2021-09-06 01:08:05.627714 I [72787:4380] pact-broker -- (0.000335s) PRAGMA table_info('latest_verifications_for_consumer_version_tags')
2021-09-06 01:08:05.628998 I [72787:4380] pact-broker -- (0.000307s) PRAGMA table_info('latest_verifications_for_consumer_and_provider')
2021-09-06 01:08:05.629817 I [72787:4380] pact-broker -- (0.000294s) PRAGMA table_info('matrix')
2021-09-06 01:08:05.632259 I [72787:4380] pact-broker -- (0.000458s) PRAGMA table_info('head_matrix')
2021-09-06 01:08:05.633416 I [72787:4380] pact-broker -- (0.000125s) PRAGMA table_info('latest_pact_publication_ids_for_consumer_versions')
2021-09-06 01:08:05.659045 I [72787:4380] pact-broker -- (0.000101s) UPDATE `triggered_webhooks` SET `status` = 'failure' WHERE (`status` = 'retrying')
2021-09-06 01:08:05.660228 I [72787:4380] pact-broker -- (0.000135s) PRAGMA table_info('config')
2021-09-06 01:08:05.661357 I [72787:4380] pact-broker -- (0.000556s) SELECT * FROM `config`
2021-09-06 01:08:05.661374 I [72787:4380] PactBroker::App -- Not seeding example data
2021-09-06 01:08:05.661384 I [72787:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:08:05.661396 I [72787:4380] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 01:08:05.661463 I [72787:4380] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 01:08:05.661471 I [72787:4380] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 01:08:05.661478 I [72787:4380] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 01:08:05.661484 I [72787:4380] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 01:08:05.661490 I [72787:4380] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 01:08:05.661495 I [72787:4380] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 01:08:05.661501 I [72787:4380] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 01:08:05.661507 I [72787:4380] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 01:08:05.661513 I [72787:4380] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 01:08:05.661519 I [72787:4380] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 01:08:05.661524 I [72787:4380] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 01:08:05.661531 I [72787:4380] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 01:08:05.661536 I [72787:4380] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 01:08:05.661541 I [72787:4380] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 01:08:05.661578 I [72787:4380] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 01:08:05.661585 I [72787:4380] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 01:08:05.661592 I [72787:4380] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 01:08:05.661597 I [72787:4380] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 01:08:05.661603 I [72787:4380] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 01:08:05.661608 I [72787:4380] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 01:08:05.661614 I [72787:4380] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 01:08:05.661619 I [72787:4380] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 01:08:05.661624 I [72787:4380] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 01:08:05.661630 I [72787:4380] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 01:08:05.661635 I [72787:4380] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 01:08:05.661641 I [72787:4380] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 01:08:05.661646 I [72787:4380] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 01:08:05.661651 I [72787:4380] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 01:08:05.661657 I [72787:4380] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 01:08:05.661662 I [72787:4380] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 01:08:05.661667 I [72787:4380] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 01:08:05.661699 I [72787:4380] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 01:08:05.661705 I [72787:4380] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 01:08:05.661712 I [72787:4380] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 01:08:05.661717 I [72787:4380] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 01:08:05.661723 I [72787:4380] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 01:08:05.661728 I [72787:4380] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/pact_broker/log source={:type=>:defaults}
2021-09-06 01:08:05.661734 I [72787:4380] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 01:08:05.661739 I [72787:4380] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 01:08:05.661745 I [72787:4380] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 01:08:05.661753 I [72787:4380] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 01:08:05.661758 I [72787:4380] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 01:08:05.661764 I [72787:4380] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 01:08:05.661769 I [72787:4380] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 01:08:05.661775 I [72787:4380] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 01:08:05.661783 I [72787:4380] pact-broker -- seed_example_data=false source={:type=>:accessor, :called_from=>"/Users/prashanthsams/.rvm/gems/ruby-2.7.0/gems/pact_broker-2.83.0/lib/pact_broker/config/load.rb:45"}
2021-09-06 01:08:05.661791 I [72787:4380] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 01:08:05.661796 I [72787:4380] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 01:08:05.661802 I [72787:4380] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 01:08:05.661807 I [72787:4380] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 01:08:05.661812 I [72787:4380] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 01:08:05.661818 I [72787:4380] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 01:08:05.661824 I [72787:4380] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 01:08:05.661829 I [72787:4380] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 01:08:05.661834 I [72787:4380] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 01:08:05.661839 I [72787:4380] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 01:08:05.661878 I [72787:4380] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 01:08:05.661886 I [72787:4380] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 01:08:05.661891 I [72787:4380] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 01:08:05.661898 I [72787:4380] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 01:08:05.661905 I [72787:4380] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 01:08:05.661912 I [72787:4380] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 01:08:05.661918 I [72787:4380] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 01:08:05.661921 I [72787:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:08:05.661929 I [72787:4380] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 01:08:08.208681 I [72787:4380] PactBroker::App -- Mounting HAL browser
2021-09-06 01:08:08.208713 I [72787:4380] PactBroker::App -- Mounting UI
2021-09-06 01:08:08.459296 I [72787:4380] PactBroker::App -- Mounting PactBroker::API
2021-09-06 01:08:08.461757 I [72787:4380] pact-broker -- (0.000189s) PRAGMA table_info('environments')
2021-09-06 01:08:08.463440 I [72787:4380] pact-broker -- (0.000115s) PRAGMA table_info('currently_deployed_version_ids')
2021-09-06 01:08:08.464280 I [72787:4380] pact-broker -- (0.000164s) PRAGMA table_info('deployed_versions')
2021-09-06 01:08:08.466289 I [72787:4380] pact-broker -- (0.000122s) PRAGMA table_info('released_versions')
2021-09-06 01:08:08.916533 I [72787:4380] pact-broker -- (0.000145s) PRAGMA table_info('verification_sequence_number')
2021-09-06 01:08:08.919891 I [72787:4380] pact-broker -- (0.000175s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:08:08.920087 I [72787:4380] pact-broker -- (0.000104s) SELECT DISTINCT `consumer_id`, `provider_id` FROM `webhooks`
2021-09-06 01:08:08.921020 I [72787:4380] pact-broker -- (0.000252s) SELECT count(*) AS 'count' FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) LIMIT 1
2021-09-06 01:08:08.921800 I [72787:4380] pact-broker -- (0.000353s) SELECT `pact_publications`.* FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) ORDER BY lower(`consumers`.`name`) ASC, `cv`.`order` DESC, lower(`providers`.`name`) ASC LIMIT 100 OFFSET 0
2021-09-06 01:08:08.922353 I [72787:4380] pact-broker -- (0.000215s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (1))
2021-09-06 01:08:08.922779 I [72787:4380] pact-broker -- (0.000197s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (2))
2021-09-06 01:08:08.923177 I [72787:4380] pact-broker -- (0.000163s) SELECT * FROM `pact_versions` WHERE (`pact_versions`.`id` IN (3))
2021-09-06 01:08:08.923955 I [72787:4380] pact-broker -- (0.000273s) SELECT `verifications`.* FROM `verifications` LEFT JOIN `latest_verification_id_for_pact_version_and_provider_version` AS 'v2' ON ((`verifications`.`pact_version_id` = `v2`.`pact_version_id`) AND (`v2`.`verification_id` > `verifications`.`id`)) WHERE ((`v2`.`verification_id` IS NULL) AND (`verifications`.`pact_version_id` IN (3)))
2021-09-06 01:08:08.924370 I [72787:4380] pact-broker -- (0.000190s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:08:08.925006 I [72787:4380] pact-broker -- (0.000256s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:08:08.925400 I [72787:4380] pact-broker -- (0.000194s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:08:08.925822 I [72787:4380] pact-broker -- (0.000104s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:08:08.926420 I [72787:4380] pact-broker -- (0.000277s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:08:08.926852 I [72787:4380] pact-broker -- (0.000208s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (7)) ORDER BY `created_at`
2021-09-06 01:08:08.927380 I [72787:4380] pact-broker -- (0.000217s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 2) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 2) AND (`tags`.`name` IN ('main')))
2021-09-06 01:08:08.927816 I [72787:4380] pact-broker -- (0.000136s) SELECT * FROM `integrations` WHERE (((`integrations`.`consumer_id` = 1) AND (`integrations`.`provider_id` = 2)))
2021-09-06 01:08:08.928451 I [72787:4380] pact-broker -- (0.000349s) SELECT * FROM `latest_verifications_for_consumer_and_provider` WHERE (((`latest_verifications_for_consumer_and_provider`.`consumer_id` = 1) AND (`latest_verifications_for_consumer_and_provider`.`provider_id` = 2)))
2021-09-06 01:08:08.928709 I [72787:4380] pact-broker -- (0.000166s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:08:08.929284 I [72787:4380] pact-broker -- (0.000178s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' WHERE (((`triggered_webhooks`.`consumer_id` = 1) AND (`triggered_webhooks`.`provider_id` = 2)))
2021-09-06 01:08:08.929685 I [72787:4380] pact-broker -- (0.000175s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (8))
2021-09-06 01:08:08.929998 I [72787:4380] pact-broker -- (0.000213s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:08:08.930230 I [72787:4380] pact-broker -- (0.000163s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:08:08.930404 I [72787:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:08:08.930917 I [72787:4380] pact-broker -- (0.000233s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:08:08.931173 I [72787:4380] pact-broker -- (0.000161s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (8)) ORDER BY `created_at`
2021-09-06 01:08:08.931645 I [72787:4380] pact-broker -- (0.000195s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 1) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 1) AND (`tags`.`name` IN ('main')))
2021-09-06 01:08:08.932005 I [72787:4380] pact-broker -- (0.000157s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:08:08.932974 I [72787:4380] pact-broker -- (0.000321s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.*, `tags`.`name` AS 'tag_name' FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) LEFT JOIN (SELECT `pact_publications`.`consumer_id`, `tags`.`name` AS 'tag_name', `tags`.`version_order` FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')))) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`tags`.`name` = `pp2`.`tag_name`) AND (`pp2`.`version_order` > `tags`.`version_order`)) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')) AND (`pp2`.`version_order` IS NULL))) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:08:08.933348 I [72787:4380] pact-broker -- (0.000080s) SELECT 1 AS 'one' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON ((`pact_publications`.`consumer_version_id` = `cv`.`id`) AND (`cv`.`branch` = 'main') AND (`cv`.`order` > 108)) WHERE ((`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:03.018633 I [72885:4380] pact-broker -- (0.000138s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.018703 I [72885:4380] pact-broker -- (0.000019s) PRAGMA case_sensitive_like = 1
2021-09-06 01:09:03.020027 I [72885:4380] pact-broker -- (0.000072s) SELECT sqlite_version()
2021-09-06 01:09:03.020206 I [72885:4380] pact-broker -- (0.000079s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:09:03.020365 I [72885:4380] pact-broker -- (0.000061s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:09:03.020377 I [72885:4380] PactBroker::App -- Database schema version is 0
2021-09-06 01:09:03.021584 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_migrations: SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 01:09:03.023553 I [72885:4380] pact-broker -- (0.001078s) CREATE TABLE `schema_migrations` (`filename` varchar(255) NOT NULL PRIMARY KEY)
2021-09-06 01:09:03.023727 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_info: SELECT NULL AS 'nil' FROM `schema_info` LIMIT 1
2021-09-06 01:09:03.023984 I [72885:4380] pact-broker -- (0.000071s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 01:09:03.063504 I [72885:4380] PactBroker::App -- Migrating database schema
2021-09-06 01:09:03.064776 I [72885:4380] pact-broker -- (0.000128s) SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 01:09:03.064885 I [72885:4380] pact-broker -- (0.000057s) SELECT * FROM `schema_migrations` LIMIT 1
2021-09-06 01:09:03.065018 I [72885:4380] pact-broker -- (0.000064s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 01:09:03.102119 I [72885:4380] pact-broker -- Begin applying migration 000001_create_pacticipant_table.rb, direction: up
2021-09-06 01:09:03.103895 I [72885:4380] pact-broker -- (0.001578s) CREATE TABLE `pacticipants` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) UNIQUE, `repository_url` varchar(255))
2021-09-06 01:09:03.104922 I [72885:4380] pact-broker -- (0.000865s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000001_create_pacticipant_table.rb')
2021-09-06 01:09:03.104963 I [72885:4380] pact-broker -- Finished applying migration 000001_create_pacticipant_table.rb, direction: up, took 0.002843 seconds
2021-09-06 01:09:03.104971 I [72885:4380] pact-broker -- Begin applying migration 000002_create_versions_table.rb, direction: up
2021-09-06 01:09:03.105944 I [72885:4380] pact-broker -- (0.000797s) CREATE TABLE `versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255), `repository_ref` varchar(255), `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 01:09:03.106902 I [72885:4380] pact-broker -- (0.000848s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:09:03.107698 I [72885:4380] pact-broker -- (0.000731s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000002_create_versions_table.rb')
2021-09-06 01:09:03.107715 I [72885:4380] pact-broker -- Finished applying migration 000002_create_versions_table.rb, direction: up, took 0.002742 seconds
2021-09-06 01:09:03.107737 I [72885:4380] pact-broker -- Begin applying migration 000003_create_pacts_table.rb, direction: up
2021-09-06 01:09:03.108674 I [72885:4380] pact-broker -- (0.000753s) CREATE TABLE `pacts` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` text, `version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 01:09:03.109425 I [72885:4380] pact-broker -- (0.000669s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.110089 I [72885:4380] pact-broker -- (0.000610s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000003_create_pacts_table.rb')
2021-09-06 01:09:03.110105 I [72885:4380] pact-broker -- Finished applying migration 000003_create_pacts_table.rb, direction: up, took 0.002366 seconds
2021-09-06 01:09:03.110112 I [72885:4380] pact-broker -- Begin applying migration 000004_create_tags_table.rb, direction: up
2021-09-06 01:09:03.111036 I [72885:4380] pact-broker -- (0.000771s) CREATE TABLE `tags` (`name` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, CONSTRAINT `tags_pk` PRIMARY KEY (`version_id`, `name`))
2021-09-06 01:09:03.111734 I [72885:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000004_create_tags_table.rb')
2021-09-06 01:09:03.111813 I [72885:4380] pact-broker -- Finished applying migration 000004_create_tags_table.rb, direction: up, took 0.001636 seconds
2021-09-06 01:09:03.111831 I [72885:4380] pact-broker -- Begin applying migration 000005_add_order_column_to_version.rb, direction: up
2021-09-06 01:09:03.111913 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.111959 I [72885:4380] pact-broker -- (0.000017s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.112021 I [72885:4380] pact-broker -- (0.000020s) BEGIN
2021-09-06 01:09:03.113007 I [72885:4380] pact-broker -- (0.000289s) ALTER TABLE `versions` ADD COLUMN `order` integer
2021-09-06 01:09:03.113392 I [72885:4380] pact-broker -- (0.000356s) COMMIT
2021-09-06 01:09:03.113447 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.113476 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.113608 I [72885:4380] pact-broker -- (0.000058s) UPDATE `versions` SET `order` = `id`
2021-09-06 01:09:03.114190 I [72885:4380] pact-broker -- (0.000534s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000005_add_order_column_to_version.rb')
2021-09-06 01:09:03.114206 I [72885:4380] pact-broker -- Finished applying migration 000005_add_order_column_to_version.rb, direction: up, took 0.002383 seconds
2021-09-06 01:09:03.114213 I [72885:4380] pact-broker -- Begin applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up
2021-09-06 01:09:03.114265 I [72885:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.114292 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.114324 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.114490 I [72885:4380] pact-broker -- (0.000103s) PRAGMA table_info('tags')
2021-09-06 01:09:03.115092 I [72885:4380] pact-broker -- (0.000041s) PRAGMA foreign_key_list('tags')
2021-09-06 01:09:03.115166 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 01:09:03.115226 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:09:03.115349 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.115435 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:09:03.116289 I [72885:4380] pact-broker -- (0.000015s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.116385 I [72885:4380] pact-broker -- (0.000032s) PRAGMA index_list('tags')
2021-09-06 01:09:03.116926 I [72885:4380] pact-broker -- (0.000517s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:09:03.117043 I [72885:4380] pact-broker -- (0.000094s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:09:03.117085 I [72885:4380] pact-broker -- (0.000024s) INSERT INTO `tags`(`name`, `version_id`) SELECT `name`, `version_id` FROM `tags_backup0`
2021-09-06 01:09:03.117191 I [72885:4380] pact-broker -- (0.000088s) DROP TABLE `tags_backup0`
2021-09-06 01:09:03.117866 I [72885:4380] pact-broker -- (0.000649s) COMMIT
2021-09-06 01:09:03.117937 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.117970 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.118952 I [72885:4380] pact-broker -- (0.000922s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000006_make_version_foreign_key_mandatory.rb')
2021-09-06 01:09:03.118972 I [72885:4380] pact-broker -- Finished applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up, took 0.004755 seconds
2021-09-06 01:09:03.119713 I [72885:4380] pact-broker -- Begin applying migration 000007_increase_json_content_length.rb, direction: up
2021-09-06 01:09:03.119784 I [72885:4380] pact-broker -- (0.000019s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.119818 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.119854 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:03.120015 I [72885:4380] pact-broker -- (0.000111s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.120109 I [72885:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.120180 I [72885:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.120996 I [72885:4380] pact-broker -- (0.000016s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.121076 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.121236 I [72885:4380] pact-broker -- (0.000016s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.121998 I [72885:4380] pact-broker -- (0.000042s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.122069 I [72885:4380] pact-broker -- (0.000033s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.122722 I [72885:4380] pact-broker -- (0.000602s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.122844 I [72885:4380] pact-broker -- (0.000097s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.122917 I [72885:4380] pact-broker -- (0.000051s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`) SELECT `id`, `json_content`, `version_id`, `provider_id` FROM `pacts_backup0`
2021-09-06 01:09:03.123028 I [72885:4380] pact-broker -- (0.000092s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.123113 I [72885:4380] pact-broker -- (0.000065s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.123647 I [72885:4380] pact-broker -- (0.000509s) COMMIT
2021-09-06 01:09:03.123706 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.123738 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.124392 I [72885:4380] pact-broker -- (0.000603s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000007_increase_json_content_length.rb')
2021-09-06 01:09:03.124410 I [72885:4380] pact-broker -- Finished applying migration 000007_increase_json_content_length.rb, direction: up, took 0.004697 seconds
2021-09-06 01:09:03.124418 I [72885:4380] pact-broker -- Begin applying migration 000008_create_latest_pact_view.rb, direction: up
2021-09-06 01:09:03.126201 I [72885:4380] pact-broker -- (0.000805s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 01:09:03.127052 I [72885:4380] pact-broker -- (0.000801s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:09:03.127840 I [72885:4380] pact-broker -- (0.000738s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.128696 I [72885:4380] pact-broker -- (0.000786s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000008_create_latest_pact_view.rb')
2021-09-06 01:09:03.128715 I [72885:4380] pact-broker -- Finished applying migration 000008_create_latest_pact_view.rb, direction: up, took 0.004293 seconds
2021-09-06 01:09:03.128722 I [72885:4380] pact-broker -- Begin applying migration 000009_add_timestamps.rb, direction: up
2021-09-06 01:09:03.128784 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.128813 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.129516 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.129960 I [72885:4380] pact-broker -- (0.000386s) ALTER TABLE `pacts` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.130650 I [72885:4380] pact-broker -- (0.000662s) COMMIT
2021-09-06 01:09:03.130708 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.130739 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.130789 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.130815 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.130845 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.131267 I [72885:4380] pact-broker -- (0.000374s) ALTER TABLE `pacts` ADD COLUMN `updated_at` timestamp
2021-09-06 01:09:03.131858 I [72885:4380] pact-broker -- (0.000565s) COMMIT
2021-09-06 01:09:03.131916 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.131949 I [72885:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.131998 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.132024 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.132054 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.132471 I [72885:4380] pact-broker -- (0.000374s) ALTER TABLE `tags` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.133067 I [72885:4380] pact-broker -- (0.000569s) COMMIT
2021-09-06 01:09:03.133426 I [72885:4380] pact-broker -- (0.000316s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.133460 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.133509 I [72885:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.133535 I [72885:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.133565 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.133986 I [72885:4380] pact-broker -- (0.000377s) ALTER TABLE `tags` ADD COLUMN `updated_at` timestamp
2021-09-06 01:09:03.134518 I [72885:4380] pact-broker -- (0.000506s) COMMIT
2021-09-06 01:09:03.134575 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.134605 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.134653 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.134680 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.134714 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:03.135132 I [72885:4380] pact-broker -- (0.000375s) ALTER TABLE `versions` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.135838 I [72885:4380] pact-broker -- (0.000679s) COMMIT
2021-09-06 01:09:03.136117 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.136152 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.136201 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.136227 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.136257 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.136677 I [72885:4380] pact-broker -- (0.000377s) ALTER TABLE `versions` ADD COLUMN `updated_at` timestamp
2021-09-06 01:09:03.137268 I [72885:4380] pact-broker -- (0.000564s) COMMIT
2021-09-06 01:09:03.137326 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.137357 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.137404 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.137430 I [72885:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.137460 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.137881 I [72885:4380] pact-broker -- (0.000377s) ALTER TABLE `pacticipants` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.138386 I [72885:4380] pact-broker -- (0.000477s) COMMIT
2021-09-06 01:09:03.138444 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.138474 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.138522 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.138550 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.138580 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.139003 I [72885:4380] pact-broker -- (0.000379s) ALTER TABLE `pacticipants` ADD COLUMN `updated_at` timestamp
2021-09-06 01:09:03.139534 I [72885:4380] pact-broker -- (0.000508s) COMMIT
2021-09-06 01:09:03.140095 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.140126 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.140845 I [72885:4380] pact-broker -- (0.000662s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000009_add_timestamps.rb')
2021-09-06 01:09:03.140862 I [72885:4380] pact-broker -- Finished applying migration 000009_add_timestamps.rb, direction: up, took 0.012137 seconds
2021-09-06 01:09:03.140869 I [72885:4380] pact-broker -- Begin applying migration 000010_populate_timestamps.rb, direction: up
2021-09-06 01:09:03.141132 I [72885:4380] pact-broker -- (0.000062s) UPDATE `pacts` SET `created_at` = '2021-09-05 21:09:03.140908', `updated_at` = '2021-09-05 21:09:03.140923'
2021-09-06 01:09:03.141255 I [72885:4380] pact-broker -- (0.000046s) UPDATE `versions` SET `created_at` = '2021-09-05 21:09:03.141153', `updated_at` = '2021-09-05 21:09:03.141156'
2021-09-06 01:09:03.141372 I [72885:4380] pact-broker -- (0.000044s) UPDATE `pacticipants` SET `created_at` = '2021-09-05 21:09:03.141275', `updated_at` = '2021-09-05 21:09:03.141277'
2021-09-06 01:09:03.141490 I [72885:4380] pact-broker -- (0.000044s) UPDATE `tags` SET `created_at` = '2021-09-05 21:09:03.141392', `updated_at` = '2021-09-05 21:09:03.141393'
2021-09-06 01:09:03.142138 I [72885:4380] pact-broker -- (0.000600s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000010_populate_timestamps.rb')
2021-09-06 01:09:03.142155 I [72885:4380] pact-broker -- Finished applying migration 000010_populate_timestamps.rb, direction: up, took 0.001283 seconds
2021-09-06 01:09:03.142162 I [72885:4380] pact-broker -- Begin applying migration 000011_made_timestamps_mandatory.rb, direction: up
2021-09-06 01:09:03.142217 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.142599 I [72885:4380] pact-broker -- (0.000362s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.142633 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.142801 I [72885:4380] pact-broker -- (0.000113s) PRAGMA table_info('tags')
2021-09-06 01:09:03.142885 I [72885:4380] pact-broker -- (0.000037s) PRAGMA foreign_key_list('tags')
2021-09-06 01:09:03.142956 I [72885:4380] pact-broker -- (0.000038s) PRAGMA index_list('tags')
2021-09-06 01:09:03.143014 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.143068 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:09:03.143199 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.143865 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:09:03.144029 I [72885:4380] pact-broker -- (0.000015s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.144133 I [72885:4380] pact-broker -- (0.000039s) PRAGMA index_list('tags')
2021-09-06 01:09:03.144191 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.145008 I [72885:4380] pact-broker -- (0.000789s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:09:03.145160 I [72885:4380] pact-broker -- (0.000128s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:09:03.145207 I [72885:4380] pact-broker -- (0.000027s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:09:03.145888 I [72885:4380] pact-broker -- (0.000109s) DROP TABLE `tags_backup0`
2021-09-06 01:09:03.146011 I [72885:4380] pact-broker -- (0.000071s) PRAGMA table_info('tags')
2021-09-06 01:09:03.146087 I [72885:4380] pact-broker -- (0.000034s) PRAGMA foreign_key_list('tags')
2021-09-06 01:09:03.146155 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 01:09:03.146212 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.146267 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:09:03.147075 I [72885:4380] pact-broker -- (0.000018s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.147153 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:09:03.147318 I [72885:4380] pact-broker -- (0.000032s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.147562 I [72885:4380] pact-broker -- (0.000180s) PRAGMA index_list('tags')
2021-09-06 01:09:03.148058 I [72885:4380] pact-broker -- (0.000459s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.148705 I [72885:4380] pact-broker -- (0.000618s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:09:03.148816 I [72885:4380] pact-broker -- (0.000088s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:09:03.148862 I [72885:4380] pact-broker -- (0.000026s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:09:03.148930 I [72885:4380] pact-broker -- (0.000049s) DROP TABLE `tags_backup0`
2021-09-06 01:09:03.149048 I [72885:4380] pact-broker -- (0.000068s) PRAGMA table_info('tags')
2021-09-06 01:09:03.149122 I [72885:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('tags')
2021-09-06 01:09:03.149190 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 01:09:03.149247 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.149303 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 01:09:03.150050 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.150116 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 01:09:03.150272 I [72885:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.150508 I [72885:4380] pact-broker -- (0.000173s) PRAGMA index_list('tags')
2021-09-06 01:09:03.150995 I [72885:4380] pact-broker -- (0.000452s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 01:09:03.151644 I [72885:4380] pact-broker -- (0.000620s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 01:09:03.151764 I [72885:4380] pact-broker -- (0.000096s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 01:09:03.151810 I [72885:4380] pact-broker -- (0.000026s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 01:09:03.151880 I [72885:4380] pact-broker -- (0.000052s) DROP TABLE `tags_backup0`
2021-09-06 01:09:03.152675 I [72885:4380] pact-broker -- (0.000770s) COMMIT
2021-09-06 01:09:03.152736 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.152766 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.152818 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.152846 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.152878 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.153039 I [72885:4380] pact-broker -- (0.000113s) PRAGMA table_info('pacticipants')
2021-09-06 01:09:03.153106 I [72885:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:09:03.153618 I [72885:4380] pact-broker -- (0.000478s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.153680 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.156245 I [72885:4380] pact-broker -- (0.000016s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.156321 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:09:03.156465 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.156588 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.156645 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.157503 I [72885:4380] pact-broker -- (0.000831s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:09:03.157637 I [72885:4380] pact-broker -- (0.000109s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:09:03.157712 I [72885:4380] pact-broker -- (0.000054s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:09:03.157816 I [72885:4380] pact-broker -- (0.000084s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:09:03.157939 I [72885:4380] pact-broker -- (0.000073s) PRAGMA table_info('pacticipants')
2021-09-06 01:09:03.158003 I [72885:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:09:03.158065 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.158117 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.158276 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.158341 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:09:03.158496 I [72885:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.158731 I [72885:4380] pact-broker -- (0.000171s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.158790 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.159436 I [72885:4380] pact-broker -- (0.000621s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:09:03.159541 I [72885:4380] pact-broker -- (0.000082s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:09:03.159614 I [72885:4380] pact-broker -- (0.000032s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:09:03.159685 I [72885:4380] pact-broker -- (0.000052s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:09:03.159804 I [72885:4380] pact-broker -- (0.000071s) PRAGMA table_info('pacticipants')
2021-09-06 01:09:03.159866 I [72885:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 01:09:03.159927 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.159979 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.160090 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.160181 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 01:09:03.160333 I [72885:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.160566 I [72885:4380] pact-broker -- (0.000170s) PRAGMA index_list('pacticipants')
2021-09-06 01:09:03.160627 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 01:09:03.161298 I [72885:4380] pact-broker -- (0.000646s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 01:09:03.161403 I [72885:4380] pact-broker -- (0.000082s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:09:03.161455 I [72885:4380] pact-broker -- (0.000032s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 01:09:03.161524 I [72885:4380] pact-broker -- (0.000050s) DROP TABLE `pacticipants_backup0`
2021-09-06 01:09:03.162134 I [72885:4380] pact-broker -- (0.000585s) COMMIT
2021-09-06 01:09:03.162199 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.162232 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.162316 I [72885:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.162345 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.162379 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.162563 I [72885:4380] pact-broker -- (0.000134s) PRAGMA table_info('versions')
2021-09-06 01:09:03.162649 I [72885:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('versions')
2021-09-06 01:09:03.162714 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('versions')
2021-09-06 01:09:03.162897 I [72885:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.162969 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:09:03.163120 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.163239 I [72885:4380] pact-broker -- (0.000046s) PRAGMA index_list('versions')
2021-09-06 01:09:03.163302 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:09:03.164272 I [72885:4380] pact-broker -- (0.000922s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:09:03.164400 I [72885:4380] pact-broker -- (0.000102s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.164511 I [72885:4380] pact-broker -- (0.000057s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:09:03.164617 I [72885:4380] pact-broker -- (0.000085s) DROP TABLE `versions_backup0`
2021-09-06 01:09:03.164693 I [72885:4380] pact-broker -- (0.000057s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:09:03.164830 I [72885:4380] pact-broker -- (0.000087s) PRAGMA table_info('versions')
2021-09-06 01:09:03.164905 I [72885:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('versions')
2021-09-06 01:09:03.164965 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_list('versions')
2021-09-06 01:09:03.165135 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.165201 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:09:03.165357 I [72885:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.165596 I [72885:4380] pact-broker -- (0.000171s) PRAGMA index_list('versions')
2021-09-06 01:09:03.165658 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:09:03.166352 I [72885:4380] pact-broker -- (0.000649s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:09:03.166454 I [72885:4380] pact-broker -- (0.000079s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.166503 I [72885:4380] pact-broker -- (0.000029s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:09:03.166564 I [72885:4380] pact-broker -- (0.000044s) DROP TABLE `versions_backup0`
2021-09-06 01:09:03.166637 I [72885:4380] pact-broker -- (0.000055s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:09:03.166795 I [72885:4380] pact-broker -- (0.000085s) PRAGMA table_info('versions')
2021-09-06 01:09:03.166867 I [72885:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('versions')
2021-09-06 01:09:03.166927 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_list('versions')
2021-09-06 01:09:03.167058 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.167143 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 01:09:03.167299 I [72885:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.167544 I [72885:4380] pact-broker -- (0.000177s) PRAGMA index_list('versions')
2021-09-06 01:09:03.167607 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 01:09:03.168301 I [72885:4380] pact-broker -- (0.000650s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 01:09:03.168392 I [72885:4380] pact-broker -- (0.000067s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.168439 I [72885:4380] pact-broker -- (0.000028s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 01:09:03.168500 I [72885:4380] pact-broker -- (0.000043s) DROP TABLE `versions_backup0`
2021-09-06 01:09:03.169475 I [72885:4380] pact-broker -- (0.000929s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 01:09:03.170083 I [72885:4380] pact-broker -- (0.000580s) COMMIT
2021-09-06 01:09:03.170140 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.170170 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.170218 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.170244 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.170273 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.170438 I [72885:4380] pact-broker -- (0.000120s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.170520 I [72885:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.170581 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.170744 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.170810 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.170948 I [72885:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.171067 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.171126 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.172073 I [72885:4380] pact-broker -- (0.000902s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.172212 I [72885:4380] pact-broker -- (0.000115s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.172263 I [72885:4380] pact-broker -- (0.000031s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:09:03.172367 I [72885:4380] pact-broker -- (0.000084s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.172467 I [72885:4380] pact-broker -- (0.000079s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.172599 I [72885:4380] pact-broker -- (0.000084s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.172680 I [72885:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.172740 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.172899 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.172984 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.173146 I [72885:4380] pact-broker -- (0.000033s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.173414 I [72885:4380] pact-broker -- (0.000179s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.173482 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.174187 I [72885:4380] pact-broker -- (0.000661s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.174278 I [72885:4380] pact-broker -- (0.000069s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.174326 I [72885:4380] pact-broker -- (0.000029s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:09:03.174392 I [72885:4380] pact-broker -- (0.000047s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.174469 I [72885:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.174604 I [72885:4380] pact-broker -- (0.000083s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.174687 I [72885:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.174780 I [72885:4380] pact-broker -- (0.000060s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.174917 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.174984 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.175135 I [72885:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.175406 I [72885:4380] pact-broker -- (0.000178s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.175470 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.176177 I [72885:4380] pact-broker -- (0.000663s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.176271 I [72885:4380] pact-broker -- (0.000072s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.176322 I [72885:4380] pact-broker -- (0.000031s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 01:09:03.176619 I [72885:4380] pact-broker -- (0.000273s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.176766 I [72885:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.177420 I [72885:4380] pact-broker -- (0.000626s) COMMIT
2021-09-06 01:09:03.177490 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.177520 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.178350 I [72885:4380] pact-broker -- (0.000770s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000011_made_timestamps_mandatory.rb')
2021-09-06 01:09:03.178370 I [72885:4380] pact-broker -- Finished applying migration 000011_made_timestamps_mandatory.rb, direction: up, took 0.036204 seconds
2021-09-06 01:09:03.178377 I [72885:4380] pact-broker -- Begin applying migration 000012_create_webhooks_table.rb, direction: up
2021-09-06 01:09:03.179542 I [72885:4380] pact-broker -- (0.000961s) CREATE TABLE `webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_webhook_uuid` UNIQUE, `method` varchar(255) NOT NULL, `url` varchar(255) NOT NULL, `body` varchar(255), `is_json_request_body` Boolean, `consumer_id` integer NOT NULL CONSTRAINT `fk_webhooks_consumer` REFERENCES `pacticipants`, `provider_id` integer NOT NULL CONSTRAINT `fk_webhooks_provider` REFERENCES `pacticipants`)
2021-09-06 01:09:03.180587 I [72885:4380] pact-broker -- (0.000917s) CREATE TABLE `webhook_headers` (`name` varchar(255) NOT NULL, `value` varchar(255), `webhook_id` integer NOT NULL CONSTRAINT `fk_webhookheaders_webhooks` REFERENCES `webhooks`, CONSTRAINT `webhooks_headers_pk` PRIMARY KEY (`webhook_id`, `name`))
2021-09-06 01:09:03.181353 I [72885:4380] pact-broker -- (0.000701s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000012_create_webhooks_table.rb')
2021-09-06 01:09:03.181374 I [72885:4380] pact-broker -- Finished applying migration 000012_create_webhooks_table.rb, direction: up, took 0.002993 seconds
2021-09-06 01:09:03.181380 I [72885:4380] pact-broker -- Begin applying migration 000013_add_columns_to_webhooks.rb, direction: up
2021-09-06 01:09:03.181447 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.181481 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.181516 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.181982 I [72885:4380] pact-broker -- (0.000417s) ALTER TABLE `webhooks` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.182527 I [72885:4380] pact-broker -- (0.000517s) COMMIT
2021-09-06 01:09:03.182586 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.182616 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.182686 I [72885:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.182712 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.182759 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.183228 I [72885:4380] pact-broker -- (0.000425s) ALTER TABLE `webhooks` ADD COLUMN `updated_at` timestamp
2021-09-06 01:09:03.183735 I [72885:4380] pact-broker -- (0.000482s) COMMIT
2021-09-06 01:09:03.183786 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.183815 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.183861 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.183887 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.183916 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.184360 I [72885:4380] pact-broker -- (0.000401s) ALTER TABLE `webhooks` ADD COLUMN `username` varchar(255)
2021-09-06 01:09:03.184953 I [72885:4380] pact-broker -- (0.000568s) COMMIT
2021-09-06 01:09:03.185004 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.185033 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.185100 I [72885:4380] pact-broker -- (0.000031s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.185128 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.185157 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.185604 I [72885:4380] pact-broker -- (0.000403s) ALTER TABLE `webhooks` ADD COLUMN `password` varchar(255)
2021-09-06 01:09:03.186061 I [72885:4380] pact-broker -- (0.000429s) COMMIT
2021-09-06 01:09:03.186112 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.186140 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.186902 I [72885:4380] pact-broker -- (0.000710s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000013_add_columns_to_webhooks.rb')
2021-09-06 01:09:03.186923 I [72885:4380] pact-broker -- Finished applying migration 000013_add_columns_to_webhooks.rb, direction: up, took 0.005538 seconds
2021-09-06 01:09:03.186930 I [72885:4380] pact-broker -- Begin applying migration 000014_add_timestamps_to_pact_views.rb, direction: up
2021-09-06 01:09:03.187748 I [72885:4380] pact-broker -- (0.000674s) DROP VIEW `all_pacts`
2021-09-06 01:09:03.188669 I [72885:4380] pact-broker -- (0.000746s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content`, `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 01:09:03.189301 I [72885:4380] pact-broker -- (0.000588s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:09:03.189971 I [72885:4380] pact-broker -- (0.000624s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:09:03.190543 I [72885:4380] pact-broker -- (0.000529s) DROP VIEW `latest_pacts`
2021-09-06 01:09:03.191179 I [72885:4380] pact-broker -- (0.000592s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.191780 I [72885:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000014_add_timestamps_to_pact_views.rb')
2021-09-06 01:09:03.191797 I [72885:4380] pact-broker -- Finished applying migration 000014_add_timestamps_to_pact_views.rb, direction: up, took 0.004864 seconds
2021-09-06 01:09:03.191804 I [72885:4380] pact-broker -- Begin applying migration 000015_create_pact_version_content.rb, direction: up
2021-09-06 01:09:03.192603 I [72885:4380] pact-broker -- (0.000689s) CREATE TABLE `pact_version_contents` (`sha` varchar(255) NOT NULL CONSTRAINT `pk_pact_version_contents` PRIMARY KEY, `content` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:09:03.193154 I [72885:4380] pact-broker -- (0.000491s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000015_create_pact_version_content.rb')
2021-09-06 01:09:03.193170 I [72885:4380] pact-broker -- Finished applying migration 000015_create_pact_version_content.rb, direction: up, took 0.001363 seconds
2021-09-06 01:09:03.193177 I [72885:4380] pact-broker -- Begin applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up
2021-09-06 01:09:03.193241 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.193275 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.193308 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.193808 I [72885:4380] pact-broker -- (0.000414s) ALTER TABLE `pacts` ADD COLUMN `pact_version_content_sha` varchar(255) NULL CONSTRAINT `fk_pact_version_content` REFERENCES `pact_version_contents`
2021-09-06 01:09:03.194201 I [72885:4380] pact-broker -- (0.000368s) COMMIT
2021-09-06 01:09:03.194254 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.194281 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.194864 I [72885:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000016_add_pact_content_foreign_key_to_pacts.rb')
2021-09-06 01:09:03.194884 I [72885:4380] pact-broker -- Finished applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up, took 0.001703 seconds
2021-09-06 01:09:03.194891 I [72885:4380] pact-broker -- Begin applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up
2021-09-06 01:09:03.195029 I [72885:4380] pact-broker -- (0.000089s) SELECT * FROM `pacts`
2021-09-06 01:09:03.195601 I [72885:4380] pact-broker -- (0.000521s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000017_migrate_json_content_to_pact_version_content_table.rb')
2021-09-06 01:09:03.195616 I [72885:4380] pact-broker -- Finished applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up, took 0.000723 seconds
2021-09-06 01:09:03.195623 I [72885:4380] pact-broker -- Begin applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up
2021-09-06 01:09:03.196284 I [72885:4380] pact-broker -- (0.000628s) DROP VIEW `latest_pacts`
2021-09-06 01:09:03.196846 I [72885:4380] pact-broker -- (0.000516s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:09:03.197409 I [72885:4380] pact-broker -- (0.000523s) DROP VIEW `all_pacts`
2021-09-06 01:09:03.197472 I [72885:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.197500 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.197531 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.197742 I [72885:4380] pact-broker -- (0.000157s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.197842 I [72885:4380] pact-broker -- (0.000052s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.197911 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.198070 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.198182 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.198339 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.198445 I [72885:4380] pact-broker -- (0.000038s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.198503 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.199331 I [72885:4380] pact-broker -- (0.000784s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.199435 I [72885:4380] pact-broker -- (0.000080s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.199485 I [72885:4380] pact-broker -- (0.000030s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 01:09:03.199595 I [72885:4380] pact-broker -- (0.000087s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.199676 I [72885:4380] pact-broker -- (0.000061s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.200138 I [72885:4380] pact-broker -- (0.000439s) COMMIT
2021-09-06 01:09:03.200191 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.200242 I [72885:4380] pact-broker -- (0.000032s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.200849 I [72885:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000018_drop_json_content_column_from_pacts.rb')
2021-09-06 01:09:03.200867 I [72885:4380] pact-broker -- Finished applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up, took 0.005241 seconds
2021-09-06 01:09:03.200874 I [72885:4380] pact-broker -- Begin applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up
2021-09-06 01:09:03.200946 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.200976 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.201010 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.201182 I [72885:4380] pact-broker -- (0.000125s) PRAGMA table_info('pacts')
2021-09-06 01:09:03.201273 I [72885:4380] pact-broker -- (0.000047s) PRAGMA foreign_key_list('pacts')
2021-09-06 01:09:03.201335 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.201513 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.201591 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 01:09:03.201739 I [72885:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.201855 I [72885:4380] pact-broker -- (0.000034s) PRAGMA index_list('pacts')
2021-09-06 01:09:03.201917 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 01:09:03.202766 I [72885:4380] pact-broker -- (0.000804s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 01:09:03.202891 I [72885:4380] pact-broker -- (0.000102s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.202947 I [72885:4380] pact-broker -- (0.000035s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 01:09:03.203055 I [72885:4380] pact-broker -- (0.000087s) DROP TABLE `pacts_backup0`
2021-09-06 01:09:03.203135 I [72885:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 01:09:03.203772 I [72885:4380] pact-broker -- (0.000612s) COMMIT
2021-09-06 01:09:03.203830 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.203861 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.204557 I [72885:4380] pact-broker -- (0.000642s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000019_make_pact_version_content_sha_not_nullable.rb')
2021-09-06 01:09:03.204574 I [72885:4380] pact-broker -- Finished applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up, took 0.003696 seconds
2021-09-06 01:09:03.204581 I [72885:4380] pact-broker -- Begin applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up
2021-09-06 01:09:03.204788 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_pacts: DROP VIEW `all_pacts`
2021-09-06 01:09:03.205705 I [72885:4380] pact-broker -- (0.000672s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pvc`.`sha` AS 'pact_version_content_sha', `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`) INNER JOIN `pact_version_contents` AS 'pvc' ON (`pvc`.`sha` = `pacts`.`pact_version_content_sha`)
2021-09-06 01:09:03.206360 I [72885:4380] pact-broker -- (0.000593s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000020_add_pact_version_content_sha_to_all_pacts_view.rb')
2021-09-06 01:09:03.206376 I [72885:4380] pact-broker -- Finished applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up, took 0.001793 seconds
2021-09-06 01:09:03.206383 I [72885:4380] pact-broker -- Begin applying migration 000021_recreate_latest_pacts_view.rb, direction: up
2021-09-06 01:09:03.206458 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pact_consumer_version_orders: DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:09:03.207241 I [72885:4380] pact-broker -- (0.000630s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 01:09:03.207329 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pacts: DROP VIEW `latest_pacts`
2021-09-06 01:09:03.208063 I [72885:4380] pact-broker -- (0.000607s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.208704 I [72885:4380] pact-broker -- (0.000576s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000021_recreate_latest_pacts_view.rb')
2021-09-06 01:09:03.208722 I [72885:4380] pact-broker -- Finished applying migration 000021_recreate_latest_pacts_view.rb, direction: up, took 0.002336 seconds
2021-09-06 01:09:03.208729 I [72885:4380] pact-broker -- Begin applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up
2021-09-06 01:09:03.208811 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pact_consumer_version_orders: DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:09:03.209557 I [72885:4380] pact-broker -- (0.000597s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 01:09:03.209641 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pacts: DROP VIEW `latest_tagged_pacts`
2021-09-06 01:09:03.210380 I [72885:4380] pact-broker -- (0.000619s) CREATE VIEW `latest_tagged_pacts` AS select ap.*, lp.tag_name
      from all_pacts ap
      inner join latest_tagged_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
        and ap.provider_id = lp.provider_id
        and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.211100 I [72885:4380] pact-broker -- (0.000652s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000022_create_latest_tagged_pacts_view.rb')
2021-09-06 01:09:03.211121 I [72885:4380] pact-broker -- Finished applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up, took 0.002388 seconds
2021-09-06 01:09:03.211128 I [72885:4380] pact-broker -- Begin applying migration 000023_create_pact_versions_table.rb, direction: up
2021-09-06 01:09:03.211980 I [72885:4380] pact-broker -- (0.000706s) CREATE TABLE `pact_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer REFERENCES `pacticipants`, `provider_id` integer REFERENCES `pacticipants`, `sha` varchar(255) NOT NULL, `content` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 01:09:03.212711 I [72885:4380] pact-broker -- (0.000647s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:09:03.213303 I [72885:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000023_create_pact_versions_table.rb')
2021-09-06 01:09:03.213319 I [72885:4380] pact-broker -- Finished applying migration 000023_create_pact_versions_table.rb, direction: up, took 0.002188 seconds
2021-09-06 01:09:03.213326 I [72885:4380] pact-broker -- Begin applying migration 000024_populate_pact_versions.rb, direction: up
2021-09-06 01:09:03.213850 I [72885:4380] pact-broker -- (0.000498s) insert into pact_versions (sha, content, created_at) select sha, content, created_at from pact_version_contents
2021-09-06 01:09:03.214010 I [72885:4380] pact-broker -- (0.000132s) update pact_versions set consumer_id = (select consumer_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 01:09:03.214124 I [72885:4380] pact-broker -- (0.000085s) update pact_versions set provider_id = (select provider_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 01:09:03.214196 I [72885:4380] pact-broker -- (0.000048s) delete from pact_versions where consumer_id is null
2021-09-06 01:09:03.214807 I [72885:4380] pact-broker -- (0.000560s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000024_populate_pact_versions.rb')
2021-09-06 01:09:03.214823 I [72885:4380] pact-broker -- Finished applying migration 000024_populate_pact_versions.rb, direction: up, took 0.001495 seconds
2021-09-06 01:09:03.214830 I [72885:4380] pact-broker -- Begin applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up
2021-09-06 01:09:03.214891 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.214920 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.214960 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.215137 I [72885:4380] pact-broker -- (0.000122s) PRAGMA table_info('pact_versions')
2021-09-06 01:09:03.215229 I [72885:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:09:03.215322 I [72885:4380] pact-broker -- (0.000058s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.215465 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.215542 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:09:03.215683 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.215817 I [72885:4380] pact-broker -- (0.000035s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.215878 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:09:03.217140 I [72885:4380] pact-broker -- (0.001213s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:09:03.217243 I [72885:4380] pact-broker -- (0.000079s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.217292 I [72885:4380] pact-broker -- (0.000029s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:09:03.217400 I [72885:4380] pact-broker -- (0.000088s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:09:03.217481 I [72885:4380] pact-broker -- (0.000062s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:09:03.217616 I [72885:4380] pact-broker -- (0.000087s) PRAGMA table_info('pact_versions')
2021-09-06 01:09:03.217696 I [72885:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:09:03.217760 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.217920 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.217990 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:09:03.218161 I [72885:4380] pact-broker -- (0.000046s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.218501 I [72885:4380] pact-broker -- (0.000271s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.218570 I [72885:4380] pact-broker -- (0.000034s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:09:03.219656 I [72885:4380] pact-broker -- (0.001039s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:09:03.219785 I [72885:4380] pact-broker -- (0.000106s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.219834 I [72885:4380] pact-broker -- (0.000029s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:09:03.219901 I [72885:4380] pact-broker -- (0.000048s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:09:03.219978 I [72885:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:09:03.220110 I [72885:4380] pact-broker -- (0.000085s) PRAGMA table_info('pact_versions')
2021-09-06 01:09:03.220188 I [72885:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 01:09:03.220248 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.220421 I [72885:4380] pact-broker -- (0.000016s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.220485 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 01:09:03.220649 I [72885:4380] pact-broker -- (0.000041s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.221006 I [72885:4380] pact-broker -- (0.000262s) PRAGMA index_list('pact_versions')
2021-09-06 01:09:03.221074 I [72885:4380] pact-broker -- (0.000032s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 01:09:03.222159 I [72885:4380] pact-broker -- (0.001040s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 01:09:03.222251 I [72885:4380] pact-broker -- (0.000070s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.222298 I [72885:4380] pact-broker -- (0.000029s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 01:09:03.222613 I [72885:4380] pact-broker -- (0.000293s) DROP TABLE `pact_versions_backup0`
2021-09-06 01:09:03.222766 I [72885:4380] pact-broker -- (0.000126s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 01:09:03.223384 I [72885:4380] pact-broker -- (0.000593s) COMMIT
2021-09-06 01:09:03.223444 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.223474 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.224298 I [72885:4380] pact-broker -- (0.000767s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000025_make_pv_pacticipants_mandatory.rb')
2021-09-06 01:09:03.224316 I [72885:4380] pact-broker -- Finished applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up, took 0.009483 seconds
2021-09-06 01:09:03.224323 I [72885:4380] pact-broker -- Begin applying migration 000026_create_pact_publications.rb, direction: up
2021-09-06 01:09:03.225224 I [72885:4380] pact-broker -- (0.000726s) CREATE TABLE `pact_publications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `revision_number` integer NOT NULL, `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `created_at` timestamp NOT NULL)
2021-09-06 01:09:03.226048 I [72885:4380] pact-broker -- (0.000752s) CREATE UNIQUE INDEX `cv_prov_revision_unq` ON `pact_publications` (`consumer_version_id`, `provider_id`, `revision_number`)
2021-09-06 01:09:03.226903 I [72885:4380] pact-broker -- (0.000802s) CREATE INDEX `cv_prov_id_ndx` ON `pact_publications` (`consumer_version_id`, `provider_id`, `id`)
2021-09-06 01:09:03.227710 I [72885:4380] pact-broker -- (0.000736s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000026_create_pact_publications.rb')
2021-09-06 01:09:03.227730 I [72885:4380] pact-broker -- Finished applying migration 000026_create_pact_publications.rb, direction: up, took 0.003402 seconds
2021-09-06 01:09:03.227737 I [72885:4380] pact-broker -- Begin applying migration 000027_populate_pact_publications.rb, direction: up
2021-09-06 01:09:03.228524 I [72885:4380] pact-broker -- (0.000756s) insert into pact_publications
        (consumer_version_id, provider_id, revision_number, pact_version_id, created_at)
      select ap.consumer_version_id, ap.provider_id, 1, pc.id, ap.updated_at
      from all_pacts ap inner join pact_versions pc
      on pc.sha = ap.pact_version_content_sha
2021-09-06 01:09:03.229188 I [72885:4380] pact-broker -- (0.000596s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000027_populate_pact_publications.rb')
2021-09-06 01:09:03.229205 I [72885:4380] pact-broker -- Finished applying migration 000027_populate_pact_publications.rb, direction: up, took 0.001465 seconds
2021-09-06 01:09:03.229213 I [72885:4380] pact-broker -- Begin applying migration 000028_create_all_pact_publications.rb, direction: up
2021-09-06 01:09:03.230389 I [72885:4380] pact-broker -- (0.000874s) CREATE VIEW `all_pact_publications` AS SELECT `pact_publications`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pact_publications`.`revision_number`, `pv`.`id` AS 'pact_version_id', `pv`.`sha` AS 'pact_version_sha', `pact_publications`.`created_at` FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pact_publications`.`consumer_version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`) INNER JOIN `pact_versions` AS 'pv' ON (`pv`.`id` = `pact_publications`.`pact_version_id`)
2021-09-06 01:09:03.231066 I [72885:4380] pact-broker -- (0.000594s) CREATE VIEW `latest_pact_publication_revision_numbers` AS select provider_id, consumer_id, consumer_version_order, max(revision_number) as latest_revision_number
      from all_pact_publications
      group by provider_id, consumer_id, consumer_version_order
2021-09-06 01:09:03.231657 I [72885:4380] pact-broker -- (0.000547s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
      from all_pact_publications app
      inner join latest_pact_publication_revision_numbers lr
      on app.consumer_id = lr.consumer_id
        and app.provider_id = lr.provider_id
        and app.consumer_version_order = lr.consumer_version_order
        and app.revision_number = lr.latest_revision_number
2021-09-06 01:09:03.232244 I [72885:4380] pact-broker -- (0.000540s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:09:03.232960 I [72885:4380] pact-broker -- (0.000674s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pact_publications
      group by provider_id, consumer_id
2021-09-06 01:09:03.233587 I [72885:4380] pact-broker -- (0.000581s) CREATE VIEW `latest_pact_publications` AS select lpcv.*
      from latest_pact_publications_by_consumer_versions lpcv
      inner join latest_pact_consumer_version_orders lp
      on lpcv.consumer_id = lp.consumer_id
           and lpcv.provider_id = lp.provider_id
           and lpcv.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.234194 I [72885:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000028_create_all_pact_publications.rb')
2021-09-06 01:09:03.234215 I [72885:4380] pact-broker -- Finished applying migration 000028_create_all_pact_publications.rb, direction: up, took 0.004999 seconds
2021-09-06 01:09:03.234222 I [72885:4380] pact-broker -- Begin applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up
2021-09-06 01:09:03.234778 I [72885:4380] pact-broker -- (0.000519s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:09:03.235425 I [72885:4380] pact-broker -- (0.000604s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from latest_pact_publications_by_consumer_versions ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 01:09:03.236207 I [72885:4380] pact-broker -- (0.000738s) CREATE VIEW `latest_tagged_pact_publications` AS select lp.*, o.tag_name
      from latest_pact_publications_by_consumer_versions lp
      inner join latest_tagged_pact_consumer_version_orders o
      on lp.consumer_id = o.consumer_id
        and lp.provider_id = o.provider_id
        and lp.consumer_version_order = latest_consumer_version_order
2021-09-06 01:09:03.236870 I [72885:4380] pact-broker -- (0.000597s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000029_create_latest_tagged_pact_publications.rb')
2021-09-06 01:09:03.236887 I [72885:4380] pact-broker -- Finished applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up, took 0.002662 seconds
2021-09-06 01:09:03.236893 I [72885:4380] pact-broker -- Begin applying migration 000030_drop_old_tables_and_views.rb, direction: up
2021-09-06 01:09:03.237536 I [72885:4380] pact-broker -- (0.000609s) DROP VIEW `latest_tagged_pacts`
2021-09-06 01:09:03.238120 I [72885:4380] pact-broker -- (0.000535s) DROP VIEW `latest_pacts`
2021-09-06 01:09:03.238691 I [72885:4380] pact-broker -- (0.000530s) DROP VIEW `all_pacts`
2021-09-06 01:09:03.239354 I [72885:4380] pact-broker -- (0.000619s) DROP TABLE `pacts`
2021-09-06 01:09:03.239972 I [72885:4380] pact-broker -- (0.000576s) DROP TABLE `pact_version_contents`
2021-09-06 01:09:03.240538 I [72885:4380] pact-broker -- (0.000492s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000030_drop_old_tables_and_views.rb')
2021-09-06 01:09:03.240555 I [72885:4380] pact-broker -- Finished applying migration 000030_drop_old_tables_and_views.rb, direction: up, took 0.003657 seconds
2021-09-06 01:09:03.240562 I [72885:4380] pact-broker -- Begin applying migration 000031_create_verifications.rb, direction: up
2021-09-06 01:09:03.241372 I [72885:4380] pact-broker -- (0.000621s) CREATE TABLE `verifications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer, `success` Boolean NOT NULL, `provider_version` varchar(255) NOT NULL, `build_url` varchar(255), `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `execution_date` timestamp NOT NULL, `created_at` timestamp NOT NULL)
2021-09-06 01:09:03.242023 I [72885:4380] pact-broker -- (0.000589s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 01:09:03.242567 I [72885:4380] pact-broker -- (0.000482s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000031_create_verifications.rb')
2021-09-06 01:09:03.242583 I [72885:4380] pact-broker -- Finished applying migration 000031_create_verifications.rb, direction: up, took 0.002018 seconds
2021-09-06 01:09:03.242589 I [72885:4380] pact-broker -- Begin applying migration 000032_create_latest_verifications.rb, direction: up
2021-09-06 01:09:03.243193 I [72885:4380] pact-broker -- (0.000567s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 01:09:03.243284 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications: DROP VIEW `latest_verifications`
2021-09-06 01:09:03.244157 I [72885:4380] pact-broker -- (0.000707s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, v.provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at
        FROM verifications v
        INNER JOIN latest_verification_numbers lv ON v.pact_version_id = lv.pact_version_id AND v.number = lv.latest_number
2021-09-06 01:09:03.244761 I [72885:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000032_create_latest_verifications.rb')
2021-09-06 01:09:03.244781 I [72885:4380] pact-broker -- Finished applying migration 000032_create_latest_verifications.rb, direction: up, took 0.002188 seconds
2021-09-06 01:09:03.244787 I [72885:4380] pact-broker -- Begin applying migration 000033_create_config_table.rb, direction: up
2021-09-06 01:09:03.245523 I [72885:4380] pact-broker -- (0.000612s) CREATE TABLE `config` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) NOT NULL, `type` varchar(255) NOT NULL, `value` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:09:03.246120 I [72885:4380] pact-broker -- (0.000544s) CREATE UNIQUE INDEX `unq_config_name` ON `config` (`name`)
2021-09-06 01:09:03.246776 I [72885:4380] pact-broker -- (0.000597s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000033_create_config_table.rb')
2021-09-06 01:09:03.246794 I [72885:4380] pact-broker -- Finished applying migration 000033_create_config_table.rb, direction: up, took 0.002003 seconds
2021-09-06 01:09:03.246801 I [72885:4380] pact-broker -- Begin applying migration 000034_create_index_on_consumer_version_order.rb, direction: up
2021-09-06 01:09:03.246870 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.246899 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.246946 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:03.247238 I [72885:4380] pact-broker -- (0.000250s) CREATE INDEX `ndx_ver_num` ON `versions` (`number`)
2021-09-06 01:09:03.247412 I [72885:4380] pact-broker -- (0.000106s) CREATE INDEX `ndx_ver_ord` ON `versions` (`order`)
2021-09-06 01:09:03.247548 I [72885:4380] pact-broker -- (0.000098s) CREATE UNIQUE INDEX `uq_ver_ppt_ord` ON `versions` (`pacticipant_id`, `order`)
2021-09-06 01:09:03.248166 I [72885:4380] pact-broker -- (0.000592s) COMMIT
2021-09-06 01:09:03.248227 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.248258 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.248885 I [72885:4380] pact-broker -- (0.000573s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000034_create_index_on_consumer_version_order.rb')
2021-09-06 01:09:03.248902 I [72885:4380] pact-broker -- Finished applying migration 000034_create_index_on_consumer_version_order.rb, direction: up, took 0.002098 seconds
2021-09-06 01:09:03.248909 I [72885:4380] pact-broker -- Begin applying migration 000035_create_index_on_names.rb, direction: up
2021-09-06 01:09:03.248966 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.248994 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.249027 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.249300 I [72885:4380] pact-broker -- (0.000237s) CREATE INDEX `ndx_ppt_name` ON `pacticipants` (`name`)
2021-09-06 01:09:03.249846 I [72885:4380] pact-broker -- (0.000522s) COMMIT
2021-09-06 01:09:03.249903 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.249932 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.249978 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.250004 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.250033 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.250300 I [72885:4380] pact-broker -- (0.000233s) CREATE INDEX `ndx_tag_name` ON `tags` (`name`)
2021-09-06 01:09:03.250772 I [72885:4380] pact-broker -- (0.000449s) COMMIT
2021-09-06 01:09:03.250828 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.250857 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.251605 I [72885:4380] pact-broker -- (0.000666s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000035_create_index_on_names.rb')
2021-09-06 01:09:03.251624 I [72885:4380] pact-broker -- Finished applying migration 000035_create_index_on_names.rb, direction: up, took 0.002711 seconds
2021-09-06 01:09:03.251631 I [72885:4380] pact-broker -- Begin applying migration 000036_create_webhook_execution.rb, direction: up
2021-09-06 01:09:03.252501 I [72885:4380] pact-broker -- (0.000707s) CREATE TABLE `webhook_executions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks`, `pact_publication_id` integer REFERENCES `pact_publications`, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `success` Boolean NOT NULL, `logs` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 01:09:03.253095 I [72885:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000036_create_webhook_execution.rb')
2021-09-06 01:09:03.253111 I [72885:4380] pact-broker -- Finished applying migration 000036_create_webhook_execution.rb, direction: up, took 0.001477 seconds
2021-09-06 01:09:03.253122 I [72885:4380] pact-broker -- Begin applying migration 000037_create_labels_table.rb, direction: up
2021-09-06 01:09:03.253952 I [72885:4380] pact-broker -- (0.000716s) CREATE TABLE `labels` (`name` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, CONSTRAINT `labels_pk` PRIMARY KEY (`pacticipant_id`, `name`))
2021-09-06 01:09:03.254557 I [72885:4380] pact-broker -- (0.000549s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000037_create_labels_table.rb')
2021-09-06 01:09:03.254605 I [72885:4380] pact-broker -- Finished applying migration 000037_create_labels_table.rb, direction: up, took 0.001478 seconds
2021-09-06 01:09:03.254615 I [72885:4380] pact-broker -- Begin applying migration 000038_create_triggered_webhooks_table.rb, direction: up
2021-09-06 01:09:03.255525 I [72885:4380] pact-broker -- (0.000743s) CREATE TABLE `triggered_webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `trigger_uuid` varchar(255) NOT NULL, `trigger_type` varchar(255) NOT NULL, `pact_publication_id` integer NOT NULL REFERENCES `pact_publications`, `webhook_id` integer REFERENCES `webhooks`, `webhook_uuid` varchar(255) NOT NULL, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `status` varchar(255) NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:09:03.256229 I [72885:4380] pact-broker -- (0.000650s) CREATE UNIQUE INDEX `uq_triggered_webhook_wi` ON `triggered_webhooks` (`webhook_id`, `trigger_uuid`)
2021-09-06 01:09:03.256909 I [72885:4380] pact-broker -- (0.000628s) CREATE UNIQUE INDEX `uq_triggered_webhook_ppi_wi` ON `triggered_webhooks` (`pact_publication_id`, `webhook_id`, `trigger_uuid`)
2021-09-06 01:09:03.257522 I [72885:4380] pact-broker -- (0.000558s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000038_create_triggered_webhooks_table.rb')
2021-09-06 01:09:03.257542 I [72885:4380] pact-broker -- Finished applying migration 000038_create_triggered_webhooks_table.rb, direction: up, took 0.002924 seconds
2021-09-06 01:09:03.257574 I [72885:4380] pact-broker -- Begin applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up
2021-09-06 01:09:03.257634 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.257662 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.257695 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.258358 I [72885:4380] pact-broker -- (0.000612s) ALTER TABLE `webhook_executions` ADD COLUMN `triggered_webhook_id` integer REFERENCES `triggered_webhooks`
2021-09-06 01:09:03.258530 I [72885:4380] pact-broker -- (0.000112s) PRAGMA table_info('webhook_executions')
2021-09-06 01:09:03.258646 I [72885:4380] pact-broker -- (0.000064s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:09:03.258708 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.258926 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.259009 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:09:03.259222 I [72885:4380] pact-broker -- (0.000055s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.259634 I [72885:4380] pact-broker -- (0.000337s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.261155 I [72885:4380] pact-broker -- (0.001496s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:09:03.261326 I [72885:4380] pact-broker -- (0.000144s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.261400 I [72885:4380] pact-broker -- (0.000053s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:09:03.261491 I [72885:4380] pact-broker -- (0.000070s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:09:03.261671 I [72885:4380] pact-broker -- (0.000132s) PRAGMA table_info('webhook_executions')
2021-09-06 01:09:03.261768 I [72885:4380] pact-broker -- (0.000055s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:09:03.261825 I [72885:4380] pact-broker -- (0.000021s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.262037 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.262111 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:09:03.262285 I [72885:4380] pact-broker -- (0.000053s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.262707 I [72885:4380] pact-broker -- (0.000350s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.264218 I [72885:4380] pact-broker -- (0.001486s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:09:03.264356 I [72885:4380] pact-broker -- (0.000088s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.264408 I [72885:4380] pact-broker -- (0.000033s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:09:03.264473 I [72885:4380] pact-broker -- (0.000048s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:09:03.264626 I [72885:4380] pact-broker -- (0.000108s) PRAGMA table_info('webhook_executions')
2021-09-06 01:09:03.264723 I [72885:4380] pact-broker -- (0.000056s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:09:03.264776 I [72885:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.264982 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.265047 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:09:03.265237 I [72885:4380] pact-broker -- (0.000054s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.265659 I [72885:4380] pact-broker -- (0.000347s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.267155 I [72885:4380] pact-broker -- (0.001471s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:09:03.267263 I [72885:4380] pact-broker -- (0.000086s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.267314 I [72885:4380] pact-broker -- (0.000031s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:09:03.267380 I [72885:4380] pact-broker -- (0.000047s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:09:03.267527 I [72885:4380] pact-broker -- (0.000101s) PRAGMA table_info('webhook_executions')
2021-09-06 01:09:03.267640 I [72885:4380] pact-broker -- (0.000072s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 01:09:03.267695 I [72885:4380] pact-broker -- (0.000022s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.267893 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.267958 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 01:09:03.268134 I [72885:4380] pact-broker -- (0.000054s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.268571 I [72885:4380] pact-broker -- (0.000346s) PRAGMA index_list('webhook_executions')
2021-09-06 01:09:03.270086 I [72885:4380] pact-broker -- (0.001489s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 01:09:03.270194 I [72885:4380] pact-broker -- (0.000086s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.270244 I [72885:4380] pact-broker -- (0.000031s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 01:09:03.270308 I [72885:4380] pact-broker -- (0.000047s) DROP TABLE `webhook_executions_backup0`
2021-09-06 01:09:03.271188 I [72885:4380] pact-broker -- (0.000854s) COMMIT
2021-09-06 01:09:03.271246 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.271276 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.272040 I [72885:4380] pact-broker -- (0.000713s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000039_add_triggered_webhooks_fk_to_execution.rb')
2021-09-06 01:09:03.272058 I [72885:4380] pact-broker -- Finished applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up, took 0.014484 seconds
2021-09-06 01:09:03.272065 I [72885:4380] pact-broker -- Begin applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up
2021-09-06 01:09:03.272150 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_ids: DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 01:09:03.273013 I [72885:4380] pact-broker -- (0.000728s) CREATE VIEW `latest_triggered_webhook_ids` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
      from triggered_webhooks
      group by webhook_uuid, consumer_id, provider_id
2021-09-06 01:09:03.273875 I [72885:4380] pact-broker -- (0.000812s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
      from triggered_webhooks tw
      inner join latest_triggered_webhook_ids ltwi
      on tw.consumer_id = ltwi.consumer_id
      and tw.provider_id = ltwi.provider_id
      and tw.webhook_uuid = ltwi.webhook_uuid
      and tw.created_at = ltwi.latest_triggered_webhook_created_at
2021-09-06 01:09:03.274586 I [72885:4380] pact-broker -- (0.000614s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000040_create_latest_triggered_webhooks_view.rb')
2021-09-06 01:09:03.274604 I [72885:4380] pact-broker -- Finished applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up, took 0.002536 seconds
2021-09-06 01:09:03.274610 I [72885:4380] pact-broker -- Begin applying migration 000041_migrate_execution_data.rb, direction: up
2021-09-06 01:09:03.274764 I [72885:4380] pact-broker -- (0.000094s) SELECT * FROM `webhook_executions`
2021-09-06 01:09:03.275447 I [72885:4380] pact-broker -- (0.000629s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000041_migrate_execution_data.rb')
2021-09-06 01:09:03.275465 I [72885:4380] pact-broker -- Finished applying migration 000041_migrate_execution_data.rb, direction: up, took 0.000851 seconds
2021-09-06 01:09:03.275472 I [72885:4380] pact-broker -- Begin applying migration 000042_delete_orphan_webhook_data.rb, direction: up
2021-09-06 01:09:03.275672 I [72885:4380] pact-broker -- (0.000112s) SELECT * FROM `triggered_webhooks` WHERE (`webhook_id` IS NULL)
2021-09-06 01:09:03.275804 I [72885:4380] pact-broker -- (0.000057s) DELETE FROM `webhook_executions` WHERE ((`webhook_id` IS NULL) AND (`triggered_webhook_id` IS NULL))
2021-09-06 01:09:03.276504 I [72885:4380] pact-broker -- (0.000649s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000042_delete_orphan_webhook_data.rb')
2021-09-06 01:09:03.276522 I [72885:4380] pact-broker -- Finished applying migration 000042_delete_orphan_webhook_data.rb, direction: up, took 0.001045 seconds
2021-09-06 01:09:03.276529 I [72885:4380] pact-broker -- Begin applying migration 000043_add_provider_version_to_verification.rb, direction: up
2021-09-06 01:09:03.276598 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.276627 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.276661 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.277369 I [72885:4380] pact-broker -- (0.000648s) ALTER TABLE `verifications` ADD COLUMN `provider_version_id` integer CONSTRAINT `fk_verifications_versions` REFERENCES `versions`
2021-09-06 01:09:03.277859 I [72885:4380] pact-broker -- (0.000463s) COMMIT
2021-09-06 01:09:03.277936 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.277970 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.278679 I [72885:4380] pact-broker -- (0.000638s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000043_add_provider_version_to_verification.rb')
2021-09-06 01:09:03.278698 I [72885:4380] pact-broker -- Finished applying migration 000043_add_provider_version_to_verification.rb, direction: up, took 0.002165 seconds
2021-09-06 01:09:03.278704 I [72885:4380] pact-broker -- Begin applying migration 000044_populate_verifications_provider_version_id.rb, direction: up
2021-09-06 01:09:03.278933 I [72885:4380] pact-broker -- (0.000094s) SELECT `verifications`.`id`, `provider_version`, `provider_id`, `verifications`.`created_at` FROM `verifications` INNER JOIN `pact_versions` ON (`pact_versions`.`id` = `verifications`.`pact_version_id`)
2021-09-06 01:09:03.279688 I [72885:4380] pact-broker -- (0.000701s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000044_populate_verifications_provider_version_id.rb')
2021-09-06 01:09:03.279707 I [72885:4380] pact-broker -- Finished applying migration 000044_populate_verifications_provider_version_id.rb, direction: up, took 0.000999 seconds
2021-09-06 01:09:03.279714 I [72885:4380] pact-broker -- Begin applying migration 000045_set_verification_provider_number_nullable.rb, direction: up
2021-09-06 01:09:03.279779 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.279808 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.279841 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.280055 I [72885:4380] pact-broker -- (0.000160s) PRAGMA table_info('verifications')
2021-09-06 01:09:03.280146 I [72885:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('verifications')
2021-09-06 01:09:03.280208 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_list('verifications')
2021-09-06 01:09:03.280407 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.280486 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: verifications_backup0: SELECT NULL AS 'nil' FROM `verifications_backup0` LIMIT 1
2021-09-06 01:09:03.280641 I [72885:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.280747 I [72885:4380] pact-broker -- (0.000034s) PRAGMA index_list('verifications')
2021-09-06 01:09:03.280829 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_info('verifications_pact_version_id_number_index')
2021-09-06 01:09:03.282720 I [72885:4380] pact-broker -- (0.001843s) ALTER TABLE `verifications` RENAME TO `verifications_backup0`
2021-09-06 01:09:03.282875 I [72885:4380] pact-broker -- (0.000130s) CREATE TABLE `verifications`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `provider_version` varchar(255) DEFAULT (NULL) NULL, `build_url` varchar(255) DEFAULT (NULL) NULL, `pact_version_id` integer DEFAULT (NULL) NOT NULL, `execution_date` timestamp DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `provider_version_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`provider_version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_id`) REFERENCES `pact_versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.282950 I [72885:4380] pact-broker -- (0.000053s) INSERT INTO `verifications`(`id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id`) SELECT `id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id` FROM `verifications_backup0`
2021-09-06 01:09:03.283091 I [72885:4380] pact-broker -- (0.000121s) DROP TABLE `verifications_backup0`
2021-09-06 01:09:03.283180 I [72885:4380] pact-broker -- (0.000070s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 01:09:03.283923 I [72885:4380] pact-broker -- (0.000717s) COMMIT
2021-09-06 01:09:03.283990 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.284025 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.284837 I [72885:4380] pact-broker -- (0.000754s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000045_set_verification_provider_number_nullable.rb')
2021-09-06 01:09:03.284862 I [72885:4380] pact-broker -- Finished applying migration 000045_set_verification_provider_number_nullable.rb, direction: up, took 0.005143 seconds
2021-09-06 01:09:03.284870 I [72885:4380] pact-broker -- Begin applying migration 000046_recreate_latest_verifications.rb, direction: up
2021-09-06 01:09:03.285577 I [72885:4380] pact-broker -- (0.000664s) DROP VIEW `latest_verification_numbers`
2021-09-06 01:09:03.286435 I [72885:4380] pact-broker -- (0.000807s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 01:09:03.287298 I [72885:4380] pact-broker -- (0.000812s) DROP VIEW `latest_verifications`
2021-09-06 01:09:03.288123 I [72885:4380] pact-broker -- (0.000777s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, s.number as provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at, v.provider_version_id, s.number as provider_version_number
        FROM verifications v
        INNER JOIN latest_verification_numbers lv
          ON v.pact_version_id = lv.pact_version_id
          AND v.number = lv.latest_number
        INNER JOIN versions s on v.provider_version_id = s.id
2021-09-06 01:09:03.288814 I [72885:4380] pact-broker -- (0.000624s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000046_recreate_latest_verifications.rb')
2021-09-06 01:09:03.288832 I [72885:4380] pact-broker -- Finished applying migration 000046_recreate_latest_verifications.rb, direction: up, took 0.003959 seconds
2021-09-06 01:09:03.288859 I [72885:4380] pact-broker -- Begin applying migration 000047_create_all_verifications.rb, direction: up
2021-09-06 01:09:03.289011 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_verifications: DROP VIEW `all_verifications`
2021-09-06 01:09:03.289869 I [72885:4380] pact-broker -- (0.000649s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:09:03.290539 I [72885:4380] pact-broker -- (0.000606s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000047_create_all_verifications.rb')
2021-09-06 01:09:03.290555 I [72885:4380] pact-broker -- Finished applying migration 000047_create_all_verifications.rb, direction: up, took 0.001695 seconds
2021-09-06 01:09:03.290562 I [72885:4380] pact-broker -- Begin applying migration 000048_create_matrix.rb, direction: up
2021-09-06 01:09:03.291573 I [72885:4380] pact-broker -- (0.000723s) CREATE VIEW `matrix` AS SELECT `all_pact_publications`.`consumer_id`, `all_pact_publications`.`consumer_name`, `all_pact_publications`.`consumer_version_id`, `all_pact_publications`.`consumer_version_number`, `all_pact_publications`.`consumer_version_order`, `all_pact_publications`.`id` AS 'pact_publication_id', `all_pact_publications`.`pact_version_id`, `all_pact_publications`.`pact_version_sha`, `all_pact_publications`.`revision_number` AS 'pact_revision_number', `all_pact_publications`.`created_at` AS 'pact_created_at', `all_pact_publications`.`provider_id`, `all_pact_publications`.`provider_name`, `versions`.`id` AS 'provider_version_id', `versions`.`number` AS 'provider_version_number', `versions`.`order` AS 'provider_version_order', `verifications`.`id` AS 'verification_id', `verifications`.`success`, `verifications`.`number` AS 'verification_number', `verifications`.`execution_date` AS 'verification_executed_at', `verifications`.`build_url` AS 'verification_build_url' FROM `all_pact_publications` LEFT OUTER JOIN `verifications` ON (`verifications`.`pact_version_id` = `all_pact_publications`.`pact_version_id`) LEFT OUTER JOIN `versions` ON (`versions`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:09:03.292163 I [72885:4380] pact-broker -- (0.000530s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000048_create_matrix.rb')
2021-09-06 01:09:03.292179 I [72885:4380] pact-broker -- Finished applying migration 000048_create_matrix.rb, direction: up, took 0.001615 seconds
2021-09-06 01:09:03.292186 I [72885:4380] pact-broker -- Begin applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up
2021-09-06 01:09:03.292997 I [72885:4380] pact-broker -- (0.000773s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select consumer_version_id, provider_version_id, max(verification_id) as latest_verification_id
      from matrix
      inner join latest_pact_publication_revision_numbers lr
        on matrix.consumer_id = lr.consumer_id
        and matrix.provider_id = lr.provider_id
        and matrix.consumer_version_order = lr.consumer_version_order
        and matrix.pact_revision_number = lr.latest_revision_number
        group by consumer_version_id, provider_version_id
2021-09-06 01:09:03.293642 I [72885:4380] pact-broker -- (0.000573s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000049_create_latest_verifications_for_cv_and_pv.rb')
2021-09-06 01:09:03.293659 I [72885:4380] pact-broker -- Finished applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up, took 0.001470 seconds
2021-09-06 01:09:03.293666 I [72885:4380] pact-broker -- Begin applying migration 000050_create_latest_matrix.rb, direction: up
2021-09-06 01:09:03.294421 I [72885:4380] pact-broker -- (0.000716s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:09:03.295017 I [72885:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000050_create_latest_matrix.rb')
2021-09-06 01:09:03.295034 I [72885:4380] pact-broker -- Finished applying migration 000050_create_latest_matrix.rb, direction: up, took 0.001365 seconds
2021-09-06 01:09:03.295040 I [72885:4380] pact-broker -- Begin applying migration 20171112_add_test_results.rb, direction: up
2021-09-06 01:09:03.295111 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.295140 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.295176 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.296021 I [72885:4380] pact-broker -- (0.000792s) ALTER TABLE `verifications` ADD COLUMN `test_results` mediumtext
2021-09-06 01:09:03.296411 I [72885:4380] pact-broker -- (0.000365s) COMMIT
2021-09-06 01:09:03.296463 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.296492 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.297065 I [72885:4380] pact-broker -- (0.000527s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171112_add_test_results.rb')
2021-09-06 01:09:03.297080 I [72885:4380] pact-broker -- Finished applying migration 20171112_add_test_results.rb, direction: up, took 0.002037 seconds
2021-09-06 01:09:03.297086 I [72885:4380] pact-broker -- Begin applying migration 20171117_create_webhook_events.rb, direction: up
2021-09-06 01:09:03.297941 I [72885:4380] pact-broker -- (0.000709s) CREATE TABLE `webhook_events` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks` ON DELETE CASCADE, `name` varchar(255), `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:09:03.298639 I [72885:4380] pact-broker -- (0.000645s) CREATE UNIQUE INDEX `uq_webhook_id_name` ON `webhook_events` (`id`, `name`)
2021-09-06 01:09:03.299218 I [72885:4380] pact-broker -- (0.000526s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171117_create_webhook_events.rb')
2021-09-06 01:09:03.299234 I [72885:4380] pact-broker -- Finished applying migration 20171117_create_webhook_events.rb, direction: up, took 0.002144 seconds
2021-09-06 01:09:03.299241 I [72885:4380] pact-broker -- Begin applying migration 20171118_create_webhook_events.rb, direction: up
2021-09-06 01:09:03.299388 I [72885:4380] pact-broker -- (0.000096s) SELECT * FROM `webhooks`
2021-09-06 01:09:03.299950 I [72885:4380] pact-broker -- (0.000510s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171118_create_webhook_events.rb')
2021-09-06 01:09:03.299966 I [72885:4380] pact-broker -- Finished applying migration 20171118_create_webhook_events.rb, direction: up, took 0.000722 seconds
2021-09-06 01:09:03.299973 I [72885:4380] pact-broker -- Begin applying migration 20180108_create_certificates_table.rb, direction: up
2021-09-06 01:09:03.300838 I [72885:4380] pact-broker -- (0.000721s) CREATE TABLE `certificates` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_certificate_uuid` UNIQUE, `description` varchar(255) NULL, `content` mediumtext NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 01:09:03.301480 I [72885:4380] pact-broker -- (0.000584s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180108_create_certificates_table.rb')
2021-09-06 01:09:03.301497 I [72885:4380] pact-broker -- Finished applying migration 20180108_create_certificates_table.rb, direction: up, took 0.001521 seconds
2021-09-06 01:09:03.301504 I [72885:4380] pact-broker -- Begin applying migration 20180109_migrate_trigger_type.rb, direction: up
2021-09-06 01:09:03.301660 I [72885:4380] pact-broker -- (0.000067s) UPDATE `triggered_webhooks` SET `trigger_type` = 'resource_creation' WHERE (`trigger_type` = 'pact_publication')
2021-09-06 01:09:03.302267 I [72885:4380] pact-broker -- (0.000555s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180109_migrate_trigger_type.rb')
2021-09-06 01:09:03.302284 I [72885:4380] pact-broker -- Finished applying migration 20180109_migrate_trigger_type.rb, direction: up, took 0.000777 seconds
2021-09-06 01:09:03.302290 I [72885:4380] pact-broker -- Begin applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 01:09:03.302377 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_creation_dates: DROP VIEW `latest_triggered_webhook_creation_dates`
2021-09-06 01:09:03.303107 I [72885:4380] pact-broker -- (0.000593s) CREATE VIEW `latest_triggered_webhook_creation_dates` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
  from triggered_webhooks
  group by webhook_uuid, consumer_id, provider_id
2021-09-06 01:09:03.303811 I [72885:4380] pact-broker -- (0.000656s) DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 01:09:03.304592 I [72885:4380] pact-broker -- (0.000735s) CREATE VIEW `latest_triggered_webhook_ids` AS select tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at, max(tw.id) as latest_triggered_webhook_id
  from latest_triggered_webhook_creation_dates ltwcd
  inner join triggered_webhooks tw
  on tw.consumer_id = ltwcd.consumer_id
  and tw.provider_id = ltwcd.provider_id
  and tw.webhook_uuid = ltwcd.webhook_uuid
  and tw.created_at = ltwcd.latest_triggered_webhook_created_at
  group by tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at
2021-09-06 01:09:03.305210 I [72885:4380] pact-broker -- (0.000573s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 01:09:03.305850 I [72885:4380] pact-broker -- (0.000572s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
  from triggered_webhooks tw
  inner join latest_triggered_webhook_ids ltwi
  on tw.consumer_id = ltwi.consumer_id
  and tw.provider_id = ltwi.provider_id
  and tw.webhook_uuid = ltwi.webhook_uuid
  and tw.id = ltwi.latest_triggered_webhook_id
2021-09-06 01:09:03.306459 I [72885:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180119_update_latest_triggered_webhooks.rb')
2021-09-06 01:09:03.306475 I [72885:4380] pact-broker -- Finished applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up, took 0.004181 seconds
2021-09-06 01:09:03.306481 I [72885:4380] pact-broker -- Begin applying migration 20180122_create_head_pact_publications.rb, direction: up
2021-09-06 01:09:03.307099 I [72885:4380] pact-broker -- (0.000581s) CREATE VIEW `head_pact_publications` AS select lp.*, null as tag_name, 1 as latest
      from latest_pact_publications lp

      UNION

      select ltp.*, null as latest
      from latest_tagged_pact_publications ltp
      
2021-09-06 01:09:03.307647 I [72885:4380] pact-broker -- (0.000485s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180122_create_head_pact_publications.rb')
2021-09-06 01:09:03.307663 I [72885:4380] pact-broker -- Finished applying migration 20180122_create_head_pact_publications.rb, direction: up, took 0.001179 seconds
2021-09-06 01:09:03.307670 I [72885:4380] pact-broker -- Begin applying migration 20180123_create_tags_with_latest_flag.rb, direction: up
2021-09-06 01:09:03.308364 I [72885:4380] pact-broker -- (0.000649s) CREATE VIEW `latest_tagged_version_orders` AS 
        select v.pacticipant_id, t.name as tag_name, max(v.`order`) as latest_version_order, 1 as latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        group by v.pacticipant_id, t.name
      
2021-09-06 01:09:03.308965 I [72885:4380] pact-broker -- (0.000549s) CREATE VIEW `tags_with_latest_flag` AS 
        select t.*, ltvo.latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        left outer join latest_tagged_version_orders ltvo
        on t.name = ltvo.tag_name
        and v.pacticipant_id = ltvo.pacticipant_id
        and v.`order` = ltvo.latest_version_order
      
2021-09-06 01:09:03.309554 I [72885:4380] pact-broker -- (0.000530s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180123_create_tags_with_latest_flag.rb')
2021-09-06 01:09:03.309569 I [72885:4380] pact-broker -- Finished applying migration 20180123_create_tags_with_latest_flag.rb, direction: up, took 0.001896 seconds
2021-09-06 01:09:03.309576 I [72885:4380] pact-broker -- Begin applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 01:09:03.310236 I [72885:4380] pact-broker -- (0.000621s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:09:03.311038 I [72885:4380] pact-broker -- (0.000757s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider` AS select matrix.consumer_version_id, matrix.provider_id, max(verification_id) as latest_verification_id
      from latest_matrix_for_consumer_version_and_provider_version matrix
      where matrix.verification_id is not null
      group by matrix.consumer_version_id, matrix.provider_id
      
2021-09-06 01:09:03.311856 I [72885:4380] pact-broker -- (0.000770s) DROP VIEW `latest_matrix`
2021-09-06 01:09:03.312608 I [72885:4380] pact-broker -- (0.000710s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_id = lv.provider_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      where verification_id is null
      
2021-09-06 01:09:03.313266 I [72885:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180129_create_latest_matrix_for_cv_and_pv.rb')
2021-09-06 01:09:03.313281 I [72885:4380] pact-broker -- Finished applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.003703 seconds
2021-09-06 01:09:03.313288 I [72885:4380] pact-broker -- Begin applying migration 20180130_create_materialized_matrix.rb, direction: up
2021-09-06 01:09:03.314205 I [72885:4380] pact-broker -- (0.000658s) CREATE TABLE `materialized_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 01:09:03.314921 I [72885:4380] pact-broker -- (0.000668s) CREATE INDEX `ndx_mm_consumer_id` ON `materialized_matrix` (`consumer_id`)
2021-09-06 01:09:03.315553 I [72885:4380] pact-broker -- (0.000587s) CREATE INDEX `ndx_mm_provider_id` ON `materialized_matrix` (`provider_id`)
2021-09-06 01:09:03.316228 I [72885:4380] pact-broker -- (0.000630s) CREATE INDEX `ndx_mm_cv_ord` ON `materialized_matrix` (`consumer_version_order`)
2021-09-06 01:09:03.316558 I [72885:4380] pact-broker -- (0.000231s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 01:09:03.317185 I [72885:4380] pact-broker -- (0.000576s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180130_create_materialized_matrix.rb')
2021-09-06 01:09:03.317201 I [72885:4380] pact-broker -- Finished applying migration 20180130_create_materialized_matrix.rb, direction: up, took 0.003909 seconds
2021-09-06 01:09:03.317207 I [72885:4380] pact-broker -- Begin applying migration 20180131_create_materialized_latest_matrix.rb, direction: up
2021-09-06 01:09:03.318156 I [72885:4380] pact-broker -- (0.000703s) CREATE TABLE `materialized_latest_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 01:09:03.318884 I [72885:4380] pact-broker -- (0.000682s) CREATE INDEX `ndx_mlm_consumer_id` ON `materialized_latest_matrix` (`consumer_id`)
2021-09-06 01:09:03.319557 I [72885:4380] pact-broker -- (0.000628s) CREATE INDEX `ndx_mlm_provider_id` ON `materialized_latest_matrix` (`provider_id`)
2021-09-06 01:09:03.320368 I [72885:4380] pact-broker -- (0.000765s) CREATE INDEX `ndx_mlm_cv_ord` ON `materialized_latest_matrix` (`consumer_version_order`)
2021-09-06 01:09:03.324279 I [72885:4380] pact-broker -- (0.003824s) INSERT INTO `materialized_latest_matrix` SELECT * FROM `latest_matrix`
2021-09-06 01:09:03.325040 I [72885:4380] pact-broker -- (0.000700s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180131_create_materialized_latest_matrix.rb')
2021-09-06 01:09:03.325062 I [72885:4380] pact-broker -- Finished applying migration 20180131_create_materialized_latest_matrix.rb, direction: up, took 0.007851 seconds
2021-09-06 01:09:03.325070 I [72885:4380] pact-broker -- Begin applying migration 20180201_create_head_matrix.rb, direction: up
2021-09-06 01:09:03.326077 I [72885:4380] pact-broker -- (0.000962s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:09:03.326882 I [72885:4380] pact-broker -- (0.000735s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180201_create_head_matrix.rb')
2021-09-06 01:09:03.326900 I [72885:4380] pact-broker -- Finished applying migration 20180201_create_head_matrix.rb, direction: up, took 0.001826 seconds
2021-09-06 01:09:03.326907 I [72885:4380] pact-broker -- Begin applying migration 20180202_create_materialized_head_matrix.rb, direction: up
2021-09-06 01:09:03.328225 I [72885:4380] pact-broker -- (0.001039s) CREATE TABLE `materialized_head_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255), `consumer_tag_name` varchar(255))
2021-09-06 01:09:03.329115 I [72885:4380] pact-broker -- (0.000830s) CREATE INDEX `ndx_mhm_consumer_id` ON `materialized_head_matrix` (`consumer_id`)
2021-09-06 01:09:03.329940 I [72885:4380] pact-broker -- (0.000773s) CREATE INDEX `ndx_mhm_provider_id` ON `materialized_head_matrix` (`provider_id`)
2021-09-06 01:09:03.330675 I [72885:4380] pact-broker -- (0.000685s) CREATE INDEX `ndx_mhm_cv_ord` ON `materialized_head_matrix` (`consumer_version_order`)
2021-09-06 01:09:03.331255 I [72885:4380] pact-broker -- (0.000519s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180202_create_materialized_head_matrix.rb')
2021-09-06 01:09:03.331276 I [72885:4380] pact-broker -- Finished applying migration 20180202_create_materialized_head_matrix.rb, direction: up, took 0.004366 seconds
2021-09-06 01:09:03.331283 I [72885:4380] pact-broker -- Begin applying migration 20180203_fix_head_matrix.rb, direction: up
2021-09-06 01:09:03.331873 I [72885:4380] pact-broker -- (0.000555s) DROP VIEW `head_matrix`
2021-09-06 01:09:03.332569 I [72885:4380] pact-broker -- (0.000652s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      where verification_id is null
      
2021-09-06 01:09:03.333178 I [72885:4380] pact-broker -- (0.000527s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180203_fix_head_matrix.rb')
2021-09-06 01:09:03.333194 I [72885:4380] pact-broker -- Finished applying migration 20180203_fix_head_matrix.rb, direction: up, took 0.001909 seconds
2021-09-06 01:09:03.333201 I [72885:4380] pact-broker -- Begin applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 01:09:03.333753 I [72885:4380] pact-broker -- (0.000519s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:09:03.334442 I [72885:4380] pact-broker -- (0.000645s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS 
      SELECT matrix.* FROM matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:09:03.334989 I [72885:4380] pact-broker -- (0.000481s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180204_fix_latest_matrix_for_cv_and_pv.rb')
2021-09-06 01:09:03.335005 I [72885:4380] pact-broker -- Finished applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.001801 seconds
2021-09-06 01:09:03.335011 I [72885:4380] pact-broker -- Begin applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up
2021-09-06 01:09:03.335784 I [72885:4380] pact-broker -- (0.000738s) DROP TABLE `materialized_latest_matrix`
2021-09-06 01:09:03.336440 I [72885:4380] pact-broker -- (0.000590s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180205_drop_materialized_latest_matrix.rb')
2021-09-06 01:09:03.336457 I [72885:4380] pact-broker -- Finished applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up, took 0.001442 seconds
2021-09-06 01:09:03.336464 I [72885:4380] pact-broker -- Begin applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up
2021-09-06 01:09:03.337056 I [72885:4380] pact-broker -- (0.000553s) DROP VIEW `head_matrix`
2021-09-06 01:09:03.337751 I [72885:4380] pact-broker -- (0.000646s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:09:03.337828 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.337859 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.337898 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:03.353293 I [72885:4380] pact-broker -- (0.015323s) ALTER TABLE `materialized_head_matrix` RENAME COLUMN `consumer_tag_name` TO `consumer_version_tag_name`
2021-09-06 01:09:03.353881 I [72885:4380] pact-broker -- (0.000545s) COMMIT
2021-09-06 01:09:03.353967 I [72885:4380] pact-broker -- (0.000020s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.354003 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.354781 I [72885:4380] pact-broker -- (0.000708s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180206_recreate_head_matrix_rename_consumer_tag_name.rb')
2021-09-06 01:09:03.354801 I [72885:4380] pact-broker -- Finished applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up, took 0.018331 seconds
2021-09-06 01:09:03.354808 I [72885:4380] pact-broker -- Begin applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up
2021-09-06 01:09:03.355502 I [72885:4380] pact-broker -- (0.000654s) DROP VIEW `head_matrix`
2021-09-06 01:09:03.356361 I [72885:4380] pact-broker -- (0.000809s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION ALL

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 01:09:03.357155 I [72885:4380] pact-broker -- (0.000725s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180207_recreate_head_matrix_union_all.rb')
2021-09-06 01:09:03.357176 I [72885:4380] pact-broker -- Finished applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up, took 0.002365 seconds
2021-09-06 01:09:03.357183 I [72885:4380] pact-broker -- Begin applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up
2021-09-06 01:09:03.357249 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.357279 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.357314 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.357651 I [72885:4380] pact-broker -- (0.000265s) CREATE INDEX `materialized_head_matrix_consumer_version_tag_name_index` ON `materialized_head_matrix` (`consumer_version_tag_name`)
2021-09-06 01:09:03.358178 I [72885:4380] pact-broker -- (0.000497s) COMMIT
2021-09-06 01:09:03.358244 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.358279 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.358894 I [72885:4380] pact-broker -- (0.000564s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180208_add_cv_tag_name_index_to_mat_head_matrix.rb')
2021-09-06 01:09:03.358910 I [72885:4380] pact-broker -- Finished applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up, took 0.001724 seconds
2021-09-06 01:09:03.358917 I [72885:4380] pact-broker -- Begin applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up
2021-09-06 01:09:03.359549 I [72885:4380] pact-broker -- (0.000596s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:09:03.360290 I [72885:4380] pact-broker -- (0.000698s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:09:03.360895 I [72885:4380] pact-broker -- (0.000543s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb')
2021-09-06 01:09:03.360914 I [72885:4380] pact-broker -- Finished applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up, took 0.001994 seconds
2021-09-06 01:09:03.360921 I [72885:4380] pact-broker -- Begin applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up
2021-09-06 01:09:03.360978 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.361007 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.361039 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.361336 I [72885:4380] pact-broker -- (0.000255s) CREATE INDEX `ndx_mm_verif_id` ON `materialized_matrix` (`verification_id`)
2021-09-06 01:09:03.361462 I [72885:4380] pact-broker -- (0.000065s) CREATE INDEX `ndx_mm_pact_rev_num` ON `materialized_matrix` (`pact_revision_number`)
2021-09-06 01:09:03.361907 I [72885:4380] pact-broker -- (0.000422s) COMMIT
2021-09-06 01:09:03.361959 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.361988 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.362669 I [72885:4380] pact-broker -- (0.000650s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 01:09:03.363375 I [72885:4380] pact-broker -- (0.000662s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 01:09:03.363531 I [72885:4380] pact-broker -- (0.000062s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:09:03.370055 I [72885:4380] pact-broker -- (0.006444s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 01:09:03.370842 I [72885:4380] pact-broker -- (0.000729s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180210_fix_latest_matrix_for_cv_and_pv_again.rb')
2021-09-06 01:09:03.370861 I [72885:4380] pact-broker -- Finished applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up, took 0.009935 seconds
2021-09-06 01:09:03.370868 I [72885:4380] pact-broker -- Begin applying migration 20180311_optimise_head_matrix.rb, direction: up
2021-09-06 01:09:03.371744 I [72885:4380] pact-broker -- (0.000700s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:09:03.372757 I [72885:4380] pact-broker -- (0.000850s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `pact_publications`.`provider_id`, `cv`.`pacticipant_id` AS 'consumer_id', `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `pact_publications`.`consumer_version_id`) GROUP BY `pact_publications`.`provider_id`, `cv`.`pacticipant_id`, `t`.`name`
2021-09-06 01:09:03.373553 I [72885:4380] pact-broker -- (0.000649s) DROP VIEW `latest_verifications`
2021-09-06 01:09:03.374431 I [72885:4380] pact-broker -- (0.000738s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:09:03.375173 I [72885:4380] pact-broker -- (0.000694s) DROP VIEW `head_matrix`
2021-09-06 01:09:03.376100 I [72885:4380] pact-broker -- (0.000881s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 01:09:03.376877 I [72885:4380] pact-broker -- (0.000692s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180311_optimise_head_matrix.rb')
2021-09-06 01:09:03.376895 I [72885:4380] pact-broker -- Finished applying migration 20180311_optimise_head_matrix.rb, direction: up, took 0.006024 seconds
2021-09-06 01:09:03.376902 I [72885:4380] pact-broker -- Begin applying migration 20180315_create_verification_sequence.rb, direction: up
2021-09-06 01:09:03.377784 I [72885:4380] pact-broker -- (0.000802s) CREATE TABLE `verification_sequence_number` (`value` integer NOT NULL)
2021-09-06 01:09:03.377998 I [72885:4380] pact-broker -- (0.000093s) SELECT max(`number`) AS 'max' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.378801 I [72885:4380] pact-broker -- (0.000730s) INSERT INTO `verification_sequence_number` (`value`) VALUES (100)
2021-09-06 01:09:03.379427 I [72885:4380] pact-broker -- (0.000568s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180315_create_verification_sequence.rb')
2021-09-06 01:09:03.379444 I [72885:4380] pact-broker -- Finished applying migration 20180315_create_verification_sequence.rb, direction: up, took 0.002537 seconds
2021-09-06 01:09:03.379455 I [72885:4380] pact-broker -- Begin applying migration 20180330_refresh_matrix.rb, direction: up
2021-09-06 01:09:03.379590 I [72885:4380] pact-broker -- (0.000065s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 01:09:03.379894 I [72885:4380] pact-broker -- (0.000241s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 01:09:03.380002 I [72885:4380] pact-broker -- (0.000048s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:09:03.381513 I [72885:4380] pact-broker -- (0.001442s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 01:09:03.382197 I [72885:4380] pact-broker -- (0.000627s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180330_refresh_matrix.rb')
2021-09-06 01:09:03.382215 I [72885:4380] pact-broker -- Finished applying migration 20180330_refresh_matrix.rb, direction: up, took 0.002756 seconds
2021-09-06 01:09:03.382222 I [72885:4380] pact-broker -- Begin applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up
2021-09-06 01:09:03.382991 I [72885:4380] pact-broker -- (0.000729s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:09:03.383215 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_version_tags: DROP VIEW `latest_verifications_for_consumer_version_tags`
2021-09-06 01:09:03.384170 I [72885:4380] pact-broker -- (0.000699s) CREATE VIEW `latest_verifications_for_consumer_version_tags` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `lv`.`consumer_version_tag_name`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_version_tags` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 01:09:03.384976 I [72885:4380] pact-broker -- (0.000740s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180523_create_latest_verifications_for_consumer_version_tags.rb')
2021-09-06 01:09:03.384993 I [72885:4380] pact-broker -- Finished applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up, took 0.002768 seconds
2021-09-06 01:09:03.385004 I [72885:4380] pact-broker -- Begin applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up
2021-09-06 01:09:03.385772 I [72885:4380] pact-broker -- (0.000728s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id
2021-09-06 01:09:03.385989 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_and_provider: DROP VIEW `latest_verifications_for_consumer_and_provider`
2021-09-06 01:09:03.387094 I [72885:4380] pact-broker -- (0.000871s) CREATE VIEW `latest_verifications_for_consumer_and_provider` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_and_provider` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 01:09:03.387792 I [72885:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180524_create_latest_verifications_for_consumer_and_provider.rb')
2021-09-06 01:09:03.387811 I [72885:4380] pact-broker -- Finished applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up, took 0.002802 seconds
2021-09-06 01:09:03.387817 I [72885:4380] pact-broker -- Begin applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up
2021-09-06 01:09:03.387884 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.387914 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.387952 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.389264 I [72885:4380] pact-broker -- (0.001250s) ALTER TABLE `triggered_webhooks` ADD COLUMN `verification_id` integer REFERENCES `verifications`
2021-09-06 01:09:03.389703 I [72885:4380] pact-broker -- (0.000398s) COMMIT
2021-09-06 01:09:03.389761 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.389790 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.390432 I [72885:4380] pact-broker -- (0.000590s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180608_add_verification_to_triggered_webhook.rb')
2021-09-06 01:09:03.390448 I [72885:4380] pact-broker -- Finished applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up, took 0.002627 seconds
2021-09-06 01:09:03.390454 I [72885:4380] pact-broker -- Begin applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up
2021-09-06 01:09:03.390509 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.390538 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.390570 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.390796 I [72885:4380] pact-broker -- (0.000170s) PRAGMA table_info('webhooks')
2021-09-06 01:09:03.390908 I [72885:4380] pact-broker -- (0.000064s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:09:03.390978 I [72885:4380] pact-broker -- (0.000034s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.391032 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.391249 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.391345 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:09:03.391515 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.391637 I [72885:4380] pact-broker -- (0.000043s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.391692 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.395527 I [72885:4380] pact-broker -- (0.003808s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:09:03.395705 I [72885:4380] pact-broker -- (0.000153s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.395788 I [72885:4380] pact-broker -- (0.000060s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:09:03.395906 I [72885:4380] pact-broker -- (0.000099s) DROP TABLE `webhooks_backup0`
2021-09-06 01:09:03.396101 I [72885:4380] pact-broker -- (0.000139s) PRAGMA table_info('webhooks')
2021-09-06 01:09:03.396189 I [72885:4380] pact-broker -- (0.000041s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:09:03.396252 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.396304 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.396534 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.396610 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:09:03.396874 I [72885:4380] pact-broker -- (0.000120s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.397827 I [72885:4380] pact-broker -- (0.000856s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.397892 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.401474 I [72885:4380] pact-broker -- (0.003555s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:09:03.401603 I [72885:4380] pact-broker -- (0.000106s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.401656 I [72885:4380] pact-broker -- (0.000033s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:09:03.401726 I [72885:4380] pact-broker -- (0.000053s) DROP TABLE `webhooks_backup0`
2021-09-06 01:09:03.401891 I [72885:4380] pact-broker -- (0.000118s) PRAGMA table_info('webhooks')
2021-09-06 01:09:03.401993 I [72885:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('webhooks')
2021-09-06 01:09:03.402054 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.402109 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.402317 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.402383 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 01:09:03.402629 I [72885:4380] pact-broker -- (0.000116s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.403593 I [72885:4380] pact-broker -- (0.000862s) PRAGMA index_list('webhooks')
2021-09-06 01:09:03.403657 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 01:09:03.407337 I [72885:4380] pact-broker -- (0.003641s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 01:09:03.407496 I [72885:4380] pact-broker -- (0.000132s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.407559 I [72885:4380] pact-broker -- (0.000041s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 01:09:03.407641 I [72885:4380] pact-broker -- (0.000058s) DROP TABLE `webhooks_backup0`
2021-09-06 01:09:03.408300 I [72885:4380] pact-broker -- (0.000632s) COMMIT
2021-09-06 01:09:03.408362 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.408393 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.409192 I [72885:4380] pact-broker -- (0.000727s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180611_make_webhook_pacticipant_ids_optional.rb')
2021-09-06 01:09:03.409211 I [72885:4380] pact-broker -- Finished applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up, took 0.018753 seconds
2021-09-06 01:09:03.409219 I [72885:4380] pact-broker -- Begin applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up
2021-09-06 01:09:03.409296 I [72885:4380] pact-broker -- (0.000021s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.409331 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.409363 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.410644 I [72885:4380] pact-broker -- (0.001212s) ALTER TABLE `verifications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 01:09:03.411711 I [72885:4380] pact-broker -- (0.000999s) ALTER TABLE `verifications` ADD COLUMN `provider_id` integer REFERENCES `pacticipants`
2021-09-06 01:09:03.411871 I [72885:4380] pact-broker -- (0.000117s) CREATE INDEX `verifications_consumer_id_index` ON `verifications` (`consumer_id`)
2021-09-06 01:09:03.411984 I [72885:4380] pact-broker -- (0.000063s) CREATE INDEX `verifications_provider_id_index` ON `verifications` (`provider_id`)
2021-09-06 01:09:03.412086 I [72885:4380] pact-broker -- (0.000065s) CREATE INDEX `verifications_provider_id_consumer_id_index` ON `verifications` (`provider_id`, `consumer_id`)
2021-09-06 01:09:03.412793 I [72885:4380] pact-broker -- (0.000681s) COMMIT
2021-09-06 01:09:03.412858 I [72885:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.412910 I [72885:4380] pact-broker -- (0.000021s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.413576 I [72885:4380] pact-broker -- (0.000605s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180612_add_pacticipant_ids_to_verifications.rb')
2021-09-06 01:09:03.413595 I [72885:4380] pact-broker -- Finished applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up, took 0.004372 seconds
2021-09-06 01:09:03.413601 I [72885:4380] pact-broker -- Begin applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up
2021-09-06 01:09:03.413793 I [72885:4380] pact-broker -- (0.000083s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.414059 I [72885:4380] pact-broker -- (0.000191s) PRAGMA table_info('verifications')
2021-09-06 01:09:03.414252 I [72885:4380] pact-broker -- (0.000062s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.414429 I [72885:4380] pact-broker -- (0.000058s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.414590 I [72885:4380] pact-broker -- (0.000062s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.414776 I [72885:4380] pact-broker -- (0.000124s) PRAGMA table_info('pact_versions')
2021-09-06 01:09:03.414936 I [72885:4380] pact-broker -- (0.000057s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.415097 I [72885:4380] pact-broker -- (0.000061s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.415231 I [72885:4380] pact-broker -- (0.000090s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 01:09:03.416115 I [72885:4380] pact-broker -- (0.000815s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180613_migrate_pacticipant_ids_for_verifications.rb')
2021-09-06 01:09:03.416132 I [72885:4380] pact-broker -- Finished applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up, took 0.002527 seconds
2021-09-06 01:09:03.416139 I [72885:4380] pact-broker -- Begin applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 01:09:03.416946 I [72885:4380] pact-broker -- (0.000766s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 01:09:03.417794 I [72885:4380] pact-broker -- (0.000788s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(id) as latest_verification_id
        from verifications v
        group by provider_id, consumer_id
2021-09-06 01:09:03.418742 I [72885:4380] pact-broker -- (0.000876s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180614_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 01:09:03.418760 I [72885:4380] pact-broker -- Finished applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.002617 seconds
2021-09-06 01:09:03.418767 I [72885:4380] pact-broker -- Begin applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up
2021-09-06 01:09:03.418836 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.418865 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.418907 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:03.420214 I [72885:4380] pact-broker -- (0.001242s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 01:09:03.420375 I [72885:4380] pact-broker -- (0.000113s) CREATE INDEX `pact_publications_consumer_id_index` ON `pact_publications` (`consumer_id`)
2021-09-06 01:09:03.421003 I [72885:4380] pact-broker -- (0.000601s) COMMIT
2021-09-06 01:09:03.421066 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.421103 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.421892 I [72885:4380] pact-broker -- (0.000735s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180615_add_consumer_id_to_pact_publications.rb')
2021-09-06 01:09:03.421913 I [72885:4380] pact-broker -- Finished applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up, took 0.003143 seconds
2021-09-06 01:09:03.421930 I [72885:4380] pact-broker -- Begin applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up
2021-09-06 01:09:03.422110 I [72885:4380] pact-broker -- (0.000086s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.423417 I [72885:4380] pact-broker -- (0.001239s) PRAGMA table_info('pact_publications')
2021-09-06 01:09:03.423585 I [72885:4380] pact-broker -- (0.000064s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.423730 I [72885:4380] pact-broker -- (0.000058s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.423923 I [72885:4380] pact-broker -- (0.000140s) PRAGMA table_info('versions')
2021-09-06 01:09:03.424072 I [72885:4380] pact-broker -- (0.000057s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.424180 I [72885:4380] pact-broker -- (0.000071s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 01:09:03.425013 I [72885:4380] pact-broker -- (0.000773s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180616_migrate_consumer_ids_for_pact_publications.rb')
2021-09-06 01:09:03.425031 I [72885:4380] pact-broker -- Finished applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up, took 0.003097 seconds
2021-09-06 01:09:03.425037 I [72885:4380] pact-broker -- Begin applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up
2021-09-06 01:09:03.426179 I [72885:4380] pact-broker -- (0.000961s) CREATE TABLE `latest_pact_publication_ids_for_consumer_versions` (`consumer_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `consumer_version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `provider_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `pact_publication_id` integer NOT NULL UNIQUE REFERENCES `pact_publications` ON DELETE CASCADE, `pact_version_id` integer NOT NULL REFERENCES `pact_versions` ON DELETE CASCADE)
2021-09-06 01:09:03.427146 I [72885:4380] pact-broker -- (0.000913s) CREATE UNIQUE INDEX `unq_latest_ppid_prov_conver` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_version_id`)
2021-09-06 01:09:03.427982 I [72885:4380] pact-broker -- (0.000784s) CREATE INDEX `lpp_provider_id_consumer_id_index` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_id`)
2021-09-06 01:09:03.428822 I [72885:4380] pact-broker -- (0.000772s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180720_create_latest_pact_publication_ids.rb')
2021-09-06 01:09:03.428848 I [72885:4380] pact-broker -- Finished applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up, took 0.003806 seconds
2021-09-06 01:09:03.428855 I [72885:4380] pact-broker -- Begin applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up
2021-09-06 01:09:03.429365 I [72885:4380] pact-broker -- (0.000403s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` SELECT `consumer_id`, `consumer_version_id`, `provider_id`, `id`, `pact_version_id` FROM `latest_pact_publications_by_consumer_versions`
2021-09-06 01:09:03.430024 I [72885:4380] pact-broker -- (0.000576s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180721_migrate_latest_pact_publication_ids.rb')
2021-09-06 01:09:03.430042 I [72885:4380] pact-broker -- Finished applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up, took 0.001184 seconds
2021-09-06 01:09:03.430049 I [72885:4380] pact-broker -- Begin applying migration 20180722_recreate_views.rb, direction: up
2021-09-06 01:09:03.430810 I [72885:4380] pact-broker -- (0.000723s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 01:09:03.431463 I [72885:4380] pact-broker -- (0.000606s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.consumer_version_id = app.consumer_version_id
  and lpp.pact_publication_id = app.id
  and lpp.provider_id = app.provider_id
2021-09-06 01:09:03.432237 I [72885:4380] pact-broker -- (0.000645s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 01:09:03.433015 I [72885:4380] pact-broker -- (0.000678s) CREATE VIEW `latest_pact_consumer_version_orders` AS SELECT `provider_id`, `consumer_id`, max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) GROUP BY `provider_id`, `consumer_id`
2021-09-06 01:09:03.433677 I [72885:4380] pact-broker -- (0.000580s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180722_recreate_views.rb')
2021-09-06 01:09:03.433693 I [72885:4380] pact-broker -- Finished applying migration 20180722_recreate_views.rb, direction: up, took 0.003641 seconds
2021-09-06 01:09:03.433699 I [72885:4380] pact-broker -- Begin applying migration 20180723_create_latest_verification_ids.rb, direction: up
2021-09-06 01:09:03.434605 I [72885:4380] pact-broker -- (0.000763s) CREATE TABLE `latest_verification_id_for_pact_version_and_provider_version` (`consumer_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_consumer_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `pact_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_pact_version_id_fk` REFERENCES `pact_versions` ON DELETE CASCADE, `provider_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `provider_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_version_id_fk` REFERENCES `versions` ON DELETE CASCADE, `verification_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_verification_id_fk` REFERENCES `verifications` ON DELETE CASCADE)
2021-09-06 01:09:03.435316 I [72885:4380] pact-broker -- (0.000643s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_v_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`verification_id`)
2021-09-06 01:09:03.436009 I [72885:4380] pact-broker -- (0.000646s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_pv_id_pv_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`)
2021-09-06 01:09:03.436712 I [72885:4380] pact-broker -- (0.000656s) CREATE INDEX `latest_v_id_for_pv_and_pv_pv_id_v_id` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `verification_id`)
2021-09-06 01:09:03.437398 I [72885:4380] pact-broker -- (0.000630s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180723_create_latest_verification_ids.rb')
2021-09-06 01:09:03.437415 I [72885:4380] pact-broker -- Finished applying migration 20180723_create_latest_verification_ids.rb, direction: up, took 0.003712 seconds
2021-09-06 01:09:03.437422 I [72885:4380] pact-broker -- Begin applying migration 20180724_migrate_latest_verification_ids.rb, direction: up
2021-09-06 01:09:03.437657 I [72885:4380] pact-broker -- (0.000092s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` SELECT `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`, max(`verifications`.`id`) AS 'verification_id' FROM `verifications` GROUP BY `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`
2021-09-06 01:09:03.438324 I [72885:4380] pact-broker -- (0.000618s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180724_migrate_latest_verification_ids.rb')
2021-09-06 01:09:03.438340 I [72885:4380] pact-broker -- Finished applying migration 20180724_migrate_latest_verification_ids.rb, direction: up, took 0.000915 seconds
2021-09-06 01:09:03.438347 I [72885:4380] pact-broker -- Begin applying migration 20180726_recreate_views.rb, direction: up
2021-09-06 01:09:03.438953 I [72885:4380] pact-broker -- (0.000570s) DROP VIEW `latest_verification_id_for_consumer_version_and_provider_version`
2021-09-06 01:09:03.439609 I [72885:4380] pact-broker -- (0.000613s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select pp.consumer_version_id, lv.provider_version_id, lv.verification_id as latest_verification_id
      from latest_pact_publication_ids_for_consumer_versions lpp
      inner join pact_publications pp
        on pp.id = lpp.pact_publication_id
      left outer join latest_verification_id_for_pact_version_and_provider_version lv
          on lv.pact_version_id = pp.pact_version_id
2021-09-06 01:09:03.440216 I [72885:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180726_recreate_views.rb')
2021-09-06 01:09:03.440232 I [72885:4380] pact-broker -- Finished applying migration 20180726_recreate_views.rb, direction: up, took 0.001882 seconds
2021-09-06 01:09:03.440239 I [72885:4380] pact-broker -- Begin applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:09:03.440820 I [72885:4380] pact-broker -- (0.000547s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:09:03.441573 I [72885:4380] pact-broker -- (0.000711s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
      v.provider_id,
      v.consumer_id,
      t.name as consumer_version_tag_name,
      max(v.verification_id) as latest_verification_id
    from latest_verification_id_for_pact_version_and_provider_version v
    join latest_pact_publication_ids_for_consumer_versions lpp
      on v.pact_version_id = lpp.pact_version_id
    join tags t
      on lpp.consumer_version_id = t.version_id
    group by v.provider_id, v.consumer_id, t.name
2021-09-06 01:09:03.442174 I [72885:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:09:03.442190 I [72885:4380] pact-broker -- Finished applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001948 seconds
2021-09-06 01:09:03.442196 I [72885:4380] pact-broker -- Begin applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up
2021-09-06 01:09:03.442327 I [72885:4380] pact-broker -- (0.000062s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 01:09:03.442429 I [72885:4380] pact-broker -- (0.000046s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 01:09:03.443037 I [72885:4380] pact-broker -- (0.000560s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180728_truncate_materialized_matrix_tables.rb')
2021-09-06 01:09:03.443052 I [72885:4380] pact-broker -- Finished applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up, took 0.000853 seconds
2021-09-06 01:09:03.443059 I [72885:4380] pact-broker -- Begin applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up
2021-09-06 01:09:03.443732 I [72885:4380] pact-broker -- (0.000636s) CREATE VIEW `latest_verification_ids_for_pact_versions` AS select pact_version_id, MAX(verification_id) latest_verification_id
    FROM latest_verification_id_for_pact_version_and_provider_version
    GROUP BY pact_version_id
2021-09-06 01:09:03.444448 I [72885:4380] pact-broker -- (0.000651s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180729_create_latest_verification_ids_for_provider_versions.rb')
2021-09-06 01:09:03.444466 I [72885:4380] pact-broker -- Finished applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up, took 0.001404 seconds
2021-09-06 01:09:03.444473 I [72885:4380] pact-broker -- Begin applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up
2021-09-06 01:09:03.445505 I [72885:4380] pact-broker -- (0.000782s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:09:03.446124 I [72885:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180730_create_latest_verifications_for_provider_versions.rb')
2021-09-06 01:09:03.446141 I [72885:4380] pact-broker -- Finished applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up, took 0.001665 seconds
2021-09-06 01:09:03.446148 I [72885:4380] pact-broker -- Begin applying migration 20180731_update_head_matrix.rb, direction: up
2021-09-06 01:09:03.446742 I [72885:4380] pact-broker -- (0.000560s) DROP VIEW `head_matrix`
2021-09-06 01:09:03.447613 I [72885:4380] pact-broker -- (0.000827s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 01:09:03.448187 I [72885:4380] pact-broker -- (0.000513s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180731_update_head_matrix.rb')
2021-09-06 01:09:03.448203 I [72885:4380] pact-broker -- Finished applying migration 20180731_update_head_matrix.rb, direction: up, took 0.002052 seconds
2021-09-06 01:09:03.448209 I [72885:4380] pact-broker -- Begin applying migration 20180828_create_latest_versions.rb, direction: up
2021-09-06 01:09:03.448327 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_version_orders: DROP VIEW `latest_version_orders`
2021-09-06 01:09:03.449115 I [72885:4380] pact-broker -- (0.000603s) CREATE VIEW `latest_version_orders` AS SELECT `pacticipant_id`, max(`order`) AS 'latest_version_order' FROM `versions` GROUP BY `pacticipant_id`
2021-09-06 01:09:03.449254 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_versions: DROP VIEW `latest_versions`
2021-09-06 01:09:03.450038 I [72885:4380] pact-broker -- (0.000619s) CREATE VIEW `latest_versions` AS SELECT `versions`.* FROM `versions` INNER JOIN `latest_version_orders` ON ((`versions`.`pacticipant_id` = `latest_version_orders`.`pacticipant_id`) AND (`versions`.`order` = `latest_version_orders`.`latest_version_order`))
2021-09-06 01:09:03.450692 I [72885:4380] pact-broker -- (0.000565s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180828_create_latest_versions.rb')
2021-09-06 01:09:03.450709 I [72885:4380] pact-broker -- Finished applying migration 20180828_create_latest_versions.rb, direction: up, took 0.002496 seconds
2021-09-06 01:09:03.450715 I [72885:4380] pact-broker -- Begin applying migration 20190509_create_version_sequence.rb, direction: up
2021-09-06 01:09:03.451440 I [72885:4380] pact-broker -- (0.000654s) CREATE TABLE `version_sequence_number` (`value` integer NOT NULL)
2021-09-06 01:09:03.452000 I [72885:4380] pact-broker -- (0.000504s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190509_create_version_sequence.rb')
2021-09-06 01:09:03.452016 I [72885:4380] pact-broker -- Finished applying migration 20190509_create_version_sequence.rb, direction: up, took 0.001298 seconds
2021-09-06 01:09:03.452023 I [72885:4380] pact-broker -- Begin applying migration 20190510_set_version_sequence.rb, direction: up
2021-09-06 01:09:03.452177 I [72885:4380] pact-broker -- (0.000072s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.452334 I [72885:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:03.452457 I [72885:4380] pact-broker -- (0.000068s) PRAGMA table_info('version_sequence_number')
2021-09-06 01:09:03.452606 I [72885:4380] pact-broker -- (0.000066s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 01:09:03.452703 I [72885:4380] pact-broker -- (0.000050s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:03.453383 I [72885:4380] pact-broker -- (0.000631s) INSERT INTO `version_sequence_number` (`value`) VALUES (100)
2021-09-06 01:09:03.453526 I [72885:4380] pact-broker -- (0.000067s) DELETE FROM `version_sequence_number` WHERE (`value` != 100)
2021-09-06 01:09:03.454174 I [72885:4380] pact-broker -- (0.000578s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190510_set_version_sequence.rb')
2021-09-06 01:09:03.454191 I [72885:4380] pact-broker -- Finished applying migration 20190510_set_version_sequence.rb, direction: up, took 0.002165 seconds
2021-09-06 01:09:03.454198 I [72885:4380] pact-broker -- Begin applying migration 20190511_create_integrations_view.rb, direction: up
2021-09-06 01:09:03.455105 I [72885:4380] pact-broker -- (0.000758s) CREATE VIEW `integrations` AS SELECT DISTINCT `consumer_id`, `c`.`name` AS 'consumer_name', `provider_id`, `p`.`name` AS 'provider_name' FROM `pact_publications` INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `pact_publications`.`consumer_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`)
2021-09-06 01:09:03.455779 I [72885:4380] pact-broker -- (0.000613s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190511_create_integrations_view.rb')
2021-09-06 01:09:03.455795 I [72885:4380] pact-broker -- Finished applying migration 20190511_create_integrations_view.rb, direction: up, took 0.001595 seconds
2021-09-06 01:09:03.455802 I [72885:4380] pact-broker -- Begin applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up
2021-09-06 01:09:03.455862 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.455912 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.455948 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.457344 I [72885:4380] pact-broker -- (0.001338s) ALTER TABLE `webhooks` ADD COLUMN `enabled` boolean DEFAULT (1)
2021-09-06 01:09:03.457742 I [72885:4380] pact-broker -- (0.000371s) COMMIT
2021-09-06 01:09:03.457795 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.457823 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.458377 I [72885:4380] pact-broker -- (0.000506s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190523_add_enabled_column_to_webhooks.rb')
2021-09-06 01:09:03.458392 I [72885:4380] pact-broker -- Finished applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up, took 0.002588 seconds
2021-09-06 01:09:03.458399 I [72885:4380] pact-broker -- Begin applying migration 20190524_set_webhooks_enabled.rb, direction: up
2021-09-06 01:09:03.458548 I [72885:4380] pact-broker -- (0.000068s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:09:03.458770 I [72885:4380] pact-broker -- (0.000151s) PRAGMA table_info('webhooks')
2021-09-06 01:09:03.458946 I [72885:4380] pact-broker -- (0.000052s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 01:09:03.459539 I [72885:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190524_set_webhooks_enabled.rb')
2021-09-06 01:09:03.459554 I [72885:4380] pact-broker -- Finished applying migration 20190524_set_webhooks_enabled.rb, direction: up, took 0.001153 seconds
2021-09-06 01:09:03.459561 I [72885:4380] pact-broker -- Begin applying migration 20190525_add_description_column_to_webhooks.rb, direction: up
2021-09-06 01:09:03.459636 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.459665 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.459695 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.461034 I [72885:4380] pact-broker -- (0.001289s) ALTER TABLE `webhooks` ADD COLUMN `description` varchar(255)
2021-09-06 01:09:03.461465 I [72885:4380] pact-broker -- (0.000406s) COMMIT
2021-09-06 01:09:03.461516 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.461544 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.462141 I [72885:4380] pact-broker -- (0.000551s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190525_add_description_column_to_webhooks.rb')
2021-09-06 01:09:03.462157 I [72885:4380] pact-broker -- Finished applying migration 20190525_add_description_column_to_webhooks.rb, direction: up, took 0.002594 seconds
2021-09-06 01:09:03.462163 I [72885:4380] pact-broker -- Begin applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up
2021-09-06 01:09:03.462216 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.462243 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.462273 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.463608 I [72885:4380] pact-broker -- (0.001268s) ALTER TABLE `webhooks` ADD COLUMN `headers` varchar(255)
2021-09-06 01:09:03.463963 I [72885:4380] pact-broker -- (0.000332s) COMMIT
2021-09-06 01:09:03.464015 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.464043 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.464637 I [72885:4380] pact-broker -- (0.000548s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190602_add_headers_column_to_webhooks.rb')
2021-09-06 01:09:03.464653 I [72885:4380] pact-broker -- Finished applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up, took 0.002486 seconds
2021-09-06 01:09:03.464659 I [72885:4380] pact-broker -- Begin applying migration 20190603_migrate_webhook_headers.rb, direction: up
2021-09-06 01:09:03.464797 I [72885:4380] pact-broker -- (0.000064s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:09:03.465031 I [72885:4380] pact-broker -- (0.000183s) PRAGMA table_info('webhooks')
2021-09-06 01:09:03.465211 I [72885:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:09:03.465357 I [72885:4380] pact-broker -- (0.000074s) PRAGMA table_info('webhook_headers')
2021-09-06 01:09:03.465485 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:09:03.465619 I [72885:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 01:09:03.465745 I [72885:4380] pact-broker -- (0.000080s) SELECT * FROM `webhook_headers`
2021-09-06 01:09:03.466290 I [72885:4380] pact-broker -- (0.000498s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190603_migrate_webhook_headers.rb')
2021-09-06 01:09:03.466306 I [72885:4380] pact-broker -- Finished applying migration 20190603_migrate_webhook_headers.rb, direction: up, took 0.001643 seconds
2021-09-06 01:09:03.466312 I [72885:4380] pact-broker -- Begin applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up
2021-09-06 01:09:03.466943 I [72885:4380] pact-broker -- (0.000548s) DROP VIEW `all_verifications`
2021-09-06 01:09:03.467696 I [72885:4380] pact-broker -- (0.000650s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at`, `test_results` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 01:09:03.468383 I [72885:4380] pact-broker -- (0.000624s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190909_add_test_results_to_all_verifications.rb')
2021-09-06 01:09:03.468399 I [72885:4380] pact-broker -- Finished applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up, took 0.002084 seconds
2021-09-06 01:09:03.468406 I [72885:4380] pact-broker -- Begin applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up
2021-09-06 01:09:03.469140 I [72885:4380] pact-broker -- (0.000575s) DROP VIEW `latest_verifications`
2021-09-06 01:09:03.469975 I [72885:4380] pact-broker -- (0.000707s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:09:03.470690 I [72885:4380] pact-broker -- (0.000652s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190910_add_test_results_to_latest_verifications.rb')
2021-09-06 01:09:03.470708 I [72885:4380] pact-broker -- Finished applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up, took 0.002299 seconds
2021-09-06 01:09:03.470715 I [72885:4380] pact-broker -- Begin applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up
2021-09-06 01:09:03.471570 I [72885:4380] pact-broker -- (0.000708s) DROP VIEW `latest_verifications_for_pact_versions`
2021-09-06 01:09:03.472386 I [72885:4380] pact-broker -- (0.000688s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 01:09:03.473096 I [72885:4380] pact-broker -- (0.000628s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190911_add_test_results_to_latest_verifications_for_pact_versions.rb')
2021-09-06 01:09:03.473114 I [72885:4380] pact-broker -- Finished applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up, took 0.002396 seconds
2021-09-06 01:09:03.473121 I [72885:4380] pact-broker -- Begin applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up
2021-09-06 01:09:03.473722 I [72885:4380] pact-broker -- (0.000564s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:09:03.474415 I [72885:4380] pact-broker -- (0.000648s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:09:03.475026 I [72885:4380] pact-broker -- (0.000549s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191025_optimise_latest_verification_ids_for_cv_tags.rb')
2021-09-06 01:09:03.475067 I [72885:4380] pact-broker -- Finished applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up, took 0.001919 seconds
2021-09-06 01:09:03.475074 I [72885:4380] pact-broker -- Begin applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 01:09:03.475802 I [72885:4380] pact-broker -- (0.000608s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:09:03.476607 I [72885:4380] pact-broker -- (0.000686s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 01:09:03.477221 I [72885:4380] pact-broker -- (0.000552s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191028_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 01:09:03.477237 I [72885:4380] pact-broker -- Finished applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002160 seconds
2021-09-06 01:09:03.477244 I [72885:4380] pact-broker -- Begin applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up
2021-09-06 01:09:03.477776 I [72885:4380] pact-broker -- (0.000497s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 01:09:03.478432 I [72885:4380] pact-broker -- (0.000612s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.pact_publication_id = app.id
2021-09-06 01:09:03.479022 I [72885:4380] pact-broker -- (0.000507s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191030_optimise_latest_pact_publications_by_consumer_versions_.rb')
2021-09-06 01:09:03.479038 I [72885:4380] pact-broker -- Finished applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up, took 0.001791 seconds
2021-09-06 01:09:03.479044 I [72885:4380] pact-broker -- Begin applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:09:03.479643 I [72885:4380] pact-broker -- (0.000565s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:09:03.480396 I [72885:4380] pact-broker -- (0.000708s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      where v.id in (select latest_verification_id from latest_verification_ids_for_pact_versions)
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 01:09:03.481042 I [72885:4380] pact-broker -- (0.000581s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:09:03.481059 I [72885:4380] pact-broker -- Finished applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.002011 seconds
2021-09-06 01:09:03.481066 I [72885:4380] pact-broker -- Begin applying migration 20191101_create_head_pact_tags.rb, direction: up
2021-09-06 01:09:03.481886 I [72885:4380] pact-broker -- (0.000586s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`))
2021-09-06 01:09:03.482501 I [72885:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191101_create_head_pact_tags.rb')
2021-09-06 01:09:03.482517 I [72885:4380] pact-broker -- Finished applying migration 20191101_create_head_pact_tags.rb, direction: up, took 0.001448 seconds
2021-09-06 01:09:03.482523 I [72885:4380] pact-broker -- Begin applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up
2021-09-06 01:09:03.482583 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.482612 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.482647 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.484044 I [72885:4380] pact-broker -- (0.001344s) ALTER TABLE `latest_pact_publication_ids_for_consumer_versions` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.484391 I [72885:4380] pact-broker -- (0.000321s) COMMIT
2021-09-06 01:09:03.484445 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.484474 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.485072 I [72885:4380] pact-broker -- (0.000550s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200318_add_created_at_to_latest_pact_publications.rb')
2021-09-06 01:09:03.485088 I [72885:4380] pact-broker -- Finished applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up, took 0.002561 seconds
2021-09-06 01:09:03.485094 I [72885:4380] pact-broker -- Begin applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up
2021-09-06 01:09:03.485172 I [72885:4380] pact-broker -- (0.000036s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.485201 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.485233 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.486577 I [72885:4380] pact-broker -- (0.001296s) ALTER TABLE `latest_verification_id_for_pact_version_and_provider_version` ADD COLUMN `created_at` timestamp
2021-09-06 01:09:03.487036 I [72885:4380] pact-broker -- (0.000432s) COMMIT
2021-09-06 01:09:03.487093 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.487121 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.487761 I [72885:4380] pact-broker -- (0.000592s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200319_add_created_at_to_latest_verifications.rb')
2021-09-06 01:09:03.487779 I [72885:4380] pact-broker -- Finished applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up, took 0.002681 seconds
2021-09-06 01:09:03.487786 I [72885:4380] pact-broker -- Begin applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up
2021-09-06 01:09:03.487842 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.487871 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.487902 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.489285 I [72885:4380] pact-broker -- (0.001308s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_name` varchar(255)
2021-09-06 01:09:03.489678 I [72885:4380] pact-broker -- (0.000368s) COMMIT
2021-09-06 01:09:03.489731 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.489760 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.490371 I [72885:4380] pact-broker -- (0.000563s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200922_add_event_to_triggered_webhook.rb')
2021-09-06 01:09:03.490388 I [72885:4380] pact-broker -- Finished applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up, took 0.002599 seconds
2021-09-06 01:09:03.490395 I [72885:4380] pact-broker -- Begin applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 01:09:03.490931 I [72885:4380] pact-broker -- (0.000501s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 01:09:03.491725 I [72885:4380] pact-broker -- (0.000749s) CREATE VIEW `latest_triggered_webhooks` AS select tw.id, tw.trigger_uuid, tw.trigger_type, tw.pact_publication_id, tw.webhook_id, tw.webhook_uuid, tw.consumer_id, tw.provider_id, tw.status, tw.created_at, tw.updated_at, tw.verification_id, tw.event_name
  from triggered_webhooks tw
  inner join (select max(id) as max_id
    from triggered_webhooks
    group by webhook_uuid, consumer_id, provider_id, event_name) latest_ids
  on latest_ids.max_id = tw.id
2021-09-06 01:09:03.492342 I [72885:4380] pact-broker -- (0.000554s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200930_update_latest_triggered_webhooks.rb')
2021-09-06 01:09:03.492379 I [72885:4380] pact-broker -- Finished applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up, took 0.001960 seconds
2021-09-06 01:09:03.492386 I [72885:4380] pact-broker -- Begin applying migration 20201006_add_wip_to_verification.rb, direction: up
2021-09-06 01:09:03.492443 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.492471 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.492502 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.493893 I [72885:4380] pact-broker -- (0.001337s) ALTER TABLE `verifications` ADD COLUMN `wip` boolean DEFAULT (0) NOT NULL
2021-09-06 01:09:03.494287 I [72885:4380] pact-broker -- (0.000370s) COMMIT
2021-09-06 01:09:03.494340 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.494368 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.495078 I [72885:4380] pact-broker -- (0.000661s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201006_add_wip_to_verification.rb')
2021-09-06 01:09:03.495094 I [72885:4380] pact-broker -- Finished applying migration 20201006_add_wip_to_verification.rb, direction: up, took 0.002704 seconds
2021-09-06 01:09:03.495101 I [72885:4380] pact-broker -- Begin applying migration 20201023_create_verification_number_sequence.rb, direction: up
2021-09-06 01:09:03.495708 I [72885:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201023_create_verification_number_sequence.rb')
2021-09-06 01:09:03.495724 I [72885:4380] pact-broker -- Finished applying migration 20201023_create_verification_number_sequence.rb, direction: up, took 0.000621 seconds
2021-09-06 01:09:03.495730 I [72885:4380] pact-broker -- Begin applying migration 20201024_create_version_order_sequence.rb, direction: up
2021-09-06 01:09:03.496357 I [72885:4380] pact-broker -- (0.000552s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201024_create_version_order_sequence.rb')
2021-09-06 01:09:03.496373 I [72885:4380] pact-broker -- Finished applying migration 20201024_create_version_order_sequence.rb, direction: up, took 0.000639 seconds
2021-09-06 01:09:03.496380 I [72885:4380] pact-broker -- Begin applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 01:09:03.496915 I [72885:4380] pact-broker -- (0.000500s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 01:09:03.497670 I [72885:4380] pact-broker -- (0.000712s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(verification_id) as latest_verification_id
        from latest_verification_id_for_pact_version_and_provider_version v
        group by provider_id, consumer_id
2021-09-06 01:09:03.498298 I [72885:4380] pact-broker -- (0.000566s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201026_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 01:09:03.498315 I [72885:4380] pact-broker -- Finished applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.001932 seconds
2021-09-06 01:09:03.498322 I [72885:4380] pact-broker -- Begin applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up
2021-09-06 01:09:03.498382 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.498409 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.498441 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.498725 I [72885:4380] pact-broker -- (0.000247s) CREATE INDEX `webhook_executions_triggered_webhook_id_index` ON `webhook_executions` (`triggered_webhook_id`)
2021-09-06 01:09:03.499190 I [72885:4380] pact-broker -- (0.000441s) COMMIT
2021-09-06 01:09:03.499242 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.499271 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.499320 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.499345 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.499374 I [72885:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 01:09:03.499692 I [72885:4380] pact-broker -- (0.000283s) CREATE INDEX `triggered_webhooks_webhook_id_index` ON `triggered_webhooks` (`webhook_id`)
2021-09-06 01:09:03.499799 I [72885:4380] pact-broker -- (0.000070s) CREATE INDEX `triggered_webhooks_consumer_id_index` ON `triggered_webhooks` (`consumer_id`)
2021-09-06 01:09:03.499898 I [72885:4380] pact-broker -- (0.000064s) CREATE INDEX `triggered_webhooks_provider_id_index` ON `triggered_webhooks` (`provider_id`)
2021-09-06 01:09:03.499994 I [72885:4380] pact-broker -- (0.000062s) CREATE INDEX `triggered_webhooks_verification_id_index` ON `triggered_webhooks` (`verification_id`)
2021-09-06 01:09:03.500113 I [72885:4380] pact-broker -- (0.000061s) CREATE INDEX `triggered_webhooks_pact_publication_id_index` ON `triggered_webhooks` (`pact_publication_id`)
2021-09-06 01:09:03.500684 I [72885:4380] pact-broker -- (0.000546s) COMMIT
2021-09-06 01:09:03.500740 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.500769 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.501440 I [72885:4380] pact-broker -- (0.000623s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210115_add_webhook_foreign_key_indexes.rb')
2021-09-06 01:09:03.501456 I [72885:4380] pact-broker -- Finished applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up, took 0.003131 seconds
2021-09-06 01:09:03.501462 I [72885:4380] pact-broker -- Begin applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up
2021-09-06 01:09:03.501518 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.501546 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.501576 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.502979 I [72885:4380] pact-broker -- (0.001358s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_context` varchar(255)
2021-09-06 01:09:03.503491 I [72885:4380] pact-broker -- (0.000485s) COMMIT
2021-09-06 01:09:03.503580 I [72885:4380] pact-broker -- (0.000048s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.503611 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.504351 I [72885:4380] pact-broker -- (0.000690s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210116_add_context_to_triggered_webhook.rb')
2021-09-06 01:09:03.504368 I [72885:4380] pact-broker -- Finished applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up, took 0.002902 seconds
2021-09-06 01:09:03.504375 I [72885:4380] pact-broker -- Begin applying migration 20210117_add_branch_to_version.rb, direction: up
2021-09-06 01:09:03.504434 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.504462 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.504493 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.505983 I [72885:4380] pact-broker -- (0.001441s) ALTER TABLE `versions` ADD COLUMN `branch` varchar(255)
2021-09-06 01:09:03.507258 I [72885:4380] pact-broker -- (0.001219s) ALTER TABLE `versions` ADD COLUMN `build_url` varchar(255)
2021-09-06 01:09:03.507447 I [72885:4380] pact-broker -- (0.000118s) CREATE INDEX `versions_pacticipant_id_branch_order_index` ON `versions` (`pacticipant_id`, `branch`, `order`)
2021-09-06 01:09:03.507938 I [72885:4380] pact-broker -- (0.000465s) COMMIT
2021-09-06 01:09:03.507994 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.508023 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.508645 I [72885:4380] pact-broker -- (0.000572s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210117_add_branch_to_version.rb')
2021-09-06 01:09:03.508661 I [72885:4380] pact-broker -- Finished applying migration 20210117_add_branch_to_version.rb, direction: up, took 0.004282 seconds
2021-09-06 01:09:03.508668 I [72885:4380] pact-broker -- Begin applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up
2021-09-06 01:09:03.509424 I [72885:4380] pact-broker -- (0.000594s) DROP VIEW `head_pact_tags`
2021-09-06 01:09:03.510208 I [72885:4380] pact-broker -- (0.000613s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id`, `tags`.`created_at` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`)) INNER JOIN `tags` ON ((`tags`.`version_id` = `cv`.`id`) AND (`tags`.`name` = `o`.`tag_name`))
2021-09-06 01:09:03.510914 I [72885:4380] pact-broker -- (0.000644s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210202_add_created_at_to_head_pact_tags.rb')
2021-09-06 01:09:03.510931 I [72885:4380] pact-broker -- Finished applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up, took 0.002260 seconds
2021-09-06 01:09:03.510939 I [72885:4380] pact-broker -- Begin applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up
2021-09-06 01:09:03.511002 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.511031 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.511065 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.512526 I [72885:4380] pact-broker -- (0.001413s) ALTER TABLE `tags` ADD COLUMN `pacticipant_id` integer
2021-09-06 01:09:03.513799 I [72885:4380] pact-broker -- (0.001203s) ALTER TABLE `tags` ADD COLUMN `version_order` integer
2021-09-06 01:09:03.513959 I [72885:4380] pact-broker -- (0.000110s) CREATE INDEX `tags_version_order_index` ON `tags` (`version_order`)
2021-09-06 01:09:03.514068 I [72885:4380] pact-broker -- (0.000072s) CREATE INDEX `tags_version_id_index` ON `tags` (`version_id`)
2021-09-06 01:09:03.514170 I [72885:4380] pact-broker -- (0.000068s) CREATE INDEX `tags_pacticipant_id_index` ON `tags` (`pacticipant_id`)
2021-09-06 01:09:03.514698 I [72885:4380] pact-broker -- (0.000504s) COMMIT
2021-09-06 01:09:03.514755 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.514785 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.515349 I [72885:4380] pact-broker -- (0.000513s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210205_add_pacticipant_id_to_tag.rb')
2021-09-06 01:09:03.515365 I [72885:4380] pact-broker -- Finished applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up, took 0.004423 seconds
2021-09-06 01:09:03.515371 I [72885:4380] pact-broker -- Begin applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up
2021-09-06 01:09:03.515432 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.515460 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.515518 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.515810 I [72885:4380] pact-broker -- (0.000254s) CREATE INDEX `tags_pacticipant_id_name_version_order_index` ON `tags` (`pacticipant_id`, `name`, `version_order`)
2021-09-06 01:09:03.516253 I [72885:4380] pact-broker -- (0.000419s) COMMIT
2021-09-06 01:09:03.516305 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.516333 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.516925 I [72885:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210206_add_index_to_tags_and_versions.rb')
2021-09-06 01:09:03.516940 I [72885:4380] pact-broker -- Finished applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up, took 0.001566 seconds
2021-09-06 01:09:03.516947 I [72885:4380] pact-broker -- Begin applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 01:09:03.517511 I [72885:4380] pact-broker -- (0.000528s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 01:09:03.518205 I [72885:4380] pact-broker -- (0.000652s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
    lpp.provider_id,
    lpp.consumer_id,
    t.name as consumer_version_tag_name,
    max(lv.latest_verification_id) as latest_verification_id
  from latest_verification_ids_for_pact_versions lv
  join latest_pact_publication_ids_for_consumer_versions lpp
    on lv.pact_version_id = lpp.pact_version_id
  join tags t
    on lpp.consumer_version_id = t.version_id
  group by lpp.provider_id, lpp.consumer_id, t.name

2021-09-06 01:09:03.518845 I [72885:4380] pact-broker -- (0.000579s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 01:09:03.518886 I [72885:4380] pact-broker -- Finished applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001935 seconds
2021-09-06 01:09:03.518893 I [72885:4380] pact-broker -- Begin applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 01:09:03.519703 I [72885:4380] pact-broker -- (0.000695s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 01:09:03.520444 I [72885:4380] pact-broker -- (0.000621s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`version_order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 01:09:03.521104 I [72885:4380] pact-broker -- (0.000596s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210208_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 01:09:03.521121 I [72885:4380] pact-broker -- Finished applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002225 seconds
2021-09-06 01:09:03.521128 I [72885:4380] pact-broker -- Begin applying migration 20210210_create_environments_table.rb, direction: up
2021-09-06 01:09:03.521953 I [72885:4380] pact-broker -- (0.000669s) CREATE TABLE `environments` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255), `name` varchar(255), `display_name` varchar(255), `production` Boolean, `contacts` varchar(255), `created_at` timestamp, `updated_at` timestamp)
2021-09-06 01:09:03.522692 I [72885:4380] pact-broker -- (0.000684s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.523421 I [72885:4380] pact-broker -- (0.000680s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.524026 I [72885:4380] pact-broker -- (0.000549s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210210_create_environments_table.rb')
2021-09-06 01:09:03.524042 I [72885:4380] pact-broker -- Finished applying migration 20210210_create_environments_table.rb, direction: up, took 0.002911 seconds
2021-09-06 01:09:03.524049 I [72885:4380] pact-broker -- Begin applying migration 20210216_create_deployed_versions_table.rb, direction: up
2021-09-06 01:09:03.524864 I [72885:4380] pact-broker -- (0.000634s) CREATE TABLE `deployed_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `currently_deployed` Boolean NOT NULL, `replaced_previous_deployed_version` Boolean NOT NULL, `created_at` timestamp, `updated_at` timestamp, `undeployed_at` timestamp)
2021-09-06 01:09:03.525587 I [72885:4380] pact-broker -- (0.000649s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.526340 I [72885:4380] pact-broker -- (0.000702s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.526935 I [72885:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210216_create_deployed_versions_table.rb')
2021-09-06 01:09:03.526952 I [72885:4380] pact-broker -- Finished applying migration 20210216_create_deployed_versions_table.rb, direction: up, took 0.002900 seconds
2021-09-06 01:09:03.526959 I [72885:4380] pact-broker -- Begin applying migration 20210226_set_deployment_columns_not_null.rb, direction: up
2021-09-06 01:09:03.527017 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.527046 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.527081 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.527307 I [72885:4380] pact-broker -- (0.000170s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.527397 I [72885:4380] pact-broker -- (0.000044s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.527462 I [72885:4380] pact-broker -- (0.000032s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.527668 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.527769 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.527927 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.528063 I [72885:4380] pact-broker -- (0.000059s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.528122 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:09:03.528177 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.532903 I [72885:4380] pact-broker -- (0.004672s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.533032 I [72885:4380] pact-broker -- (0.000105s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.533112 I [72885:4380] pact-broker -- (0.000059s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.533255 I [72885:4380] pact-broker -- (0.000121s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.533348 I [72885:4380] pact-broker -- (0.000074s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.533433 I [72885:4380] pact-broker -- (0.000066s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.533611 I [72885:4380] pact-broker -- (0.000129s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.533691 I [72885:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.533755 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.533939 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.534027 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.534289 I [72885:4380] pact-broker -- (0.000139s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.535438 I [72885:4380] pact-broker -- (0.001047s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.535499 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.535555 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:09:03.540046 I [72885:4380] pact-broker -- (0.004438s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.540220 I [72885:4380] pact-broker -- (0.000149s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.540272 I [72885:4380] pact-broker -- (0.000032s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.540352 I [72885:4380] pact-broker -- (0.000062s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.540438 I [72885:4380] pact-broker -- (0.000067s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.540521 I [72885:4380] pact-broker -- (0.000064s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.540700 I [72885:4380] pact-broker -- (0.000110s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.540777 I [72885:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.540862 I [72885:4380] pact-broker -- (0.000051s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.541056 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.541124 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.541385 I [72885:4380] pact-broker -- (0.000139s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.542533 I [72885:4380] pact-broker -- (0.001053s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.542597 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:09:03.542662 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.547111 I [72885:4380] pact-broker -- (0.004395s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.547230 I [72885:4380] pact-broker -- (0.000095s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.547280 I [72885:4380] pact-broker -- (0.000032s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.547617 I [72885:4380] pact-broker -- (0.000316s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.547714 I [72885:4380] pact-broker -- (0.000075s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.547861 I [72885:4380] pact-broker -- (0.000127s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.548683 I [72885:4380] pact-broker -- (0.000795s) COMMIT
2021-09-06 01:09:03.548750 I [72885:4380] pact-broker -- (0.000019s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.548781 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.548834 I [72885:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.548860 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.548893 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.549104 I [72885:4380] pact-broker -- (0.000160s) PRAGMA table_info('environments')
2021-09-06 01:09:03.549173 I [72885:4380] pact-broker -- (0.000026s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.549237 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_list('environments')
2021-09-06 01:09:03.549396 I [72885:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.549471 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.549638 I [72885:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.549746 I [72885:4380] pact-broker -- (0.000039s) PRAGMA index_list('environments')
2021-09-06 01:09:03.549823 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.549877 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.554586 I [72885:4380] pact-broker -- (0.004655s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.554730 I [72885:4380] pact-broker -- (0.000119s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:09:03.554809 I [72885:4380] pact-broker -- (0.000056s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.554950 I [72885:4380] pact-broker -- (0.000120s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.555044 I [72885:4380] pact-broker -- (0.000074s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.555130 I [72885:4380] pact-broker -- (0.000066s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.555295 I [72885:4380] pact-broker -- (0.000115s) PRAGMA table_info('environments')
2021-09-06 01:09:03.555361 I [72885:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.555424 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_list('environments')
2021-09-06 01:09:03.555573 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.555639 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.555960 I [72885:4380] pact-broker -- (0.000158s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.557108 I [72885:4380] pact-broker -- (0.001075s) PRAGMA index_list('environments')
2021-09-06 01:09:03.557171 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.557226 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.561862 I [72885:4380] pact-broker -- (0.004551s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.561975 I [72885:4380] pact-broker -- (0.000088s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:09:03.562024 I [72885:4380] pact-broker -- (0.000030s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.562106 I [72885:4380] pact-broker -- (0.000064s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.562194 I [72885:4380] pact-broker -- (0.000069s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.562276 I [72885:4380] pact-broker -- (0.000064s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.562419 I [72885:4380] pact-broker -- (0.000092s) PRAGMA table_info('environments')
2021-09-06 01:09:03.562513 I [72885:4380] pact-broker -- (0.000052s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.562577 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_list('environments')
2021-09-06 01:09:03.562725 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.562793 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.563073 I [72885:4380] pact-broker -- (0.000136s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.564193 I [72885:4380] pact-broker -- (0.001046s) PRAGMA index_list('environments')
2021-09-06 01:09:03.564254 I [72885:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.564336 I [72885:4380] pact-broker -- (0.000051s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.568981 I [72885:4380] pact-broker -- (0.004592s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.569112 I [72885:4380] pact-broker -- (0.000108s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:09:03.569182 I [72885:4380] pact-broker -- (0.000050s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.569346 I [72885:4380] pact-broker -- (0.000145s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.569490 I [72885:4380] pact-broker -- (0.000125s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.569630 I [72885:4380] pact-broker -- (0.000120s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.569802 I [72885:4380] pact-broker -- (0.000125s) PRAGMA table_info('environments')
2021-09-06 01:09:03.569863 I [72885:4380] pact-broker -- (0.000022s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.569921 I [72885:4380] pact-broker -- (0.000029s) PRAGMA index_list('environments')
2021-09-06 01:09:03.570057 I [72885:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.570118 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.570368 I [72885:4380] pact-broker -- (0.000129s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.571470 I [72885:4380] pact-broker -- (0.001008s) PRAGMA index_list('environments')
2021-09-06 01:09:03.571526 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.571575 I [72885:4380] pact-broker -- (0.000020s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.575824 I [72885:4380] pact-broker -- (0.004200s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.575959 I [72885:4380] pact-broker -- (0.000111s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 01:09:03.576032 I [72885:4380] pact-broker -- (0.000051s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.576222 I [72885:4380] pact-broker -- (0.000151s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.576372 I [72885:4380] pact-broker -- (0.000129s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.576515 I [72885:4380] pact-broker -- (0.000124s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.576661 I [72885:4380] pact-broker -- (0.000095s) PRAGMA table_info('environments')
2021-09-06 01:09:03.576726 I [72885:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.576818 I [72885:4380] pact-broker -- (0.000060s) PRAGMA index_list('environments')
2021-09-06 01:09:03.576944 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.577027 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.577310 I [72885:4380] pact-broker -- (0.000150s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.578463 I [72885:4380] pact-broker -- (0.001077s) PRAGMA index_list('environments')
2021-09-06 01:09:03.578527 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.578583 I [72885:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.582945 I [72885:4380] pact-broker -- (0.004310s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.583067 I [72885:4380] pact-broker -- (0.000100s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:09:03.583133 I [72885:4380] pact-broker -- (0.000047s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.583287 I [72885:4380] pact-broker -- (0.000136s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.583423 I [72885:4380] pact-broker -- (0.000117s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.583555 I [72885:4380] pact-broker -- (0.000114s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.583713 I [72885:4380] pact-broker -- (0.000086s) PRAGMA table_info('environments')
2021-09-06 01:09:03.583783 I [72885:4380] pact-broker -- (0.000035s) PRAGMA foreign_key_list('environments')
2021-09-06 01:09:03.583837 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_list('environments')
2021-09-06 01:09:03.583972 I [72885:4380] pact-broker -- (0.000011s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.584040 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 01:09:03.584302 I [72885:4380] pact-broker -- (0.000122s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.585314 I [72885:4380] pact-broker -- (0.000947s) PRAGMA index_list('environments')
2021-09-06 01:09:03.585428 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_uuid_index')
2021-09-06 01:09:03.585475 I [72885:4380] pact-broker -- (0.000020s) PRAGMA index_info('environments_name_index')
2021-09-06 01:09:03.589547 I [72885:4380] pact-broker -- (0.004026s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 01:09:03.589662 I [72885:4380] pact-broker -- (0.000091s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 01:09:03.589738 I [72885:4380] pact-broker -- (0.000058s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 01:09:03.589883 I [72885:4380] pact-broker -- (0.000128s) DROP TABLE `environments_backup0`
2021-09-06 01:09:03.590010 I [72885:4380] pact-broker -- (0.000110s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 01:09:03.590132 I [72885:4380] pact-broker -- (0.000105s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 01:09:03.590771 I [72885:4380] pact-broker -- (0.000615s) COMMIT
2021-09-06 01:09:03.590832 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.590859 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.591591 I [72885:4380] pact-broker -- (0.000645s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210226_set_deployment_columns_not_null.rb')
2021-09-06 01:09:03.591608 I [72885:4380] pact-broker -- Finished applying migration 20210226_set_deployment_columns_not_null.rb, direction: up, took 0.064646 seconds
2021-09-06 01:09:03.591614 I [72885:4380] pact-broker -- Begin applying migration 20210301_add_pacticipant_columns.rb, direction: up
2021-09-06 01:09:03.591672 I [72885:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.591698 I [72885:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.591744 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.593111 I [72885:4380] pact-broker -- (0.001316s) ALTER TABLE `pacticipants` ADD COLUMN `display_name` varchar(255)
2021-09-06 01:09:03.594334 I [72885:4380] pact-broker -- (0.001172s) ALTER TABLE `pacticipants` ADD COLUMN `repository_name` varchar(255)
2021-09-06 01:09:03.595590 I [72885:4380] pact-broker -- (0.001210s) ALTER TABLE `pacticipants` ADD COLUMN `repository_namespace` varchar(255)
2021-09-06 01:09:03.596904 I [72885:4380] pact-broker -- (0.001247s) ALTER TABLE `pacticipants` ADD COLUMN `main_development_branches` varchar(255)
2021-09-06 01:09:03.597665 I [72885:4380] pact-broker -- (0.000731s) COMMIT
2021-09-06 01:09:03.597727 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.597757 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.598544 I [72885:4380] pact-broker -- (0.000732s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210301_add_pacticipant_columns.rb')
2021-09-06 01:09:03.598562 I [72885:4380] pact-broker -- Finished applying migration 20210301_add_pacticipant_columns.rb, direction: up, took 0.006944 seconds
2021-09-06 01:09:03.598569 I [72885:4380] pact-broker -- Begin applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up
2021-09-06 01:09:03.599567 I [72885:4380] pact-broker -- (0.000819s) CREATE TABLE `currently_deployed_version_ids` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `target_for_index` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `environment_id` integer NOT NULL REFERENCES `environments` ON DELETE CASCADE, `version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `deployed_version_id` integer NOT NULL)
2021-09-06 01:09:03.600612 I [72885:4380] pact-broker -- (0.000982s) CREATE UNIQUE INDEX `currently_deployed_version_pacticipant_environment_target_index` ON `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `target_for_index`)
2021-09-06 01:09:03.601448 I [72885:4380] pact-broker -- (0.000745s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210413_create_currently_deployed_version_ids_table.rb')
2021-09-06 01:09:03.601465 I [72885:4380] pact-broker -- Finished applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up, took 0.002893 seconds
2021-09-06 01:09:03.601471 I [72885:4380] pact-broker -- Begin applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up
2021-09-06 01:09:03.601532 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.601559 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.601590 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.603071 I [72885:4380] pact-broker -- (0.001417s) ALTER TABLE `deployed_versions` ADD COLUMN `target` varchar(255)
2021-09-06 01:09:03.604342 I [72885:4380] pact-broker -- (0.001217s) ALTER TABLE `deployed_versions` ADD COLUMN `target_for_index` varchar(255) DEFAULT ('') NOT NULL
2021-09-06 01:09:03.604539 I [72885:4380] pact-broker -- (0.000132s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.604660 I [72885:4380] pact-broker -- (0.000069s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.604725 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.604956 I [72885:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.605034 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.605336 I [72885:4380] pact-broker -- (0.000147s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.606545 I [72885:4380] pact-broker -- (0.001126s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.606610 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.606695 I [72885:4380] pact-broker -- (0.000028s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:09:03.612688 I [72885:4380] pact-broker -- (0.005915s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.612961 I [72885:4380] pact-broker -- (0.000214s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.613048 I [72885:4380] pact-broker -- (0.000056s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.613295 I [72885:4380] pact-broker -- (0.000219s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.613431 I [72885:4380] pact-broker -- (0.000107s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.613557 I [72885:4380] pact-broker -- (0.000098s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.613910 I [72885:4380] pact-broker -- (0.000250s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.614051 I [72885:4380] pact-broker -- (0.000069s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.614150 I [72885:4380] pact-broker -- (0.000050s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.614403 I [72885:4380] pact-broker -- (0.000017s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.614488 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.614869 I [72885:4380] pact-broker -- (0.000204s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.616102 I [72885:4380] pact-broker -- (0.001145s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.616171 I [72885:4380] pact-broker -- (0.000031s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 01:09:03.616227 I [72885:4380] pact-broker -- (0.000023s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.620909 I [72885:4380] pact-broker -- (0.004601s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.621147 I [72885:4380] pact-broker -- (0.000178s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.621231 I [72885:4380] pact-broker -- (0.000053s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.621365 I [72885:4380] pact-broker -- (0.000106s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.621465 I [72885:4380] pact-broker -- (0.000078s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 01:09:03.621553 I [72885:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.621639 I [72885:4380] pact-broker -- (0.000050s) DROP INDEX `deployed_versions_pacticipant_id_currently_deployed_index`
2021-09-06 01:09:03.622358 I [72885:4380] pact-broker -- (0.000687s) COMMIT
2021-09-06 01:09:03.622474 I [72885:4380] pact-broker -- (0.000023s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.622512 I [72885:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.623278 I [72885:4380] pact-broker -- (0.000691s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210415_add_target_column_to_deployed_version.rb')
2021-09-06 01:09:03.623299 I [72885:4380] pact-broker -- Finished applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up, took 0.021822 seconds
2021-09-06 01:09:03.623306 I [72885:4380] pact-broker -- Begin applying migration 20210419_create_released_versions_table.rb, direction: up
2021-09-06 01:09:03.624230 I [72885:4380] pact-broker -- (0.000729s) CREATE TABLE `released_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `created_at` timestamp, `updated_at` timestamp, `support_ended_at` timestamp)
2021-09-06 01:09:03.625165 I [72885:4380] pact-broker -- (0.000872s) CREATE UNIQUE INDEX `released_versions_uuid_index` ON `released_versions` (`uuid`)
2021-09-06 01:09:03.626192 I [72885:4380] pact-broker -- (0.000951s) CREATE UNIQUE INDEX `released_versions_version_id_environment_id_index` ON `released_versions` (`version_id`, `environment_id`)
2021-09-06 01:09:03.627182 I [72885:4380] pact-broker -- (0.000894s) CREATE INDEX `released_version_support_ended_at_index` ON `released_versions` (`support_ended_at`)
2021-09-06 01:09:03.627935 I [72885:4380] pact-broker -- (0.000650s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210419_create_released_versions_table.rb')
2021-09-06 01:09:03.627957 I [72885:4380] pact-broker -- Finished applying migration 20210419_create_released_versions_table.rb, direction: up, took 0.004646 seconds
2021-09-06 01:09:03.627965 I [72885:4380] pact-broker -- Begin applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up
2021-09-06 01:09:03.628058 I [72885:4380] pact-broker -- (0.000023s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.628096 I [72885:4380] pact-broker -- (0.000014s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.628145 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:03.629779 I [72885:4380] pact-broker -- (0.001524s) ALTER TABLE `pacticipants` ADD COLUMN `main_branch` varchar(255)
2021-09-06 01:09:03.630313 I [72885:4380] pact-broker -- (0.000505s) COMMIT
2021-09-06 01:09:03.630375 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.630406 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.631153 I [72885:4380] pact-broker -- (0.000678s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210529_add_main_branch_to_pacticipant.rb')
2021-09-06 01:09:03.631172 I [72885:4380] pact-broker -- Finished applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up, took 0.003203 seconds
2021-09-06 01:09:03.631180 I [72885:4380] pact-broker -- Begin applying migration 20210608_add_uuid_to_webhook.rb, direction: up
2021-09-06 01:09:03.631248 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.631277 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.631313 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:03.633594 I [72885:4380] pact-broker -- (0.002220s) ALTER TABLE `triggered_webhooks` ADD COLUMN `uuid` varchar(255)
2021-09-06 01:09:03.633793 I [72885:4380] pact-broker -- (0.000128s) CREATE UNIQUE INDEX `triggered_webhooks_uuid` ON `triggered_webhooks` (`uuid`)
2021-09-06 01:09:03.634403 I [72885:4380] pact-broker -- (0.000581s) COMMIT
2021-09-06 01:09:03.634468 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.634499 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.635263 I [72885:4380] pact-broker -- (0.000700s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210608_add_uuid_to_webhook.rb')
2021-09-06 01:09:03.635281 I [72885:4380] pact-broker -- Finished applying migration 20210608_add_uuid_to_webhook.rb, direction: up, took 0.004098 seconds
2021-09-06 01:09:03.635288 I [72885:4380] pact-broker -- Begin applying migration 20210609_set_webhook_uuid.rb, direction: up
2021-09-06 01:09:03.635489 I [72885:4380] pact-broker -- (0.000093s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 01:09:03.635736 I [72885:4380] pact-broker -- (0.000180s) PRAGMA table_info('triggered_webhooks')
2021-09-06 01:09:03.636162 I [72885:4380] pact-broker -- (0.000086s) UPDATE `triggered_webhooks` SET `uuid` = ('e61a6d63-ca6e-4e30-a807-06fb159b9228' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 01:09:03.637057 I [72885:4380] pact-broker -- (0.000801s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210609_set_webhook_uuid.rb')
2021-09-06 01:09:03.637077 I [72885:4380] pact-broker -- Finished applying migration 20210609_set_webhook_uuid.rb, direction: up, took 0.001784 seconds
2021-09-06 01:09:03.637085 I [72885:4380] pact-broker -- Begin applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up
2021-09-06 01:09:03.637161 I [72885:4380] pact-broker -- (0.000019s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.637193 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.637248 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:03.637505 I [72885:4380] pact-broker -- (0.000194s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.637620 I [72885:4380] pact-broker -- (0.000061s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.637691 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.637927 I [72885:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.638036 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.638212 I [72885:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.638342 I [72885:4380] pact-broker -- (0.000036s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.638407 I [72885:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.643432 I [72885:4380] pact-broker -- (0.004966s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.643648 I [72885:4380] pact-broker -- (0.000177s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.643709 I [72885:4380] pact-broker -- (0.000038s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.643851 I [72885:4380] pact-broker -- (0.000122s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.643946 I [72885:4380] pact-broker -- (0.000076s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.644171 I [72885:4380] pact-broker -- (0.000145s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:03.644267 I [72885:4380] pact-broker -- (0.000045s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 01:09:03.644350 I [72885:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.644583 I [72885:4380] pact-broker -- (0.000016s) SAVEPOINT autopoint_1
2021-09-06 01:09:03.644689 E [72885:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 01:09:03.645019 I [72885:4380] pact-broker -- (0.000171s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 01:09:03.646183 I [72885:4380] pact-broker -- (0.001065s) PRAGMA index_list('deployed_versions')
2021-09-06 01:09:03.646247 I [72885:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 01:09:03.650930 I [72885:4380] pact-broker -- (0.004613s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 01:09:03.651052 I [72885:4380] pact-broker -- (0.000099s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 01:09:03.651104 I [72885:4380] pact-broker -- (0.000032s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 01:09:03.651184 I [72885:4380] pact-broker -- (0.000061s) DROP TABLE `deployed_versions_backup0`
2021-09-06 01:09:03.651273 I [72885:4380] pact-broker -- (0.000070s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 01:09:03.652841 I [72885:4380] pact-broker -- (0.001516s) COMMIT
2021-09-06 01:09:03.653053 I [72885:4380] pact-broker -- (0.000048s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.653142 I [72885:4380] pact-broker -- (0.000031s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.654632 I [72885:4380] pact-broker -- (0.001358s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210702_drop_unused_columns_from_deployed_versions.rb')
2021-09-06 01:09:03.654651 I [72885:4380] pact-broker -- Finished applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up, took 0.017562 seconds
2021-09-06 01:09:03.654658 I [72885:4380] pact-broker -- Begin applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up
2021-09-06 01:09:03.654722 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.654751 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.654786 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.656340 I [72885:4380] pact-broker -- (0.001490s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_version_order` integer
2021-09-06 01:09:03.656929 I [72885:4380] pact-broker -- (0.000561s) COMMIT
2021-09-06 01:09:03.656987 I [72885:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.657020 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.657807 I [72885:4380] pact-broker -- (0.000729s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210711_add_consumer_version_order_to_pact_publication.rb')
2021-09-06 01:09:03.657825 I [72885:4380] pact-broker -- Finished applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up, took 0.003163 seconds
2021-09-06 01:09:03.657832 I [72885:4380] pact-broker -- Begin applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up
2021-09-06 01:09:03.657892 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.657921 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.657967 I [72885:4380] pact-broker -- (0.000025s) BEGIN
2021-09-06 01:09:03.659482 I [72885:4380] pact-broker -- (0.001467s) ALTER TABLE `pact_versions` ADD COLUMN `messages_count` integer
2021-09-06 01:09:03.660793 I [72885:4380] pact-broker -- (0.001251s) ALTER TABLE `pact_versions` ADD COLUMN `interactions_count` integer
2021-09-06 01:09:03.661348 I [72885:4380] pact-broker -- (0.000528s) COMMIT
2021-09-06 01:09:03.661406 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.661436 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.662476 I [72885:4380] pact-broker -- (0.000984s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210712_add_interaction_count_to_pact_versions.rb')
2021-09-06 01:09:03.662496 I [72885:4380] pact-broker -- Finished applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up, took 0.004659 seconds
2021-09-06 01:09:03.662503 I [72885:4380] pact-broker -- Begin applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up
2021-09-06 01:09:03.662579 I [72885:4380] pact-broker -- (0.000031s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.662610 I [72885:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.662642 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.662972 I [72885:4380] pact-broker -- (0.000282s) CREATE INDEX `triggered_webhooks_webhook_uuid_index` ON `triggered_webhooks` (`webhook_uuid`)
2021-09-06 01:09:03.663527 I [72885:4380] pact-broker -- (0.000529s) COMMIT
2021-09-06 01:09:03.663603 I [72885:4380] pact-broker -- (0.000021s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.663637 I [72885:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.664443 I [72885:4380] pact-broker -- (0.000752s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210722_add_index_to_triggered_webhooks_webhook_uuid.rb')
2021-09-06 01:09:03.664460 I [72885:4380] pact-broker -- Finished applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up, took 0.001954 seconds
2021-09-06 01:09:03.664467 I [72885:4380] pact-broker -- Begin applying migration 20210810_set_allow_contract_modification.rb, direction: up
2021-09-06 01:09:03.664658 I [72885:4380] pact-broker -- (0.000083s) SELECT count(*) AS 'count' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.665587 I [72885:4380] pact-broker -- (0.000875s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210810_set_allow_contract_modification.rb')
2021-09-06 01:09:03.665605 I [72885:4380] pact-broker -- Finished applying migration 20210810_set_allow_contract_modification.rb, direction: up, took 0.001134 seconds
2021-09-06 01:09:03.665611 I [72885:4380] pact-broker -- Begin applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up
2021-09-06 01:09:03.665669 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.665698 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.665729 I [72885:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 01:09:03.666044 I [72885:4380] pact-broker -- (0.000277s) CREATE INDEX `verifications_pact_version_id_id_index` ON `verifications` (`pact_version_id`, `id`)
2021-09-06 01:09:03.666651 I [72885:4380] pact-broker -- (0.000581s) COMMIT
2021-09-06 01:09:03.666709 I [72885:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.666739 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.667484 I [72885:4380] pact-broker -- (0.000695s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210815_add_provider_version_id_index_to_verifications.rb')
2021-09-06 01:09:03.667502 I [72885:4380] pact-broker -- Finished applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up, took 0.001887 seconds
2021-09-06 01:09:03.667509 I [72885:4380] pact-broker -- Begin applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up
2021-09-06 01:09:03.667576 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 01:09:03.667605 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 01:09:03.667637 I [72885:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 01:09:03.669172 I [72885:4380] pact-broker -- (0.001477s) ALTER TABLE `verifications` ADD COLUMN `consumer_version_selector_hashes` varchar(255)
2021-09-06 01:09:03.670438 I [72885:4380] pact-broker -- (0.001215s) ALTER TABLE `verifications` ADD COLUMN `tag_names` varchar(255)
2021-09-06 01:09:03.670949 I [72885:4380] pact-broker -- (0.000484s) COMMIT
2021-09-06 01:09:03.671006 I [72885:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 01:09:03.671036 I [72885:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 01:09:03.671767 I [72885:4380] pact-broker -- (0.000678s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210818_add_consumer_version_selectors_to_verification.rb')
2021-09-06 01:09:03.671787 I [72885:4380] pact-broker -- Finished applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up, took 0.004275 seconds
2021-09-06 01:09:03.672148 I [72885:4380] pact-broker -- (0.000249s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 01:09:03.672320 I [72885:4380] pact-broker -- (0.000072s) SELECT * FROM `schema_migrations` ORDER BY `filename` DESC LIMIT 1
2021-09-06 01:09:03.672337 I [72885:4380] PactBroker::App -- Database schema version is now 20210818
2021-09-06 01:09:03.672347 I [72885:4380] PactBroker::App -- Migrating data
2021-09-06 01:09:03.672476 I [72885:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.672716 I [72885:4380] pact-broker -- (0.000185s) PRAGMA table_info('verifications')
2021-09-06 01:09:03.672901 I [72885:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.673056 I [72885:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 01:09:03.673180 I [72885:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.673359 I [72885:4380] pact-broker -- (0.000118s) PRAGMA table_info('pact_versions')
2021-09-06 01:09:03.673504 I [72885:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.673646 I [72885:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:03.673755 I [72885:4380] pact-broker -- (0.000076s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 01:09:03.673889 I [72885:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.674053 I [72885:4380] pact-broker -- (0.000117s) PRAGMA table_info('pact_publications')
2021-09-06 01:09:03.674197 I [72885:4380] pact-broker -- (0.000059s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.674333 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.674510 I [72885:4380] pact-broker -- (0.000131s) PRAGMA table_info('versions')
2021-09-06 01:09:03.674656 I [72885:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.674749 I [72885:4380] pact-broker -- (0.000060s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 01:09:03.674889 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.675017 I [72885:4380] pact-broker -- (0.000055s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:03.675166 I [72885:4380] pact-broker -- (0.000061s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 01:09:03.675262 I [72885:4380] pact-broker -- (0.000054s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:03.675382 I [72885:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 01:09:03.675507 I [72885:4380] pact-broker -- (0.000050s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 01:09:03.675625 I [72885:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhook_executions` LIMIT 1
2021-09-06 01:09:03.675815 I [72885:4380] pact-broker -- (0.000136s) PRAGMA table_info('webhook_executions')
2021-09-06 01:09:03.675948 I [72885:4380] pact-broker -- (0.000054s) DELETE FROM `webhook_executions` WHERE (`triggered_webhook_id` IS NULL)
2021-09-06 01:09:03.676040 I [72885:4380] pact-broker -- (0.000053s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 01:09:03.676123 I [72885:4380] pact-broker -- (0.000049s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 01:09:03.676258 I [72885:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.676425 I [72885:4380] pact-broker -- (0.000118s) PRAGMA table_info('tags')
2021-09-06 01:09:03.676569 I [72885:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.676676 I [72885:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.676785 I [72885:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.676959 I [72885:4380] pact-broker -- (0.000062s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:09:03.677098 I [72885:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.677192 I [72885:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.677299 I [72885:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.677390 I [72885:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.677553 I [72885:4380] pact-broker -- (0.000060s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:09:03.677688 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:09:03.677884 I [72885:4380] pact-broker -- (0.000148s) PRAGMA table_info('pacticipants')
2021-09-06 01:09:03.678065 I [72885:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:09:03.678229 I [72885:4380] pact-broker -- (0.000080s) SELECT * FROM `pacticipants` WHERE (`display_name` IS NULL)
2021-09-06 01:09:03.678388 I [72885:4380] pact-broker -- (0.000064s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:09:03.678499 I [72885:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:09:03.678604 I [72885:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 01:09:03.678702 I [72885:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.678796 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.678936 I [72885:4380] pact-broker -- (0.000055s) SELECT `id`, `name` FROM `pacticipants` WHERE (`main_branch` IS NULL)
2021-09-06 01:09:03.679066 I [72885:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 01:09:03.679279 I [72885:4380] pact-broker -- (0.000163s) PRAGMA table_info('triggered_webhooks')
2021-09-06 01:09:03.679538 I [72885:4380] pact-broker -- (0.000061s) UPDATE `triggered_webhooks` SET `uuid` = ('48d35587-a2ce-474e-aeaa-5cb6998f182a' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 01:09:03.679680 I [72885:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.679778 I [72885:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 01:09:03.679876 I [72885:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.679976 I [72885:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.680139 I [72885:4380] pact-broker -- (0.000057s) UPDATE `pact_publications` SET `consumer_version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `pact_publications`.`consumer_version_id`)) WHERE (`consumer_version_order` IS NULL)
2021-09-06 01:09:03.680239 I [72885:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.680329 I [72885:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.680425 I [72885:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.680524 I [72885:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.680699 I [72885:4380] pact-broker -- (0.000065s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 01:09:03.680787 I [72885:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.680886 I [72885:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 01:09:03.680986 I [72885:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.681073 I [72885:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 01:09:03.681239 I [72885:4380] pact-broker -- (0.000058s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 01:09:03.690400 I [72885:4380] pact-broker -- (0.000209s) PRAGMA table_info('tags_with_latest_flag')
2021-09-06 01:09:03.695660 I [72885:4380] pact-broker -- (0.000208s) PRAGMA table_info('latest_versions')
2021-09-06 01:09:03.696442 I [72885:4380] pact-broker -- (0.000111s) PRAGMA table_info('labels')
2021-09-06 01:09:03.909563 I [72885:4380] pact-broker -- (0.000191s) PRAGMA table_info('webhook_events')
2021-09-06 01:09:03.927738 I [72885:4380] pact-broker -- (0.000241s) PRAGMA table_info('latest_verifications_for_pact_versions')
2021-09-06 01:09:03.928745 I [72885:4380] pact-broker -- (0.000112s) PRAGMA table_info('latest_verification_id_for_pact_version_and_provider_version')
2021-09-06 01:09:03.933400 I [72885:4380] pact-broker -- (0.000088s) SELECT `webhook_executions`.`id`, `triggered_webhook_id`, `success`, `logs`, `webhook_executions`.`created_at` FROM `webhook_executions` LIMIT 1
2021-09-06 01:09:03.936249 I [72885:4380] pact-broker -- (0.000183s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' LIMIT 1
2021-09-06 01:09:03.939628 I [72885:4380] pact-broker -- (0.000126s) PRAGMA table_info('integrations')
2021-09-06 01:09:03.940995 I [72885:4380] pact-broker -- (0.000141s) PRAGMA table_info('head_pact_tags')
2021-09-06 01:09:03.948829 I [72885:4380] pact-broker -- (0.000201s) PRAGMA table_info('all_pact_publications')
2021-09-06 01:09:03.951057 I [72885:4380] pact-broker -- (0.000244s) PRAGMA table_info('latest_pact_publications_by_consumer_versions')
2021-09-06 01:09:03.952454 I [72885:4380] pact-broker -- (0.000247s) PRAGMA table_info('latest_pact_publications')
2021-09-06 01:09:03.953520 I [72885:4380] pact-broker -- (0.000242s) PRAGMA table_info('latest_tagged_pact_publications')
2021-09-06 01:09:03.956823 I [72885:4380] pact-broker -- (0.000310s) PRAGMA table_info('latest_verifications_for_consumer_version_tags')
2021-09-06 01:09:03.958087 I [72885:4380] pact-broker -- (0.000291s) PRAGMA table_info('latest_verifications_for_consumer_and_provider')
2021-09-06 01:09:03.958840 I [72885:4380] pact-broker -- (0.000265s) PRAGMA table_info('matrix')
2021-09-06 01:09:03.961124 I [72885:4380] pact-broker -- (0.000436s) PRAGMA table_info('head_matrix')
2021-09-06 01:09:03.962338 I [72885:4380] pact-broker -- (0.000114s) PRAGMA table_info('latest_pact_publication_ids_for_consumer_versions')
2021-09-06 01:09:03.990186 I [72885:4380] pact-broker -- (0.000103s) UPDATE `triggered_webhooks` SET `status` = 'failure' WHERE (`status` = 'retrying')
2021-09-06 01:09:03.991367 I [72885:4380] pact-broker -- (0.000140s) PRAGMA table_info('config')
2021-09-06 01:09:03.991962 I [72885:4380] pact-broker -- (0.000081s) SELECT * FROM `config`
2021-09-06 01:09:03.991980 I [72885:4380] PactBroker::App -- Seeding example data
2021-09-06 01:09:04.008751 I [72885:4380] pact-broker -- (0.000108s) PRAGMA table_info('verification_sequence_number')
2021-09-06 01:09:04.012316 I [72885:4380] pact-broker -- (0.000138s) PRAGMA table_info('certificates')
2021-09-06 01:09:04.013735 I [72885:4380] pact-broker -- (0.000133s) PRAGMA table_info('environments')
2021-09-06 01:09:04.015920 I [72885:4380] pact-broker -- (0.000111s) PRAGMA table_info('currently_deployed_version_ids')
2021-09-06 01:09:04.016740 I [72885:4380] pact-broker -- (0.000139s) PRAGMA table_info('deployed_versions')
2021-09-06 01:09:04.019026 I [72885:4380] pact-broker -- (0.000122s) PRAGMA table_info('released_versions')
2021-09-06 01:09:04.020317 I [72885:4380] pact-broker -- (0.000104s) SELECT `pacticipants`.* FROM `pacticipants` ORDER BY lower(`pacticipants`.`name`)
2021-09-06 01:09:04.020673 I [72885:4380] pact-broker -- (0.000019s) BEGIN
2021-09-06 01:09:04.021070 I [72885:4380] pact-broker -- (0.000262s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Test', 0, 'test', '26d8c62e-551f-40cb-b988-cde4822bdc7f', '2021-09-05 21:09:04.020551', '2021-09-05 21:09:04.020551')
2021-09-06 01:09:04.021541 I [72885:4380] pact-broker -- (0.000392s) SELECT * FROM `environments` WHERE `id` = 1
2021-09-06 01:09:04.022352 I [72885:4380] pact-broker -- (0.000777s) COMMIT
2021-09-06 01:09:04.023184 I [72885:4380] pact-broker -- (0.000701s) UPDATE `environments` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 1)
2021-09-06 01:09:04.023916 I [72885:4380] pact-broker -- (0.000625s) UPDATE `environments` SET `updated_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 1)
2021-09-06 01:09:04.024079 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.024409 I [72885:4380] pact-broker -- (0.000232s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Production', 1, 'production', 'b6386690-2bce-4485-8905-600e51731e9f', '2021-09-05 21:09:04.024010', '2021-09-05 21:09:04.024010')
2021-09-06 01:09:04.024631 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `environments` WHERE `id` = 2
2021-09-06 01:09:04.025122 I [72885:4380] pact-broker -- (0.000466s) COMMIT
2021-09-06 01:09:04.025782 I [72885:4380] pact-broker -- (0.000570s) UPDATE `environments` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 2)
2021-09-06 01:09:04.026405 I [72885:4380] pact-broker -- (0.000536s) UPDATE `environments` SET `updated_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 2)
2021-09-06 01:09:04.026671 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.027098 I [72885:4380] pact-broker -- (0.000237s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example App', 'https://github.com/example-organization/Example App', '2021-08-20 21:09:04.026416', '2021-09-05 21:09:04.026617', 'Example App', NULL)
2021-09-06 01:09:04.027324 I [72885:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.027808 I [72885:4380] pact-broker -- (0.000458s) COMMIT
2021-09-06 01:09:04.027917 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.028302 I [72885:4380] pact-broker -- (0.000231s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example API', 'https://github.com/example-organization/Example API', '2021-08-20 21:09:04.027826', '2021-09-05 21:09:04.027870', 'Example API', NULL)
2021-09-06 01:09:04.028516 I [72885:4380] pact-broker -- (0.000140s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.029106 I [72885:4380] pact-broker -- (0.000565s) COMMIT
2021-09-06 01:09:04.029504 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.029899 I [72885:4380] pact-broker -- (0.000296s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('e15da45d3943bf10793a6d04cfb9f5dabe430fe2', 1, 'main', NULL, '2021-09-05 21:09:04.029434', '2021-09-05 21:09:04.029434')
2021-09-06 01:09:04.030115 I [72885:4380] pact-broker -- (0.000156s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:09:04.030317 I [72885:4380] pact-broker -- (0.000123s) SELECT * FROM `versions` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:09:04.030444 I [72885:4380] pact-broker -- (0.000045s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.030587 I [72885:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.030669 I [72885:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.030760 I [72885:4380] pact-broker -- (0.000032s) UPDATE `versions` SET `order` = 101 WHERE (`id` = 1)
2021-09-06 01:09:04.030911 I [72885:4380] pact-broker -- (0.000126s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:09:04.031601 I [72885:4380] pact-broker -- (0.000666s) COMMIT
2021-09-06 01:09:04.032389 I [72885:4380] pact-broker -- (0.000700s) UPDATE `versions` SET `created_at` = '2021-08-20 21:09:04.029124' WHERE (`id` = 1)
2021-09-06 01:09:04.033213 I [72885:4380] pact-broker -- (0.000737s) UPDATE `versions` SET `updated_at` = '2021-08-20 21:09:04.029124' WHERE (`id` = 1)
2021-09-06 01:09:04.033567 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.033991 I [72885:4380] pact-broker -- (0.000293s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('prod', 1, '2021-09-05 21:09:04.033486', '2021-09-05 21:09:04.033486', 101, 1)
2021-09-06 01:09:04.034234 I [72885:4380] pact-broker -- (0.000140s) SELECT * FROM `tags` WHERE ((`name` = 'prod') AND (`version_id` = 1)) LIMIT 1
2021-09-06 01:09:04.034958 I [72885:4380] pact-broker -- (0.000699s) COMMIT
2021-09-06 01:09:04.035811 I [72885:4380] pact-broker -- (0.000743s) UPDATE `tags` SET `created_at` = '2021-08-20 21:09:04.033223' WHERE ((`name` = 'prod') AND (`version_id` = 1))
2021-09-06 01:09:04.036600 I [72885:4380] pact-broker -- (0.000699s) UPDATE `tags` SET `updated_at` = '2021-08-20 21:09:04.033223' WHERE (`name` = 'prod')
2021-09-06 01:09:04.036721 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.037123 I [72885:4380] pact-broker -- (0.000292s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 1, '2021-09-05 21:09:04.036659', '2021-09-05 21:09:04.036659', 101, 1)
2021-09-06 01:09:04.037365 I [72885:4380] pact-broker -- (0.000140s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 1)) LIMIT 1
2021-09-06 01:09:04.037812 I [72885:4380] pact-broker -- (0.000417s) COMMIT
2021-09-06 01:09:04.038457 I [72885:4380] pact-broker -- (0.000544s) UPDATE `tags` SET `created_at` = '2021-08-20 21:09:04.036610' WHERE ((`name` = 'main') AND (`version_id` = 1))
2021-09-06 01:09:04.039135 I [72885:4380] pact-broker -- (0.000579s) UPDATE `tags` SET `updated_at` = '2021-08-20 21:09:04.036610' WHERE (`name` = 'main')
2021-09-06 01:09:04.039524 I [72885:4380] pact-broker -- (0.000215s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:09:04.039876 I [72885:4380] pact-broker -- (0.000141s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:09:04.040122 I [72885:4380] pact-broker -- (0.000193s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.040345 I [72885:4380] pact-broker -- (0.000061s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.040191' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.040734 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.041071 I [72885:4380] pact-broker -- (0.000222s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('5a8fc6ea-63d0-46e6-9c68-f5d6d6895fc7', 1, 1, 2, NULL, '2021-09-05 21:09:04.040642', '2021-09-05 21:09:04.040642', '')
2021-09-06 01:09:04.041310 I [72885:4380] pact-broker -- (0.000160s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 01:09:04.041630 I [72885:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:09:04.041789 I [72885:4380] pact-broker -- (0.000077s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 1)
2021-09-06 01:09:04.041896 I [72885:4380] pact-broker -- (0.000054s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 01:09:04.042425 I [72885:4380] pact-broker -- (0.000503s) COMMIT
2021-09-06 01:09:04.042760 I [72885:4380] pact-broker -- (0.000102s) SELECT * FROM `currently_deployed_version_ids` WHERE (`currently_deployed_version_ids`.`deployed_version_id` = 1) LIMIT 1
2021-09-06 01:09:04.043478 I [72885:4380] pact-broker -- (0.000659s) DELETE FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 01:09:04.044343 I [72885:4380] pact-broker -- (0.000728s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.043534' WHERE ((`id` = 1) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.044628 I [72885:4380] pact-broker -- (0.000244s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 01:09:04.045535 I [72885:4380] pact-broker -- (0.000804s) UPDATE `deployed_versions` SET `created_at` = '2021-08-20 21:09:04.039149' WHERE (`id` = 1)
2021-09-06 01:09:04.046287 I [72885:4380] pact-broker -- (0.000650s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-20 21:09:04.039149' WHERE (`id` = 1)
2021-09-06 01:09:04.046845 I [72885:4380] pact-broker -- (0.000084s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.047131 I [72885:4380] pact-broker -- (0.000092s) SELECT * FROM `pact_versions` WHERE ((`sha` = '64cae7e32cafa53621693e516338df283a2160f1') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.047620 I [72885:4380] pact-broker -- (0.000097s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:09:04.047681 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.048007 I [72885:4380] pact-broker -- (0.000214s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '64cae7e32cafa53621693e516338df283a2160f1', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:09:04.047142', 1, 0)
2021-09-06 01:09:04.048187 I [72885:4380] pact-broker -- (0.000118s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 01:09:04.048766 I [72885:4380] pact-broker -- (0.000546s) COMMIT
2021-09-06 01:09:04.049362 I [72885:4380] pact-broker -- (0.000101s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:09:04.049465 I [72885:4380] pact-broker -- (0.000022s) BEGIN
2021-09-06 01:09:04.049836 I [72885:4380] pact-broker -- (0.000260s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (1, 2, 1, 1, 1, 101, '2021-09-05 21:09:04.049388')
2021-09-06 01:09:04.050030 I [72885:4380] pact-broker -- (0.000135s) SELECT * FROM `pact_publications` WHERE `id` = 1
2021-09-06 01:09:04.050498 I [72885:4380] pact-broker -- (0.000438s) COMMIT
2021-09-06 01:09:04.054103 I [72885:4380] pact-broker -- (0.003510s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:09:04.054495 I [72885:4380] pact-broker -- (0.000085s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.054551 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.054891 I [72885:4380] pact-broker -- (0.000249s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (1, 2, 1, 1, 1, '2021-08-20 21:09:04.029124')
2021-09-06 01:09:04.055092 I [72885:4380] pact-broker -- (0.000104s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 01:09:04.055685 I [72885:4380] pact-broker -- (0.000564s) COMMIT
2021-09-06 01:09:04.055933 I [72885:4380] pact-broker -- (0.000196s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 01:09:04.056188 I [72885:4380] pact-broker -- (0.000173s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.056469 I [72885:4380] pact-broker -- (0.000200s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.056947 I [72885:4380] pact-broker -- (0.000284s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 01:09:04.057304 I [72885:4380] pact-broker -- (0.000153s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.057537 I [72885:4380] pact-broker -- (0.000084s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.057892 I [72885:4380] pact-broker -- (0.000170s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 01:09:04.058017 I [72885:4380] pact-broker -- (0.000063s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.058763 I [72885:4380] pact-broker -- (0.000651s) UPDATE `pact_publications` SET `created_at` = '2021-08-20 21:09:04.046454' WHERE (`id` = 1)
2021-09-06 01:09:04.059551 I [72885:4380] pact-broker -- (0.000682s) UPDATE `pact_versions` SET `created_at` = '2021-08-20 21:09:04.046454' WHERE (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')
2021-09-06 01:09:04.060328 I [72885:4380] pact-broker -- (0.000679s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-20 21:09:04.046454' WHERE (`consumer_version_id` = 1)
2021-09-06 01:09:04.060589 I [72885:4380] pact-broker -- (0.000152s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:09:04.060816 I [72885:4380] pact-broker -- (0.000183s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.061060 I [72885:4380] pact-broker -- (0.000204s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.061255 I [72885:4380] pact-broker -- (0.000155s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 01:09:04.061574 I [72885:4380] pact-broker -- (0.000232s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 01:09:04.061890 I [72885:4380] pact-broker -- (0.000119s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.062088 I [72885:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.062310 I [72885:4380] pact-broker -- (0.000176s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 01:09:04.062611 I [72885:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 01:09:04.063131 I [72885:4380] pact-broker -- (0.000141s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:09:04.063315 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.063340 I [72885:4380] PactBroker::Versions::Repository -- Upserting version 1315e0b1924cb6f42751f977789be3559373033a for pacticipant_id=2
2021-09-06 01:09:04.063605 I [72885:4380] pact-broker -- (0.000075s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.063689 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:04.064074 I [72885:4380] pact-broker -- (0.000282s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('1315e0b1924cb6f42751f977789be3559373033a', 2, '2021-09-05 21:09:04.063345', '2021-09-05 21:09:04.063630')
2021-09-06 01:09:04.064312 I [72885:4380] pact-broker -- (0.000177s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 01:09:04.064542 I [72885:4380] pact-broker -- (0.000161s) SELECT * FROM `versions` WHERE (`id` = 2) LIMIT 1
2021-09-06 01:09:04.064625 I [72885:4380] pact-broker -- (0.000044s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.064748 I [72885:4380] pact-broker -- (0.000057s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.064807 I [72885:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.064892 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 102 WHERE (`id` = 2)
2021-09-06 01:09:04.065077 I [72885:4380] pact-broker -- (0.000160s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 01:09:04.065774 I [72885:4380] pact-broker -- (0.000669s) COMMIT
2021-09-06 01:09:04.066016 I [72885:4380] pact-broker -- (0.000095s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 2) ORDER BY `created_at`
2021-09-06 01:09:04.066127 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.066588 I [72885:4380] pact-broker -- (0.000292s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-08-21 21:09:04.062637', 1, 2, 2, 1, '2021-09-05 21:09:04.066045', '{"some":"results"}', '[]')
2021-09-06 01:09:04.066814 I [72885:4380] pact-broker -- (0.000164s) SELECT * FROM `verifications` WHERE `id` = 1
2021-09-06 01:09:04.067545 I [72885:4380] pact-broker -- (0.000701s) COMMIT
2021-09-06 01:09:04.067921 I [72885:4380] pact-broker -- (0.000089s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:09:04.067976 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.068310 I [72885:4380] pact-broker -- (0.000234s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 2, 2, 1, 1, '2021-09-05 21:09:04.066045')
2021-09-06 01:09:04.068512 I [72885:4380] pact-broker -- (0.000108s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:09:04.069066 I [72885:4380] pact-broker -- (0.000527s) COMMIT
2021-09-06 01:09:04.069270 I [72885:4380] pact-broker -- (0.000156s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 01:09:04.069580 I [72885:4380] pact-broker -- (0.000203s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '1315e0b1924cb6f42751f977789be3559373033a')) LIMIT 1
2021-09-06 01:09:04.069651 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.069978 I [72885:4380] pact-broker -- (0.000196s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.069661', `branch` = 'main' WHERE (`id` = 2)
2021-09-06 01:09:04.070524 I [72885:4380] pact-broker -- (0.000517s) COMMIT
2021-09-06 01:09:04.071280 I [72885:4380] pact-broker -- (0.000658s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 1)
2021-09-06 01:09:04.072005 I [72885:4380] pact-broker -- (0.000625s) UPDATE `versions` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 2)
2021-09-06 01:09:04.072812 I [72885:4380] pact-broker -- (0.000712s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 2)
2021-09-06 01:09:04.073064 I [72885:4380] pact-broker -- (0.000157s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:09:04.073795 I [72885:4380] pact-broker -- (0.000637s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2))
2021-09-06 01:09:04.074167 I [72885:4380] pact-broker -- (0.000183s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:09:04.074482 I [72885:4380] pact-broker -- (0.000157s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:09:04.074699 I [72885:4380] pact-broker -- (0.000172s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.074936 I [72885:4380] pact-broker -- (0.000062s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.074759' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.075100 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.075428 I [72885:4380] pact-broker -- (0.000216s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('ee0a4aae-d3d1-4b6e-a6c5-661d39b0acf9', 2, 2, 2, NULL, '2021-09-05 21:09:04.075026', '2021-09-05 21:09:04.075026', '')
2021-09-06 01:09:04.075659 I [72885:4380] pact-broker -- (0.000172s) SELECT * FROM `deployed_versions` WHERE `id` = 2
2021-09-06 01:09:04.075846 I [72885:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:09:04.076005 I [72885:4380] pact-broker -- (0.000077s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 2, 2, '', 2)
2021-09-06 01:09:04.076133 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 2
2021-09-06 01:09:04.076801 I [72885:4380] pact-broker -- (0.000637s) COMMIT
2021-09-06 01:09:04.077650 I [72885:4380] pact-broker -- (0.000732s) UPDATE `deployed_versions` SET `created_at` = '2021-08-21 21:09:04.073817' WHERE (`id` = 2)
2021-09-06 01:09:04.078516 I [72885:4380] pact-broker -- (0.000765s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-21 21:09:04.073817' WHERE (`id` = 2)
2021-09-06 01:09:04.078884 I [72885:4380] pact-broker -- (0.000228s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 01:09:04.079170 I [72885:4380] pact-broker -- (0.000124s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:09:04.079400 I [72885:4380] pact-broker -- (0.000061s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.079258' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.079545 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.079863 I [72885:4380] pact-broker -- (0.000214s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('bf124dce-9e74-471c-ab40-6e97e48eef4a', 1, 1, 2, NULL, '2021-09-05 21:09:04.079476', '2021-09-05 21:09:04.079476', '')
2021-09-06 01:09:04.080097 I [72885:4380] pact-broker -- (0.000176s) SELECT * FROM `deployed_versions` WHERE `id` = 3
2021-09-06 01:09:04.080272 I [72885:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:09:04.080422 I [72885:4380] pact-broker -- (0.000077s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 3)
2021-09-06 01:09:04.080566 I [72885:4380] pact-broker -- (0.000049s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 3
2021-09-06 01:09:04.081062 I [72885:4380] pact-broker -- (0.000470s) COMMIT
2021-09-06 01:09:04.081832 I [72885:4380] pact-broker -- (0.000676s) UPDATE `deployed_versions` SET `created_at` = '2021-08-22 21:09:04.078527' WHERE (`id` = 3)
2021-09-06 01:09:04.082623 I [72885:4380] pact-broker -- (0.000695s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-22 21:09:04.078527' WHERE (`id` = 3)
2021-09-06 01:09:04.083016 I [72885:4380] pact-broker -- (0.000206s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 01:09:04.083203 I [72885:4380] pact-broker -- (0.000081s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.083219 I [72885:4380] PactBroker::Versions::Repository -- Upserting version 480e5aeb30467856ca995d0024d2c1800b0719e5 for pacticipant_id=2
2021-09-06 01:09:04.083473 I [72885:4380] pact-broker -- (0.000109s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.083550 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.083926 I [72885:4380] pact-broker -- (0.000281s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('480e5aeb30467856ca995d0024d2c1800b0719e5', 2, '2021-09-05 21:09:04.083223', '2021-09-05 21:09:04.083494')
2021-09-06 01:09:04.084156 I [72885:4380] pact-broker -- (0.000171s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 01:09:04.084354 I [72885:4380] pact-broker -- (0.000127s) SELECT * FROM `versions` WHERE (`id` = 3) LIMIT 1
2021-09-06 01:09:04.084439 I [72885:4380] pact-broker -- (0.000044s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.084587 I [72885:4380] pact-broker -- (0.000055s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.084646 I [72885:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.084733 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 103 WHERE (`id` = 3)
2021-09-06 01:09:04.084920 I [72885:4380] pact-broker -- (0.000162s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 01:09:04.085673 I [72885:4380] pact-broker -- (0.000721s) COMMIT
2021-09-06 01:09:04.085886 I [72885:4380] pact-broker -- (0.000107s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 3) ORDER BY `created_at`
2021-09-06 01:09:04.085998 I [72885:4380] pact-broker -- (0.000020s) BEGIN
2021-09-06 01:09:04.086411 I [72885:4380] pact-broker -- (0.000298s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (0, 2, 0, '2021-08-22 21:09:04.082635', 1, 3, 2, 1, '2021-09-05 21:09:04.085914', '{"some":"results"}', '[]')
2021-09-06 01:09:04.086673 I [72885:4380] pact-broker -- (0.000199s) SELECT * FROM `verifications` WHERE `id` = 2
2021-09-06 01:09:04.087302 I [72885:4380] pact-broker -- (0.000599s) COMMIT
2021-09-06 01:09:04.087573 I [72885:4380] pact-broker -- (0.000089s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:09:04.087624 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.087999 I [72885:4380] pact-broker -- (0.000280s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 3, 2, 2, 1, '2021-09-05 21:09:04.085914')
2021-09-06 01:09:04.088430 I [72885:4380] pact-broker -- (0.000189s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:09:04.089165 I [72885:4380] pact-broker -- (0.000696s) COMMIT
2021-09-06 01:09:04.089359 I [72885:4380] pact-broker -- (0.000148s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 01:09:04.089662 I [72885:4380] pact-broker -- (0.000172s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5')) LIMIT 1
2021-09-06 01:09:04.089732 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.090085 I [72885:4380] pact-broker -- (0.000198s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.089742', `branch` = 'main' WHERE (`id` = 3)
2021-09-06 01:09:04.090618 I [72885:4380] pact-broker -- (0.000505s) COMMIT
2021-09-06 01:09:04.091375 I [72885:4380] pact-broker -- (0.000656s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 2)
2021-09-06 01:09:04.092067 I [72885:4380] pact-broker -- (0.000594s) UPDATE `versions` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 3)
2021-09-06 01:09:04.092730 I [72885:4380] pact-broker -- (0.000576s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 3)
2021-09-06 01:09:04.093059 I [72885:4380] pact-broker -- (0.000203s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 01:09:04.093776 I [72885:4380] pact-broker -- (0.000623s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3))
2021-09-06 01:09:04.093936 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.094363 I [72885:4380] pact-broker -- (0.000300s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 3, '2021-09-05 21:09:04.093866', '2021-09-05 21:09:04.093866', 103, 2)
2021-09-06 01:09:04.094624 I [72885:4380] pact-broker -- (0.000136s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 3)) LIMIT 1
2021-09-06 01:09:04.095190 I [72885:4380] pact-broker -- (0.000540s) COMMIT
2021-09-06 01:09:04.095821 I [72885:4380] pact-broker -- (0.000526s) UPDATE `tags` SET `created_at` = '2021-08-22 21:09:04.093798' WHERE ((`name` = 'main') AND (`version_id` = 3))
2021-09-06 01:09:04.096395 I [72885:4380] pact-broker -- (0.000476s) UPDATE `tags` SET `updated_at` = '2021-08-22 21:09:04.093798' WHERE (`name` = 'main')
2021-09-06 01:09:04.096536 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.096916 I [72885:4380] pact-broker -- (0.000282s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('725c6ccb7cf7efc51b4394f9828585eea9c379d9', 1, 'feat/new-thing', NULL, '2021-09-05 21:09:04.096472', '2021-09-05 21:09:04.096472')
2021-09-06 01:09:04.097122 I [72885:4380] pact-broker -- (0.000149s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:09:04.097329 I [72885:4380] pact-broker -- (0.000136s) SELECT * FROM `versions` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:09:04.097410 I [72885:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.097528 I [72885:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.097584 I [72885:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.097669 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 104 WHERE (`id` = 4)
2021-09-06 01:09:04.097840 I [72885:4380] pact-broker -- (0.000146s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:09:04.098381 I [72885:4380] pact-broker -- (0.000516s) COMMIT
2021-09-06 01:09:04.098949 I [72885:4380] pact-broker -- (0.000481s) UPDATE `versions` SET `created_at` = '2021-08-29 21:09:04.096405' WHERE (`id` = 4)
2021-09-06 01:09:04.099551 I [72885:4380] pact-broker -- (0.000514s) UPDATE `versions` SET `updated_at` = '2021-08-29 21:09:04.096405' WHERE (`id` = 4)
2021-09-06 01:09:04.099687 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.100096 I [72885:4380] pact-broker -- (0.000292s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 4, '2021-09-05 21:09:04.099609', '2021-09-05 21:09:04.099609', 104, 1)
2021-09-06 01:09:04.100354 I [72885:4380] pact-broker -- (0.000161s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4)) LIMIT 1
2021-09-06 01:09:04.100911 I [72885:4380] pact-broker -- (0.000529s) COMMIT
2021-09-06 01:09:04.101608 I [72885:4380] pact-broker -- (0.000576s) UPDATE `tags` SET `created_at` = '2021-08-29 21:09:04.099561' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4))
2021-09-06 01:09:04.102231 I [72885:4380] pact-broker -- (0.000530s) UPDATE `tags` SET `updated_at` = '2021-08-29 21:09:04.099561' WHERE (`name` = 'feat-new-thing')
2021-09-06 01:09:04.102551 I [72885:4380] pact-broker -- (0.000082s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.102799 I [72885:4380] pact-broker -- (0.000088s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.103105 I [72885:4380] pact-broker -- (0.000086s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')) LIMIT 1
2021-09-06 01:09:04.103162 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.103515 I [72885:4380] pact-broker -- (0.000249s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:09:04.102808', 1, 0)
2021-09-06 01:09:04.103678 I [72885:4380] pact-broker -- (0.000103s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:09:04.104197 I [72885:4380] pact-broker -- (0.000492s) COMMIT
2021-09-06 01:09:04.104511 I [72885:4380] pact-broker -- (0.000116s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:09:04.104595 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.104937 I [72885:4380] pact-broker -- (0.000248s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (4, 2, 1, 2, 1, 104, '2021-09-05 21:09:04.104533')
2021-09-06 01:09:04.105100 I [72885:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 2
2021-09-06 01:09:04.105580 I [72885:4380] pact-broker -- (0.000453s) COMMIT
2021-09-06 01:09:04.105846 I [72885:4380] pact-broker -- (0.000210s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:09:04.106081 I [72885:4380] pact-broker -- (0.000080s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.106131 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.106443 I [72885:4380] pact-broker -- (0.000226s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (4, 2, 2, 1, 2, '2021-08-29 21:09:04.096405')
2021-09-06 01:09:04.106638 I [72885:4380] pact-broker -- (0.000101s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 01:09:04.107096 I [72885:4380] pact-broker -- (0.000433s) COMMIT
2021-09-06 01:09:04.107291 I [72885:4380] pact-broker -- (0.000152s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 01:09:04.107522 I [72885:4380] pact-broker -- (0.000189s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.107714 I [72885:4380] pact-broker -- (0.000153s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.107970 I [72885:4380] pact-broker -- (0.000165s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 01:09:04.108262 I [72885:4380] pact-broker -- (0.000126s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.108493 I [72885:4380] pact-broker -- (0.000084s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.108800 I [72885:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:09:04.108952 I [72885:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.109629 I [72885:4380] pact-broker -- (0.000590s) UPDATE `pact_publications` SET `created_at` = '2021-08-29 21:09:04.102344' WHERE (`id` = 2)
2021-09-06 01:09:04.110246 I [72885:4380] pact-broker -- (0.000520s) UPDATE `pact_versions` SET `created_at` = '2021-08-29 21:09:04.102344' WHERE (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')
2021-09-06 01:09:04.110919 I [72885:4380] pact-broker -- (0.000582s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-29 21:09:04.102344' WHERE (`consumer_version_id` = 4)
2021-09-06 01:09:04.111183 I [72885:4380] pact-broker -- (0.000192s) SELECT * FROM `pact_publications` WHERE (`id` = 2) LIMIT 1
2021-09-06 01:09:04.111391 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.111629 I [72885:4380] pact-broker -- (0.000198s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.111858 I [72885:4380] pact-broker -- (0.000190s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 01:09:04.112072 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 01:09:04.112390 I [72885:4380] pact-broker -- (0.000158s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.112588 I [72885:4380] pact-broker -- (0.000083s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.112762 I [72885:4380] pact-broker -- (0.000130s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:09:04.113100 I [72885:4380] pact-broker -- (0.000138s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:09:04.113276 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.113695 I [72885:4380] pact-broker -- (0.000293s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('6c992f831da299364cf31be6008ee4752189f6d4', 1, 'feat/new-thing', NULL, '2021-09-05 21:09:04.113205', '2021-09-05 21:09:04.113205')
2021-09-06 01:09:04.113896 I [72885:4380] pact-broker -- (0.000140s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:09:04.114132 I [72885:4380] pact-broker -- (0.000128s) SELECT * FROM `versions` WHERE (`id` = 5) LIMIT 1
2021-09-06 01:09:04.114217 I [72885:4380] pact-broker -- (0.000043s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.114337 I [72885:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.114395 I [72885:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.114483 I [72885:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 105 WHERE (`id` = 5)
2021-09-06 01:09:04.114664 I [72885:4380] pact-broker -- (0.000127s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:09:04.115357 I [72885:4380] pact-broker -- (0.000666s) COMMIT
2021-09-06 01:09:04.116079 I [72885:4380] pact-broker -- (0.000596s) UPDATE `versions` SET `created_at` = '2021-08-30 21:09:04.113129' WHERE (`id` = 5)
2021-09-06 01:09:04.116683 I [72885:4380] pact-broker -- (0.000516s) UPDATE `versions` SET `updated_at` = '2021-08-30 21:09:04.113129' WHERE (`id` = 5)
2021-09-06 01:09:04.116823 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.117241 I [72885:4380] pact-broker -- (0.000295s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 5, '2021-09-05 21:09:04.116754', '2021-09-05 21:09:04.116754', 105, 1)
2021-09-06 01:09:04.117506 I [72885:4380] pact-broker -- (0.000165s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5)) LIMIT 1
2021-09-06 01:09:04.117950 I [72885:4380] pact-broker -- (0.000418s) COMMIT
2021-09-06 01:09:04.118578 I [72885:4380] pact-broker -- (0.000524s) UPDATE `tags` SET `created_at` = '2021-08-30 21:09:04.116694' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5))
2021-09-06 01:09:04.119190 I [72885:4380] pact-broker -- (0.000523s) UPDATE `tags` SET `updated_at` = '2021-08-30 21:09:04.116694' WHERE (`name` = 'feat-new-thing')
2021-09-06 01:09:04.119581 I [72885:4380] pact-broker -- (0.000091s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.119953 I [72885:4380] pact-broker -- (0.000147s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.120201 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:09:04.120311 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.120696 I [72885:4380] pact-broker -- (0.000292s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (5, 2, 1, 2, 1, 105, '2021-09-05 21:09:04.120221')
2021-09-06 01:09:04.120859 I [72885:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 3
2021-09-06 01:09:04.121375 I [72885:4380] pact-broker -- (0.000489s) COMMIT
2021-09-06 01:09:04.121651 I [72885:4380] pact-broker -- (0.000224s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:09:04.121878 I [72885:4380] pact-broker -- (0.000074s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.121967 I [72885:4380] pact-broker -- (0.000053s) BEGIN
2021-09-06 01:09:04.122282 I [72885:4380] pact-broker -- (0.000230s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (5, 2, 3, 1, 2, '2021-08-30 21:09:04.113129')
2021-09-06 01:09:04.122499 I [72885:4380] pact-broker -- (0.000122s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 01:09:04.122971 I [72885:4380] pact-broker -- (0.000447s) COMMIT
2021-09-06 01:09:04.123204 I [72885:4380] pact-broker -- (0.000191s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 01:09:04.123412 I [72885:4380] pact-broker -- (0.000165s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.123642 I [72885:4380] pact-broker -- (0.000191s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.123895 I [72885:4380] pact-broker -- (0.000201s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 01:09:04.124182 I [72885:4380] pact-broker -- (0.000125s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.124383 I [72885:4380] pact-broker -- (0.000083s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.124719 I [72885:4380] pact-broker -- (0.000138s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:09:04.124831 I [72885:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.125492 I [72885:4380] pact-broker -- (0.000574s) UPDATE `pact_publications` SET `created_at` = '2021-08-29 21:09:04.119302' WHERE (`id` = 3)
2021-09-06 01:09:04.126206 I [72885:4380] pact-broker -- (0.000620s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-29 21:09:04.119302' WHERE (`consumer_version_id` = 5)
2021-09-06 01:09:04.126420 I [72885:4380] pact-broker -- (0.000147s) SELECT * FROM `pact_publications` WHERE (`id` = 3) LIMIT 1
2021-09-06 01:09:04.126659 I [72885:4380] pact-broker -- (0.000200s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.126853 I [72885:4380] pact-broker -- (0.000154s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.127090 I [72885:4380] pact-broker -- (0.000198s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 01:09:04.127294 I [72885:4380] pact-broker -- (0.000159s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 01:09:04.127609 I [72885:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.127805 I [72885:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.128022 I [72885:4380] pact-broker -- (0.000173s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 01:09:04.128320 I [72885:4380] pact-broker -- (0.000136s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 01:09:04.128527 I [72885:4380] pact-broker -- (0.000051s) BEGIN
2021-09-06 01:09:04.128912 I [72885:4380] pact-broker -- (0.000284s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('7bd4d9173522826dc3e8704fd62dde0424f4c827', 1, 'main', NULL, '2021-09-05 21:09:04.128419', '2021-09-05 21:09:04.128419')
2021-09-06 01:09:04.129110 I [72885:4380] pact-broker -- (0.000139s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:09:04.129357 I [72885:4380] pact-broker -- (0.000177s) SELECT * FROM `versions` WHERE (`id` = 6) LIMIT 1
2021-09-06 01:09:04.129441 I [72885:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.129562 I [72885:4380] pact-broker -- (0.000055s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.129620 I [72885:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.129758 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 106 WHERE (`id` = 6)
2021-09-06 01:09:04.129911 I [72885:4380] pact-broker -- (0.000128s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:09:04.130438 I [72885:4380] pact-broker -- (0.000501s) COMMIT
2021-09-06 01:09:04.131115 I [72885:4380] pact-broker -- (0.000587s) UPDATE `versions` SET `created_at` = '2021-09-04 21:09:04.128347' WHERE (`id` = 6)
2021-09-06 01:09:04.131939 I [72885:4380] pact-broker -- (0.000732s) UPDATE `versions` SET `updated_at` = '2021-09-04 21:09:04.128347' WHERE (`id` = 6)
2021-09-06 01:09:04.132083 I [72885:4380] pact-broker -- (0.000017s) BEGIN
2021-09-06 01:09:04.132515 I [72885:4380] pact-broker -- (0.000305s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 6, '2021-09-05 21:09:04.132012', '2021-09-05 21:09:04.132012', 106, 1)
2021-09-06 01:09:04.132812 I [72885:4380] pact-broker -- (0.000196s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 6)) LIMIT 1
2021-09-06 01:09:04.133574 I [72885:4380] pact-broker -- (0.000734s) COMMIT
2021-09-06 01:09:04.134361 I [72885:4380] pact-broker -- (0.000674s) UPDATE `tags` SET `created_at` = '2021-09-04 21:09:04.131951' WHERE ((`name` = 'main') AND (`version_id` = 6))
2021-09-06 01:09:04.135151 I [72885:4380] pact-broker -- (0.000693s) UPDATE `tags` SET `updated_at` = '2021-09-04 21:09:04.131951' WHERE (`name` = 'main')
2021-09-06 01:09:04.135606 I [72885:4380] pact-broker -- (0.000095s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.135912 I [72885:4380] pact-broker -- (0.000081s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.136240 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 01:09:04.136298 I [72885:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 01:09:04.136615 I [72885:4380] pact-broker -- (0.000221s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-05 21:09:04.135922', 3, 0)
2021-09-06 01:09:04.136806 I [72885:4380] pact-broker -- (0.000132s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:09:04.137465 I [72885:4380] pact-broker -- (0.000630s) COMMIT
2021-09-06 01:09:04.137767 I [72885:4380] pact-broker -- (0.000097s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:09:04.137852 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.138230 I [72885:4380] pact-broker -- (0.000252s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (6, 2, 1, 3, 1, 106, '2021-09-05 21:09:04.137788')
2021-09-06 01:09:04.138396 I [72885:4380] pact-broker -- (0.000105s) SELECT * FROM `pact_publications` WHERE `id` = 4
2021-09-06 01:09:04.138904 I [72885:4380] pact-broker -- (0.000480s) COMMIT
2021-09-06 01:09:04.139199 I [72885:4380] pact-broker -- (0.000235s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:09:04.139428 I [72885:4380] pact-broker -- (0.000075s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.139478 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.139797 I [72885:4380] pact-broker -- (0.000229s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (6, 2, 4, 1, 3, '2021-09-04 21:09:04.128347')
2021-09-06 01:09:04.140048 I [72885:4380] pact-broker -- (0.000156s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 01:09:04.140569 I [72885:4380] pact-broker -- (0.000495s) COMMIT
2021-09-06 01:09:04.140748 I [72885:4380] pact-broker -- (0.000137s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 01:09:04.140973 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.141199 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.141414 I [72885:4380] pact-broker -- (0.000163s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 01:09:04.141738 I [72885:4380] pact-broker -- (0.000124s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.141933 I [72885:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.142269 I [72885:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:09:04.142383 I [72885:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.143119 I [72885:4380] pact-broker -- (0.000617s) UPDATE `pact_publications` SET `created_at` = '2021-09-04 21:09:04.135270' WHERE (`id` = 4)
2021-09-06 01:09:04.143915 I [72885:4380] pact-broker -- (0.000692s) UPDATE `pact_versions` SET `created_at` = '2021-09-04 21:09:04.135270' WHERE (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')
2021-09-06 01:09:04.144663 I [72885:4380] pact-broker -- (0.000653s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-04 21:09:04.135270' WHERE (`consumer_version_id` = 6)
2021-09-06 01:09:04.144927 I [72885:4380] pact-broker -- (0.000195s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:09:04.145128 I [72885:4380] pact-broker -- (0.000161s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.145352 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.145543 I [72885:4380] pact-broker -- (0.000152s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 01:09:04.145768 I [72885:4380] pact-broker -- (0.000180s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 01:09:04.146040 I [72885:4380] pact-broker -- (0.000120s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.146244 I [72885:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.146460 I [72885:4380] pact-broker -- (0.000174s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:09:04.146756 I [72885:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:09:04.147122 I [72885:4380] pact-broker -- (0.000138s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 01:09:04.147348 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.147364 I [72885:4380] PactBroker::Versions::Repository -- Upserting version 4fdf20082263d4c5038355a3b734be1c0054d1e1 for pacticipant_id=2
2021-09-06 01:09:04.147580 I [72885:4380] pact-broker -- (0.000073s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 01:09:04.147659 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.148072 I [72885:4380] pact-broker -- (0.000279s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('4fdf20082263d4c5038355a3b734be1c0054d1e1', 2, '2021-09-05 21:09:04.147367', '2021-09-05 21:09:04.147602')
2021-09-06 01:09:04.148266 I [72885:4380] pact-broker -- (0.000136s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 01:09:04.148500 I [72885:4380] pact-broker -- (0.000165s) SELECT * FROM `versions` WHERE (`id` = 7) LIMIT 1
2021-09-06 01:09:04.148583 I [72885:4380] pact-broker -- (0.000043s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.148701 I [72885:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.148758 I [72885:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.148844 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 107 WHERE (`id` = 7)
2021-09-06 01:09:04.149041 I [72885:4380] pact-broker -- (0.000172s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 01:09:04.149688 I [72885:4380] pact-broker -- (0.000617s) COMMIT
2021-09-06 01:09:04.149880 I [72885:4380] pact-broker -- (0.000100s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 7) ORDER BY `created_at`
2021-09-06 01:09:04.149981 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.150425 I [72885:4380] pact-broker -- (0.000318s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-09-04 21:09:04.146824', 3, 7, 2, 1, '2021-09-05 21:09:04.149908', '{"some":"results"}', '[]')
2021-09-06 01:09:04.150697 I [72885:4380] pact-broker -- (0.000211s) SELECT * FROM `verifications` WHERE `id` = 3
2021-09-06 01:09:04.151237 I [72885:4380] pact-broker -- (0.000512s) COMMIT
2021-09-06 01:09:04.151491 I [72885:4380] pact-broker -- (0.000087s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:09:04.151542 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.151901 I [72885:4380] pact-broker -- (0.000231s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (3, 7, 2, 3, 1, '2021-09-05 21:09:04.149908')
2021-09-06 01:09:04.152099 I [72885:4380] pact-broker -- (0.000102s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:09:04.152655 I [72885:4380] pact-broker -- (0.000531s) COMMIT
2021-09-06 01:09:04.152871 I [72885:4380] pact-broker -- (0.000138s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 01:09:04.153137 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1')) LIMIT 1
2021-09-06 01:09:04.153202 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.153533 I [72885:4380] pact-broker -- (0.000192s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.153212', `branch` = 'main' WHERE (`id` = 7)
2021-09-06 01:09:04.154064 I [72885:4380] pact-broker -- (0.000505s) COMMIT
2021-09-06 01:09:04.154744 I [72885:4380] pact-broker -- (0.000585s) UPDATE `verifications` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 3)
2021-09-06 01:09:04.155530 I [72885:4380] pact-broker -- (0.000690s) UPDATE `versions` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 7)
2021-09-06 01:09:04.156261 I [72885:4380] pact-broker -- (0.000604s) UPDATE `versions` SET `updated_at` = '2021-09-05 21:09:04.020336' WHERE (`id` = 7)
2021-09-06 01:09:04.156510 I [72885:4380] pact-broker -- (0.000190s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 01:09:04.157186 I [72885:4380] pact-broker -- (0.000584s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-05 21:09:04.020336' WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7))
2021-09-06 01:09:04.157550 I [72885:4380] pact-broker -- (0.000202s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 01:09:04.157871 I [72885:4380] pact-broker -- (0.000124s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 7) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:09:04.158107 I [72885:4380] pact-broker -- (0.000191s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.158336 I [72885:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.158198' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.158505 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.158839 I [72885:4380] pact-broker -- (0.000211s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('01986071-18f3-41b7-b0af-5bac630f22e7', 7, 2, 1, NULL, '2021-09-05 21:09:04.158430', '2021-09-05 21:09:04.158430', '')
2021-09-06 01:09:04.159067 I [72885:4380] pact-broker -- (0.000170s) SELECT * FROM `deployed_versions` WHERE `id` = 4
2021-09-06 01:09:04.159269 I [72885:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:09:04.159443 I [72885:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 1, 7, '', 4)
2021-09-06 01:09:04.159560 I [72885:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 4
2021-09-06 01:09:04.160070 I [72885:4380] pact-broker -- (0.000481s) COMMIT
2021-09-06 01:09:04.160805 I [72885:4380] pact-broker -- (0.000635s) UPDATE `deployed_versions` SET `created_at` = '2021-09-04 21:09:04.157218' WHERE (`id` = 4)
2021-09-06 01:09:04.161676 I [72885:4380] pact-broker -- (0.000753s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-04 21:09:04.157218' WHERE (`id` = 4)
2021-09-06 01:09:04.161877 I [72885:4380] pact-broker -- (0.000019s) BEGIN
2021-09-06 01:09:04.162370 I [72885:4380] pact-broker -- (0.000348s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 7, '2021-09-05 21:09:04.161763', '2021-09-05 21:09:04.161763', 107, 2)
2021-09-06 01:09:04.162689 I [72885:4380] pact-broker -- (0.000177s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 7)) LIMIT 1
2021-09-06 01:09:04.163324 I [72885:4380] pact-broker -- (0.000603s) COMMIT
2021-09-06 01:09:04.164065 I [72885:4380] pact-broker -- (0.000581s) UPDATE `tags` SET `created_at` = '2021-09-04 21:09:04.161689' WHERE ((`name` = 'main') AND (`version_id` = 7))
2021-09-06 01:09:04.164798 I [72885:4380] pact-broker -- (0.000607s) UPDATE `tags` SET `updated_at` = '2021-09-04 21:09:04.161689' WHERE (`name` = 'main')
2021-09-06 01:09:04.164968 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.165376 I [72885:4380] pact-broker -- (0.000283s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('5556b8149bf8bac76bc30f50a8a2dd4c22c85f30', 1, 'main', NULL, '2021-09-05 21:09:04.164902', '2021-09-05 21:09:04.164902')
2021-09-06 01:09:04.165602 I [72885:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:09:04.165829 I [72885:4380] pact-broker -- (0.000157s) SELECT * FROM `versions` WHERE (`id` = 8) LIMIT 1
2021-09-06 01:09:04.165931 I [72885:4380] pact-broker -- (0.000061s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.166050 I [72885:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 01:09:04.166107 I [72885:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 01:09:04.166190 I [72885:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 108 WHERE (`id` = 8)
2021-09-06 01:09:04.166360 I [72885:4380] pact-broker -- (0.000145s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:09:04.166969 I [72885:4380] pact-broker -- (0.000584s) COMMIT
2021-09-06 01:09:04.167639 I [72885:4380] pact-broker -- (0.000585s) UPDATE `versions` SET `created_at` = '2021-09-05 09:09:04.164808' WHERE (`id` = 8)
2021-09-06 01:09:04.168327 I [72885:4380] pact-broker -- (0.000586s) UPDATE `versions` SET `updated_at` = '2021-09-05 09:09:04.164808' WHERE (`id` = 8)
2021-09-06 01:09:04.168449 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.168878 I [72885:4380] pact-broker -- (0.000292s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 8, '2021-09-05 21:09:04.168385', '2021-09-05 21:09:04.168385', 108, 1)
2021-09-06 01:09:04.169151 I [72885:4380] pact-broker -- (0.000156s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 8)) LIMIT 1
2021-09-06 01:09:04.169728 I [72885:4380] pact-broker -- (0.000546s) COMMIT
2021-09-06 01:09:04.170474 I [72885:4380] pact-broker -- (0.000624s) UPDATE `tags` SET `created_at` = '2021-09-05 09:09:04.168337' WHERE ((`name` = 'main') AND (`version_id` = 8))
2021-09-06 01:09:04.171242 I [72885:4380] pact-broker -- (0.000662s) UPDATE `tags` SET `updated_at` = '2021-09-05 09:09:04.168337' WHERE (`name` = 'main')
2021-09-06 01:09:04.171640 I [72885:4380] pact-broker -- (0.000228s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 01:09:04.171945 I [72885:4380] pact-broker -- (0.000143s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 8) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 01:09:04.172171 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.172389 I [72885:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-05 21:09:04.172251' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 01:09:04.172569 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.172890 I [72885:4380] pact-broker -- (0.000214s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('2eedd171-af9e-434e-a7b7-534e8d6e818d', 8, 1, 1, NULL, '2021-09-05 21:09:04.172475', '2021-09-05 21:09:04.172475', '')
2021-09-06 01:09:04.173103 I [72885:4380] pact-broker -- (0.000154s) SELECT * FROM `deployed_versions` WHERE `id` = 5
2021-09-06 01:09:04.173299 I [72885:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 01:09:04.173475 I [72885:4380] pact-broker -- (0.000099s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 1, 8, '', 5)
2021-09-06 01:09:04.173573 I [72885:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 5
2021-09-06 01:09:04.174089 I [72885:4380] pact-broker -- (0.000489s) COMMIT
2021-09-06 01:09:04.174828 I [72885:4380] pact-broker -- (0.000643s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 09:09:04.171254' WHERE (`id` = 5)
2021-09-06 01:09:04.175522 I [72885:4380] pact-broker -- (0.000595s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 09:09:04.171254' WHERE (`id` = 5)
2021-09-06 01:09:04.175824 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `pact_versions` ORDER BY `id` DESC LIMIT 1
2021-09-06 01:09:04.175923 I [72885:4380] pact-broker -- (0.000063s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.176215 I [72885:4380] pact-broker -- (0.000156s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.176497 I [72885:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 01:09:04.176582 I [72885:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 01:09:04.176952 I [72885:4380] pact-broker -- (0.000253s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (8, 2, 1, 3, 1, 108, '2021-09-05 21:09:04.176519')
2021-09-06 01:09:04.177117 I [72885:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 5
2021-09-06 01:09:04.177687 I [72885:4380] pact-broker -- (0.000538s) COMMIT
2021-09-06 01:09:04.177943 I [72885:4380] pact-broker -- (0.000199s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:09:04.178198 I [72885:4380] pact-broker -- (0.000075s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 01:09:04.178249 I [72885:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 01:09:04.178577 I [72885:4380] pact-broker -- (0.000244s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (8, 2, 5, 1, 3, '2021-09-05 09:09:04.164808')
2021-09-06 01:09:04.178780 I [72885:4380] pact-broker -- (0.000108s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 01:09:04.179336 I [72885:4380] pact-broker -- (0.000528s) COMMIT
2021-09-06 01:09:04.179538 I [72885:4380] pact-broker -- (0.000155s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 01:09:04.179764 I [72885:4380] pact-broker -- (0.000184s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.179976 I [72885:4380] pact-broker -- (0.000171s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.180215 I [72885:4380] pact-broker -- (0.000185s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 01:09:04.180608 I [72885:4380] pact-broker -- (0.000227s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.180873 I [72885:4380] pact-broker -- (0.000086s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.181326 I [72885:4380] pact-broker -- (0.000267s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:09:04.181531 I [72885:4380] pact-broker -- (0.000065s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 01:09:04.182402 I [72885:4380] pact-broker -- (0.000784s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 09:09:04.175532' WHERE (`id` = 5)
2021-09-06 01:09:04.183203 I [72885:4380] pact-broker -- (0.000701s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 09:09:04.175532' WHERE (`consumer_version_id` = 8)
2021-09-06 01:09:04.183449 I [72885:4380] pact-broker -- (0.000174s) SELECT * FROM `pact_publications` WHERE (`id` = 5) LIMIT 1
2021-09-06 01:09:04.183662 I [72885:4380] pact-broker -- (0.000173s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 01:09:04.183888 I [72885:4380] pact-broker -- (0.000187s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 01:09:04.184098 I [72885:4380] pact-broker -- (0.000171s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 01:09:04.184323 I [72885:4380] pact-broker -- (0.000179s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 01:09:04.184717 I [72885:4380] pact-broker -- (0.000233s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.184947 I [72885:4380] pact-broker -- (0.000084s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 01:09:04.185141 I [72885:4380] pact-broker -- (0.000150s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 01:09:04.185560 I [72885:4380] pact-broker -- (0.000258s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 01:09:04.185599 I [72885:4380] PactBroker::App -- Marking seed as done
2021-09-06 01:09:04.186283 I [72885:4380] pact-broker -- (0.000086s) SELECT * FROM `config` WHERE (`name` = 'seed_example_data') LIMIT 1
2021-09-06 01:09:04.186545 I [72885:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 01:09:04.186862 I [72885:4380] pact-broker -- (0.000217s) INSERT INTO `config` (`name`, `type`, `value`, `created_at`, `updated_at`) VALUES ('seed_example_data', 'boolean', '0', '2021-09-05 21:09:04.186458', '2021-09-05 21:09:04.186458')
2021-09-06 01:09:04.187087 I [72885:4380] pact-broker -- (0.000164s) SELECT * FROM `config` WHERE `id` = 1
2021-09-06 01:09:04.187671 I [72885:4380] pact-broker -- (0.000556s) COMMIT
2021-09-06 01:09:04.187702 I [72885:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:09:04.187707 I [72885:4380] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 01:09:04.187782 I [72885:4380] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 01:09:04.187792 I [72885:4380] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 01:09:04.187799 I [72885:4380] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 01:09:04.187805 I [72885:4380] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 01:09:04.187811 I [72885:4380] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 01:09:04.187833 I [72885:4380] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 01:09:04.187840 I [72885:4380] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 01:09:04.187847 I [72885:4380] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 01:09:04.187853 I [72885:4380] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 01:09:04.187859 I [72885:4380] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 01:09:04.187865 I [72885:4380] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 01:09:04.187872 I [72885:4380] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 01:09:04.187878 I [72885:4380] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 01:09:04.187883 I [72885:4380] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 01:09:04.187889 I [72885:4380] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 01:09:04.187895 I [72885:4380] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 01:09:04.187900 I [72885:4380] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 01:09:04.187916 I [72885:4380] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 01:09:04.187923 I [72885:4380] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 01:09:04.187929 I [72885:4380] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 01:09:04.187935 I [72885:4380] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 01:09:04.187941 I [72885:4380] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 01:09:04.187946 I [72885:4380] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 01:09:04.187952 I [72885:4380] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 01:09:04.187958 I [72885:4380] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 01:09:04.187963 I [72885:4380] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 01:09:04.187968 I [72885:4380] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 01:09:04.187974 I [72885:4380] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 01:09:04.187979 I [72885:4380] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 01:09:04.187998 I [72885:4380] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 01:09:04.188004 I [72885:4380] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 01:09:04.188009 I [72885:4380] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 01:09:04.188015 I [72885:4380] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 01:09:04.188021 I [72885:4380] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 01:09:04.188027 I [72885:4380] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 01:09:04.188032 I [72885:4380] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 01:09:04.188038 I [72885:4380] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/pact_broker/log source={:type=>:defaults}
2021-09-06 01:09:04.188044 I [72885:4380] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 01:09:04.188049 I [72885:4380] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 01:09:04.188055 I [72885:4380] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 01:09:04.188063 I [72885:4380] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 01:09:04.188092 I [72885:4380] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 01:09:04.188098 I [72885:4380] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 01:09:04.188104 I [72885:4380] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 01:09:04.188109 I [72885:4380] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 01:09:04.188115 I [72885:4380] pact-broker -- seed_example_data=true source={:type=>:defaults}
2021-09-06 01:09:04.188122 I [72885:4380] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 01:09:04.188128 I [72885:4380] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 01:09:04.188134 I [72885:4380] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 01:09:04.188140 I [72885:4380] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 01:09:04.188145 I [72885:4380] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 01:09:04.188151 I [72885:4380] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 01:09:04.188159 I [72885:4380] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 01:09:04.188165 I [72885:4380] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 01:09:04.188171 I [72885:4380] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 01:09:04.188189 I [72885:4380] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 01:09:04.188195 I [72885:4380] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 01:09:04.188202 I [72885:4380] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 01:09:04.188208 I [72885:4380] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 01:09:04.188231 I [72885:4380] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 01:09:04.188238 I [72885:4380] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 01:09:04.188245 I [72885:4380] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 01:09:04.188252 I [72885:4380] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 01:09:04.188256 I [72885:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 01:09:04.188263 I [72885:4380] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 01:09:04.990386 I [72885:4380] PactBroker::App -- Mounting HAL browser
2021-09-06 01:09:04.990415 I [72885:4380] PactBroker::App -- Mounting UI
2021-09-06 01:09:05.249054 I [72885:4380] PactBroker::App -- Mounting PactBroker::API
2021-09-06 01:09:05.633618 I [72885:4380] pact-broker -- (0.000201s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:09:05.633793 I [72885:4380] pact-broker -- (0.000089s) SELECT DISTINCT `consumer_id`, `provider_id` FROM `webhooks`
2021-09-06 01:09:05.634514 I [72885:4380] pact-broker -- (0.000166s) SELECT count(*) AS 'count' FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) LIMIT 1
2021-09-06 01:09:05.635165 I [72885:4380] pact-broker -- (0.000299s) SELECT `pact_publications`.* FROM `pact_publications` INNER JOIN `pacticipants` AS 'consumers' ON (`pact_publications`.`consumer_id` = `consumers`.`id`) INNER JOIN `pacticipants` AS 'providers' ON (`pact_publications`.`provider_id` = `providers`.`id`) INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) WHERE (`pact_publications`.`id` IN (SELECT `pact_publications`.* FROM (SELECT `pact_publications`.`id` FROM `pact_publications` LEFT JOIN (SELECT `consumer_id`, `provider_id`, `consumer_version_order` FROM `pact_publications`) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`pact_publications`.`provider_id` = `pp2`.`provider_id`) AND (`pp2`.`consumer_version_order` > `pact_publications`.`consumer_version_order`)) WHERE (`pp2`.`consumer_version_order` IS NULL)) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`))) ORDER BY lower(`consumers`.`name`) ASC, `cv`.`order` DESC, lower(`providers`.`name`) ASC LIMIT 100 OFFSET 0
2021-09-06 01:09:05.635582 I [72885:4380] pact-broker -- (0.000174s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (1))
2021-09-06 01:09:05.635903 I [72885:4380] pact-broker -- (0.000163s) SELECT * FROM `pacticipants` WHERE (`pacticipants`.`id` IN (2))
2021-09-06 01:09:05.636207 I [72885:4380] pact-broker -- (0.000132s) SELECT * FROM `pact_versions` WHERE (`pact_versions`.`id` IN (3))
2021-09-06 01:09:05.636743 I [72885:4380] pact-broker -- (0.000224s) SELECT `verifications`.* FROM `verifications` LEFT JOIN `latest_verification_id_for_pact_version_and_provider_version` AS 'v2' ON ((`verifications`.`pact_version_id` = `v2`.`pact_version_id`) AND (`v2`.`verification_id` > `verifications`.`id`)) WHERE ((`v2`.`verification_id` IS NULL) AND (`verifications`.`pact_version_id` IN (3)))
2021-09-06 01:09:05.637104 I [72885:4380] pact-broker -- (0.000168s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:09:05.637543 I [72885:4380] pact-broker -- (0.000216s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:09:05.637876 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:09:05.638206 I [72885:4380] pact-broker -- (0.000084s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (7))) ORDER BY `created_at`, `id`
2021-09-06 01:09:05.638713 I [72885:4380] pact-broker -- (0.000232s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 2) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:09:05.639034 I [72885:4380] pact-broker -- (0.000169s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (7)) ORDER BY `created_at`
2021-09-06 01:09:05.639508 I [72885:4380] pact-broker -- (0.000194s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 2) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 2) AND (`tags`.`name` IN ('main')))
2021-09-06 01:09:05.639899 I [72885:4380] pact-broker -- (0.000136s) SELECT * FROM `integrations` WHERE (((`integrations`.`consumer_id` = 1) AND (`integrations`.`provider_id` = 2)))
2021-09-06 01:09:05.640491 I [72885:4380] pact-broker -- (0.000324s) SELECT * FROM `latest_verifications_for_consumer_and_provider` WHERE (((`latest_verifications_for_consumer_and_provider`.`consumer_id` = 1) AND (`latest_verifications_for_consumer_and_provider`.`provider_id` = 2)))
2021-09-06 01:09:05.640740 I [72885:4380] pact-broker -- (0.000168s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (7))
2021-09-06 01:09:05.641300 I [72885:4380] pact-broker -- (0.000172s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' WHERE (((`triggered_webhooks`.`consumer_id` = 1) AND (`triggered_webhooks`.`provider_id` = 2)))
2021-09-06 01:09:05.641657 I [72885:4380] pact-broker -- (0.000168s) SELECT * FROM `versions` WHERE (`versions`.`id` IN (8))
2021-09-06 01:09:05.641967 I [72885:4380] pact-broker -- (0.000212s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`deployed_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:09:05.642199 I [72885:4380] pact-broker -- (0.000163s) SELECT * FROM `environments` WHERE (`environments`.`id` IN (1))
2021-09-06 01:09:05.642370 I [72885:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`support_ended_at` IS NULL) AND (`released_versions`.`version_id` IN (8))) ORDER BY `created_at`, `id`
2021-09-06 01:09:05.642923 I [72885:4380] pact-broker -- (0.000247s) SELECT `versions`.* FROM `versions` LEFT JOIN (SELECT * FROM `versions` WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')))) AS 'versions_2' ON ((`versions`.`pacticipant_id` = `versions_2`.`pacticipant_id`) AND (`versions`.`branch` = `versions_2`.`branch`) AND (`versions_2`.`order` > `versions`.`order`)) WHERE ((`versions`.`pacticipant_id` = 1) AND (`versions`.`branch` IN ('main')) AND (`versions_2`.`order` IS NULL))
2021-09-06 01:09:05.643190 I [72885:4380] pact-broker -- (0.000174s) SELECT * FROM `tags` WHERE (`tags`.`version_id` IN (8)) ORDER BY `created_at`
2021-09-06 01:09:05.643668 I [72885:4380] pact-broker -- (0.000204s) SELECT `tags`.* FROM `tags` LEFT JOIN `tags` AS 'tags_2' ON ((`tags`.`pacticipant_id` = `tags_2`.`pacticipant_id`) AND (`tags`.`name` = `tags_2`.`name`) AND (`tags_2`.`pacticipant_id` = 1) AND (`tags_2`.`name` IN ('main')) AND (`tags_2`.`version_order` > `tags`.`version_order`)) WHERE ((`tags_2`.`name` IS NULL) AND (`tags`.`pacticipant_id` = 1) AND (`tags`.`name` IN ('main')))
2021-09-06 01:09:05.644037 I [72885:4380] pact-broker -- (0.000166s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8)
2021-09-06 01:09:05.644985 I [72885:4380] pact-broker -- (0.000313s) SELECT `pact_publications`.* FROM (SELECT `pact_publications`.*, `tags`.`name` AS 'tag_name' FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) LEFT JOIN (SELECT `pact_publications`.`consumer_id`, `tags`.`name` AS 'tag_name', `tags`.`version_order` FROM `pact_publications` INNER JOIN `tags` ON ((`pact_publications`.`consumer_version_id` = `tags`.`version_id`) AND (`tags`.`name` IN ('main'))) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')))) AS 'pp2' ON ((`pact_publications`.`consumer_id` = `pp2`.`consumer_id`) AND (`tags`.`name` = `pp2`.`tag_name`) AND (`pp2`.`version_order` > `tags`.`version_order`)) WHERE ((`pact_publications`.`consumer_id` = 1) AND (`pact_publications`.`provider_id` = 2) AND (`tags`.`name` IN ('main')) AND (`pp2`.`version_order` IS NULL))) AS 'pact_publications' INNER JOIN `latest_pact_publication_ids_for_consumer_versions` AS 'lp' ON (`lp`.`pact_publication_id` = `pact_publications`.`id`)
2021-09-06 01:09:05.645374 I [72885:4380] pact-broker -- (0.000083s) SELECT 1 AS 'one' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON ((`pact_publications`.`consumer_version_id` = `cv`.`id`) AND (`cv`.`branch` = 'main') AND (`cv`.`order` > 108)) WHERE ((`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:25.587947 I [83306:4380] pact-broker -- (0.000137s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.588009 I [83306:4380] pact-broker -- (0.000018s) PRAGMA case_sensitive_like = 1
2021-09-06 11:40:25.589394 I [83306:4380] pact-broker -- (0.000052s) SELECT sqlite_version()
2021-09-06 11:40:25.589533 I [83306:4380] pact-broker -- (0.000062s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:40:25.589672 I [83306:4380] pact-broker -- (0.000074s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:40:25.589683 I [83306:4380] PactBroker::App -- Database schema version is 0
2021-09-06 11:40:25.592201 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_migrations: SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 11:40:25.593857 I [83306:4380] pact-broker -- (0.000842s) CREATE TABLE `schema_migrations` (`filename` varchar(255) NOT NULL PRIMARY KEY)
2021-09-06 11:40:25.593988 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_info: SELECT NULL AS 'nil' FROM `schema_info` LIMIT 1
2021-09-06 11:40:25.594207 I [83306:4380] pact-broker -- (0.000091s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 11:40:25.654986 I [83306:4380] PactBroker::App -- Migrating database schema
2021-09-06 11:40:25.656687 I [83306:4380] pact-broker -- (0.000145s) SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 11:40:25.656894 I [83306:4380] pact-broker -- (0.000069s) SELECT * FROM `schema_migrations` LIMIT 1
2021-09-06 11:40:25.657025 I [83306:4380] pact-broker -- (0.000057s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 11:40:25.695489 I [83306:4380] pact-broker -- Begin applying migration 000001_create_pacticipant_table.rb, direction: up
2021-09-06 11:40:25.697008 I [83306:4380] pact-broker -- (0.001250s) CREATE TABLE `pacticipants` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) UNIQUE, `repository_url` varchar(255))
2021-09-06 11:40:25.698097 I [83306:4380] pact-broker -- (0.000974s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000001_create_pacticipant_table.rb')
2021-09-06 11:40:25.698125 I [83306:4380] pact-broker -- Finished applying migration 000001_create_pacticipant_table.rb, direction: up, took 0.002640 seconds
2021-09-06 11:40:25.698131 I [83306:4380] pact-broker -- Begin applying migration 000002_create_versions_table.rb, direction: up
2021-09-06 11:40:25.699420 I [83306:4380] pact-broker -- (0.001189s) CREATE TABLE `versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255), `repository_ref` varchar(255), `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 11:40:25.700495 I [83306:4380] pact-broker -- (0.000937s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:40:25.701339 I [83306:4380] pact-broker -- (0.000791s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000002_create_versions_table.rb')
2021-09-06 11:40:25.701353 I [83306:4380] pact-broker -- Finished applying migration 000002_create_versions_table.rb, direction: up, took 0.003219 seconds
2021-09-06 11:40:25.701359 I [83306:4380] pact-broker -- Begin applying migration 000003_create_pacts_table.rb, direction: up
2021-09-06 11:40:25.702603 I [83306:4380] pact-broker -- (0.000980s) CREATE TABLE `pacts` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` text, `version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 11:40:25.703718 I [83306:4380] pact-broker -- (0.000994s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.704401 I [83306:4380] pact-broker -- (0.000581s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000003_create_pacts_table.rb')
2021-09-06 11:40:25.704415 I [83306:4380] pact-broker -- Finished applying migration 000003_create_pacts_table.rb, direction: up, took 0.003053 seconds
2021-09-06 11:40:25.704420 I [83306:4380] pact-broker -- Begin applying migration 000004_create_tags_table.rb, direction: up
2021-09-06 11:40:25.705381 I [83306:4380] pact-broker -- (0.000801s) CREATE TABLE `tags` (`name` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, CONSTRAINT `tags_pk` PRIMARY KEY (`version_id`, `name`))
2021-09-06 11:40:25.706052 I [83306:4380] pact-broker -- (0.000597s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000004_create_tags_table.rb')
2021-09-06 11:40:25.706065 I [83306:4380] pact-broker -- Finished applying migration 000004_create_tags_table.rb, direction: up, took 0.001642 seconds
2021-09-06 11:40:25.706070 I [83306:4380] pact-broker -- Begin applying migration 000005_add_order_column_to_version.rb, direction: up
2021-09-06 11:40:25.706124 I [83306:4380] pact-broker -- (0.000012s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.706147 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.706187 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.706451 I [83306:4380] pact-broker -- (0.000225s) ALTER TABLE `versions` ADD COLUMN `order` integer
2021-09-06 11:40:25.706793 I [83306:4380] pact-broker -- (0.000268s) COMMIT
2021-09-06 11:40:25.706837 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.706859 I [83306:4380] pact-broker -- (0.000007s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.707045 I [83306:4380] pact-broker -- (0.000105s) UPDATE `versions` SET `order` = `id`
2021-09-06 11:40:25.707920 I [83306:4380] pact-broker -- (0.000762s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000005_add_order_column_to_version.rb')
2021-09-06 11:40:25.707934 I [83306:4380] pact-broker -- Finished applying migration 000005_add_order_column_to_version.rb, direction: up, took 0.001861 seconds
2021-09-06 11:40:25.707940 I [83306:4380] pact-broker -- Begin applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up
2021-09-06 11:40:25.707987 I [83306:4380] pact-broker -- (0.000012s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.708052 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.708077 I [83306:4380] pact-broker -- (0.000008s) BEGIN
2021-09-06 11:40:25.708216 I [83306:4380] pact-broker -- (0.000086s) PRAGMA table_info('tags')
2021-09-06 11:40:25.708285 I [83306:4380] pact-broker -- (0.000030s) PRAGMA foreign_key_list('tags')
2021-09-06 11:40:25.708374 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_list('tags')
2021-09-06 11:40:25.708420 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:40:25.708560 I [83306:4380] pact-broker -- (0.000011s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.708631 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:40:25.708830 I [83306:4380] pact-broker -- (0.000011s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.708937 I [83306:4380] pact-broker -- (0.000054s) PRAGMA index_list('tags')
2021-09-06 11:40:25.709564 I [83306:4380] pact-broker -- (0.000587s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:40:25.709675 I [83306:4380] pact-broker -- (0.000092s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:40:25.709711 I [83306:4380] pact-broker -- (0.000020s) INSERT INTO `tags`(`name`, `version_id`) SELECT `name`, `version_id` FROM `tags_backup0`
2021-09-06 11:40:25.709842 I [83306:4380] pact-broker -- (0.000076s) DROP TABLE `tags_backup0`
2021-09-06 11:40:25.710231 I [83306:4380] pact-broker -- (0.000369s) COMMIT
2021-09-06 11:40:25.710276 I [83306:4380] pact-broker -- (0.000012s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.710299 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.710821 I [83306:4380] pact-broker -- (0.000483s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000006_make_version_foreign_key_mandatory.rb')
2021-09-06 11:40:25.710835 I [83306:4380] pact-broker -- Finished applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up, took 0.002892 seconds
2021-09-06 11:40:25.710840 I [83306:4380] pact-broker -- Begin applying migration 000007_increase_json_content_length.rb, direction: up
2021-09-06 11:40:25.710891 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.710914 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.710940 I [83306:4380] pact-broker -- (0.000009s) BEGIN
2021-09-06 11:40:25.711105 I [83306:4380] pact-broker -- (0.000080s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.711173 I [83306:4380] pact-broker -- (0.000032s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.711222 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.711378 I [83306:4380] pact-broker -- (0.000010s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.711437 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.711626 I [83306:4380] pact-broker -- (0.000011s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.711707 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.711821 I [83306:4380] pact-broker -- (0.000023s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.712332 I [83306:4380] pact-broker -- (0.000471s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.712436 I [83306:4380] pact-broker -- (0.000083s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.712498 I [83306:4380] pact-broker -- (0.000044s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`) SELECT `id`, `json_content`, `version_id`, `provider_id` FROM `pacts_backup0`
2021-09-06 11:40:25.712594 I [83306:4380] pact-broker -- (0.000079s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.712680 I [83306:4380] pact-broker -- (0.000071s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.713313 I [83306:4380] pact-broker -- (0.000609s) COMMIT
2021-09-06 11:40:25.713366 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.713392 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.714125 I [83306:4380] pact-broker -- (0.000686s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000007_increase_json_content_length.rb')
2021-09-06 11:40:25.714142 I [83306:4380] pact-broker -- Finished applying migration 000007_increase_json_content_length.rb, direction: up, took 0.003298 seconds
2021-09-06 11:40:25.714149 I [83306:4380] pact-broker -- Begin applying migration 000008_create_latest_pact_view.rb, direction: up
2021-09-06 11:40:25.715158 I [83306:4380] pact-broker -- (0.000728s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 11:40:25.715919 I [83306:4380] pact-broker -- (0.000714s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:40:25.716691 I [83306:4380] pact-broker -- (0.000725s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.717469 I [83306:4380] pact-broker -- (0.000648s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000008_create_latest_pact_view.rb')
2021-09-06 11:40:25.717486 I [83306:4380] pact-broker -- Finished applying migration 000008_create_latest_pact_view.rb, direction: up, took 0.003334 seconds
2021-09-06 11:40:25.717493 I [83306:4380] pact-broker -- Begin applying migration 000009_add_timestamps.rb, direction: up
2021-09-06 11:40:25.717549 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.717578 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.717609 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.718013 I [83306:4380] pact-broker -- (0.000356s) ALTER TABLE `pacts` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:25.718379 I [83306:4380] pact-broker -- (0.000342s) COMMIT
2021-09-06 11:40:25.718430 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.718458 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.718506 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.718530 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.718558 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.719009 I [83306:4380] pact-broker -- (0.000344s) ALTER TABLE `pacts` ADD COLUMN `updated_at` timestamp
2021-09-06 11:40:25.719333 I [83306:4380] pact-broker -- (0.000299s) COMMIT
2021-09-06 11:40:25.719383 I [83306:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.719411 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.719456 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.719481 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.719509 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.719890 I [83306:4380] pact-broker -- (0.000340s) ALTER TABLE `tags` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:25.720278 I [83306:4380] pact-broker -- (0.000362s) COMMIT
2021-09-06 11:40:25.720335 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.720363 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.720410 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.720434 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.720505 I [83306:4380] pact-broker -- (0.000052s) BEGIN
2021-09-06 11:40:25.720911 I [83306:4380] pact-broker -- (0.000361s) ALTER TABLE `tags` ADD COLUMN `updated_at` timestamp
2021-09-06 11:40:25.721291 I [83306:4380] pact-broker -- (0.000357s) COMMIT
2021-09-06 11:40:25.721342 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.721374 I [83306:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.721420 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.721445 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.721474 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.721902 I [83306:4380] pact-broker -- (0.000344s) ALTER TABLE `versions` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:25.722298 I [83306:4380] pact-broker -- (0.000372s) COMMIT
2021-09-06 11:40:25.722368 I [83306:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.722400 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.722455 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.722482 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.722512 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.722957 I [83306:4380] pact-broker -- (0.000391s) ALTER TABLE `versions` ADD COLUMN `updated_at` timestamp
2021-09-06 11:40:25.723410 I [83306:4380] pact-broker -- (0.000426s) COMMIT
2021-09-06 11:40:25.723466 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.723494 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.723540 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.723565 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.723594 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.724007 I [83306:4380] pact-broker -- (0.000372s) ALTER TABLE `pacticipants` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:25.724379 I [83306:4380] pact-broker -- (0.000348s) COMMIT
2021-09-06 11:40:25.724484 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.724513 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.724560 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.724586 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.724615 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.725010 I [83306:4380] pact-broker -- (0.000353s) ALTER TABLE `pacticipants` ADD COLUMN `updated_at` timestamp
2021-09-06 11:40:25.725406 I [83306:4380] pact-broker -- (0.000369s) COMMIT
2021-09-06 11:40:25.725465 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.725496 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.726162 I [83306:4380] pact-broker -- (0.000566s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000009_add_timestamps.rb')
2021-09-06 11:40:25.726179 I [83306:4380] pact-broker -- Finished applying migration 000009_add_timestamps.rb, direction: up, took 0.008683 seconds
2021-09-06 11:40:25.726186 I [83306:4380] pact-broker -- Begin applying migration 000010_populate_timestamps.rb, direction: up
2021-09-06 11:40:25.726557 I [83306:4380] pact-broker -- (0.000122s) UPDATE `pacts` SET `created_at` = '2021-09-06 07:40:25.726226', `updated_at` = '2021-09-06 07:40:25.726242'
2021-09-06 11:40:25.726769 I [83306:4380] pact-broker -- (0.000122s) UPDATE `versions` SET `created_at` = '2021-09-06 07:40:25.726582', `updated_at` = '2021-09-06 07:40:25.726585'
2021-09-06 11:40:25.726892 I [83306:4380] pact-broker -- (0.000045s) UPDATE `pacticipants` SET `created_at` = '2021-09-06 07:40:25.726791', `updated_at` = '2021-09-06 07:40:25.726793'
2021-09-06 11:40:25.727012 I [83306:4380] pact-broker -- (0.000044s) UPDATE `tags` SET `created_at` = '2021-09-06 07:40:25.726912', `updated_at` = '2021-09-06 07:40:25.726914'
2021-09-06 11:40:25.727620 I [83306:4380] pact-broker -- (0.000556s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000010_populate_timestamps.rb')
2021-09-06 11:40:25.727639 I [83306:4380] pact-broker -- Finished applying migration 000010_populate_timestamps.rb, direction: up, took 0.001448 seconds
2021-09-06 11:40:25.727646 I [83306:4380] pact-broker -- Begin applying migration 000011_made_timestamps_mandatory.rb, direction: up
2021-09-06 11:40:25.727702 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.727731 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.727816 I [83306:4380] pact-broker -- (0.000065s) BEGIN
2021-09-06 11:40:25.727987 I [83306:4380] pact-broker -- (0.000114s) PRAGMA table_info('tags')
2021-09-06 11:40:25.728068 I [83306:4380] pact-broker -- (0.000036s) PRAGMA foreign_key_list('tags')
2021-09-06 11:40:25.728188 I [83306:4380] pact-broker -- (0.000088s) PRAGMA index_list('tags')
2021-09-06 11:40:25.728245 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.728297 I [83306:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:40:25.728481 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.728561 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:40:25.728765 I [83306:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.728909 I [83306:4380] pact-broker -- (0.000036s) PRAGMA index_list('tags')
2021-09-06 11:40:25.728965 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.729810 I [83306:4380] pact-broker -- (0.000817s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:40:25.729963 I [83306:4380] pact-broker -- (0.000129s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:40:25.730010 I [83306:4380] pact-broker -- (0.000026s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:40:25.730161 I [83306:4380] pact-broker -- (0.000131s) DROP TABLE `tags_backup0`
2021-09-06 11:40:25.730305 I [83306:4380] pact-broker -- (0.000095s) PRAGMA table_info('tags')
2021-09-06 11:40:25.730399 I [83306:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('tags')
2021-09-06 11:40:25.730487 I [83306:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 11:40:25.730575 I [83306:4380] pact-broker -- (0.000058s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.730630 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:40:25.730827 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.730893 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:40:25.731084 I [83306:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.731366 I [83306:4380] pact-broker -- (0.000220s) PRAGMA index_list('tags')
2021-09-06 11:40:25.731428 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.732071 I [83306:4380] pact-broker -- (0.000618s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:40:25.732189 I [83306:4380] pact-broker -- (0.000095s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:40:25.732233 I [83306:4380] pact-broker -- (0.000025s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:40:25.732325 I [83306:4380] pact-broker -- (0.000074s) DROP TABLE `tags_backup0`
2021-09-06 11:40:25.732463 I [83306:4380] pact-broker -- (0.000091s) PRAGMA table_info('tags')
2021-09-06 11:40:25.732549 I [83306:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('tags')
2021-09-06 11:40:25.732647 I [83306:4380] pact-broker -- (0.000060s) PRAGMA index_list('tags')
2021-09-06 11:40:25.732702 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.732778 I [83306:4380] pact-broker -- (0.000047s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:40:25.732938 I [83306:4380] pact-broker -- (0.000028s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.733011 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:40:25.733207 I [83306:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.733496 I [83306:4380] pact-broker -- (0.000200s) PRAGMA index_list('tags')
2021-09-06 11:40:25.733559 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:40:25.734204 I [83306:4380] pact-broker -- (0.000620s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:40:25.734341 I [83306:4380] pact-broker -- (0.000114s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:40:25.734385 I [83306:4380] pact-broker -- (0.000025s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:40:25.734449 I [83306:4380] pact-broker -- (0.000047s) DROP TABLE `tags_backup0`
2021-09-06 11:40:25.735024 I [83306:4380] pact-broker -- (0.000552s) COMMIT
2021-09-06 11:40:25.735082 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.735132 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.735181 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.735244 I [83306:4380] pact-broker -- (0.000044s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.735276 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.735441 I [83306:4380] pact-broker -- (0.000120s) PRAGMA table_info('pacticipants')
2021-09-06 11:40:25.735531 I [83306:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:40:25.735610 I [83306:4380] pact-broker -- (0.000033s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.735691 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.735859 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.735924 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:40:25.736100 I [83306:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.736234 I [83306:4380] pact-broker -- (0.000047s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.736300 I [83306:4380] pact-broker -- (0.000037s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.737108 I [83306:4380] pact-broker -- (0.000782s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:40:25.737241 I [83306:4380] pact-broker -- (0.000108s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:40:25.737317 I [83306:4380] pact-broker -- (0.000054s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:40:25.737427 I [83306:4380] pact-broker -- (0.000090s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:40:25.737578 I [83306:4380] pact-broker -- (0.000091s) PRAGMA table_info('pacticipants')
2021-09-06 11:40:25.737640 I [83306:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:40:25.737726 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.737804 I [83306:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.737939 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.738021 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:40:25.738198 I [83306:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.738445 I [83306:4380] pact-broker -- (0.000168s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.738503 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.739155 I [83306:4380] pact-broker -- (0.000627s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:40:25.739260 I [83306:4380] pact-broker -- (0.000082s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:40:25.739311 I [83306:4380] pact-broker -- (0.000032s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:40:25.739399 I [83306:4380] pact-broker -- (0.000070s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:40:25.739528 I [83306:4380] pact-broker -- (0.000082s) PRAGMA table_info('pacticipants')
2021-09-06 11:40:25.739590 I [83306:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:40:25.739665 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.739746 I [83306:4380] pact-broker -- (0.000048s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.739865 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.739937 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:40:25.740116 I [83306:4380] pact-broker -- (0.000029s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.740379 I [83306:4380] pact-broker -- (0.000173s) PRAGMA index_list('pacticipants')
2021-09-06 11:40:25.740442 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:40:25.741101 I [83306:4380] pact-broker -- (0.000630s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:40:25.741208 I [83306:4380] pact-broker -- (0.000082s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:40:25.741268 I [83306:4380] pact-broker -- (0.000038s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:40:25.741335 I [83306:4380] pact-broker -- (0.000049s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:40:25.741814 I [83306:4380] pact-broker -- (0.000456s) COMMIT
2021-09-06 11:40:25.741871 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.741901 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.741959 I [83306:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.741995 I [83306:4380] pact-broker -- (0.000018s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.742025 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.742207 I [83306:4380] pact-broker -- (0.000132s) PRAGMA table_info('versions')
2021-09-06 11:40:25.742292 I [83306:4380] pact-broker -- (0.000034s) PRAGMA foreign_key_list('versions')
2021-09-06 11:40:25.742361 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('versions')
2021-09-06 11:40:25.743806 I [83306:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.743905 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:40:25.744070 I [83306:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.744210 I [83306:4380] pact-broker -- (0.000035s) PRAGMA index_list('versions')
2021-09-06 11:40:25.744270 I [83306:4380] pact-broker -- (0.000031s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:40:25.745141 I [83306:4380] pact-broker -- (0.000794s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:40:25.745268 I [83306:4380] pact-broker -- (0.000099s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.745342 I [83306:4380] pact-broker -- (0.000054s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:40:25.745444 I [83306:4380] pact-broker -- (0.000083s) DROP TABLE `versions_backup0`
2021-09-06 11:40:25.745520 I [83306:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:40:25.745695 I [83306:4380] pact-broker -- (0.000087s) PRAGMA table_info('versions')
2021-09-06 11:40:25.745780 I [83306:4380] pact-broker -- (0.000044s) PRAGMA foreign_key_list('versions')
2021-09-06 11:40:25.745873 I [83306:4380] pact-broker -- (0.000060s) PRAGMA index_list('versions')
2021-09-06 11:40:25.746031 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.746133 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:40:25.746284 I [83306:4380] pact-broker -- (0.000028s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.746583 I [83306:4380] pact-broker -- (0.000198s) PRAGMA index_list('versions')
2021-09-06 11:40:25.746669 I [83306:4380] pact-broker -- (0.000051s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:40:25.747353 I [83306:4380] pact-broker -- (0.000641s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:40:25.747448 I [83306:4380] pact-broker -- (0.000072s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.747495 I [83306:4380] pact-broker -- (0.000028s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:40:25.747554 I [83306:4380] pact-broker -- (0.000042s) DROP TABLE `versions_backup0`
2021-09-06 11:40:25.747660 I [83306:4380] pact-broker -- (0.000056s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:40:25.747789 I [83306:4380] pact-broker -- (0.000083s) PRAGMA table_info('versions')
2021-09-06 11:40:25.747898 I [83306:4380] pact-broker -- (0.000031s) PRAGMA foreign_key_list('versions')
2021-09-06 11:40:25.747958 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_list('versions')
2021-09-06 11:40:25.748111 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.748202 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:40:25.748382 I [83306:4380] pact-broker -- (0.000060s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.748619 I [83306:4380] pact-broker -- (0.000172s) PRAGMA index_list('versions')
2021-09-06 11:40:25.748709 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:40:25.749395 I [83306:4380] pact-broker -- (0.000644s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:40:25.749483 I [83306:4380] pact-broker -- (0.000066s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.749530 I [83306:4380] pact-broker -- (0.000028s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:40:25.749597 I [83306:4380] pact-broker -- (0.000047s) DROP TABLE `versions_backup0`
2021-09-06 11:40:25.750629 I [83306:4380] pact-broker -- (0.001010s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:40:25.751247 I [83306:4380] pact-broker -- (0.000591s) COMMIT
2021-09-06 11:40:25.751334 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.751364 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.751413 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.751438 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.751494 I [83306:4380] pact-broker -- (0.000036s) BEGIN
2021-09-06 11:40:25.751658 I [83306:4380] pact-broker -- (0.000120s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.751761 I [83306:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.751851 I [83306:4380] pact-broker -- (0.000057s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.752016 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.752081 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.752239 I [83306:4380] pact-broker -- (0.000012s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.752355 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.752411 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.753319 I [83306:4380] pact-broker -- (0.000866s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.753462 I [83306:4380] pact-broker -- (0.000118s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.753544 I [83306:4380] pact-broker -- (0.000062s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:40:25.753653 I [83306:4380] pact-broker -- (0.000089s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.753732 I [83306:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.753860 I [83306:4380] pact-broker -- (0.000082s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.753962 I [83306:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.754021 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.754190 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.754252 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.754431 I [83306:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.754707 I [83306:4380] pact-broker -- (0.000211s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.754769 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.755461 I [83306:4380] pact-broker -- (0.000649s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.755548 I [83306:4380] pact-broker -- (0.000066s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.755595 I [83306:4380] pact-broker -- (0.000028s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:40:25.755653 I [83306:4380] pact-broker -- (0.000041s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.755723 I [83306:4380] pact-broker -- (0.000053s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.755876 I [83306:4380] pact-broker -- (0.000108s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.755950 I [83306:4380] pact-broker -- (0.000036s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.756007 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.756202 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.756264 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.756455 I [83306:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.756702 I [83306:4380] pact-broker -- (0.000181s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.756789 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.757482 I [83306:4380] pact-broker -- (0.000650s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.757570 I [83306:4380] pact-broker -- (0.000066s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.757616 I [83306:4380] pact-broker -- (0.000028s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:40:25.757907 I [83306:4380] pact-broker -- (0.000271s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.758056 I [83306:4380] pact-broker -- (0.000128s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.758728 I [83306:4380] pact-broker -- (0.000647s) COMMIT
2021-09-06 11:40:25.758809 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.758840 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.759645 I [83306:4380] pact-broker -- (0.000747s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000011_made_timestamps_mandatory.rb')
2021-09-06 11:40:25.759665 I [83306:4380] pact-broker -- Finished applying migration 000011_made_timestamps_mandatory.rb, direction: up, took 0.032014 seconds
2021-09-06 11:40:25.759672 I [83306:4380] pact-broker -- Begin applying migration 000012_create_webhooks_table.rb, direction: up
2021-09-06 11:40:25.760713 I [83306:4380] pact-broker -- (0.000831s) CREATE TABLE `webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_webhook_uuid` UNIQUE, `method` varchar(255) NOT NULL, `url` varchar(255) NOT NULL, `body` varchar(255), `is_json_request_body` Boolean, `consumer_id` integer NOT NULL CONSTRAINT `fk_webhooks_consumer` REFERENCES `pacticipants`, `provider_id` integer NOT NULL CONSTRAINT `fk_webhooks_provider` REFERENCES `pacticipants`)
2021-09-06 11:40:25.761697 I [83306:4380] pact-broker -- (0.000844s) CREATE TABLE `webhook_headers` (`name` varchar(255) NOT NULL, `value` varchar(255), `webhook_id` integer NOT NULL CONSTRAINT `fk_webhookheaders_webhooks` REFERENCES `webhooks`, CONSTRAINT `webhooks_headers_pk` PRIMARY KEY (`webhook_id`, `name`))
2021-09-06 11:40:25.762510 I [83306:4380] pact-broker -- (0.000739s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000012_create_webhooks_table.rb')
2021-09-06 11:40:25.762528 I [83306:4380] pact-broker -- Finished applying migration 000012_create_webhooks_table.rb, direction: up, took 0.002852 seconds
2021-09-06 11:40:25.762534 I [83306:4380] pact-broker -- Begin applying migration 000013_add_columns_to_webhooks.rb, direction: up
2021-09-06 11:40:25.762596 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.762626 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.762672 I [83306:4380] pact-broker -- (0.000024s) BEGIN
2021-09-06 11:40:25.763137 I [83306:4380] pact-broker -- (0.000418s) ALTER TABLE `webhooks` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:25.763635 I [83306:4380] pact-broker -- (0.000465s) COMMIT
2021-09-06 11:40:25.763702 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.763745 I [83306:4380] pact-broker -- (0.000023s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.763794 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.763820 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.763861 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.764318 I [83306:4380] pact-broker -- (0.000414s) ALTER TABLE `webhooks` ADD COLUMN `updated_at` timestamp
2021-09-06 11:40:25.764825 I [83306:4380] pact-broker -- (0.000481s) COMMIT
2021-09-06 11:40:25.764896 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.764925 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.764986 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.765022 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.765051 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.765542 I [83306:4380] pact-broker -- (0.000436s) ALTER TABLE `webhooks` ADD COLUMN `username` varchar(255)
2021-09-06 11:40:25.765980 I [83306:4380] pact-broker -- (0.000414s) COMMIT
2021-09-06 11:40:25.766031 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.766058 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.766115 I [83306:4380] pact-broker -- (0.000021s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.766140 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.766168 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.766626 I [83306:4380] pact-broker -- (0.000401s) ALTER TABLE `webhooks` ADD COLUMN `password` varchar(255)
2021-09-06 11:40:25.767084 I [83306:4380] pact-broker -- (0.000434s) COMMIT
2021-09-06 11:40:25.767151 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.767180 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.767828 I [83306:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000013_add_columns_to_webhooks.rb')
2021-09-06 11:40:25.767844 I [83306:4380] pact-broker -- Finished applying migration 000013_add_columns_to_webhooks.rb, direction: up, took 0.005306 seconds
2021-09-06 11:40:25.767850 I [83306:4380] pact-broker -- Begin applying migration 000014_add_timestamps_to_pact_views.rb, direction: up
2021-09-06 11:40:25.768632 I [83306:4380] pact-broker -- (0.000600s) DROP VIEW `all_pacts`
2021-09-06 11:40:25.769455 I [83306:4380] pact-broker -- (0.000657s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content`, `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 11:40:25.770038 I [83306:4380] pact-broker -- (0.000524s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:40:25.770664 I [83306:4380] pact-broker -- (0.000583s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:40:25.771210 I [83306:4380] pact-broker -- (0.000505s) DROP VIEW `latest_pacts`
2021-09-06 11:40:25.771916 I [83306:4380] pact-broker -- (0.000643s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.772610 I [83306:4380] pact-broker -- (0.000606s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000014_add_timestamps_to_pact_views.rb')
2021-09-06 11:40:25.772630 I [83306:4380] pact-broker -- Finished applying migration 000014_add_timestamps_to_pact_views.rb, direction: up, took 0.004773 seconds
2021-09-06 11:40:25.772637 I [83306:4380] pact-broker -- Begin applying migration 000015_create_pact_version_content.rb, direction: up
2021-09-06 11:40:25.773520 I [83306:4380] pact-broker -- (0.000735s) CREATE TABLE `pact_version_contents` (`sha` varchar(255) NOT NULL CONSTRAINT `pk_pact_version_contents` PRIMARY KEY, `content` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:40:25.774134 I [83306:4380] pact-broker -- (0.000543s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000015_create_pact_version_content.rb')
2021-09-06 11:40:25.774150 I [83306:4380] pact-broker -- Finished applying migration 000015_create_pact_version_content.rb, direction: up, took 0.001511 seconds
2021-09-06 11:40:25.774157 I [83306:4380] pact-broker -- Begin applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up
2021-09-06 11:40:25.774234 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.774270 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.774304 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.775254 I [83306:4380] pact-broker -- (0.000420s) ALTER TABLE `pacts` ADD COLUMN `pact_version_content_sha` varchar(255) NULL CONSTRAINT `fk_pact_version_content` REFERENCES `pact_version_contents`
2021-09-06 11:40:25.775638 I [83306:4380] pact-broker -- (0.000357s) COMMIT
2021-09-06 11:40:25.775690 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.775718 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.776335 I [83306:4380] pact-broker -- (0.000565s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000016_add_pact_content_foreign_key_to_pacts.rb')
2021-09-06 11:40:25.776351 I [83306:4380] pact-broker -- Finished applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up, took 0.002191 seconds
2021-09-06 11:40:25.776358 I [83306:4380] pact-broker -- Begin applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up
2021-09-06 11:40:25.776497 I [83306:4380] pact-broker -- (0.000085s) SELECT * FROM `pacts`
2021-09-06 11:40:25.777027 I [83306:4380] pact-broker -- (0.000479s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000017_migrate_json_content_to_pact_version_content_table.rb')
2021-09-06 11:40:25.777043 I [83306:4380] pact-broker -- Finished applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up, took 0.000681 seconds
2021-09-06 11:40:25.777050 I [83306:4380] pact-broker -- Begin applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up
2021-09-06 11:40:25.777605 I [83306:4380] pact-broker -- (0.000522s) DROP VIEW `latest_pacts`
2021-09-06 11:40:25.778175 I [83306:4380] pact-broker -- (0.000529s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:40:25.778705 I [83306:4380] pact-broker -- (0.000489s) DROP VIEW `all_pacts`
2021-09-06 11:40:25.779167 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.779198 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.779231 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.779485 I [83306:4380] pact-broker -- (0.000166s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.779592 I [83306:4380] pact-broker -- (0.000051s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.779661 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.780371 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.780450 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.780610 I [83306:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.781377 I [83306:4380] pact-broker -- (0.000034s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.781437 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.782312 I [83306:4380] pact-broker -- (0.000830s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.782415 I [83306:4380] pact-broker -- (0.000079s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.782465 I [83306:4380] pact-broker -- (0.000030s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 11:40:25.782571 I [83306:4380] pact-broker -- (0.000088s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.782649 I [83306:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.783181 I [83306:4380] pact-broker -- (0.000508s) COMMIT
2021-09-06 11:40:25.783240 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.783271 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.784850 I [83306:4380] pact-broker -- (0.001527s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000018_drop_json_content_column_from_pacts.rb')
2021-09-06 11:40:25.784869 I [83306:4380] pact-broker -- Finished applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up, took 0.007815 seconds
2021-09-06 11:40:25.784876 I [83306:4380] pact-broker -- Begin applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up
2021-09-06 11:40:25.784940 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.784969 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.785000 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.785161 I [83306:4380] pact-broker -- (0.000118s) PRAGMA table_info('pacts')
2021-09-06 11:40:25.785249 I [83306:4380] pact-broker -- (0.000045s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:40:25.785310 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.786052 I [83306:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.786124 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:40:25.786841 I [83306:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.786941 I [83306:4380] pact-broker -- (0.000033s) PRAGMA index_list('pacts')
2021-09-06 11:40:25.787000 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:40:25.787827 I [83306:4380] pact-broker -- (0.000783s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:40:25.787954 I [83306:4380] pact-broker -- (0.000103s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.788012 I [83306:4380] pact-broker -- (0.000036s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 11:40:25.788121 I [83306:4380] pact-broker -- (0.000089s) DROP TABLE `pacts_backup0`
2021-09-06 11:40:25.788199 I [83306:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:40:25.788843 I [83306:4380] pact-broker -- (0.000617s) COMMIT
2021-09-06 11:40:25.788906 I [83306:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.788938 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.790439 I [83306:4380] pact-broker -- (0.000698s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000019_make_pact_version_content_sha_not_nullable.rb')
2021-09-06 11:40:25.790457 I [83306:4380] pact-broker -- Finished applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up, took 0.005577 seconds
2021-09-06 11:40:25.790464 I [83306:4380] pact-broker -- Begin applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up
2021-09-06 11:40:25.790641 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_pacts: DROP VIEW `all_pacts`
2021-09-06 11:40:25.792383 I [83306:4380] pact-broker -- (0.000821s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pvc`.`sha` AS 'pact_version_content_sha', `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`) INNER JOIN `pact_version_contents` AS 'pvc' ON (`pvc`.`sha` = `pacts`.`pact_version_content_sha`)
2021-09-06 11:40:25.793154 I [83306:4380] pact-broker -- (0.000703s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000020_add_pact_version_content_sha_to_all_pacts_view.rb')
2021-09-06 11:40:25.793173 I [83306:4380] pact-broker -- Finished applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up, took 0.002705 seconds
2021-09-06 11:40:25.793180 I [83306:4380] pact-broker -- Begin applying migration 000021_recreate_latest_pacts_view.rb, direction: up
2021-09-06 11:40:25.793261 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pact_consumer_version_orders: DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:40:25.794191 I [83306:4380] pact-broker -- (0.000802s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:40:25.794281 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pacts: DROP VIEW `latest_pacts`
2021-09-06 11:40:25.795116 I [83306:4380] pact-broker -- (0.000705s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.796342 I [83306:4380] pact-broker -- (0.001160s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000021_recreate_latest_pacts_view.rb')
2021-09-06 11:40:25.796360 I [83306:4380] pact-broker -- Finished applying migration 000021_recreate_latest_pacts_view.rb, direction: up, took 0.003177 seconds
2021-09-06 11:40:25.796367 I [83306:4380] pact-broker -- Begin applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up
2021-09-06 11:40:25.796453 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pact_consumer_version_orders: DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:40:25.797394 I [83306:4380] pact-broker -- (0.000810s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 11:40:25.797507 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pacts: DROP VIEW `latest_tagged_pacts`
2021-09-06 11:40:25.798436 I [83306:4380] pact-broker -- (0.000794s) CREATE VIEW `latest_tagged_pacts` AS select ap.*, lp.tag_name
      from all_pacts ap
      inner join latest_tagged_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
        and ap.provider_id = lp.provider_id
        and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.799234 I [83306:4380] pact-broker -- (0.000724s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000022_create_latest_tagged_pacts_view.rb')
2021-09-06 11:40:25.799252 I [83306:4380] pact-broker -- Finished applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up, took 0.002881 seconds
2021-09-06 11:40:25.799259 I [83306:4380] pact-broker -- Begin applying migration 000023_create_pact_versions_table.rb, direction: up
2021-09-06 11:40:25.800364 I [83306:4380] pact-broker -- (0.000730s) CREATE TABLE `pact_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer REFERENCES `pacticipants`, `provider_id` integer REFERENCES `pacticipants`, `sha` varchar(255) NOT NULL, `content` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 11:40:25.801071 I [83306:4380] pact-broker -- (0.000650s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:40:25.801726 I [83306:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000023_create_pact_versions_table.rb')
2021-09-06 11:40:25.801742 I [83306:4380] pact-broker -- Finished applying migration 000023_create_pact_versions_table.rb, direction: up, took 0.002480 seconds
2021-09-06 11:40:25.801749 I [83306:4380] pact-broker -- Begin applying migration 000024_populate_pact_versions.rb, direction: up
2021-09-06 11:40:25.802303 I [83306:4380] pact-broker -- (0.000527s) insert into pact_versions (sha, content, created_at) select sha, content, created_at from pact_version_contents
2021-09-06 11:40:25.802462 I [83306:4380] pact-broker -- (0.000132s) update pact_versions set consumer_id = (select consumer_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 11:40:25.802572 I [83306:4380] pact-broker -- (0.000085s) update pact_versions set provider_id = (select provider_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 11:40:25.802644 I [83306:4380] pact-broker -- (0.000048s) delete from pact_versions where consumer_id is null
2021-09-06 11:40:25.803228 I [83306:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000024_populate_pact_versions.rb')
2021-09-06 11:40:25.803244 I [83306:4380] pact-broker -- Finished applying migration 000024_populate_pact_versions.rb, direction: up, took 0.001492 seconds
2021-09-06 11:40:25.803250 I [83306:4380] pact-broker -- Begin applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up
2021-09-06 11:40:25.803312 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.803341 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.803377 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:25.803921 I [83306:4380] pact-broker -- (0.000126s) PRAGMA table_info('pact_versions')
2021-09-06 11:40:25.804009 I [83306:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:40:25.804072 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.804219 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.804778 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:40:25.804929 I [83306:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.805031 I [83306:4380] pact-broker -- (0.000033s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.805558 I [83306:4380] pact-broker -- (0.000495s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:40:25.806833 I [83306:4380] pact-broker -- (0.001226s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:40:25.806937 I [83306:4380] pact-broker -- (0.000080s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.806986 I [83306:4380] pact-broker -- (0.000030s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:40:25.807095 I [83306:4380] pact-broker -- (0.000090s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:40:25.807176 I [83306:4380] pact-broker -- (0.000061s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:40:25.807308 I [83306:4380] pact-broker -- (0.000084s) PRAGMA table_info('pact_versions')
2021-09-06 11:40:25.807388 I [83306:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:40:25.807446 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.808126 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.808194 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:40:25.808364 I [83306:4380] pact-broker -- (0.000041s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.808685 I [83306:4380] pact-broker -- (0.000254s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.809260 I [83306:4380] pact-broker -- (0.000035s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:40:25.810326 I [83306:4380] pact-broker -- (0.001020s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:40:25.810456 I [83306:4380] pact-broker -- (0.000106s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.810505 I [83306:4380] pact-broker -- (0.000029s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:40:25.810567 I [83306:4380] pact-broker -- (0.000043s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:40:25.810642 I [83306:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:40:25.810772 I [83306:4380] pact-broker -- (0.000081s) PRAGMA table_info('pact_versions')
2021-09-06 11:40:25.811363 I [83306:4380] pact-broker -- (0.000550s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:40:25.811430 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.811567 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.811632 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:40:25.812294 I [83306:4380] pact-broker -- (0.000043s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.812616 I [83306:4380] pact-broker -- (0.000252s) PRAGMA index_list('pact_versions')
2021-09-06 11:40:25.812682 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:40:25.813787 I [83306:4380] pact-broker -- (0.001057s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:40:25.813887 I [83306:4380] pact-broker -- (0.000075s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.813939 I [83306:4380] pact-broker -- (0.000032s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:40:25.814260 I [83306:4380] pact-broker -- (0.000300s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:40:25.814843 I [83306:4380] pact-broker -- (0.000125s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:40:25.815711 I [83306:4380] pact-broker -- (0.000839s) COMMIT
2021-09-06 11:40:25.815777 I [83306:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.815808 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.816713 I [83306:4380] pact-broker -- (0.000837s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000025_make_pv_pacticipants_mandatory.rb')
2021-09-06 11:40:25.816735 I [83306:4380] pact-broker -- Finished applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up, took 0.013480 seconds
2021-09-06 11:40:25.816742 I [83306:4380] pact-broker -- Begin applying migration 000026_create_pact_publications.rb, direction: up
2021-09-06 11:40:25.817668 I [83306:4380] pact-broker -- (0.000780s) CREATE TABLE `pact_publications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `revision_number` integer NOT NULL, `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `created_at` timestamp NOT NULL)
2021-09-06 11:40:25.818618 I [83306:4380] pact-broker -- (0.000884s) CREATE UNIQUE INDEX `cv_prov_revision_unq` ON `pact_publications` (`consumer_version_id`, `provider_id`, `revision_number`)
2021-09-06 11:40:25.819425 I [83306:4380] pact-broker -- (0.000724s) CREATE INDEX `cv_prov_id_ndx` ON `pact_publications` (`consumer_version_id`, `provider_id`, `id`)
2021-09-06 11:40:25.820740 I [83306:4380] pact-broker -- (0.000735s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000026_create_pact_publications.rb')
2021-09-06 11:40:25.820759 I [83306:4380] pact-broker -- Finished applying migration 000026_create_pact_publications.rb, direction: up, took 0.004012 seconds
2021-09-06 11:40:25.820765 I [83306:4380] pact-broker -- Begin applying migration 000027_populate_pact_publications.rb, direction: up
2021-09-06 11:40:25.821477 I [83306:4380] pact-broker -- (0.000682s) insert into pact_publications
        (consumer_version_id, provider_id, revision_number, pact_version_id, created_at)
      select ap.consumer_version_id, ap.provider_id, 1, pc.id, ap.updated_at
      from all_pacts ap inner join pact_versions pc
      on pc.sha = ap.pact_version_content_sha
2021-09-06 11:40:25.822306 I [83306:4380] pact-broker -- (0.000768s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000027_populate_pact_publications.rb')
2021-09-06 11:40:25.822324 I [83306:4380] pact-broker -- Finished applying migration 000027_populate_pact_publications.rb, direction: up, took 0.001555 seconds
2021-09-06 11:40:25.822331 I [83306:4380] pact-broker -- Begin applying migration 000028_create_all_pact_publications.rb, direction: up
2021-09-06 11:40:25.823468 I [83306:4380] pact-broker -- (0.000860s) CREATE VIEW `all_pact_publications` AS SELECT `pact_publications`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pact_publications`.`revision_number`, `pv`.`id` AS 'pact_version_id', `pv`.`sha` AS 'pact_version_sha', `pact_publications`.`created_at` FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pact_publications`.`consumer_version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`) INNER JOIN `pact_versions` AS 'pv' ON (`pv`.`id` = `pact_publications`.`pact_version_id`)
2021-09-06 11:40:25.824756 I [83306:4380] pact-broker -- (0.001238s) CREATE VIEW `latest_pact_publication_revision_numbers` AS select provider_id, consumer_id, consumer_version_order, max(revision_number) as latest_revision_number
      from all_pact_publications
      group by provider_id, consumer_id, consumer_version_order
2021-09-06 11:40:25.825386 I [83306:4380] pact-broker -- (0.000584s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
      from all_pact_publications app
      inner join latest_pact_publication_revision_numbers lr
      on app.consumer_id = lr.consumer_id
        and app.provider_id = lr.provider_id
        and app.consumer_version_order = lr.consumer_version_order
        and app.revision_number = lr.latest_revision_number
2021-09-06 11:40:25.825968 I [83306:4380] pact-broker -- (0.000537s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:40:25.826643 I [83306:4380] pact-broker -- (0.000631s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pact_publications
      group by provider_id, consumer_id
2021-09-06 11:40:25.827238 I [83306:4380] pact-broker -- (0.000549s) CREATE VIEW `latest_pact_publications` AS select lpcv.*
      from latest_pact_publications_by_consumer_versions lpcv
      inner join latest_pact_consumer_version_orders lp
      on lpcv.consumer_id = lp.consumer_id
           and lpcv.provider_id = lp.provider_id
           and lpcv.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.827859 I [83306:4380] pact-broker -- (0.000550s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000028_create_all_pact_publications.rb')
2021-09-06 11:40:25.827879 I [83306:4380] pact-broker -- Finished applying migration 000028_create_all_pact_publications.rb, direction: up, took 0.005543 seconds
2021-09-06 11:40:25.827886 I [83306:4380] pact-broker -- Begin applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up
2021-09-06 11:40:25.828468 I [83306:4380] pact-broker -- (0.000546s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:40:25.829115 I [83306:4380] pact-broker -- (0.000604s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from latest_pact_publications_by_consumer_versions ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 11:40:25.829836 I [83306:4380] pact-broker -- (0.000675s) CREATE VIEW `latest_tagged_pact_publications` AS select lp.*, o.tag_name
      from latest_pact_publications_by_consumer_versions lp
      inner join latest_tagged_pact_consumer_version_orders o
      on lp.consumer_id = o.consumer_id
        and lp.provider_id = o.provider_id
        and lp.consumer_version_order = latest_consumer_version_order
2021-09-06 11:40:25.830423 I [83306:4380] pact-broker -- (0.000521s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000029_create_latest_tagged_pact_publications.rb')
2021-09-06 11:40:25.832642 I [83306:4380] pact-broker -- Finished applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up, took 0.004751 seconds
2021-09-06 11:40:25.832650 I [83306:4380] pact-broker -- Begin applying migration 000030_drop_old_tables_and_views.rb, direction: up
2021-09-06 11:40:25.833240 I [83306:4380] pact-broker -- (0.000555s) DROP VIEW `latest_tagged_pacts`
2021-09-06 11:40:25.833808 I [83306:4380] pact-broker -- (0.000527s) DROP VIEW `latest_pacts`
2021-09-06 11:40:25.834374 I [83306:4380] pact-broker -- (0.000528s) DROP VIEW `all_pacts`
2021-09-06 11:40:25.835009 I [83306:4380] pact-broker -- (0.000593s) DROP TABLE `pacts`
2021-09-06 11:40:25.835648 I [83306:4380] pact-broker -- (0.000599s) DROP TABLE `pact_version_contents`
2021-09-06 11:40:25.836239 I [83306:4380] pact-broker -- (0.000526s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000030_drop_old_tables_and_views.rb')
2021-09-06 11:40:25.836254 I [83306:4380] pact-broker -- Finished applying migration 000030_drop_old_tables_and_views.rb, direction: up, took 0.003602 seconds
2021-09-06 11:40:25.836261 I [83306:4380] pact-broker -- Begin applying migration 000031_create_verifications.rb, direction: up
2021-09-06 11:40:25.837057 I [83306:4380] pact-broker -- (0.000629s) CREATE TABLE `verifications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer, `success` Boolean NOT NULL, `provider_version` varchar(255) NOT NULL, `build_url` varchar(255), `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `execution_date` timestamp NOT NULL, `created_at` timestamp NOT NULL)
2021-09-06 11:40:25.837710 I [83306:4380] pact-broker -- (0.000594s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 11:40:25.838354 I [83306:4380] pact-broker -- (0.000586s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000031_create_verifications.rb')
2021-09-06 11:40:25.838373 I [83306:4380] pact-broker -- Finished applying migration 000031_create_verifications.rb, direction: up, took 0.002108 seconds
2021-09-06 11:40:25.838380 I [83306:4380] pact-broker -- Begin applying migration 000032_create_latest_verifications.rb, direction: up
2021-09-06 11:40:25.839098 I [83306:4380] pact-broker -- (0.000678s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 11:40:25.839196 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications: DROP VIEW `latest_verifications`
2021-09-06 11:40:25.840001 I [83306:4380] pact-broker -- (0.000665s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, v.provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at
        FROM verifications v
        INNER JOIN latest_verification_numbers lv ON v.pact_version_id = lv.pact_version_id AND v.number = lv.latest_number
2021-09-06 11:40:25.840602 I [83306:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000032_create_latest_verifications.rb')
2021-09-06 11:40:25.840618 I [83306:4380] pact-broker -- Finished applying migration 000032_create_latest_verifications.rb, direction: up, took 0.002235 seconds
2021-09-06 11:40:25.840625 I [83306:4380] pact-broker -- Begin applying migration 000033_create_config_table.rb, direction: up
2021-09-06 11:40:25.841395 I [83306:4380] pact-broker -- (0.000628s) CREATE TABLE `config` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) NOT NULL, `type` varchar(255) NOT NULL, `value` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:40:25.842318 I [83306:4380] pact-broker -- (0.000875s) CREATE UNIQUE INDEX `unq_config_name` ON `config` (`name`)
2021-09-06 11:40:25.843063 I [83306:4380] pact-broker -- (0.000688s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000033_create_config_table.rb')
2021-09-06 11:40:25.843079 I [83306:4380] pact-broker -- Finished applying migration 000033_create_config_table.rb, direction: up, took 0.002451 seconds
2021-09-06 11:40:25.843085 I [83306:4380] pact-broker -- Begin applying migration 000034_create_index_on_consumer_version_order.rb, direction: up
2021-09-06 11:40:25.843148 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.843176 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.843213 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.843489 I [83306:4380] pact-broker -- (0.000238s) CREATE INDEX `ndx_ver_num` ON `versions` (`number`)
2021-09-06 11:40:25.843632 I [83306:4380] pact-broker -- (0.000105s) CREATE INDEX `ndx_ver_ord` ON `versions` (`order`)
2021-09-06 11:40:25.843729 I [83306:4380] pact-broker -- (0.000062s) CREATE UNIQUE INDEX `uq_ver_ppt_ord` ON `versions` (`pacticipant_id`, `order`)
2021-09-06 11:40:25.844223 I [83306:4380] pact-broker -- (0.000471s) COMMIT
2021-09-06 11:40:25.844302 I [83306:4380] pact-broker -- (0.000039s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.844332 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.844897 I [83306:4380] pact-broker -- (0.000515s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000034_create_index_on_consumer_version_order.rb')
2021-09-06 11:40:25.844914 I [83306:4380] pact-broker -- Finished applying migration 000034_create_index_on_consumer_version_order.rb, direction: up, took 0.001825 seconds
2021-09-06 11:40:25.844921 I [83306:4380] pact-broker -- Begin applying migration 000035_create_index_on_names.rb, direction: up
2021-09-06 11:40:25.844977 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.845005 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.845038 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.845312 I [83306:4380] pact-broker -- (0.000239s) CREATE INDEX `ndx_ppt_name` ON `pacticipants` (`name`)
2021-09-06 11:40:25.845776 I [83306:4380] pact-broker -- (0.000440s) COMMIT
2021-09-06 11:40:25.845827 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.845855 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.845899 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.845924 I [83306:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.845953 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:25.846218 I [83306:4380] pact-broker -- (0.000231s) CREATE INDEX `ndx_tag_name` ON `tags` (`name`)
2021-09-06 11:40:25.846656 I [83306:4380] pact-broker -- (0.000415s) COMMIT
2021-09-06 11:40:25.846709 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.846738 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.847341 I [83306:4380] pact-broker -- (0.000553s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000035_create_index_on_names.rb')
2021-09-06 11:40:25.847357 I [83306:4380] pact-broker -- Finished applying migration 000035_create_index_on_names.rb, direction: up, took 0.002433 seconds
2021-09-06 11:40:25.847364 I [83306:4380] pact-broker -- Begin applying migration 000036_create_webhook_execution.rb, direction: up
2021-09-06 11:40:25.848228 I [83306:4380] pact-broker -- (0.000708s) CREATE TABLE `webhook_executions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks`, `pact_publication_id` integer REFERENCES `pact_publications`, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `success` Boolean NOT NULL, `logs` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 11:40:25.848819 I [83306:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000036_create_webhook_execution.rb')
2021-09-06 11:40:25.848834 I [83306:4380] pact-broker -- Finished applying migration 000036_create_webhook_execution.rb, direction: up, took 0.001468 seconds
2021-09-06 11:40:25.848841 I [83306:4380] pact-broker -- Begin applying migration 000037_create_labels_table.rb, direction: up
2021-09-06 11:40:25.849638 I [83306:4380] pact-broker -- (0.000673s) CREATE TABLE `labels` (`name` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, CONSTRAINT `labels_pk` PRIMARY KEY (`pacticipant_id`, `name`))
2021-09-06 11:40:25.850241 I [83306:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000037_create_labels_table.rb')
2021-09-06 11:40:25.850256 I [83306:4380] pact-broker -- Finished applying migration 000037_create_labels_table.rb, direction: up, took 0.001413 seconds
2021-09-06 11:40:25.850263 I [83306:4380] pact-broker -- Begin applying migration 000038_create_triggered_webhooks_table.rb, direction: up
2021-09-06 11:40:25.851167 I [83306:4380] pact-broker -- (0.000714s) CREATE TABLE `triggered_webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `trigger_uuid` varchar(255) NOT NULL, `trigger_type` varchar(255) NOT NULL, `pact_publication_id` integer NOT NULL REFERENCES `pact_publications`, `webhook_id` integer REFERENCES `webhooks`, `webhook_uuid` varchar(255) NOT NULL, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `status` varchar(255) NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:40:25.851869 I [83306:4380] pact-broker -- (0.000646s) CREATE UNIQUE INDEX `uq_triggered_webhook_wi` ON `triggered_webhooks` (`webhook_id`, `trigger_uuid`)
2021-09-06 11:40:25.852615 I [83306:4380] pact-broker -- (0.000693s) CREATE UNIQUE INDEX `uq_triggered_webhook_ppi_wi` ON `triggered_webhooks` (`pact_publication_id`, `webhook_id`, `trigger_uuid`)
2021-09-06 11:40:25.853196 I [83306:4380] pact-broker -- (0.000526s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000038_create_triggered_webhooks_table.rb')
2021-09-06 11:40:25.853212 I [83306:4380] pact-broker -- Finished applying migration 000038_create_triggered_webhooks_table.rb, direction: up, took 0.002946 seconds
2021-09-06 11:40:25.853219 I [83306:4380] pact-broker -- Begin applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up
2021-09-06 11:40:25.853278 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.853307 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.853339 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.854019 I [83306:4380] pact-broker -- (0.000630s) ALTER TABLE `webhook_executions` ADD COLUMN `triggered_webhook_id` integer REFERENCES `triggered_webhooks`
2021-09-06 11:40:25.854210 I [83306:4380] pact-broker -- (0.000131s) PRAGMA table_info('webhook_executions')
2021-09-06 11:40:25.854312 I [83306:4380] pact-broker -- (0.000058s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:40:25.854368 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.854589 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.854669 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:40:25.854871 I [83306:4380] pact-broker -- (0.000056s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.855291 I [83306:4380] pact-broker -- (0.000346s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.856791 I [83306:4380] pact-broker -- (0.001474s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:40:25.856983 I [83306:4380] pact-broker -- (0.000168s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.857064 I [83306:4380] pact-broker -- (0.000058s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:40:25.857154 I [83306:4380] pact-broker -- (0.000071s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:40:25.857309 I [83306:4380] pact-broker -- (0.000107s) PRAGMA table_info('webhook_executions')
2021-09-06 11:40:25.857408 I [83306:4380] pact-broker -- (0.000058s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:40:25.857461 I [83306:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.857668 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.857734 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:40:25.857924 I [83306:4380] pact-broker -- (0.000055s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.858382 I [83306:4380] pact-broker -- (0.000357s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.859908 I [83306:4380] pact-broker -- (0.001500s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:40:25.860015 I [83306:4380] pact-broker -- (0.000085s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.860065 I [83306:4380] pact-broker -- (0.000031s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:40:25.860124 I [83306:4380] pact-broker -- (0.000041s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:40:25.860271 I [83306:4380] pact-broker -- (0.000101s) PRAGMA table_info('webhook_executions')
2021-09-06 11:40:25.860364 I [83306:4380] pact-broker -- (0.000052s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:40:25.860416 I [83306:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.860624 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.860689 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:40:25.860890 I [83306:4380] pact-broker -- (0.000054s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.861321 I [83306:4380] pact-broker -- (0.000359s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.862851 I [83306:4380] pact-broker -- (0.001505s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:40:25.862959 I [83306:4380] pact-broker -- (0.000086s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.863011 I [83306:4380] pact-broker -- (0.000033s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:40:25.863069 I [83306:4380] pact-broker -- (0.000041s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:40:25.863237 I [83306:4380] pact-broker -- (0.000117s) PRAGMA table_info('webhook_executions')
2021-09-06 11:40:25.863334 I [83306:4380] pact-broker -- (0.000055s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:40:25.863388 I [83306:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.863619 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.863689 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:40:25.863882 I [83306:4380] pact-broker -- (0.000056s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.864339 I [83306:4380] pact-broker -- (0.000358s) PRAGMA index_list('webhook_executions')
2021-09-06 11:40:25.865893 I [83306:4380] pact-broker -- (0.001525s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:40:25.866001 I [83306:4380] pact-broker -- (0.000085s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.866051 I [83306:4380] pact-broker -- (0.000030s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:40:25.866110 I [83306:4380] pact-broker -- (0.000041s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:40:25.866729 I [83306:4380] pact-broker -- (0.000594s) COMMIT
2021-09-06 11:40:25.866793 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.866824 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.867581 I [83306:4380] pact-broker -- (0.000698s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000039_add_triggered_webhooks_fk_to_execution.rb')
2021-09-06 11:40:25.867601 I [83306:4380] pact-broker -- Finished applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up, took 0.014378 seconds
2021-09-06 11:40:25.867608 I [83306:4380] pact-broker -- Begin applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up
2021-09-06 11:40:25.867696 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_ids: DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 11:40:25.868570 I [83306:4380] pact-broker -- (0.000737s) CREATE VIEW `latest_triggered_webhook_ids` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
      from triggered_webhooks
      group by webhook_uuid, consumer_id, provider_id
2021-09-06 11:40:25.869372 I [83306:4380] pact-broker -- (0.000752s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
      from triggered_webhooks tw
      inner join latest_triggered_webhook_ids ltwi
      on tw.consumer_id = ltwi.consumer_id
      and tw.provider_id = ltwi.provider_id
      and tw.webhook_uuid = ltwi.webhook_uuid
      and tw.created_at = ltwi.latest_triggered_webhook_created_at
2021-09-06 11:40:25.870189 I [83306:4380] pact-broker -- (0.000732s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000040_create_latest_triggered_webhooks_view.rb')
2021-09-06 11:40:25.870207 I [83306:4380] pact-broker -- Finished applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up, took 0.002595 seconds
2021-09-06 11:40:25.870214 I [83306:4380] pact-broker -- Begin applying migration 000041_migrate_execution_data.rb, direction: up
2021-09-06 11:40:25.870359 I [83306:4380] pact-broker -- (0.000087s) SELECT * FROM `webhook_executions`
2021-09-06 11:40:25.871139 I [83306:4380] pact-broker -- (0.000726s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000041_migrate_execution_data.rb')
2021-09-06 11:40:25.871156 I [83306:4380] pact-broker -- Finished applying migration 000041_migrate_execution_data.rb, direction: up, took 0.000940 seconds
2021-09-06 11:40:25.871163 I [83306:4380] pact-broker -- Begin applying migration 000042_delete_orphan_webhook_data.rb, direction: up
2021-09-06 11:40:25.871344 I [83306:4380] pact-broker -- (0.000099s) SELECT * FROM `triggered_webhooks` WHERE (`webhook_id` IS NULL)
2021-09-06 11:40:25.871475 I [83306:4380] pact-broker -- (0.000056s) DELETE FROM `webhook_executions` WHERE ((`webhook_id` IS NULL) AND (`triggered_webhook_id` IS NULL))
2021-09-06 11:40:25.872349 I [83306:4380] pact-broker -- (0.000822s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000042_delete_orphan_webhook_data.rb')
2021-09-06 11:40:25.872366 I [83306:4380] pact-broker -- Finished applying migration 000042_delete_orphan_webhook_data.rb, direction: up, took 0.001199 seconds
2021-09-06 11:40:25.872373 I [83306:4380] pact-broker -- Begin applying migration 000043_add_provider_version_to_verification.rb, direction: up
2021-09-06 11:40:25.872437 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.872470 I [83306:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.872504 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.873256 I [83306:4380] pact-broker -- (0.000673s) ALTER TABLE `verifications` ADD COLUMN `provider_version_id` integer CONSTRAINT `fk_verifications_versions` REFERENCES `versions`
2021-09-06 11:40:25.873749 I [83306:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 11:40:25.873807 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.873838 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.874470 I [83306:4380] pact-broker -- (0.000582s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000043_add_provider_version_to_verification.rb')
2021-09-06 11:40:25.874486 I [83306:4380] pact-broker -- Finished applying migration 000043_add_provider_version_to_verification.rb, direction: up, took 0.002109 seconds
2021-09-06 11:40:25.874493 I [83306:4380] pact-broker -- Begin applying migration 000044_populate_verifications_provider_version_id.rb, direction: up
2021-09-06 11:40:25.874702 I [83306:4380] pact-broker -- (0.000086s) SELECT `verifications`.`id`, `provider_version`, `provider_id`, `verifications`.`created_at` FROM `verifications` INNER JOIN `pact_versions` ON (`pact_versions`.`id` = `verifications`.`pact_version_id`)
2021-09-06 11:40:25.875309 I [83306:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000044_populate_verifications_provider_version_id.rb')
2021-09-06 11:40:25.875325 I [83306:4380] pact-broker -- Finished applying migration 000044_populate_verifications_provider_version_id.rb, direction: up, took 0.000829 seconds
2021-09-06 11:40:25.875331 I [83306:4380] pact-broker -- Begin applying migration 000045_set_verification_provider_number_nullable.rb, direction: up
2021-09-06 11:40:25.875387 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.875415 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.875448 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.875645 I [83306:4380] pact-broker -- (0.000150s) PRAGMA table_info('verifications')
2021-09-06 11:40:25.875734 I [83306:4380] pact-broker -- (0.000045s) PRAGMA foreign_key_list('verifications')
2021-09-06 11:40:25.875799 I [83306:4380] pact-broker -- (0.000031s) PRAGMA index_list('verifications')
2021-09-06 11:40:25.875997 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.876069 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: verifications_backup0: SELECT NULL AS 'nil' FROM `verifications_backup0` LIMIT 1
2021-09-06 11:40:25.876215 I [83306:4380] pact-broker -- (0.000012s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.876341 I [83306:4380] pact-broker -- (0.000056s) PRAGMA index_list('verifications')
2021-09-06 11:40:25.876401 I [83306:4380] pact-broker -- (0.000030s) PRAGMA index_info('verifications_pact_version_id_number_index')
2021-09-06 11:40:25.878336 I [83306:4380] pact-broker -- (0.001890s) ALTER TABLE `verifications` RENAME TO `verifications_backup0`
2021-09-06 11:40:25.878492 I [83306:4380] pact-broker -- (0.000132s) CREATE TABLE `verifications`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `provider_version` varchar(255) DEFAULT (NULL) NULL, `build_url` varchar(255) DEFAULT (NULL) NULL, `pact_version_id` integer DEFAULT (NULL) NOT NULL, `execution_date` timestamp DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `provider_version_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`provider_version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_id`) REFERENCES `pact_versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.878569 I [83306:4380] pact-broker -- (0.000056s) INSERT INTO `verifications`(`id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id`) SELECT `id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id` FROM `verifications_backup0`
2021-09-06 11:40:25.878679 I [83306:4380] pact-broker -- (0.000090s) DROP TABLE `verifications_backup0`
2021-09-06 11:40:25.878760 I [83306:4380] pact-broker -- (0.000062s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 11:40:25.879295 I [83306:4380] pact-broker -- (0.000510s) COMMIT
2021-09-06 11:40:25.879354 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.879383 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.880078 I [83306:4380] pact-broker -- (0.000644s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000045_set_verification_provider_number_nullable.rb')
2021-09-06 11:40:25.880094 I [83306:4380] pact-broker -- Finished applying migration 000045_set_verification_provider_number_nullable.rb, direction: up, took 0.004759 seconds
2021-09-06 11:40:25.880101 I [83306:4380] pact-broker -- Begin applying migration 000046_recreate_latest_verifications.rb, direction: up
2021-09-06 11:40:25.880811 I [83306:4380] pact-broker -- (0.000675s) DROP VIEW `latest_verification_numbers`
2021-09-06 11:40:25.881468 I [83306:4380] pact-broker -- (0.000612s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 11:40:25.882059 I [83306:4380] pact-broker -- (0.000548s) DROP VIEW `latest_verifications`
2021-09-06 11:40:25.882729 I [83306:4380] pact-broker -- (0.000627s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, s.number as provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at, v.provider_version_id, s.number as provider_version_number
        FROM verifications v
        INNER JOIN latest_verification_numbers lv
          ON v.pact_version_id = lv.pact_version_id
          AND v.number = lv.latest_number
        INNER JOIN versions s on v.provider_version_id = s.id
2021-09-06 11:40:25.883286 I [83306:4380] pact-broker -- (0.000495s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000046_recreate_latest_verifications.rb')
2021-09-06 11:40:25.883302 I [83306:4380] pact-broker -- Finished applying migration 000046_recreate_latest_verifications.rb, direction: up, took 0.003199 seconds
2021-09-06 11:40:25.883309 I [83306:4380] pact-broker -- Begin applying migration 000047_create_all_verifications.rb, direction: up
2021-09-06 11:40:25.883467 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_verifications: DROP VIEW `all_verifications`
2021-09-06 11:40:25.884338 I [83306:4380] pact-broker -- (0.000656s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:40:25.885292 I [83306:4380] pact-broker -- (0.000883s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000047_create_all_verifications.rb')
2021-09-06 11:40:25.885309 I [83306:4380] pact-broker -- Finished applying migration 000047_create_all_verifications.rb, direction: up, took 0.001997 seconds
2021-09-06 11:40:25.885316 I [83306:4380] pact-broker -- Begin applying migration 000048_create_matrix.rb, direction: up
2021-09-06 11:40:25.886269 I [83306:4380] pact-broker -- (0.000671s) CREATE VIEW `matrix` AS SELECT `all_pact_publications`.`consumer_id`, `all_pact_publications`.`consumer_name`, `all_pact_publications`.`consumer_version_id`, `all_pact_publications`.`consumer_version_number`, `all_pact_publications`.`consumer_version_order`, `all_pact_publications`.`id` AS 'pact_publication_id', `all_pact_publications`.`pact_version_id`, `all_pact_publications`.`pact_version_sha`, `all_pact_publications`.`revision_number` AS 'pact_revision_number', `all_pact_publications`.`created_at` AS 'pact_created_at', `all_pact_publications`.`provider_id`, `all_pact_publications`.`provider_name`, `versions`.`id` AS 'provider_version_id', `versions`.`number` AS 'provider_version_number', `versions`.`order` AS 'provider_version_order', `verifications`.`id` AS 'verification_id', `verifications`.`success`, `verifications`.`number` AS 'verification_number', `verifications`.`execution_date` AS 'verification_executed_at', `verifications`.`build_url` AS 'verification_build_url' FROM `all_pact_publications` LEFT OUTER JOIN `verifications` ON (`verifications`.`pact_version_id` = `all_pact_publications`.`pact_version_id`) LEFT OUTER JOIN `versions` ON (`versions`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:40:25.886858 I [83306:4380] pact-broker -- (0.000528s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000048_create_matrix.rb')
2021-09-06 11:40:25.886874 I [83306:4380] pact-broker -- Finished applying migration 000048_create_matrix.rb, direction: up, took 0.001555 seconds
2021-09-06 11:40:25.886880 I [83306:4380] pact-broker -- Begin applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up
2021-09-06 11:40:25.887613 I [83306:4380] pact-broker -- (0.000696s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select consumer_version_id, provider_version_id, max(verification_id) as latest_verification_id
      from matrix
      inner join latest_pact_publication_revision_numbers lr
        on matrix.consumer_id = lr.consumer_id
        and matrix.provider_id = lr.provider_id
        and matrix.consumer_version_order = lr.consumer_version_order
        and matrix.pact_revision_number = lr.latest_revision_number
        group by consumer_version_id, provider_version_id
2021-09-06 11:40:25.888212 I [83306:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000049_create_latest_verifications_for_cv_and_pv.rb')
2021-09-06 11:40:25.888228 I [83306:4380] pact-broker -- Finished applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up, took 0.001344 seconds
2021-09-06 11:40:25.888234 I [83306:4380] pact-broker -- Begin applying migration 000050_create_latest_matrix.rb, direction: up
2021-09-06 11:40:25.888942 I [83306:4380] pact-broker -- (0.000669s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:40:25.889690 I [83306:4380] pact-broker -- (0.000681s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000050_create_latest_matrix.rb')
2021-09-06 11:40:25.889708 I [83306:4380] pact-broker -- Finished applying migration 000050_create_latest_matrix.rb, direction: up, took 0.001469 seconds
2021-09-06 11:40:25.889715 I [83306:4380] pact-broker -- Begin applying migration 20171112_add_test_results.rb, direction: up
2021-09-06 11:40:25.889783 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.889813 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.889849 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.890687 I [83306:4380] pact-broker -- (0.000785s) ALTER TABLE `verifications` ADD COLUMN `test_results` mediumtext
2021-09-06 11:40:25.891085 I [83306:4380] pact-broker -- (0.000371s) COMMIT
2021-09-06 11:40:25.891142 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.891171 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.891745 I [83306:4380] pact-broker -- (0.000525s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171112_add_test_results.rb')
2021-09-06 11:40:25.891761 I [83306:4380] pact-broker -- Finished applying migration 20171112_add_test_results.rb, direction: up, took 0.002043 seconds
2021-09-06 11:40:25.891768 I [83306:4380] pact-broker -- Begin applying migration 20171117_create_webhook_events.rb, direction: up
2021-09-06 11:40:25.892655 I [83306:4380] pact-broker -- (0.000746s) CREATE TABLE `webhook_events` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks` ON DELETE CASCADE, `name` varchar(255), `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:40:25.893398 I [83306:4380] pact-broker -- (0.000690s) CREATE UNIQUE INDEX `uq_webhook_id_name` ON `webhook_events` (`id`, `name`)
2021-09-06 11:40:25.893997 I [83306:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171117_create_webhook_events.rb')
2021-09-06 11:40:25.894018 I [83306:4380] pact-broker -- Finished applying migration 20171117_create_webhook_events.rb, direction: up, took 0.002247 seconds
2021-09-06 11:40:25.894025 I [83306:4380] pact-broker -- Begin applying migration 20171118_create_webhook_events.rb, direction: up
2021-09-06 11:40:25.894184 I [83306:4380] pact-broker -- (0.000100s) SELECT * FROM `webhooks`
2021-09-06 11:40:25.894783 I [83306:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171118_create_webhook_events.rb')
2021-09-06 11:40:25.894822 I [83306:4380] pact-broker -- Finished applying migration 20171118_create_webhook_events.rb, direction: up, took 0.000772 seconds
2021-09-06 11:40:25.894829 I [83306:4380] pact-broker -- Begin applying migration 20180108_create_certificates_table.rb, direction: up
2021-09-06 11:40:25.895634 I [83306:4380] pact-broker -- (0.000682s) CREATE TABLE `certificates` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_certificate_uuid` UNIQUE, `description` varchar(255) NULL, `content` mediumtext NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:40:25.896249 I [83306:4380] pact-broker -- (0.000559s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180108_create_certificates_table.rb')
2021-09-06 11:40:25.896268 I [83306:4380] pact-broker -- Finished applying migration 20180108_create_certificates_table.rb, direction: up, took 0.001436 seconds
2021-09-06 11:40:25.896275 I [83306:4380] pact-broker -- Begin applying migration 20180109_migrate_trigger_type.rb, direction: up
2021-09-06 11:40:25.896429 I [83306:4380] pact-broker -- (0.000066s) UPDATE `triggered_webhooks` SET `trigger_type` = 'resource_creation' WHERE (`trigger_type` = 'pact_publication')
2021-09-06 11:40:25.897006 I [83306:4380] pact-broker -- (0.000527s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180109_migrate_trigger_type.rb')
2021-09-06 11:40:25.897025 I [83306:4380] pact-broker -- Finished applying migration 20180109_migrate_trigger_type.rb, direction: up, took 0.000748 seconds
2021-09-06 11:40:25.897032 I [83306:4380] pact-broker -- Begin applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 11:40:25.897116 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_creation_dates: DROP VIEW `latest_triggered_webhook_creation_dates`
2021-09-06 11:40:25.897843 I [83306:4380] pact-broker -- (0.000573s) CREATE VIEW `latest_triggered_webhook_creation_dates` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
  from triggered_webhooks
  group by webhook_uuid, consumer_id, provider_id
2021-09-06 11:40:25.898604 I [83306:4380] pact-broker -- (0.000714s) DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 11:40:25.899410 I [83306:4380] pact-broker -- (0.000758s) CREATE VIEW `latest_triggered_webhook_ids` AS select tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at, max(tw.id) as latest_triggered_webhook_id
  from latest_triggered_webhook_creation_dates ltwcd
  inner join triggered_webhooks tw
  on tw.consumer_id = ltwcd.consumer_id
  and tw.provider_id = ltwcd.provider_id
  and tw.webhook_uuid = ltwcd.webhook_uuid
  and tw.created_at = ltwcd.latest_triggered_webhook_created_at
  group by tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at
2021-09-06 11:40:25.900145 I [83306:4380] pact-broker -- (0.000688s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 11:40:25.900842 I [83306:4380] pact-broker -- (0.000651s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
  from triggered_webhooks tw
  inner join latest_triggered_webhook_ids ltwi
  on tw.consumer_id = ltwi.consumer_id
  and tw.provider_id = ltwi.provider_id
  and tw.webhook_uuid = ltwi.webhook_uuid
  and tw.id = ltwi.latest_triggered_webhook_id
2021-09-06 11:40:25.901385 I [83306:4380] pact-broker -- (0.000478s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180119_update_latest_triggered_webhooks.rb')
2021-09-06 11:40:25.901401 I [83306:4380] pact-broker -- Finished applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up, took 0.004366 seconds
2021-09-06 11:40:25.901407 I [83306:4380] pact-broker -- Begin applying migration 20180122_create_head_pact_publications.rb, direction: up
2021-09-06 11:40:25.902025 I [83306:4380] pact-broker -- (0.000581s) CREATE VIEW `head_pact_publications` AS select lp.*, null as tag_name, 1 as latest
      from latest_pact_publications lp

      UNION

      select ltp.*, null as latest
      from latest_tagged_pact_publications ltp
      
2021-09-06 11:40:25.902605 I [83306:4380] pact-broker -- (0.000521s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180122_create_head_pact_publications.rb')
2021-09-06 11:40:25.902621 I [83306:4380] pact-broker -- Finished applying migration 20180122_create_head_pact_publications.rb, direction: up, took 0.001210 seconds
2021-09-06 11:40:25.902627 I [83306:4380] pact-broker -- Begin applying migration 20180123_create_tags_with_latest_flag.rb, direction: up
2021-09-06 11:40:25.903356 I [83306:4380] pact-broker -- (0.000678s) CREATE VIEW `latest_tagged_version_orders` AS 
        select v.pacticipant_id, t.name as tag_name, max(v.`order`) as latest_version_order, 1 as latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        group by v.pacticipant_id, t.name
      
2021-09-06 11:40:25.904000 I [83306:4380] pact-broker -- (0.000592s) CREATE VIEW `tags_with_latest_flag` AS 
        select t.*, ltvo.latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        left outer join latest_tagged_version_orders ltvo
        on t.name = ltvo.tag_name
        and v.pacticipant_id = ltvo.pacticipant_id
        and v.`order` = ltvo.latest_version_order
      
2021-09-06 11:40:25.904587 I [83306:4380] pact-broker -- (0.000528s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180123_create_tags_with_latest_flag.rb')
2021-09-06 11:40:25.904602 I [83306:4380] pact-broker -- Finished applying migration 20180123_create_tags_with_latest_flag.rb, direction: up, took 0.001971 seconds
2021-09-06 11:40:25.904630 I [83306:4380] pact-broker -- Begin applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 11:40:25.905337 I [83306:4380] pact-broker -- (0.000667s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:40:25.906128 I [83306:4380] pact-broker -- (0.000739s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider` AS select matrix.consumer_version_id, matrix.provider_id, max(verification_id) as latest_verification_id
      from latest_matrix_for_consumer_version_and_provider_version matrix
      where matrix.verification_id is not null
      group by matrix.consumer_version_id, matrix.provider_id
      
2021-09-06 11:40:25.906711 I [83306:4380] pact-broker -- (0.000539s) DROP VIEW `latest_matrix`
2021-09-06 11:40:25.907330 I [83306:4380] pact-broker -- (0.000575s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_id = lv.provider_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      where verification_id is null
      
2021-09-06 11:40:25.907921 I [83306:4380] pact-broker -- (0.000522s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180129_create_latest_matrix_for_cv_and_pv.rb')
2021-09-06 11:40:25.907937 I [83306:4380] pact-broker -- Finished applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.003325 seconds
2021-09-06 11:40:25.907944 I [83306:4380] pact-broker -- Begin applying migration 20180130_create_materialized_matrix.rb, direction: up
2021-09-06 11:40:25.908842 I [83306:4380] pact-broker -- (0.000639s) CREATE TABLE `materialized_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 11:40:25.909507 I [83306:4380] pact-broker -- (0.000614s) CREATE INDEX `ndx_mm_consumer_id` ON `materialized_matrix` (`consumer_id`)
2021-09-06 11:40:25.910176 I [83306:4380] pact-broker -- (0.000624s) CREATE INDEX `ndx_mm_provider_id` ON `materialized_matrix` (`provider_id`)
2021-09-06 11:40:25.910838 I [83306:4380] pact-broker -- (0.000617s) CREATE INDEX `ndx_mm_cv_ord` ON `materialized_matrix` (`consumer_version_order`)
2021-09-06 11:40:25.911174 I [83306:4380] pact-broker -- (0.000233s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 11:40:25.911760 I [83306:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180130_create_materialized_matrix.rb')
2021-09-06 11:40:25.911777 I [83306:4380] pact-broker -- Finished applying migration 20180130_create_materialized_matrix.rb, direction: up, took 0.003830 seconds
2021-09-06 11:40:25.911783 I [83306:4380] pact-broker -- Begin applying migration 20180131_create_materialized_latest_matrix.rb, direction: up
2021-09-06 11:40:25.912765 I [83306:4380] pact-broker -- (0.000744s) CREATE TABLE `materialized_latest_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 11:40:25.913477 I [83306:4380] pact-broker -- (0.000642s) CREATE INDEX `ndx_mlm_consumer_id` ON `materialized_latest_matrix` (`consumer_id`)
2021-09-06 11:40:25.914206 I [83306:4380] pact-broker -- (0.000683s) CREATE INDEX `ndx_mlm_provider_id` ON `materialized_latest_matrix` (`provider_id`)
2021-09-06 11:40:25.914849 I [83306:4380] pact-broker -- (0.000597s) CREATE INDEX `ndx_mlm_cv_ord` ON `materialized_latest_matrix` (`consumer_version_order`)
2021-09-06 11:40:25.918785 I [83306:4380] pact-broker -- (0.003847s) INSERT INTO `materialized_latest_matrix` SELECT * FROM `latest_matrix`
2021-09-06 11:40:25.919585 I [83306:4380] pact-broker -- (0.000745s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180131_create_materialized_latest_matrix.rb')
2021-09-06 11:40:25.919602 I [83306:4380] pact-broker -- Finished applying migration 20180131_create_materialized_latest_matrix.rb, direction: up, took 0.007814 seconds
2021-09-06 11:40:25.919609 I [83306:4380] pact-broker -- Begin applying migration 20180201_create_head_matrix.rb, direction: up
2021-09-06 11:40:25.920479 I [83306:4380] pact-broker -- (0.000832s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:40:25.921150 I [83306:4380] pact-broker -- (0.000607s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180201_create_head_matrix.rb')
2021-09-06 11:40:25.921166 I [83306:4380] pact-broker -- Finished applying migration 20180201_create_head_matrix.rb, direction: up, took 0.001555 seconds
2021-09-06 11:40:25.921173 I [83306:4380] pact-broker -- Begin applying migration 20180202_create_materialized_head_matrix.rb, direction: up
2021-09-06 11:40:25.922178 I [83306:4380] pact-broker -- (0.000762s) CREATE TABLE `materialized_head_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255), `consumer_tag_name` varchar(255))
2021-09-06 11:40:25.922811 I [83306:4380] pact-broker -- (0.000582s) CREATE INDEX `ndx_mhm_consumer_id` ON `materialized_head_matrix` (`consumer_id`)
2021-09-06 11:40:25.923527 I [83306:4380] pact-broker -- (0.000670s) CREATE INDEX `ndx_mhm_provider_id` ON `materialized_head_matrix` (`provider_id`)
2021-09-06 11:40:25.924191 I [83306:4380] pact-broker -- (0.000619s) CREATE INDEX `ndx_mhm_cv_ord` ON `materialized_head_matrix` (`consumer_version_order`)
2021-09-06 11:40:25.924785 I [83306:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180202_create_materialized_head_matrix.rb')
2021-09-06 11:40:25.924802 I [83306:4380] pact-broker -- Finished applying migration 20180202_create_materialized_head_matrix.rb, direction: up, took 0.003626 seconds
2021-09-06 11:40:25.924808 I [83306:4380] pact-broker -- Begin applying migration 20180203_fix_head_matrix.rb, direction: up
2021-09-06 11:40:25.925407 I [83306:4380] pact-broker -- (0.000566s) DROP VIEW `head_matrix`
2021-09-06 11:40:25.926144 I [83306:4380] pact-broker -- (0.000692s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      where verification_id is null
      
2021-09-06 11:40:25.926780 I [83306:4380] pact-broker -- (0.000565s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180203_fix_head_matrix.rb')
2021-09-06 11:40:25.926797 I [83306:4380] pact-broker -- Finished applying migration 20180203_fix_head_matrix.rb, direction: up, took 0.001985 seconds
2021-09-06 11:40:25.926804 I [83306:4380] pact-broker -- Begin applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 11:40:25.927398 I [83306:4380] pact-broker -- (0.000559s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:40:25.928119 I [83306:4380] pact-broker -- (0.000675s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS 
      SELECT matrix.* FROM matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:40:25.928735 I [83306:4380] pact-broker -- (0.000554s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180204_fix_latest_matrix_for_cv_and_pv.rb')
2021-09-06 11:40:25.928751 I [83306:4380] pact-broker -- Finished applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.001945 seconds
2021-09-06 11:40:25.928758 I [83306:4380] pact-broker -- Begin applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up
2021-09-06 11:40:25.929393 I [83306:4380] pact-broker -- (0.000597s) DROP TABLE `materialized_latest_matrix`
2021-09-06 11:40:25.929991 I [83306:4380] pact-broker -- (0.000540s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180205_drop_materialized_latest_matrix.rb')
2021-09-06 11:40:25.930006 I [83306:4380] pact-broker -- Finished applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up, took 0.001245 seconds
2021-09-06 11:40:25.930013 I [83306:4380] pact-broker -- Begin applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up
2021-09-06 11:40:25.930610 I [83306:4380] pact-broker -- (0.000565s) DROP VIEW `head_matrix`
2021-09-06 11:40:25.931338 I [83306:4380] pact-broker -- (0.000682s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:40:25.931411 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.931445 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.931483 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.946752 I [83306:4380] pact-broker -- (0.015212s) ALTER TABLE `materialized_head_matrix` RENAME COLUMN `consumer_tag_name` TO `consumer_version_tag_name`
2021-09-06 11:40:25.947490 I [83306:4380] pact-broker -- (0.000698s) COMMIT
2021-09-06 11:40:25.947598 I [83306:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.947629 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.948464 I [83306:4380] pact-broker -- (0.000763s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180206_recreate_head_matrix_rename_consumer_tag_name.rb')
2021-09-06 11:40:25.948485 I [83306:4380] pact-broker -- Finished applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up, took 0.018467 seconds
2021-09-06 11:40:25.948496 I [83306:4380] pact-broker -- Begin applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up
2021-09-06 11:40:25.949232 I [83306:4380] pact-broker -- (0.000697s) DROP VIEW `head_matrix`
2021-09-06 11:40:25.950085 I [83306:4380] pact-broker -- (0.000804s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION ALL

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:40:25.950961 I [83306:4380] pact-broker -- (0.000808s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180207_recreate_head_matrix_union_all.rb')
2021-09-06 11:40:25.950983 I [83306:4380] pact-broker -- Finished applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up, took 0.002483 seconds
2021-09-06 11:40:25.950990 I [83306:4380] pact-broker -- Begin applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up
2021-09-06 11:40:25.951072 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.951109 I [83306:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.951145 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.951488 I [83306:4380] pact-broker -- (0.000286s) CREATE INDEX `materialized_head_matrix_consumer_version_tag_name_index` ON `materialized_head_matrix` (`consumer_version_tag_name`)
2021-09-06 11:40:25.952014 I [83306:4380] pact-broker -- (0.000502s) COMMIT
2021-09-06 11:40:25.952071 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.952101 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.952801 I [83306:4380] pact-broker -- (0.000640s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180208_add_cv_tag_name_index_to_mat_head_matrix.rb')
2021-09-06 11:40:25.952818 I [83306:4380] pact-broker -- Finished applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up, took 0.001824 seconds
2021-09-06 11:40:25.952831 I [83306:4380] pact-broker -- Begin applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up
2021-09-06 11:40:25.953505 I [83306:4380] pact-broker -- (0.000637s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:40:25.954284 I [83306:4380] pact-broker -- (0.000735s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:40:25.955285 I [83306:4380] pact-broker -- (0.000913s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb')
2021-09-06 11:40:25.955301 I [83306:4380] pact-broker -- Finished applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up, took 0.002468 seconds
2021-09-06 11:40:25.955307 I [83306:4380] pact-broker -- Begin applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up
2021-09-06 11:40:25.955365 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.955393 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.955424 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.955717 I [83306:4380] pact-broker -- (0.000254s) CREATE INDEX `ndx_mm_verif_id` ON `materialized_matrix` (`verification_id`)
2021-09-06 11:40:25.955822 I [83306:4380] pact-broker -- (0.000064s) CREATE INDEX `ndx_mm_pact_rev_num` ON `materialized_matrix` (`pact_revision_number`)
2021-09-06 11:40:25.956335 I [83306:4380] pact-broker -- (0.000487s) COMMIT
2021-09-06 11:40:25.956400 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.956429 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.957022 I [83306:4380] pact-broker -- (0.000562s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:40:25.957749 I [83306:4380] pact-broker -- (0.000681s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:40:25.957918 I [83306:4380] pact-broker -- (0.000066s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:40:25.964580 I [83306:4380] pact-broker -- (0.006576s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 11:40:25.965468 I [83306:4380] pact-broker -- (0.000783s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180210_fix_latest_matrix_for_cv_and_pv_again.rb')
2021-09-06 11:40:25.965489 I [83306:4380] pact-broker -- Finished applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up, took 0.010176 seconds
2021-09-06 11:40:25.965496 I [83306:4380] pact-broker -- Begin applying migration 20180311_optimise_head_matrix.rb, direction: up
2021-09-06 11:40:25.966397 I [83306:4380] pact-broker -- (0.000730s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:40:25.967390 I [83306:4380] pact-broker -- (0.000851s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `pact_publications`.`provider_id`, `cv`.`pacticipant_id` AS 'consumer_id', `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `pact_publications`.`consumer_version_id`) GROUP BY `pact_publications`.`provider_id`, `cv`.`pacticipant_id`, `t`.`name`
2021-09-06 11:40:25.968265 I [83306:4380] pact-broker -- (0.000731s) DROP VIEW `latest_verifications`
2021-09-06 11:40:25.969214 I [83306:4380] pact-broker -- (0.000791s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:40:25.969947 I [83306:4380] pact-broker -- (0.000687s) DROP VIEW `head_matrix`
2021-09-06 11:40:25.970924 I [83306:4380] pact-broker -- (0.000928s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 11:40:25.971615 I [83306:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180311_optimise_head_matrix.rb')
2021-09-06 11:40:25.971632 I [83306:4380] pact-broker -- Finished applying migration 20180311_optimise_head_matrix.rb, direction: up, took 0.006132 seconds
2021-09-06 11:40:25.971639 I [83306:4380] pact-broker -- Begin applying migration 20180315_create_verification_sequence.rb, direction: up
2021-09-06 11:40:25.972400 I [83306:4380] pact-broker -- (0.000687s) CREATE TABLE `verification_sequence_number` (`value` integer NOT NULL)
2021-09-06 11:40:25.972584 I [83306:4380] pact-broker -- (0.000086s) SELECT max(`number`) AS 'max' FROM `verifications` LIMIT 1
2021-09-06 11:40:25.973198 I [83306:4380] pact-broker -- (0.000545s) INSERT INTO `verification_sequence_number` (`value`) VALUES (100)
2021-09-06 11:40:25.973885 I [83306:4380] pact-broker -- (0.000632s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180315_create_verification_sequence.rb')
2021-09-06 11:40:25.973901 I [83306:4380] pact-broker -- Finished applying migration 20180315_create_verification_sequence.rb, direction: up, took 0.002259 seconds
2021-09-06 11:40:25.973908 I [83306:4380] pact-broker -- Begin applying migration 20180330_refresh_matrix.rb, direction: up
2021-09-06 11:40:25.974038 I [83306:4380] pact-broker -- (0.000061s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 11:40:25.974324 I [83306:4380] pact-broker -- (0.000224s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 11:40:25.974459 I [83306:4380] pact-broker -- (0.000050s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:40:25.976037 I [83306:4380] pact-broker -- (0.001515s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 11:40:25.976825 I [83306:4380] pact-broker -- (0.000714s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180330_refresh_matrix.rb')
2021-09-06 11:40:25.976844 I [83306:4380] pact-broker -- Finished applying migration 20180330_refresh_matrix.rb, direction: up, took 0.002932 seconds
2021-09-06 11:40:25.976851 I [83306:4380] pact-broker -- Begin applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up
2021-09-06 11:40:25.977592 I [83306:4380] pact-broker -- (0.000695s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:40:25.977817 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_version_tags: DROP VIEW `latest_verifications_for_consumer_version_tags`
2021-09-06 11:40:25.978789 I [83306:4380] pact-broker -- (0.000728s) CREATE VIEW `latest_verifications_for_consumer_version_tags` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `lv`.`consumer_version_tag_name`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_version_tags` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 11:40:25.979416 I [83306:4380] pact-broker -- (0.000561s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180523_create_latest_verifications_for_consumer_version_tags.rb')
2021-09-06 11:40:25.979432 I [83306:4380] pact-broker -- Finished applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up, took 0.002578 seconds
2021-09-06 11:40:25.979439 I [83306:4380] pact-broker -- Begin applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up
2021-09-06 11:40:25.980108 I [83306:4380] pact-broker -- (0.000633s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id
2021-09-06 11:40:25.980302 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_and_provider: DROP VIEW `latest_verifications_for_consumer_and_provider`
2021-09-06 11:40:25.981299 I [83306:4380] pact-broker -- (0.000784s) CREATE VIEW `latest_verifications_for_consumer_and_provider` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_and_provider` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 11:40:25.982050 I [83306:4380] pact-broker -- (0.000685s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180524_create_latest_verifications_for_consumer_and_provider.rb')
2021-09-06 11:40:25.982068 I [83306:4380] pact-broker -- Finished applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up, took 0.002626 seconds
2021-09-06 11:40:25.982075 I [83306:4380] pact-broker -- Begin applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up
2021-09-06 11:40:25.982166 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.982195 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.982233 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:25.983545 I [83306:4380] pact-broker -- (0.001252s) ALTER TABLE `triggered_webhooks` ADD COLUMN `verification_id` integer REFERENCES `verifications`
2021-09-06 11:40:25.984014 I [83306:4380] pact-broker -- (0.000442s) COMMIT
2021-09-06 11:40:25.984072 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:25.984101 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:25.984777 I [83306:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180608_add_verification_to_triggered_webhook.rb')
2021-09-06 11:40:25.984794 I [83306:4380] pact-broker -- Finished applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up, took 0.002716 seconds
2021-09-06 11:40:25.984800 I [83306:4380] pact-broker -- Begin applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up
2021-09-06 11:40:25.984860 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:25.984889 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:25.984922 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:25.985140 I [83306:4380] pact-broker -- (0.000158s) PRAGMA table_info('webhooks')
2021-09-06 11:40:25.985253 I [83306:4380] pact-broker -- (0.000045s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:40:25.985320 I [83306:4380] pact-broker -- (0.000034s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.985377 I [83306:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:25.985610 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.985685 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:40:25.985829 I [83306:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.985964 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.986018 I [83306:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:25.989904 I [83306:4380] pact-broker -- (0.003858s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:40:25.990084 I [83306:4380] pact-broker -- (0.000154s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.990167 I [83306:4380] pact-broker -- (0.000062s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:40:25.990288 I [83306:4380] pact-broker -- (0.000100s) DROP TABLE `webhooks_backup0`
2021-09-06 11:40:25.990467 I [83306:4380] pact-broker -- (0.000125s) PRAGMA table_info('webhooks')
2021-09-06 11:40:25.990555 I [83306:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:40:25.990639 I [83306:4380] pact-broker -- (0.000031s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.990692 I [83306:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:25.990919 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.990994 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:40:25.991254 I [83306:4380] pact-broker -- (0.000124s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.992201 I [83306:4380] pact-broker -- (0.000862s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.992264 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:25.995869 I [83306:4380] pact-broker -- (0.003578s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:40:25.996006 I [83306:4380] pact-broker -- (0.000111s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:25.996061 I [83306:4380] pact-broker -- (0.000034s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:40:25.996134 I [83306:4380] pact-broker -- (0.000054s) DROP TABLE `webhooks_backup0`
2021-09-06 11:40:25.996407 I [83306:4380] pact-broker -- (0.000220s) PRAGMA table_info('webhooks')
2021-09-06 11:40:25.996524 I [83306:4380] pact-broker -- (0.000073s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:40:25.996588 I [83306:4380] pact-broker -- (0.000030s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.996642 I [83306:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:25.996883 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:25.996961 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:40:25.997213 I [83306:4380] pact-broker -- (0.000118s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:25.998142 I [83306:4380] pact-broker -- (0.000845s) PRAGMA index_list('webhooks')
2021-09-06 11:40:25.998203 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:40:26.001726 I [83306:4380] pact-broker -- (0.003496s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:40:26.001859 I [83306:4380] pact-broker -- (0.000108s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.001913 I [83306:4380] pact-broker -- (0.000034s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:40:26.001990 I [83306:4380] pact-broker -- (0.000055s) DROP TABLE `webhooks_backup0`
2021-09-06 11:40:26.002564 I [83306:4380] pact-broker -- (0.000549s) COMMIT
2021-09-06 11:40:26.002647 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.002677 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.003285 I [83306:4380] pact-broker -- (0.000551s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180611_make_webhook_pacticipant_ids_optional.rb')
2021-09-06 11:40:26.003303 I [83306:4380] pact-broker -- Finished applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up, took 0.018498 seconds
2021-09-06 11:40:26.003310 I [83306:4380] pact-broker -- Begin applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up
2021-09-06 11:40:26.003378 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.003406 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.003438 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.004667 I [83306:4380] pact-broker -- (0.001173s) ALTER TABLE `verifications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 11:40:26.005732 I [83306:4380] pact-broker -- (0.001008s) ALTER TABLE `verifications` ADD COLUMN `provider_id` integer REFERENCES `pacticipants`
2021-09-06 11:40:26.005899 I [83306:4380] pact-broker -- (0.000118s) CREATE INDEX `verifications_consumer_id_index` ON `verifications` (`consumer_id`)
2021-09-06 11:40:26.006000 I [83306:4380] pact-broker -- (0.000061s) CREATE INDEX `verifications_provider_id_index` ON `verifications` (`provider_id`)
2021-09-06 11:40:26.006100 I [83306:4380] pact-broker -- (0.000066s) CREATE INDEX `verifications_provider_id_consumer_id_index` ON `verifications` (`provider_id`, `consumer_id`)
2021-09-06 11:40:26.006662 I [83306:4380] pact-broker -- (0.000538s) COMMIT
2021-09-06 11:40:26.006718 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.006746 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.007366 I [83306:4380] pact-broker -- (0.000562s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180612_add_pacticipant_ids_to_verifications.rb')
2021-09-06 11:40:26.007385 I [83306:4380] pact-broker -- Finished applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up, took 0.004072 seconds
2021-09-06 11:40:26.007392 I [83306:4380] pact-broker -- Begin applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up
2021-09-06 11:40:26.007564 I [83306:4380] pact-broker -- (0.000070s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.007786 I [83306:4380] pact-broker -- (0.000154s) PRAGMA table_info('verifications')
2021-09-06 11:40:26.007969 I [83306:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.008125 I [83306:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.008273 I [83306:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.008419 I [83306:4380] pact-broker -- (0.000099s) PRAGMA table_info('pact_versions')
2021-09-06 11:40:26.008554 I [83306:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.008684 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.008792 I [83306:4380] pact-broker -- (0.000075s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 11:40:26.009438 I [83306:4380] pact-broker -- (0.000592s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180613_migrate_pacticipant_ids_for_verifications.rb')
2021-09-06 11:40:26.009454 I [83306:4380] pact-broker -- Finished applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up, took 0.002058 seconds
2021-09-06 11:40:26.009460 I [83306:4380] pact-broker -- Begin applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 11:40:26.010102 I [83306:4380] pact-broker -- (0.000603s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 11:40:26.010718 I [83306:4380] pact-broker -- (0.000570s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(id) as latest_verification_id
        from verifications v
        group by provider_id, consumer_id
2021-09-06 11:40:26.011299 I [83306:4380] pact-broker -- (0.000520s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180614_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 11:40:26.011333 I [83306:4380] pact-broker -- Finished applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.001851 seconds
2021-09-06 11:40:26.011340 I [83306:4380] pact-broker -- Begin applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up
2021-09-06 11:40:26.011399 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.011428 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.011460 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.012690 I [83306:4380] pact-broker -- (0.001175s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 11:40:26.012833 I [83306:4380] pact-broker -- (0.000101s) CREATE INDEX `pact_publications_consumer_id_index` ON `pact_publications` (`consumer_id`)
2021-09-06 11:40:26.013284 I [83306:4380] pact-broker -- (0.000427s) COMMIT
2021-09-06 11:40:26.013336 I [83306:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.013369 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.014046 I [83306:4380] pact-broker -- (0.000628s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180615_add_consumer_id_to_pact_publications.rb')
2021-09-06 11:40:26.014064 I [83306:4380] pact-broker -- Finished applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up, took 0.002720 seconds
2021-09-06 11:40:26.014071 I [83306:4380] pact-broker -- Begin applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up
2021-09-06 11:40:26.014244 I [83306:4380] pact-broker -- (0.000074s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.014420 I [83306:4380] pact-broker -- (0.000117s) PRAGMA table_info('pact_publications')
2021-09-06 11:40:26.014595 I [83306:4380] pact-broker -- (0.000079s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.014726 I [83306:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.014883 I [83306:4380] pact-broker -- (0.000110s) PRAGMA table_info('versions')
2021-09-06 11:40:26.015020 I [83306:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.015117 I [83306:4380] pact-broker -- (0.000063s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 11:40:26.015768 I [83306:4380] pact-broker -- (0.000597s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180616_migrate_consumer_ids_for_pact_publications.rb')
2021-09-06 11:40:26.015784 I [83306:4380] pact-broker -- Finished applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up, took 0.001710 seconds
2021-09-06 11:40:26.015791 I [83306:4380] pact-broker -- Begin applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up
2021-09-06 11:40:26.016660 I [83306:4380] pact-broker -- (0.000707s) CREATE TABLE `latest_pact_publication_ids_for_consumer_versions` (`consumer_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `consumer_version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `provider_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `pact_publication_id` integer NOT NULL UNIQUE REFERENCES `pact_publications` ON DELETE CASCADE, `pact_version_id` integer NOT NULL REFERENCES `pact_versions` ON DELETE CASCADE)
2021-09-06 11:40:26.017421 I [83306:4380] pact-broker -- (0.000712s) CREATE UNIQUE INDEX `unq_latest_ppid_prov_conver` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_version_id`)
2021-09-06 11:40:26.018111 I [83306:4380] pact-broker -- (0.000643s) CREATE INDEX `lpp_provider_id_consumer_id_index` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_id`)
2021-09-06 11:40:26.018765 I [83306:4380] pact-broker -- (0.000598s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180720_create_latest_pact_publication_ids.rb')
2021-09-06 11:40:26.018784 I [83306:4380] pact-broker -- Finished applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up, took 0.002989 seconds
2021-09-06 11:40:26.018795 I [83306:4380] pact-broker -- Begin applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up
2021-09-06 11:40:26.019303 I [83306:4380] pact-broker -- (0.000414s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` SELECT `consumer_id`, `consumer_version_id`, `provider_id`, `id`, `pact_version_id` FROM `latest_pact_publications_by_consumer_versions`
2021-09-06 11:40:26.019884 I [83306:4380] pact-broker -- (0.000521s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180721_migrate_latest_pact_publication_ids.rb')
2021-09-06 11:40:26.019901 I [83306:4380] pact-broker -- Finished applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up, took 0.001103 seconds
2021-09-06 11:40:26.019908 I [83306:4380] pact-broker -- Begin applying migration 20180722_recreate_views.rb, direction: up
2021-09-06 11:40:26.020554 I [83306:4380] pact-broker -- (0.000605s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 11:40:26.021219 I [83306:4380] pact-broker -- (0.000618s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.consumer_version_id = app.consumer_version_id
  and lpp.pact_publication_id = app.id
  and lpp.provider_id = app.provider_id
2021-09-06 11:40:26.021922 I [83306:4380] pact-broker -- (0.000550s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:40:26.022637 I [83306:4380] pact-broker -- (0.000619s) CREATE VIEW `latest_pact_consumer_version_orders` AS SELECT `provider_id`, `consumer_id`, max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) GROUP BY `provider_id`, `consumer_id`
2021-09-06 11:40:26.023237 I [83306:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180722_recreate_views.rb')
2021-09-06 11:40:26.023253 I [83306:4380] pact-broker -- Finished applying migration 20180722_recreate_views.rb, direction: up, took 0.003341 seconds
2021-09-06 11:40:26.023260 I [83306:4380] pact-broker -- Begin applying migration 20180723_create_latest_verification_ids.rb, direction: up
2021-09-06 11:40:26.024146 I [83306:4380] pact-broker -- (0.000735s) CREATE TABLE `latest_verification_id_for_pact_version_and_provider_version` (`consumer_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_consumer_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `pact_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_pact_version_id_fk` REFERENCES `pact_versions` ON DELETE CASCADE, `provider_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `provider_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_version_id_fk` REFERENCES `versions` ON DELETE CASCADE, `verification_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_verification_id_fk` REFERENCES `verifications` ON DELETE CASCADE)
2021-09-06 11:40:26.024869 I [83306:4380] pact-broker -- (0.000673s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_v_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`verification_id`)
2021-09-06 11:40:26.025658 I [83306:4380] pact-broker -- (0.000737s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_pv_id_pv_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`)
2021-09-06 11:40:26.026425 I [83306:4380] pact-broker -- (0.000718s) CREATE INDEX `latest_v_id_for_pv_and_pv_pv_id_v_id` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `verification_id`)
2021-09-06 11:40:26.027106 I [83306:4380] pact-broker -- (0.000622s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180723_create_latest_verification_ids.rb')
2021-09-06 11:40:26.027122 I [83306:4380] pact-broker -- Finished applying migration 20180723_create_latest_verification_ids.rb, direction: up, took 0.003858 seconds
2021-09-06 11:40:26.027129 I [83306:4380] pact-broker -- Begin applying migration 20180724_migrate_latest_verification_ids.rb, direction: up
2021-09-06 11:40:26.027378 I [83306:4380] pact-broker -- (0.000092s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` SELECT `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`, max(`verifications`.`id`) AS 'verification_id' FROM `verifications` GROUP BY `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`
2021-09-06 11:40:26.027997 I [83306:4380] pact-broker -- (0.000569s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180724_migrate_latest_verification_ids.rb')
2021-09-06 11:40:26.028012 I [83306:4380] pact-broker -- Finished applying migration 20180724_migrate_latest_verification_ids.rb, direction: up, took 0.000881 seconds
2021-09-06 11:40:26.028019 I [83306:4380] pact-broker -- Begin applying migration 20180726_recreate_views.rb, direction: up
2021-09-06 11:40:26.028661 I [83306:4380] pact-broker -- (0.000607s) DROP VIEW `latest_verification_id_for_consumer_version_and_provider_version`
2021-09-06 11:40:26.029274 I [83306:4380] pact-broker -- (0.000568s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select pp.consumer_version_id, lv.provider_version_id, lv.verification_id as latest_verification_id
      from latest_pact_publication_ids_for_consumer_versions lpp
      inner join pact_publications pp
        on pp.id = lpp.pact_publication_id
      left outer join latest_verification_id_for_pact_version_and_provider_version lv
          on lv.pact_version_id = pp.pact_version_id
2021-09-06 11:40:26.029877 I [83306:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180726_recreate_views.rb')
2021-09-06 11:40:26.029894 I [83306:4380] pact-broker -- Finished applying migration 20180726_recreate_views.rb, direction: up, took 0.001872 seconds
2021-09-06 11:40:26.029900 I [83306:4380] pact-broker -- Begin applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:40:26.030424 I [83306:4380] pact-broker -- (0.000490s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:40:26.031117 I [83306:4380] pact-broker -- (0.000650s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
      v.provider_id,
      v.consumer_id,
      t.name as consumer_version_tag_name,
      max(v.verification_id) as latest_verification_id
    from latest_verification_id_for_pact_version_and_provider_version v
    join latest_pact_publication_ids_for_consumer_versions lpp
      on v.pact_version_id = lpp.pact_version_id
    join tags t
      on lpp.consumer_version_id = t.version_id
    group by v.provider_id, v.consumer_id, t.name
2021-09-06 11:40:26.031715 I [83306:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:40:26.031730 I [83306:4380] pact-broker -- Finished applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001827 seconds
2021-09-06 11:40:26.031737 I [83306:4380] pact-broker -- Begin applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up
2021-09-06 11:40:26.031896 I [83306:4380] pact-broker -- (0.000084s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 11:40:26.032000 I [83306:4380] pact-broker -- (0.000048s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:40:26.032555 I [83306:4380] pact-broker -- (0.000507s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180728_truncate_materialized_matrix_tables.rb')
2021-09-06 11:40:26.032574 I [83306:4380] pact-broker -- Finished applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up, took 0.000835 seconds
2021-09-06 11:40:26.032582 I [83306:4380] pact-broker -- Begin applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up
2021-09-06 11:40:26.033210 I [83306:4380] pact-broker -- (0.000591s) CREATE VIEW `latest_verification_ids_for_pact_versions` AS select pact_version_id, MAX(verification_id) latest_verification_id
    FROM latest_verification_id_for_pact_version_and_provider_version
    GROUP BY pact_version_id
2021-09-06 11:40:26.033861 I [83306:4380] pact-broker -- (0.000590s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180729_create_latest_verification_ids_for_provider_versions.rb')
2021-09-06 11:40:26.033877 I [83306:4380] pact-broker -- Finished applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up, took 0.001292 seconds
2021-09-06 11:40:26.033884 I [83306:4380] pact-broker -- Begin applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up
2021-09-06 11:40:26.034742 I [83306:4380] pact-broker -- (0.000644s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:40:26.035397 I [83306:4380] pact-broker -- (0.000595s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180730_create_latest_verifications_for_provider_versions.rb')
2021-09-06 11:40:26.035412 I [83306:4380] pact-broker -- Finished applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up, took 0.001526 seconds
2021-09-06 11:40:26.035423 I [83306:4380] pact-broker -- Begin applying migration 20180731_update_head_matrix.rb, direction: up
2021-09-06 11:40:26.035994 I [83306:4380] pact-broker -- (0.000538s) DROP VIEW `head_matrix`
2021-09-06 11:40:26.036909 I [83306:4380] pact-broker -- (0.000870s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 11:40:26.037552 I [83306:4380] pact-broker -- (0.000577s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180731_update_head_matrix.rb')
2021-09-06 11:40:26.037568 I [83306:4380] pact-broker -- Finished applying migration 20180731_update_head_matrix.rb, direction: up, took 0.002143 seconds
2021-09-06 11:40:26.037575 I [83306:4380] pact-broker -- Begin applying migration 20180828_create_latest_versions.rb, direction: up
2021-09-06 11:40:26.037716 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_version_orders: DROP VIEW `latest_version_orders`
2021-09-06 11:40:26.038473 I [83306:4380] pact-broker -- (0.000598s) CREATE VIEW `latest_version_orders` AS SELECT `pacticipant_id`, max(`order`) AS 'latest_version_order' FROM `versions` GROUP BY `pacticipant_id`
2021-09-06 11:40:26.038614 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_versions: DROP VIEW `latest_versions`
2021-09-06 11:40:26.039453 I [83306:4380] pact-broker -- (0.000674s) CREATE VIEW `latest_versions` AS SELECT `versions`.* FROM `versions` INNER JOIN `latest_version_orders` ON ((`versions`.`pacticipant_id` = `latest_version_orders`.`pacticipant_id`) AND (`versions`.`order` = `latest_version_orders`.`latest_version_order`))
2021-09-06 11:40:26.040133 I [83306:4380] pact-broker -- (0.000615s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180828_create_latest_versions.rb')
2021-09-06 11:40:26.040150 I [83306:4380] pact-broker -- Finished applying migration 20180828_create_latest_versions.rb, direction: up, took 0.002572 seconds
2021-09-06 11:40:26.040161 I [83306:4380] pact-broker -- Begin applying migration 20190509_create_version_sequence.rb, direction: up
2021-09-06 11:40:26.040914 I [83306:4380] pact-broker -- (0.000680s) CREATE TABLE `version_sequence_number` (`value` integer NOT NULL)
2021-09-06 11:40:26.041579 I [83306:4380] pact-broker -- (0.000578s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190509_create_version_sequence.rb')
2021-09-06 11:40:26.041595 I [83306:4380] pact-broker -- Finished applying migration 20190509_create_version_sequence.rb, direction: up, took 0.001431 seconds
2021-09-06 11:40:26.041601 I [83306:4380] pact-broker -- Begin applying migration 20190510_set_version_sequence.rb, direction: up
2021-09-06 11:40:26.041762 I [83306:4380] pact-broker -- (0.000073s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.041909 I [83306:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.042039 I [83306:4380] pact-broker -- (0.000071s) PRAGMA table_info('version_sequence_number')
2021-09-06 11:40:26.042192 I [83306:4380] pact-broker -- (0.000065s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 11:40:26.042290 I [83306:4380] pact-broker -- (0.000051s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.042870 I [83306:4380] pact-broker -- (0.000530s) INSERT INTO `version_sequence_number` (`value`) VALUES (100)
2021-09-06 11:40:26.043006 I [83306:4380] pact-broker -- (0.000062s) DELETE FROM `version_sequence_number` WHERE (`value` != 100)
2021-09-06 11:40:26.043592 I [83306:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190510_set_version_sequence.rb')
2021-09-06 11:40:26.043608 I [83306:4380] pact-broker -- Finished applying migration 20190510_set_version_sequence.rb, direction: up, took 0.002003 seconds
2021-09-06 11:40:26.043615 I [83306:4380] pact-broker -- Begin applying migration 20190511_create_integrations_view.rb, direction: up
2021-09-06 11:40:26.044518 I [83306:4380] pact-broker -- (0.000713s) CREATE VIEW `integrations` AS SELECT DISTINCT `consumer_id`, `c`.`name` AS 'consumer_name', `provider_id`, `p`.`name` AS 'provider_name' FROM `pact_publications` INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `pact_publications`.`consumer_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`)
2021-09-06 11:40:26.045129 I [83306:4380] pact-broker -- (0.000547s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190511_create_integrations_view.rb')
2021-09-06 11:40:26.045144 I [83306:4380] pact-broker -- Finished applying migration 20190511_create_integrations_view.rb, direction: up, took 0.001527 seconds
2021-09-06 11:40:26.045151 I [83306:4380] pact-broker -- Begin applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up
2021-09-06 11:40:26.045209 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.045237 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.045272 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.046663 I [83306:4380] pact-broker -- (0.001332s) ALTER TABLE `webhooks` ADD COLUMN `enabled` boolean DEFAULT (1)
2021-09-06 11:40:26.047218 I [83306:4380] pact-broker -- (0.000526s) COMMIT
2021-09-06 11:40:26.047271 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.047299 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.047962 I [83306:4380] pact-broker -- (0.000617s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190523_add_enabled_column_to_webhooks.rb')
2021-09-06 11:40:26.047978 I [83306:4380] pact-broker -- Finished applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up, took 0.002824 seconds
2021-09-06 11:40:26.047984 I [83306:4380] pact-broker -- Begin applying migration 20190524_set_webhooks_enabled.rb, direction: up
2021-09-06 11:40:26.048162 I [83306:4380] pact-broker -- (0.000067s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:40:26.048369 I [83306:4380] pact-broker -- (0.000150s) PRAGMA table_info('webhooks')
2021-09-06 11:40:26.048548 I [83306:4380] pact-broker -- (0.000052s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 11:40:26.049187 I [83306:4380] pact-broker -- (0.000591s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190524_set_webhooks_enabled.rb')
2021-09-06 11:40:26.049203 I [83306:4380] pact-broker -- Finished applying migration 20190524_set_webhooks_enabled.rb, direction: up, took 0.001215 seconds
2021-09-06 11:40:26.049209 I [83306:4380] pact-broker -- Begin applying migration 20190525_add_description_column_to_webhooks.rb, direction: up
2021-09-06 11:40:26.049266 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.049294 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.049324 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:26.050671 I [83306:4380] pact-broker -- (0.001298s) ALTER TABLE `webhooks` ADD COLUMN `description` varchar(255)
2021-09-06 11:40:26.051128 I [83306:4380] pact-broker -- (0.000432s) COMMIT
2021-09-06 11:40:26.051179 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.051208 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.052170 I [83306:4380] pact-broker -- (0.000911s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190525_add_description_column_to_webhooks.rb')
2021-09-06 11:40:26.052223 I [83306:4380] pact-broker -- Finished applying migration 20190525_add_description_column_to_webhooks.rb, direction: up, took 0.003009 seconds
2021-09-06 11:40:26.052231 I [83306:4380] pact-broker -- Begin applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up
2021-09-06 11:40:26.052285 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.052313 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.052342 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:26.053682 I [83306:4380] pact-broker -- (0.001297s) ALTER TABLE `webhooks` ADD COLUMN `headers` varchar(255)
2021-09-06 11:40:26.054025 I [83306:4380] pact-broker -- (0.000319s) COMMIT
2021-09-06 11:40:26.054101 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.054129 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.054832 I [83306:4380] pact-broker -- (0.000654s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190602_add_headers_column_to_webhooks.rb')
2021-09-06 11:40:26.054848 I [83306:4380] pact-broker -- Finished applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up, took 0.002614 seconds
2021-09-06 11:40:26.054854 I [83306:4380] pact-broker -- Begin applying migration 20190603_migrate_webhook_headers.rb, direction: up
2021-09-06 11:40:26.055005 I [83306:4380] pact-broker -- (0.000065s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:40:26.055219 I [83306:4380] pact-broker -- (0.000161s) PRAGMA table_info('webhooks')
2021-09-06 11:40:26.055429 I [83306:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:40:26.055554 I [83306:4380] pact-broker -- (0.000074s) PRAGMA table_info('webhook_headers')
2021-09-06 11:40:26.055683 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:40:26.055819 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:40:26.055918 I [83306:4380] pact-broker -- (0.000054s) SELECT * FROM `webhook_headers`
2021-09-06 11:40:26.056546 I [83306:4380] pact-broker -- (0.000580s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190603_migrate_webhook_headers.rb')
2021-09-06 11:40:26.056565 I [83306:4380] pact-broker -- Finished applying migration 20190603_migrate_webhook_headers.rb, direction: up, took 0.001707 seconds
2021-09-06 11:40:26.056571 I [83306:4380] pact-broker -- Begin applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up
2021-09-06 11:40:26.057320 I [83306:4380] pact-broker -- (0.000654s) DROP VIEW `all_verifications`
2021-09-06 11:40:26.058094 I [83306:4380] pact-broker -- (0.000662s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at`, `test_results` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:40:26.058750 I [83306:4380] pact-broker -- (0.000564s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190909_add_test_results_to_all_verifications.rb')
2021-09-06 11:40:26.058768 I [83306:4380] pact-broker -- Finished applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up, took 0.002193 seconds
2021-09-06 11:40:26.058775 I [83306:4380] pact-broker -- Begin applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up
2021-09-06 11:40:26.059493 I [83306:4380] pact-broker -- (0.000579s) DROP VIEW `latest_verifications`
2021-09-06 11:40:26.060285 I [83306:4380] pact-broker -- (0.000658s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:40:26.060905 I [83306:4380] pact-broker -- (0.000559s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190910_add_test_results_to_latest_verifications.rb')
2021-09-06 11:40:26.060921 I [83306:4380] pact-broker -- Finished applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up, took 0.002142 seconds
2021-09-06 11:40:26.060928 I [83306:4380] pact-broker -- Begin applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up
2021-09-06 11:40:26.061602 I [83306:4380] pact-broker -- (0.000551s) DROP VIEW `latest_verifications_for_pact_versions`
2021-09-06 11:40:26.062410 I [83306:4380] pact-broker -- (0.000657s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:40:26.063029 I [83306:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190911_add_test_results_to_latest_verifications_for_pact_versions.rb')
2021-09-06 11:40:26.063047 I [83306:4380] pact-broker -- Finished applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up, took 0.002116 seconds
2021-09-06 11:40:26.063054 I [83306:4380] pact-broker -- Begin applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up
2021-09-06 11:40:26.063642 I [83306:4380] pact-broker -- (0.000552s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:40:26.064374 I [83306:4380] pact-broker -- (0.000688s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:40:26.064993 I [83306:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191025_optimise_latest_verification_ids_for_cv_tags.rb')
2021-09-06 11:40:26.065009 I [83306:4380] pact-broker -- Finished applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up, took 0.001953 seconds
2021-09-06 11:40:26.065016 I [83306:4380] pact-broker -- Begin applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 11:40:26.065692 I [83306:4380] pact-broker -- (0.000555s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:40:26.066518 I [83306:4380] pact-broker -- (0.000706s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 11:40:26.067086 I [83306:4380] pact-broker -- (0.000508s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191028_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 11:40:26.067102 I [83306:4380] pact-broker -- Finished applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002083 seconds
2021-09-06 11:40:26.067108 I [83306:4380] pact-broker -- Begin applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up
2021-09-06 11:40:26.067724 I [83306:4380] pact-broker -- (0.000580s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 11:40:26.068440 I [83306:4380] pact-broker -- (0.000645s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.pact_publication_id = app.id
2021-09-06 11:40:26.069108 I [83306:4380] pact-broker -- (0.000600s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191030_optimise_latest_pact_publications_by_consumer_versions_.rb')
2021-09-06 11:40:26.069125 I [83306:4380] pact-broker -- Finished applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up, took 0.002013 seconds
2021-09-06 11:40:26.069131 I [83306:4380] pact-broker -- Begin applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:40:26.069744 I [83306:4380] pact-broker -- (0.000577s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:40:26.070456 I [83306:4380] pact-broker -- (0.000666s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      where v.id in (select latest_verification_id from latest_verification_ids_for_pact_versions)
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:40:26.071027 I [83306:4380] pact-broker -- (0.000510s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:40:26.071043 I [83306:4380] pact-broker -- Finished applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001908 seconds
2021-09-06 11:40:26.071050 I [83306:4380] pact-broker -- Begin applying migration 20191101_create_head_pact_tags.rb, direction: up
2021-09-06 11:40:26.071885 I [83306:4380] pact-broker -- (0.000633s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`))
2021-09-06 11:40:26.072531 I [83306:4380] pact-broker -- (0.000584s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191101_create_head_pact_tags.rb')
2021-09-06 11:40:26.072552 I [83306:4380] pact-broker -- Finished applying migration 20191101_create_head_pact_tags.rb, direction: up, took 0.001499 seconds
2021-09-06 11:40:26.072559 I [83306:4380] pact-broker -- Begin applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up
2021-09-06 11:40:26.072647 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.072676 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.072712 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.074135 I [83306:4380] pact-broker -- (0.001370s) ALTER TABLE `latest_pact_publication_ids_for_consumer_versions` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:26.074563 I [83306:4380] pact-broker -- (0.000399s) COMMIT
2021-09-06 11:40:26.074621 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.074655 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.075700 I [83306:4380] pact-broker -- (0.000994s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200318_add_created_at_to_latest_pact_publications.rb')
2021-09-06 11:40:26.075717 I [83306:4380] pact-broker -- Finished applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up, took 0.003154 seconds
2021-09-06 11:40:26.075724 I [83306:4380] pact-broker -- Begin applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up
2021-09-06 11:40:26.075783 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.075811 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.075845 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.077241 I [83306:4380] pact-broker -- (0.001339s) ALTER TABLE `latest_verification_id_for_pact_version_and_provider_version` ADD COLUMN `created_at` timestamp
2021-09-06 11:40:26.077627 I [83306:4380] pact-broker -- (0.000361s) COMMIT
2021-09-06 11:40:26.077680 I [83306:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.077709 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.078403 I [83306:4380] pact-broker -- (0.000643s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200319_add_created_at_to_latest_verifications.rb')
2021-09-06 11:40:26.078419 I [83306:4380] pact-broker -- Finished applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up, took 0.002693 seconds
2021-09-06 11:40:26.078426 I [83306:4380] pact-broker -- Begin applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up
2021-09-06 11:40:26.078482 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.078509 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.078540 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.079935 I [83306:4380] pact-broker -- (0.001310s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_name` varchar(255)
2021-09-06 11:40:26.080453 I [83306:4380] pact-broker -- (0.000494s) COMMIT
2021-09-06 11:40:26.080505 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.080534 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.081128 I [83306:4380] pact-broker -- (0.000540s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200922_add_event_to_triggered_webhook.rb')
2021-09-06 11:40:26.081144 I [83306:4380] pact-broker -- Finished applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up, took 0.002714 seconds
2021-09-06 11:40:26.081150 I [83306:4380] pact-broker -- Begin applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 11:40:26.081721 I [83306:4380] pact-broker -- (0.000534s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 11:40:26.082479 I [83306:4380] pact-broker -- (0.000715s) CREATE VIEW `latest_triggered_webhooks` AS select tw.id, tw.trigger_uuid, tw.trigger_type, tw.pact_publication_id, tw.webhook_id, tw.webhook_uuid, tw.consumer_id, tw.provider_id, tw.status, tw.created_at, tw.updated_at, tw.verification_id, tw.event_name
  from triggered_webhooks tw
  inner join (select max(id) as max_id
    from triggered_webhooks
    group by webhook_uuid, consumer_id, provider_id, event_name) latest_ids
  on latest_ids.max_id = tw.id
2021-09-06 11:40:26.083088 I [83306:4380] pact-broker -- (0.000548s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200930_update_latest_triggered_webhooks.rb')
2021-09-06 11:40:26.083104 I [83306:4380] pact-broker -- Finished applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up, took 0.001950 seconds
2021-09-06 11:40:26.083111 I [83306:4380] pact-broker -- Begin applying migration 20201006_add_wip_to_verification.rb, direction: up
2021-09-06 11:40:26.083169 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.083198 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.083229 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.084591 I [83306:4380] pact-broker -- (0.001309s) ALTER TABLE `verifications` ADD COLUMN `wip` boolean DEFAULT (0) NOT NULL
2021-09-06 11:40:26.084979 I [83306:4380] pact-broker -- (0.000364s) COMMIT
2021-09-06 11:40:26.085030 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.085059 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.085621 I [83306:4380] pact-broker -- (0.000510s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201006_add_wip_to_verification.rb')
2021-09-06 11:40:26.085665 I [83306:4380] pact-broker -- Finished applying migration 20201006_add_wip_to_verification.rb, direction: up, took 0.002551 seconds
2021-09-06 11:40:26.085672 I [83306:4380] pact-broker -- Begin applying migration 20201023_create_verification_number_sequence.rb, direction: up
2021-09-06 11:40:26.086273 I [83306:4380] pact-broker -- (0.000546s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201023_create_verification_number_sequence.rb')
2021-09-06 11:40:26.086288 I [83306:4380] pact-broker -- Finished applying migration 20201023_create_verification_number_sequence.rb, direction: up, took 0.000614 seconds
2021-09-06 11:40:26.086295 I [83306:4380] pact-broker -- Begin applying migration 20201024_create_version_order_sequence.rb, direction: up
2021-09-06 11:40:26.086856 I [83306:4380] pact-broker -- (0.000507s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201024_create_version_order_sequence.rb')
2021-09-06 11:40:26.086871 I [83306:4380] pact-broker -- Finished applying migration 20201024_create_version_order_sequence.rb, direction: up, took 0.000574 seconds
2021-09-06 11:40:26.086878 I [83306:4380] pact-broker -- Begin applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 11:40:26.087446 I [83306:4380] pact-broker -- (0.000534s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 11:40:26.088105 I [83306:4380] pact-broker -- (0.000616s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(verification_id) as latest_verification_id
        from latest_verification_id_for_pact_version_and_provider_version v
        group by provider_id, consumer_id
2021-09-06 11:40:26.088846 I [83306:4380] pact-broker -- (0.000677s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201026_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 11:40:26.088863 I [83306:4380] pact-broker -- Finished applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.001982 seconds
2021-09-06 11:40:26.088870 I [83306:4380] pact-broker -- Begin applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up
2021-09-06 11:40:26.088940 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.088969 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.089001 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.089307 I [83306:4380] pact-broker -- (0.000268s) CREATE INDEX `webhook_executions_triggered_webhook_id_index` ON `webhook_executions` (`triggered_webhook_id`)
2021-09-06 11:40:26.089730 I [83306:4380] pact-broker -- (0.000398s) COMMIT
2021-09-06 11:40:26.089785 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.089813 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.089866 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.089892 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.089921 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.090285 I [83306:4380] pact-broker -- (0.000306s) CREATE INDEX `triggered_webhooks_webhook_id_index` ON `triggered_webhooks` (`webhook_id`)
2021-09-06 11:40:26.090395 I [83306:4380] pact-broker -- (0.000071s) CREATE INDEX `triggered_webhooks_consumer_id_index` ON `triggered_webhooks` (`consumer_id`)
2021-09-06 11:40:26.090494 I [83306:4380] pact-broker -- (0.000065s) CREATE INDEX `triggered_webhooks_provider_id_index` ON `triggered_webhooks` (`provider_id`)
2021-09-06 11:40:26.090593 I [83306:4380] pact-broker -- (0.000063s) CREATE INDEX `triggered_webhooks_verification_id_index` ON `triggered_webhooks` (`verification_id`)
2021-09-06 11:40:26.090685 I [83306:4380] pact-broker -- (0.000060s) CREATE INDEX `triggered_webhooks_pact_publication_id_index` ON `triggered_webhooks` (`pact_publication_id`)
2021-09-06 11:40:26.091213 I [83306:4380] pact-broker -- (0.000506s) COMMIT
2021-09-06 11:40:26.091264 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.091292 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.091900 I [83306:4380] pact-broker -- (0.000560s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210115_add_webhook_foreign_key_indexes.rb')
2021-09-06 11:40:26.091915 I [83306:4380] pact-broker -- Finished applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up, took 0.003042 seconds
2021-09-06 11:40:26.091922 I [83306:4380] pact-broker -- Begin applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up
2021-09-06 11:40:26.091976 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.092003 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.092033 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.093463 I [83306:4380] pact-broker -- (0.001381s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_context` varchar(255)
2021-09-06 11:40:26.093847 I [83306:4380] pact-broker -- (0.000359s) COMMIT
2021-09-06 11:40:26.093898 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.093926 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.094569 I [83306:4380] pact-broker -- (0.000589s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210116_add_context_to_triggered_webhook.rb')
2021-09-06 11:40:26.094587 I [83306:4380] pact-broker -- Finished applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up, took 0.002661 seconds
2021-09-06 11:40:26.094594 I [83306:4380] pact-broker -- Begin applying migration 20210117_add_branch_to_version.rb, direction: up
2021-09-06 11:40:26.094682 I [83306:4380] pact-broker -- (0.000041s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.094715 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.094747 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.096236 I [83306:4380] pact-broker -- (0.001435s) ALTER TABLE `versions` ADD COLUMN `branch` varchar(255)
2021-09-06 11:40:26.097580 I [83306:4380] pact-broker -- (0.001282s) ALTER TABLE `versions` ADD COLUMN `build_url` varchar(255)
2021-09-06 11:40:26.097765 I [83306:4380] pact-broker -- (0.000128s) CREATE INDEX `versions_pacticipant_id_branch_order_index` ON `versions` (`pacticipant_id`, `branch`, `order`)
2021-09-06 11:40:26.098521 I [83306:4380] pact-broker -- (0.000731s) COMMIT
2021-09-06 11:40:26.098579 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.098610 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.099424 I [83306:4380] pact-broker -- (0.000759s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210117_add_branch_to_version.rb')
2021-09-06 11:40:26.099448 I [83306:4380] pact-broker -- Finished applying migration 20210117_add_branch_to_version.rb, direction: up, took 0.004848 seconds
2021-09-06 11:40:26.099465 I [83306:4380] pact-broker -- Begin applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up
2021-09-06 11:40:26.100385 I [83306:4380] pact-broker -- (0.000751s) DROP VIEW `head_pact_tags`
2021-09-06 11:40:26.101253 I [83306:4380] pact-broker -- (0.000690s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id`, `tags`.`created_at` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`)) INNER JOIN `tags` ON ((`tags`.`version_id` = `cv`.`id`) AND (`tags`.`name` = `o`.`tag_name`))
2021-09-06 11:40:26.102507 I [83306:4380] pact-broker -- (0.001188s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210202_add_created_at_to_head_pact_tags.rb')
2021-09-06 11:40:26.102525 I [83306:4380] pact-broker -- Finished applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up, took 0.003060 seconds
2021-09-06 11:40:26.102532 I [83306:4380] pact-broker -- Begin applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up
2021-09-06 11:40:26.102602 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.102631 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.102664 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.104104 I [83306:4380] pact-broker -- (0.001392s) ALTER TABLE `tags` ADD COLUMN `pacticipant_id` integer
2021-09-06 11:40:26.105280 I [83306:4380] pact-broker -- (0.001126s) ALTER TABLE `tags` ADD COLUMN `version_order` integer
2021-09-06 11:40:26.105429 I [83306:4380] pact-broker -- (0.000106s) CREATE INDEX `tags_version_order_index` ON `tags` (`version_order`)
2021-09-06 11:40:26.105531 I [83306:4380] pact-broker -- (0.000067s) CREATE INDEX `tags_version_id_index` ON `tags` (`version_id`)
2021-09-06 11:40:26.105629 I [83306:4380] pact-broker -- (0.000065s) CREATE INDEX `tags_pacticipant_id_index` ON `tags` (`pacticipant_id`)
2021-09-06 11:40:26.106306 I [83306:4380] pact-broker -- (0.000653s) COMMIT
2021-09-06 11:40:26.106366 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.106395 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.107111 I [83306:4380] pact-broker -- (0.000649s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210205_add_pacticipant_id_to_tag.rb')
2021-09-06 11:40:26.107127 I [83306:4380] pact-broker -- Finished applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up, took 0.004592 seconds
2021-09-06 11:40:26.107134 I [83306:4380] pact-broker -- Begin applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up
2021-09-06 11:40:26.107194 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.107221 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.107258 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.107559 I [83306:4380] pact-broker -- (0.000263s) CREATE INDEX `tags_pacticipant_id_name_version_order_index` ON `tags` (`pacticipant_id`, `name`, `version_order`)
2021-09-06 11:40:26.108029 I [83306:4380] pact-broker -- (0.000447s) COMMIT
2021-09-06 11:40:26.108080 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.108108 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.108707 I [83306:4380] pact-broker -- (0.000552s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210206_add_index_to_tags_and_versions.rb')
2021-09-06 11:40:26.108724 I [83306:4380] pact-broker -- Finished applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up, took 0.001587 seconds
2021-09-06 11:40:26.108731 I [83306:4380] pact-broker -- Begin applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:40:26.109274 I [83306:4380] pact-broker -- (0.000507s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:40:26.110053 I [83306:4380] pact-broker -- (0.000734s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
    lpp.provider_id,
    lpp.consumer_id,
    t.name as consumer_version_tag_name,
    max(lv.latest_verification_id) as latest_verification_id
  from latest_verification_ids_for_pact_versions lv
  join latest_pact_publication_ids_for_consumer_versions lpp
    on lv.pact_version_id = lpp.pact_version_id
  join tags t
    on lpp.consumer_version_id = t.version_id
  group by lpp.provider_id, lpp.consumer_id, t.name

2021-09-06 11:40:26.110772 I [83306:4380] pact-broker -- (0.000652s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:40:26.110789 I [83306:4380] pact-broker -- Finished applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.002054 seconds
2021-09-06 11:40:26.110795 I [83306:4380] pact-broker -- Begin applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 11:40:26.111541 I [83306:4380] pact-broker -- (0.000625s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:40:26.112346 I [83306:4380] pact-broker -- (0.000654s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`version_order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 11:40:26.112967 I [83306:4380] pact-broker -- (0.000557s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210208_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 11:40:26.112986 I [83306:4380] pact-broker -- Finished applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002187 seconds
2021-09-06 11:40:26.112993 I [83306:4380] pact-broker -- Begin applying migration 20210210_create_environments_table.rb, direction: up
2021-09-06 11:40:26.113827 I [83306:4380] pact-broker -- (0.000696s) CREATE TABLE `environments` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255), `name` varchar(255), `display_name` varchar(255), `production` Boolean, `contacts` varchar(255), `created_at` timestamp, `updated_at` timestamp)
2021-09-06 11:40:26.114533 I [83306:4380] pact-broker -- (0.000652s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.115188 I [83306:4380] pact-broker -- (0.000608s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.115869 I [83306:4380] pact-broker -- (0.000621s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210210_create_environments_table.rb')
2021-09-06 11:40:26.115903 I [83306:4380] pact-broker -- Finished applying migration 20210210_create_environments_table.rb, direction: up, took 0.002888 seconds
2021-09-06 11:40:26.115910 I [83306:4380] pact-broker -- Begin applying migration 20210216_create_deployed_versions_table.rb, direction: up
2021-09-06 11:40:26.116767 I [83306:4380] pact-broker -- (0.000700s) CREATE TABLE `deployed_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `currently_deployed` Boolean NOT NULL, `replaced_previous_deployed_version` Boolean NOT NULL, `created_at` timestamp, `updated_at` timestamp, `undeployed_at` timestamp)
2021-09-06 11:40:26.117467 I [83306:4380] pact-broker -- (0.000652s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.118325 I [83306:4380] pact-broker -- (0.000803s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.119014 I [83306:4380] pact-broker -- (0.000606s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210216_create_deployed_versions_table.rb')
2021-09-06 11:40:26.119030 I [83306:4380] pact-broker -- Finished applying migration 20210216_create_deployed_versions_table.rb, direction: up, took 0.003117 seconds
2021-09-06 11:40:26.119037 I [83306:4380] pact-broker -- Begin applying migration 20210226_set_deployment_columns_not_null.rb, direction: up
2021-09-06 11:40:26.119097 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.119125 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.119159 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.119367 I [83306:4380] pact-broker -- (0.000152s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.119459 I [83306:4380] pact-broker -- (0.000047s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.119524 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.119723 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.119805 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.119979 I [83306:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.120098 I [83306:4380] pact-broker -- (0.000043s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.120156 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:40:26.120211 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.125012 I [83306:4380] pact-broker -- (0.004719s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.125154 I [83306:4380] pact-broker -- (0.000111s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.125240 I [83306:4380] pact-broker -- (0.000065s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.125406 I [83306:4380] pact-broker -- (0.000145s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.125502 I [83306:4380] pact-broker -- (0.000076s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.125594 I [83306:4380] pact-broker -- (0.000073s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.125778 I [83306:4380] pact-broker -- (0.000118s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.125869 I [83306:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.125934 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.126140 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.126223 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.126543 I [83306:4380] pact-broker -- (0.000151s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.127658 I [83306:4380] pact-broker -- (0.001037s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.127719 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.127780 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:40:26.132200 I [83306:4380] pact-broker -- (0.004363s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.132385 I [83306:4380] pact-broker -- (0.000161s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.132442 I [83306:4380] pact-broker -- (0.000037s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.132533 I [83306:4380] pact-broker -- (0.000072s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.132626 I [83306:4380] pact-broker -- (0.000075s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.132736 I [83306:4380] pact-broker -- (0.000065s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.132900 I [83306:4380] pact-broker -- (0.000110s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.132982 I [83306:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.133043 I [83306:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.133240 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.133316 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.133572 I [83306:4380] pact-broker -- (0.000128s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.134687 I [83306:4380] pact-broker -- (0.001022s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.134751 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:40:26.134807 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.139198 I [83306:4380] pact-broker -- (0.004337s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.139321 I [83306:4380] pact-broker -- (0.000100s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.139375 I [83306:4380] pact-broker -- (0.000035s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.139718 I [83306:4380] pact-broker -- (0.000322s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.139817 I [83306:4380] pact-broker -- (0.000077s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.139964 I [83306:4380] pact-broker -- (0.000127s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.140637 I [83306:4380] pact-broker -- (0.000646s) COMMIT
2021-09-06 11:40:26.140701 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.140742 I [83306:4380] pact-broker -- (0.000021s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.140794 I [83306:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.140819 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.140850 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.141029 I [83306:4380] pact-broker -- (0.000128s) PRAGMA table_info('environments')
2021-09-06 11:40:26.141099 I [83306:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.141160 I [83306:4380] pact-broker -- (0.000031s) PRAGMA index_list('environments')
2021-09-06 11:40:26.141311 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.141387 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.141528 I [83306:4380] pact-broker -- (0.000012s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.141658 I [83306:4380] pact-broker -- (0.000043s) PRAGMA index_list('environments')
2021-09-06 11:40:26.141710 I [83306:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.141760 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.146472 I [83306:4380] pact-broker -- (0.004655s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.146622 I [83306:4380] pact-broker -- (0.000121s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:40:26.146699 I [83306:4380] pact-broker -- (0.000056s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.146837 I [83306:4380] pact-broker -- (0.000119s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.146929 I [83306:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.147012 I [83306:4380] pact-broker -- (0.000064s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.147182 I [83306:4380] pact-broker -- (0.000116s) PRAGMA table_info('environments')
2021-09-06 11:40:26.147249 I [83306:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.147309 I [83306:4380] pact-broker -- (0.000030s) PRAGMA index_list('environments')
2021-09-06 11:40:26.147459 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.147533 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.147810 I [83306:4380] pact-broker -- (0.000144s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.148944 I [83306:4380] pact-broker -- (0.001047s) PRAGMA index_list('environments')
2021-09-06 11:40:26.149004 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.149061 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.153435 I [83306:4380] pact-broker -- (0.004322s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.153543 I [83306:4380] pact-broker -- (0.000084s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:40:26.153591 I [83306:4380] pact-broker -- (0.000029s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.153670 I [83306:4380] pact-broker -- (0.000062s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.153756 I [83306:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.153841 I [83306:4380] pact-broker -- (0.000063s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.153990 I [83306:4380] pact-broker -- (0.000101s) PRAGMA table_info('environments')
2021-09-06 11:40:26.154056 I [83306:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.154116 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_list('environments')
2021-09-06 11:40:26.154271 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.154341 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.154635 I [83306:4380] pact-broker -- (0.000142s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.155829 I [83306:4380] pact-broker -- (0.001097s) PRAGMA index_list('environments')
2021-09-06 11:40:26.155904 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.155962 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.160640 I [83306:4380] pact-broker -- (0.004611s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.160787 I [83306:4380] pact-broker -- (0.000120s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:40:26.160861 I [83306:4380] pact-broker -- (0.000052s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.161028 I [83306:4380] pact-broker -- (0.000148s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.161176 I [83306:4380] pact-broker -- (0.000128s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.161319 I [83306:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.161488 I [83306:4380] pact-broker -- (0.000109s) PRAGMA table_info('environments')
2021-09-06 11:40:26.161563 I [83306:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.161637 I [83306:4380] pact-broker -- (0.000040s) PRAGMA index_list('environments')
2021-09-06 11:40:26.161795 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.161873 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.162157 I [83306:4380] pact-broker -- (0.000140s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.163309 I [83306:4380] pact-broker -- (0.001051s) PRAGMA index_list('environments')
2021-09-06 11:40:26.163369 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.163426 I [83306:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.168039 I [83306:4380] pact-broker -- (0.004552s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.168175 I [83306:4380] pact-broker -- (0.000111s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:40:26.168247 I [83306:4380] pact-broker -- (0.000050s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.168413 I [83306:4380] pact-broker -- (0.000148s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.168563 I [83306:4380] pact-broker -- (0.000127s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.168718 I [83306:4380] pact-broker -- (0.000135s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.168857 I [83306:4380] pact-broker -- (0.000092s) PRAGMA table_info('environments')
2021-09-06 11:40:26.168929 I [83306:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.169001 I [83306:4380] pact-broker -- (0.000041s) PRAGMA index_list('environments')
2021-09-06 11:40:26.169147 I [83306:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.169228 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.169514 I [83306:4380] pact-broker -- (0.000141s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.170665 I [83306:4380] pact-broker -- (0.001059s) PRAGMA index_list('environments')
2021-09-06 11:40:26.170738 I [83306:4380] pact-broker -- (0.000034s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.170797 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.175301 I [83306:4380] pact-broker -- (0.004442s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.175439 I [83306:4380] pact-broker -- (0.000111s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:40:26.175515 I [83306:4380] pact-broker -- (0.000055s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.175686 I [83306:4380] pact-broker -- (0.000151s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.175836 I [83306:4380] pact-broker -- (0.000130s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.175987 I [83306:4380] pact-broker -- (0.000126s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.177191 I [83306:4380] pact-broker -- (0.001139s) PRAGMA table_info('environments')
2021-09-06 11:40:26.177259 I [83306:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('environments')
2021-09-06 11:40:26.177325 I [83306:4380] pact-broker -- (0.000032s) PRAGMA index_list('environments')
2021-09-06 11:40:26.177472 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.177549 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:40:26.177855 I [83306:4380] pact-broker -- (0.000144s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.178985 I [83306:4380] pact-broker -- (0.001057s) PRAGMA index_list('environments')
2021-09-06 11:40:26.179049 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:40:26.179121 I [83306:4380] pact-broker -- (0.000023s) PRAGMA index_info('environments_name_index')
2021-09-06 11:40:26.183667 I [83306:4380] pact-broker -- (0.004492s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:40:26.183801 I [83306:4380] pact-broker -- (0.000110s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:40:26.183878 I [83306:4380] pact-broker -- (0.000053s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:40:26.184049 I [83306:4380] pact-broker -- (0.000152s) DROP TABLE `environments_backup0`
2021-09-06 11:40:26.184195 I [83306:4380] pact-broker -- (0.000126s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:40:26.184336 I [83306:4380] pact-broker -- (0.000121s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:40:26.185113 I [83306:4380] pact-broker -- (0.000751s) COMMIT
2021-09-06 11:40:26.185181 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.185212 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.186792 I [83306:4380] pact-broker -- (0.001500s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210226_set_deployment_columns_not_null.rb')
2021-09-06 11:40:26.186826 I [83306:4380] pact-broker -- Finished applying migration 20210226_set_deployment_columns_not_null.rb, direction: up, took 0.067783 seconds
2021-09-06 11:40:26.186840 I [83306:4380] pact-broker -- Begin applying migration 20210301_add_pacticipant_columns.rb, direction: up
2021-09-06 11:40:26.186945 I [83306:4380] pact-broker -- (0.000027s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.186976 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.187039 I [83306:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:40:26.188630 I [83306:4380] pact-broker -- (0.001528s) ALTER TABLE `pacticipants` ADD COLUMN `display_name` varchar(255)
2021-09-06 11:40:26.189857 I [83306:4380] pact-broker -- (0.001170s) ALTER TABLE `pacticipants` ADD COLUMN `repository_name` varchar(255)
2021-09-06 11:40:26.191047 I [83306:4380] pact-broker -- (0.001144s) ALTER TABLE `pacticipants` ADD COLUMN `repository_namespace` varchar(255)
2021-09-06 11:40:26.192158 I [83306:4380] pact-broker -- (0.001065s) ALTER TABLE `pacticipants` ADD COLUMN `main_development_branches` varchar(255)
2021-09-06 11:40:26.192734 I [83306:4380] pact-broker -- (0.000547s) COMMIT
2021-09-06 11:40:26.192797 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.192828 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.193627 I [83306:4380] pact-broker -- (0.000701s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210301_add_pacticipant_columns.rb')
2021-09-06 11:40:26.193646 I [83306:4380] pact-broker -- Finished applying migration 20210301_add_pacticipant_columns.rb, direction: up, took 0.006802 seconds
2021-09-06 11:40:26.193654 I [83306:4380] pact-broker -- Begin applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up
2021-09-06 11:40:26.194616 I [83306:4380] pact-broker -- (0.000799s) CREATE TABLE `currently_deployed_version_ids` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `target_for_index` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `environment_id` integer NOT NULL REFERENCES `environments` ON DELETE CASCADE, `version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `deployed_version_id` integer NOT NULL)
2021-09-06 11:40:26.195540 I [83306:4380] pact-broker -- (0.000860s) CREATE UNIQUE INDEX `currently_deployed_version_pacticipant_environment_target_index` ON `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `target_for_index`)
2021-09-06 11:40:26.196205 I [83306:4380] pact-broker -- (0.000601s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210413_create_currently_deployed_version_ids_table.rb')
2021-09-06 11:40:26.196222 I [83306:4380] pact-broker -- Finished applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up, took 0.002564 seconds
2021-09-06 11:40:26.196228 I [83306:4380] pact-broker -- Begin applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up
2021-09-06 11:40:26.196294 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.196323 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.196360 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.197904 I [83306:4380] pact-broker -- (0.001495s) ALTER TABLE `deployed_versions` ADD COLUMN `target` varchar(255)
2021-09-06 11:40:26.199308 I [83306:4380] pact-broker -- (0.001325s) ALTER TABLE `deployed_versions` ADD COLUMN `target_for_index` varchar(255) DEFAULT ('') NOT NULL
2021-09-06 11:40:26.199502 I [83306:4380] pact-broker -- (0.000132s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.199594 I [83306:4380] pact-broker -- (0.000042s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.199687 I [83306:4380] pact-broker -- (0.000033s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.199907 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.199989 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.200316 I [83306:4380] pact-broker -- (0.000146s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.201473 I [83306:4380] pact-broker -- (0.001074s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.201536 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.201620 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:40:26.206122 I [83306:4380] pact-broker -- (0.004446s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.206252 I [83306:4380] pact-broker -- (0.000106s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.206307 I [83306:4380] pact-broker -- (0.000035s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.206462 I [83306:4380] pact-broker -- (0.000135s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.206559 I [83306:4380] pact-broker -- (0.000077s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.206648 I [83306:4380] pact-broker -- (0.000069s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.206842 I [83306:4380] pact-broker -- (0.000145s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.206924 I [83306:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.206986 I [83306:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.207187 I [83306:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.207276 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.207549 I [83306:4380] pact-broker -- (0.000141s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.208723 I [83306:4380] pact-broker -- (0.001070s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.208787 I [83306:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:40:26.208841 I [83306:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.213284 I [83306:4380] pact-broker -- (0.004389s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.213414 I [83306:4380] pact-broker -- (0.000103s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.213469 I [83306:4380] pact-broker -- (0.000033s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.213552 I [83306:4380] pact-broker -- (0.000065s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.213642 I [83306:4380] pact-broker -- (0.000071s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:40:26.213726 I [83306:4380] pact-broker -- (0.000066s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.213827 I [83306:4380] pact-broker -- (0.000049s) DROP INDEX `deployed_versions_pacticipant_id_currently_deployed_index`
2021-09-06 11:40:26.214557 I [83306:4380] pact-broker -- (0.000703s) COMMIT
2021-09-06 11:40:26.214622 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.214653 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.215403 I [83306:4380] pact-broker -- (0.000686s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210415_add_target_column_to_deployed_version.rb')
2021-09-06 11:40:26.215422 I [83306:4380] pact-broker -- Finished applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up, took 0.019189 seconds
2021-09-06 11:40:26.215430 I [83306:4380] pact-broker -- Begin applying migration 20210419_create_released_versions_table.rb, direction: up
2021-09-06 11:40:26.216369 I [83306:4380] pact-broker -- (0.000758s) CREATE TABLE `released_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `created_at` timestamp, `updated_at` timestamp, `support_ended_at` timestamp)
2021-09-06 11:40:26.217204 I [83306:4380] pact-broker -- (0.000782s) CREATE UNIQUE INDEX `released_versions_uuid_index` ON `released_versions` (`uuid`)
2021-09-06 11:40:26.218054 I [83306:4380] pact-broker -- (0.000800s) CREATE UNIQUE INDEX `released_versions_version_id_environment_id_index` ON `released_versions` (`version_id`, `environment_id`)
2021-09-06 11:40:26.218832 I [83306:4380] pact-broker -- (0.000725s) CREATE INDEX `released_version_support_ended_at_index` ON `released_versions` (`support_ended_at`)
2021-09-06 11:40:26.219533 I [83306:4380] pact-broker -- (0.000641s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210419_create_released_versions_table.rb')
2021-09-06 11:40:26.219550 I [83306:4380] pact-broker -- Finished applying migration 20210419_create_released_versions_table.rb, direction: up, took 0.004117 seconds
2021-09-06 11:40:26.219557 I [83306:4380] pact-broker -- Begin applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up
2021-09-06 11:40:26.219616 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.219644 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.219678 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.221188 I [83306:4380] pact-broker -- (0.001443s) ALTER TABLE `pacticipants` ADD COLUMN `main_branch` varchar(255)
2021-09-06 11:40:26.221738 I [83306:4380] pact-broker -- (0.000526s) COMMIT
2021-09-06 11:40:26.221791 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.221822 I [83306:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.222497 I [83306:4380] pact-broker -- (0.000627s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210529_add_main_branch_to_pacticipant.rb')
2021-09-06 11:40:26.222512 I [83306:4380] pact-broker -- Finished applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up, took 0.002953 seconds
2021-09-06 11:40:26.222519 I [83306:4380] pact-broker -- Begin applying migration 20210608_add_uuid_to_webhook.rb, direction: up
2021-09-06 11:40:26.222573 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.222601 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.222631 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.224174 I [83306:4380] pact-broker -- (0.001499s) ALTER TABLE `triggered_webhooks` ADD COLUMN `uuid` varchar(255)
2021-09-06 11:40:26.224358 I [83306:4380] pact-broker -- (0.000117s) CREATE UNIQUE INDEX `triggered_webhooks_uuid` ON `triggered_webhooks` (`uuid`)
2021-09-06 11:40:26.224967 I [83306:4380] pact-broker -- (0.000581s) COMMIT
2021-09-06 11:40:26.225035 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.225064 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.225873 I [83306:4380] pact-broker -- (0.000747s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210608_add_uuid_to_webhook.rb')
2021-09-06 11:40:26.225892 I [83306:4380] pact-broker -- Finished applying migration 20210608_add_uuid_to_webhook.rb, direction: up, took 0.003369 seconds
2021-09-06 11:40:26.225899 I [83306:4380] pact-broker -- Begin applying migration 20210609_set_webhook_uuid.rb, direction: up
2021-09-06 11:40:26.226082 I [83306:4380] pact-broker -- (0.000078s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 11:40:26.226323 I [83306:4380] pact-broker -- (0.000180s) PRAGMA table_info('triggered_webhooks')
2021-09-06 11:40:26.226627 I [83306:4380] pact-broker -- (0.000064s) UPDATE `triggered_webhooks` SET `uuid` = ('f58517d1-e294-451e-85c3-69ff1c42f856' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 11:40:26.227388 I [83306:4380] pact-broker -- (0.000707s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210609_set_webhook_uuid.rb')
2021-09-06 11:40:26.227407 I [83306:4380] pact-broker -- Finished applying migration 20210609_set_webhook_uuid.rb, direction: up, took 0.001504 seconds
2021-09-06 11:40:26.227414 I [83306:4380] pact-broker -- Begin applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up
2021-09-06 11:40:26.227478 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.227507 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.227567 I [83306:4380] pact-broker -- (0.000037s) BEGIN
2021-09-06 11:40:26.227782 I [83306:4380] pact-broker -- (0.000163s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.227898 I [83306:4380] pact-broker -- (0.000065s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.227965 I [83306:4380] pact-broker -- (0.000028s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.228182 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.228258 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.228437 I [83306:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.228567 I [83306:4380] pact-broker -- (0.000052s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.228624 I [83306:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.234430 I [83306:4380] pact-broker -- (0.005757s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.234625 I [83306:4380] pact-broker -- (0.000163s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.234682 I [83306:4380] pact-broker -- (0.000036s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.234805 I [83306:4380] pact-broker -- (0.000103s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.234896 I [83306:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.235134 I [83306:4380] pact-broker -- (0.000173s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.235243 I [83306:4380] pact-broker -- (0.000044s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:40:26.235309 I [83306:4380] pact-broker -- (0.000027s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.235504 I [83306:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:40:26.235578 E [83306:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:40:26.235882 I [83306:4380] pact-broker -- (0.000152s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:40:26.237061 I [83306:4380] pact-broker -- (0.001104s) PRAGMA index_list('deployed_versions')
2021-09-06 11:40:26.237123 I [83306:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:40:26.241532 I [83306:4380] pact-broker -- (0.004358s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:40:26.241669 I [83306:4380] pact-broker -- (0.000104s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:40:26.241724 I [83306:4380] pact-broker -- (0.000034s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:40:26.241803 I [83306:4380] pact-broker -- (0.000061s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:40:26.241890 I [83306:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:40:26.242642 I [83306:4380] pact-broker -- (0.000725s) COMMIT
2021-09-06 11:40:26.242713 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.242742 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.243532 I [83306:4380] pact-broker -- (0.000725s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210702_drop_unused_columns_from_deployed_versions.rb')
2021-09-06 11:40:26.243550 I [83306:4380] pact-broker -- Finished applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up, took 0.016132 seconds
2021-09-06 11:40:26.243557 I [83306:4380] pact-broker -- Begin applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up
2021-09-06 11:40:26.243641 I [83306:4380] pact-broker -- (0.000036s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.243670 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.243704 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.245245 I [83306:4380] pact-broker -- (0.001488s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_version_order` integer
2021-09-06 11:40:26.245754 I [83306:4380] pact-broker -- (0.000481s) COMMIT
2021-09-06 11:40:26.245818 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.245849 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.246697 I [83306:4380] pact-broker -- (0.000790s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210711_add_consumer_version_order_to_pact_publication.rb')
2021-09-06 11:40:26.246715 I [83306:4380] pact-broker -- Finished applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up, took 0.003155 seconds
2021-09-06 11:40:26.246722 I [83306:4380] pact-broker -- Begin applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up
2021-09-06 11:40:26.246781 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.246811 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.246843 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.248374 I [83306:4380] pact-broker -- (0.001458s) ALTER TABLE `pact_versions` ADD COLUMN `messages_count` integer
2021-09-06 11:40:26.249658 I [83306:4380] pact-broker -- (0.001236s) ALTER TABLE `pact_versions` ADD COLUMN `interactions_count` integer
2021-09-06 11:40:26.250234 I [83306:4380] pact-broker -- (0.000548s) COMMIT
2021-09-06 11:40:26.250293 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.250324 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.251103 I [83306:4380] pact-broker -- (0.000722s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210712_add_interaction_count_to_pact_versions.rb')
2021-09-06 11:40:26.251122 I [83306:4380] pact-broker -- Finished applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up, took 0.004395 seconds
2021-09-06 11:40:26.251129 I [83306:4380] pact-broker -- Begin applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up
2021-09-06 11:40:26.251189 I [83306:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.251219 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.251252 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.251619 I [83306:4380] pact-broker -- (0.000300s) CREATE INDEX `triggered_webhooks_webhook_uuid_index` ON `triggered_webhooks` (`webhook_uuid`)
2021-09-06 11:40:26.252172 I [83306:4380] pact-broker -- (0.000526s) COMMIT
2021-09-06 11:40:26.252230 I [83306:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.252261 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.253025 I [83306:4380] pact-broker -- (0.000714s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210722_add_index_to_triggered_webhooks_webhook_uuid.rb')
2021-09-06 11:40:26.253043 I [83306:4380] pact-broker -- Finished applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up, took 0.001911 seconds
2021-09-06 11:40:26.253050 I [83306:4380] pact-broker -- Begin applying migration 20210810_set_allow_contract_modification.rb, direction: up
2021-09-06 11:40:26.253229 I [83306:4380] pact-broker -- (0.000082s) SELECT count(*) AS 'count' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.253916 I [83306:4380] pact-broker -- (0.000633s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210810_set_allow_contract_modification.rb')
2021-09-06 11:40:26.253932 I [83306:4380] pact-broker -- Finished applying migration 20210810_set_allow_contract_modification.rb, direction: up, took 0.000880 seconds
2021-09-06 11:40:26.253939 I [83306:4380] pact-broker -- Begin applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up
2021-09-06 11:40:26.254023 I [83306:4380] pact-broker -- (0.000043s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.254053 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.254085 I [83306:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:40:26.254395 I [83306:4380] pact-broker -- (0.000274s) CREATE INDEX `verifications_pact_version_id_id_index` ON `verifications` (`pact_version_id`, `id`)
2021-09-06 11:40:26.254855 I [83306:4380] pact-broker -- (0.000436s) COMMIT
2021-09-06 11:40:26.254906 I [83306:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.254934 I [83306:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.255646 I [83306:4380] pact-broker -- (0.000664s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210815_add_provider_version_id_index_to_verifications.rb')
2021-09-06 11:40:26.255663 I [83306:4380] pact-broker -- Finished applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up, took 0.001720 seconds
2021-09-06 11:40:26.255670 I [83306:4380] pact-broker -- Begin applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up
2021-09-06 11:40:26.255726 I [83306:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:40:26.255754 I [83306:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:40:26.255784 I [83306:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:40:26.257353 I [83306:4380] pact-broker -- (0.001501s) ALTER TABLE `verifications` ADD COLUMN `consumer_version_selector_hashes` varchar(255)
2021-09-06 11:40:26.258642 I [83306:4380] pact-broker -- (0.001236s) ALTER TABLE `verifications` ADD COLUMN `tag_names` varchar(255)
2021-09-06 11:40:26.259159 I [83306:4380] pact-broker -- (0.000489s) COMMIT
2021-09-06 11:40:26.259228 I [83306:4380] pact-broker -- (0.000019s) PRAGMA foreign_keys = 1
2021-09-06 11:40:26.259259 I [83306:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:40:26.259948 I [83306:4380] pact-broker -- (0.000632s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210818_add_consumer_version_selectors_to_verification.rb')
2021-09-06 11:40:26.259966 I [83306:4380] pact-broker -- Finished applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up, took 0.004292 seconds
2021-09-06 11:40:26.260362 I [83306:4380] pact-broker -- (0.000268s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:40:26.260555 I [83306:4380] pact-broker -- (0.000101s) SELECT * FROM `schema_migrations` ORDER BY `filename` DESC LIMIT 1
2021-09-06 11:40:26.260575 I [83306:4380] PactBroker::App -- Database schema version is now 20210818
2021-09-06 11:40:26.260585 I [83306:4380] PactBroker::App -- Migrating data
2021-09-06 11:40:26.260766 I [83306:4380] pact-broker -- (0.000061s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.261006 I [83306:4380] pact-broker -- (0.000184s) PRAGMA table_info('verifications')
2021-09-06 11:40:26.261188 I [83306:4380] pact-broker -- (0.000060s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.261348 I [83306:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:40:26.261469 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.261655 I [83306:4380] pact-broker -- (0.000140s) PRAGMA table_info('pact_versions')
2021-09-06 11:40:26.261791 I [83306:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.261917 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.262028 I [83306:4380] pact-broker -- (0.000078s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 11:40:26.262145 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.262316 I [83306:4380] pact-broker -- (0.000106s) PRAGMA table_info('pact_publications')
2021-09-06 11:40:26.262448 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.262566 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.262739 I [83306:4380] pact-broker -- (0.000129s) PRAGMA table_info('versions')
2021-09-06 11:40:26.262878 I [83306:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.262970 I [83306:4380] pact-broker -- (0.000060s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 11:40:26.263094 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.263239 I [83306:4380] pact-broker -- (0.000054s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.263375 I [83306:4380] pact-broker -- (0.000060s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 11:40:26.263470 I [83306:4380] pact-broker -- (0.000053s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.263582 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:40:26.263726 I [83306:4380] pact-broker -- (0.000051s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 11:40:26.263843 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhook_executions` LIMIT 1
2021-09-06 11:40:26.264012 I [83306:4380] pact-broker -- (0.000123s) PRAGMA table_info('webhook_executions')
2021-09-06 11:40:26.264140 I [83306:4380] pact-broker -- (0.000052s) DELETE FROM `webhook_executions` WHERE (`triggered_webhook_id` IS NULL)
2021-09-06 11:40:26.264255 I [83306:4380] pact-broker -- (0.000073s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 11:40:26.264340 I [83306:4380] pact-broker -- (0.000051s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 11:40:26.264460 I [83306:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.264604 I [83306:4380] pact-broker -- (0.000097s) PRAGMA table_info('tags')
2021-09-06 11:40:26.264736 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.264854 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.264944 I [83306:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.265115 I [83306:4380] pact-broker -- (0.000060s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 11:40:26.265236 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.265331 I [83306:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.265420 I [83306:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.265532 I [83306:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.265690 I [83306:4380] pact-broker -- (0.000058s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 11:40:26.265806 I [83306:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:40:26.265991 I [83306:4380] pact-broker -- (0.000139s) PRAGMA table_info('pacticipants')
2021-09-06 11:40:26.266136 I [83306:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:40:26.266267 I [83306:4380] pact-broker -- (0.000069s) SELECT * FROM `pacticipants` WHERE (`display_name` IS NULL)
2021-09-06 11:40:26.266411 I [83306:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:40:26.266502 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:40:26.266591 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:40:26.266680 I [83306:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.266767 I [83306:4380] pact-broker -- (0.000043s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.266882 I [83306:4380] pact-broker -- (0.000051s) SELECT `id`, `name` FROM `pacticipants` WHERE (`main_branch` IS NULL)
2021-09-06 11:40:26.267020 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 11:40:26.267207 I [83306:4380] pact-broker -- (0.000142s) PRAGMA table_info('triggered_webhooks')
2021-09-06 11:40:26.267452 I [83306:4380] pact-broker -- (0.000078s) UPDATE `triggered_webhooks` SET `uuid` = ('939d577b-263d-4363-a1cf-1389d1805edc' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 11:40:26.267581 I [83306:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.267676 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:40:26.267768 I [83306:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.267856 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.268034 I [83306:4380] pact-broker -- (0.000057s) UPDATE `pact_publications` SET `consumer_version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `pact_publications`.`consumer_version_id`)) WHERE (`consumer_version_order` IS NULL)
2021-09-06 11:40:26.268122 I [83306:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.268213 I [83306:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.268302 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.268391 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.268546 I [83306:4380] pact-broker -- (0.000057s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 11:40:26.268657 I [83306:4380] pact-broker -- (0.000071s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.268746 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:40:26.268834 I [83306:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.268921 I [83306:4380] pact-broker -- (0.000043s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:40:26.269074 I [83306:4380] pact-broker -- (0.000057s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 11:40:26.282156 I [83306:4380] pact-broker -- (0.000213s) PRAGMA table_info('tags_with_latest_flag')
2021-09-06 11:40:26.288511 I [83306:4380] pact-broker -- (0.000179s) PRAGMA table_info('latest_versions')
2021-09-06 11:40:26.289506 I [83306:4380] pact-broker -- (0.000126s) PRAGMA table_info('labels')
2021-09-06 11:40:26.524016 I [83306:4380] pact-broker -- (0.000154s) PRAGMA table_info('webhook_events')
2021-09-06 11:40:26.543314 I [83306:4380] pact-broker -- (0.000250s) PRAGMA table_info('latest_verifications_for_pact_versions')
2021-09-06 11:40:26.544445 I [83306:4380] pact-broker -- (0.000111s) PRAGMA table_info('latest_verification_id_for_pact_version_and_provider_version')
2021-09-06 11:40:26.550595 I [83306:4380] pact-broker -- (0.000139s) SELECT `webhook_executions`.`id`, `triggered_webhook_id`, `success`, `logs`, `webhook_executions`.`created_at` FROM `webhook_executions` LIMIT 1
2021-09-06 11:40:26.553832 I [83306:4380] pact-broker -- (0.000194s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' LIMIT 1
2021-09-06 11:40:26.557517 I [83306:4380] pact-broker -- (0.000131s) PRAGMA table_info('integrations')
2021-09-06 11:40:26.559018 I [83306:4380] pact-broker -- (0.000149s) PRAGMA table_info('head_pact_tags')
2021-09-06 11:40:26.569049 I [83306:4380] pact-broker -- (0.000211s) PRAGMA table_info('all_pact_publications')
2021-09-06 11:40:26.571505 I [83306:4380] pact-broker -- (0.000268s) PRAGMA table_info('latest_pact_publications_by_consumer_versions')
2021-09-06 11:40:26.573064 I [83306:4380] pact-broker -- (0.000278s) PRAGMA table_info('latest_pact_publications')
2021-09-06 11:40:26.574244 I [83306:4380] pact-broker -- (0.000332s) PRAGMA table_info('latest_tagged_pact_publications')
2021-09-06 11:40:26.578941 I [83306:4380] pact-broker -- (0.000363s) PRAGMA table_info('latest_verifications_for_consumer_version_tags')
2021-09-06 11:40:26.580671 I [83306:4380] pact-broker -- (0.000305s) PRAGMA table_info('latest_verifications_for_consumer_and_provider')
2021-09-06 11:40:26.582370 I [83306:4380] pact-broker -- (0.001091s) PRAGMA table_info('matrix')
2021-09-06 11:40:26.587557 I [83306:4380] pact-broker -- (0.000468s) PRAGMA table_info('head_matrix')
2021-09-06 11:40:26.589592 I [83306:4380] pact-broker -- (0.000110s) PRAGMA table_info('latest_pact_publication_ids_for_consumer_versions')
2021-09-06 11:40:26.641764 I [83306:4380] pact-broker -- (0.000105s) UPDATE `triggered_webhooks` SET `status` = 'failure' WHERE (`status` = 'retrying')
2021-09-06 11:40:26.643130 I [83306:4380] pact-broker -- (0.000139s) PRAGMA table_info('config')
2021-09-06 11:40:26.643817 I [83306:4380] pact-broker -- (0.000102s) SELECT * FROM `config`
2021-09-06 11:40:26.643836 I [83306:4380] PactBroker::App -- Seeding example data
2021-09-06 11:40:26.667168 I [83306:4380] pact-broker -- (0.000119s) PRAGMA table_info('verification_sequence_number')
2021-09-06 11:40:26.671302 I [83306:4380] pact-broker -- (0.000162s) PRAGMA table_info('certificates')
2021-09-06 11:40:26.673621 I [83306:4380] pact-broker -- (0.000141s) PRAGMA table_info('environments')
2021-09-06 11:40:26.676577 I [83306:4380] pact-broker -- (0.000213s) PRAGMA table_info('currently_deployed_version_ids')
2021-09-06 11:40:26.677642 I [83306:4380] pact-broker -- (0.000183s) PRAGMA table_info('deployed_versions')
2021-09-06 11:40:26.680664 I [83306:4380] pact-broker -- (0.000180s) PRAGMA table_info('released_versions')
2021-09-06 11:40:26.682268 I [83306:4380] pact-broker -- (0.000114s) SELECT `pacticipants`.* FROM `pacticipants` ORDER BY lower(`pacticipants`.`name`)
2021-09-06 11:40:26.682732 I [83306:4380] pact-broker -- (0.000019s) BEGIN
2021-09-06 11:40:26.683185 I [83306:4380] pact-broker -- (0.000274s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Test', 0, 'test', '69abbf31-5c72-4fba-8d5c-6e7ad5e0517d', '2021-09-06 07:40:26.682603', '2021-09-06 07:40:26.682603')
2021-09-06 11:40:26.683725 I [83306:4380] pact-broker -- (0.000461s) SELECT * FROM `environments` WHERE `id` = 1
2021-09-06 11:40:26.684245 I [83306:4380] pact-broker -- (0.000490s) COMMIT
2021-09-06 11:40:26.684968 I [83306:4380] pact-broker -- (0.000606s) UPDATE `environments` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 1)
2021-09-06 11:40:26.685632 I [83306:4380] pact-broker -- (0.000553s) UPDATE `environments` SET `updated_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 1)
2021-09-06 11:40:26.685812 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.686180 I [83306:4380] pact-broker -- (0.000276s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Production', 1, 'production', 'a7089d29-6673-4a15-8736-57867455540b', '2021-09-06 07:40:26.685715', '2021-09-06 07:40:26.685715')
2021-09-06 11:40:26.686412 I [83306:4380] pact-broker -- (0.000175s) SELECT * FROM `environments` WHERE `id` = 2
2021-09-06 11:40:26.686951 I [83306:4380] pact-broker -- (0.000514s) COMMIT
2021-09-06 11:40:26.687673 I [83306:4380] pact-broker -- (0.000613s) UPDATE `environments` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 2)
2021-09-06 11:40:26.688333 I [83306:4380] pact-broker -- (0.000568s) UPDATE `environments` SET `updated_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 2)
2021-09-06 11:40:26.688627 I [83306:4380] pact-broker -- (0.000017s) BEGIN
2021-09-06 11:40:26.689144 I [83306:4380] pact-broker -- (0.000273s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example App', 'https://github.com/example-organization/Example App', '2021-08-21 07:40:26.688348', '2021-09-06 07:40:26.688569', 'Example App', NULL)
2021-09-06 11:40:26.689401 I [83306:4380] pact-broker -- (0.000191s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.689895 I [83306:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 11:40:26.690046 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.690464 I [83306:4380] pact-broker -- (0.000254s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example API', 'https://github.com/example-organization/Example API', '2021-08-21 07:40:26.689950', '2021-09-06 07:40:26.689996', 'Example API', NULL)
2021-09-06 11:40:26.690751 I [83306:4380] pact-broker -- (0.000191s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.691235 I [83306:4380] pact-broker -- (0.000457s) COMMIT
2021-09-06 11:40:26.691695 I [83306:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:40:26.692109 I [83306:4380] pact-broker -- (0.000310s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('e15da45d3943bf10793a6d04cfb9f5dabe430fe2', 1, 'main', NULL, '2021-09-06 07:40:26.691595', '2021-09-06 07:40:26.691595')
2021-09-06 11:40:26.692340 I [83306:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:40:26.692604 I [83306:4380] pact-broker -- (0.000158s) SELECT * FROM `versions` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:40:26.692736 I [83306:4380] pact-broker -- (0.000046s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.692910 I [83306:4380] pact-broker -- (0.000094s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.692994 I [83306:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.693083 I [83306:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 101 WHERE (`id` = 1)
2021-09-06 11:40:26.693255 I [83306:4380] pact-broker -- (0.000145s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:40:26.693753 I [83306:4380] pact-broker -- (0.000474s) COMMIT
2021-09-06 11:40:26.694398 I [83306:4380] pact-broker -- (0.000530s) UPDATE `versions` SET `created_at` = '2021-08-21 07:40:26.691255' WHERE (`id` = 1)
2021-09-06 11:40:26.695033 I [83306:4380] pact-broker -- (0.000545s) UPDATE `versions` SET `updated_at` = '2021-08-21 07:40:26.691255' WHERE (`id` = 1)
2021-09-06 11:40:26.695405 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.695865 I [83306:4380] pact-broker -- (0.000314s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('prod', 1, '2021-09-06 07:40:26.695335', '2021-09-06 07:40:26.695335', 101, 1)
2021-09-06 11:40:26.696147 I [83306:4380] pact-broker -- (0.000175s) SELECT * FROM `tags` WHERE ((`name` = 'prod') AND (`version_id` = 1)) LIMIT 1
2021-09-06 11:40:26.696632 I [83306:4380] pact-broker -- (0.000459s) COMMIT
2021-09-06 11:40:26.697282 I [83306:4380] pact-broker -- (0.000530s) UPDATE `tags` SET `created_at` = '2021-08-21 07:40:26.695043' WHERE ((`name` = 'prod') AND (`version_id` = 1))
2021-09-06 11:40:26.697923 I [83306:4380] pact-broker -- (0.000523s) UPDATE `tags` SET `updated_at` = '2021-08-21 07:40:26.695043' WHERE (`name` = 'prod')
2021-09-06 11:40:26.698043 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.698478 I [83306:4380] pact-broker -- (0.000307s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 1, '2021-09-06 07:40:26.697981', '2021-09-06 07:40:26.697981', 101, 1)
2021-09-06 11:40:26.698752 I [83306:4380] pact-broker -- (0.000173s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 1)) LIMIT 1
2021-09-06 11:40:26.699224 I [83306:4380] pact-broker -- (0.000448s) COMMIT
2021-09-06 11:40:26.699875 I [83306:4380] pact-broker -- (0.000533s) UPDATE `tags` SET `created_at` = '2021-08-21 07:40:26.697933' WHERE ((`name` = 'main') AND (`version_id` = 1))
2021-09-06 11:40:26.700486 I [83306:4380] pact-broker -- (0.000525s) UPDATE `tags` SET `updated_at` = '2021-08-21 07:40:26.697933' WHERE (`name` = 'main')
2021-09-06 11:40:26.700860 I [83306:4380] pact-broker -- (0.000216s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:40:26.701218 I [83306:4380] pact-broker -- (0.000130s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:40:26.701483 I [83306:4380] pact-broker -- (0.000215s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.701733 I [83306:4380] pact-broker -- (0.000078s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.701564' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.702150 I [83306:4380] pact-broker -- (0.000023s) BEGIN
2021-09-06 11:40:26.702511 I [83306:4380] pact-broker -- (0.000242s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('70c0990c-8cd2-43ed-995f-fc7a3fdb7b15', 1, 1, 2, NULL, '2021-09-06 07:40:26.702063', '2021-09-06 07:40:26.702063', '')
2021-09-06 11:40:26.702759 I [83306:4380] pact-broker -- (0.000169s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 11:40:26.703076 I [83306:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:40:26.703246 I [83306:4380] pact-broker -- (0.000091s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 1)
2021-09-06 11:40:26.703346 I [83306:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 11:40:26.703874 I [83306:4380] pact-broker -- (0.000481s) COMMIT
2021-09-06 11:40:26.704229 I [83306:4380] pact-broker -- (0.000122s) SELECT * FROM `currently_deployed_version_ids` WHERE (`currently_deployed_version_ids`.`deployed_version_id` = 1) LIMIT 1
2021-09-06 11:40:26.704876 I [83306:4380] pact-broker -- (0.000598s) DELETE FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 11:40:26.705539 I [83306:4380] pact-broker -- (0.000513s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.704929' WHERE ((`id` = 1) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.705845 I [83306:4380] pact-broker -- (0.000267s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 11:40:26.706481 I [83306:4380] pact-broker -- (0.000531s) UPDATE `deployed_versions` SET `created_at` = '2021-08-21 07:40:26.700495' WHERE (`id` = 1)
2021-09-06 11:40:26.707109 I [83306:4380] pact-broker -- (0.000532s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-21 07:40:26.700495' WHERE (`id` = 1)
2021-09-06 11:40:26.707823 I [83306:4380] pact-broker -- (0.000082s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.708149 I [83306:4380] pact-broker -- (0.000097s) SELECT * FROM `pact_versions` WHERE ((`sha` = '64cae7e32cafa53621693e516338df283a2160f1') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.710610 I [83306:4380] pact-broker -- (0.000084s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:40:26.710677 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.711031 I [83306:4380] pact-broker -- (0.000241s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '64cae7e32cafa53621693e516338df283a2160f1', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:40:26.708160', 1, 0)
2021-09-06 11:40:26.711196 I [83306:4380] pact-broker -- (0.000105s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 11:40:26.711700 I [83306:4380] pact-broker -- (0.000476s) COMMIT
2021-09-06 11:40:26.712194 I [83306:4380] pact-broker -- (0.000092s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:40:26.712279 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.712640 I [83306:4380] pact-broker -- (0.000268s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (1, 2, 1, 1, 1, 101, '2021-09-06 07:40:26.712217')
2021-09-06 11:40:26.712828 I [83306:4380] pact-broker -- (0.000106s) SELECT * FROM `pact_publications` WHERE `id` = 1
2021-09-06 11:40:26.713381 I [83306:4380] pact-broker -- (0.000525s) COMMIT
2021-09-06 11:40:26.713655 I [83306:4380] pact-broker -- (0.000188s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:40:26.714003 I [83306:4380] pact-broker -- (0.000074s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.714053 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.714383 I [83306:4380] pact-broker -- (0.000247s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (1, 2, 1, 1, 1, '2021-08-21 07:40:26.691255')
2021-09-06 11:40:26.714577 I [83306:4380] pact-broker -- (0.000099s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 11:40:26.715120 I [83306:4380] pact-broker -- (0.000515s) COMMIT
2021-09-06 11:40:26.715321 I [83306:4380] pact-broker -- (0.000149s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 11:40:26.715586 I [83306:4380] pact-broker -- (0.000194s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.715829 I [83306:4380] pact-broker -- (0.000160s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.716271 I [83306:4380] pact-broker -- (0.000258s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 11:40:26.716596 I [83306:4380] pact-broker -- (0.000124s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.716851 I [83306:4380] pact-broker -- (0.000110s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.717170 I [83306:4380] pact-broker -- (0.000137s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 11:40:26.717292 I [83306:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.717993 I [83306:4380] pact-broker -- (0.000609s) UPDATE `pact_publications` SET `created_at` = '2021-08-21 07:40:26.707398' WHERE (`id` = 1)
2021-09-06 11:40:26.718795 I [83306:4380] pact-broker -- (0.000700s) UPDATE `pact_versions` SET `created_at` = '2021-08-21 07:40:26.707398' WHERE (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')
2021-09-06 11:40:26.719568 I [83306:4380] pact-broker -- (0.000676s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-21 07:40:26.707398' WHERE (`consumer_version_id` = 1)
2021-09-06 11:40:26.719845 I [83306:4380] pact-broker -- (0.000172s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:40:26.720053 I [83306:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.720254 I [83306:4380] pact-broker -- (0.000160s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.720468 I [83306:4380] pact-broker -- (0.000157s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:40:26.720754 I [83306:4380] pact-broker -- (0.000240s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 11:40:26.721055 I [83306:4380] pact-broker -- (0.000147s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.721250 I [83306:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.721427 I [83306:4380] pact-broker -- (0.000131s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 11:40:26.721719 I [83306:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 11:40:26.722186 I [83306:4380] pact-broker -- (0.000142s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:40:26.722393 I [83306:4380] pact-broker -- (0.000078s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.722420 I [83306:4380] PactBroker::Versions::Repository -- Upserting version 1315e0b1924cb6f42751f977789be3559373033a for pacticipant_id=2
2021-09-06 11:40:26.722646 I [83306:4380] pact-broker -- (0.000076s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.722724 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.723117 I [83306:4380] pact-broker -- (0.000300s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('1315e0b1924cb6f42751f977789be3559373033a', 2, '2021-09-06 07:40:26.722425', '2021-09-06 07:40:26.722669')
2021-09-06 11:40:26.723320 I [83306:4380] pact-broker -- (0.000143s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 11:40:26.723643 I [83306:4380] pact-broker -- (0.000245s) SELECT * FROM `versions` WHERE (`id` = 2) LIMIT 1
2021-09-06 11:40:26.723766 I [83306:4380] pact-broker -- (0.000049s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.723903 I [83306:4380] pact-broker -- (0.000058s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.723965 I [83306:4380] pact-broker -- (0.000038s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.724055 I [83306:4380] pact-broker -- (0.000031s) UPDATE `versions` SET `order` = 102 WHERE (`id` = 2)
2021-09-06 11:40:26.724218 I [83306:4380] pact-broker -- (0.000134s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 11:40:26.724776 I [83306:4380] pact-broker -- (0.000516s) COMMIT
2021-09-06 11:40:26.725043 I [83306:4380] pact-broker -- (0.000096s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 2) ORDER BY `created_at`
2021-09-06 11:40:26.725159 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.725597 I [83306:4380] pact-broker -- (0.000313s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-08-22 07:40:26.721769', 1, 2, 2, 1, '2021-09-06 07:40:26.725074', '{"some":"results"}', '[]')
2021-09-06 11:40:26.725822 I [83306:4380] pact-broker -- (0.000163s) SELECT * FROM `verifications` WHERE `id` = 1
2021-09-06 11:40:26.726475 I [83306:4380] pact-broker -- (0.000624s) COMMIT
2021-09-06 11:40:26.726901 I [83306:4380] pact-broker -- (0.000105s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:40:26.726956 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.727318 I [83306:4380] pact-broker -- (0.000255s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 2, 2, 1, 1, '2021-09-06 07:40:26.725074')
2021-09-06 11:40:26.727521 I [83306:4380] pact-broker -- (0.000103s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:40:26.728194 I [83306:4380] pact-broker -- (0.000618s) COMMIT
2021-09-06 11:40:26.728403 I [83306:4380] pact-broker -- (0.000158s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:40:26.728696 I [83306:4380] pact-broker -- (0.000182s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '1315e0b1924cb6f42751f977789be3559373033a')) LIMIT 1
2021-09-06 11:40:26.728773 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.729146 I [83306:4380] pact-broker -- (0.000234s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.728785', `branch` = 'main' WHERE (`id` = 2)
2021-09-06 11:40:26.729926 I [83306:4380] pact-broker -- (0.000751s) COMMIT
2021-09-06 11:40:26.730668 I [83306:4380] pact-broker -- (0.000640s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 1)
2021-09-06 11:40:26.731356 I [83306:4380] pact-broker -- (0.000584s) UPDATE `versions` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 2)
2021-09-06 11:40:26.732034 I [83306:4380] pact-broker -- (0.000580s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 2)
2021-09-06 11:40:26.732302 I [83306:4380] pact-broker -- (0.000166s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:40:26.732974 I [83306:4380] pact-broker -- (0.000575s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2))
2021-09-06 11:40:26.733349 I [83306:4380] pact-broker -- (0.000214s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:40:26.733639 I [83306:4380] pact-broker -- (0.000123s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:40:26.733855 I [83306:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.734069 I [83306:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.733913' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.734249 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.734598 I [83306:4380] pact-broker -- (0.000236s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('16ce4499-220e-4abd-a6c6-f0dad6e3154d', 2, 2, 2, NULL, '2021-09-06 07:40:26.734172', '2021-09-06 07:40:26.734172', '')
2021-09-06 11:40:26.734798 I [83306:4380] pact-broker -- (0.000141s) SELECT * FROM `deployed_versions` WHERE `id` = 2
2021-09-06 11:40:26.734986 I [83306:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:40:26.735167 I [83306:4380] pact-broker -- (0.000079s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 2, 2, '', 2)
2021-09-06 11:40:26.735267 I [83306:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 2
2021-09-06 11:40:26.735732 I [83306:4380] pact-broker -- (0.000439s) COMMIT
2021-09-06 11:40:26.736358 I [83306:4380] pact-broker -- (0.000534s) UPDATE `deployed_versions` SET `created_at` = '2021-08-22 07:40:26.732997' WHERE (`id` = 2)
2021-09-06 11:40:26.737101 I [83306:4380] pact-broker -- (0.000656s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-22 07:40:26.732997' WHERE (`id` = 2)
2021-09-06 11:40:26.737409 I [83306:4380] pact-broker -- (0.000182s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:40:26.737699 I [83306:4380] pact-broker -- (0.000120s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:40:26.737890 I [83306:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.737753' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.738030 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.738357 I [83306:4380] pact-broker -- (0.000227s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('7ff499eb-79e6-4c78-8cea-44242f4e5929', 1, 1, 2, NULL, '2021-09-06 07:40:26.737963', '2021-09-06 07:40:26.737963', '')
2021-09-06 11:40:26.738572 I [83306:4380] pact-broker -- (0.000159s) SELECT * FROM `deployed_versions` WHERE `id` = 3
2021-09-06 11:40:26.738746 I [83306:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:40:26.738894 I [83306:4380] pact-broker -- (0.000075s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 3)
2021-09-06 11:40:26.738990 I [83306:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 3
2021-09-06 11:40:26.739541 I [83306:4380] pact-broker -- (0.000524s) COMMIT
2021-09-06 11:40:26.740307 I [83306:4380] pact-broker -- (0.000668s) UPDATE `deployed_versions` SET `created_at` = '2021-08-23 07:40:26.737112' WHERE (`id` = 3)
2021-09-06 11:40:26.741027 I [83306:4380] pact-broker -- (0.000631s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-23 07:40:26.737112' WHERE (`id` = 3)
2021-09-06 11:40:26.741387 I [83306:4380] pact-broker -- (0.000182s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:40:26.741569 I [83306:4380] pact-broker -- (0.000078s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.741585 I [83306:4380] PactBroker::Versions::Repository -- Upserting version 480e5aeb30467856ca995d0024d2c1800b0719e5 for pacticipant_id=2
2021-09-06 11:40:26.741806 I [83306:4380] pact-broker -- (0.000075s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.741881 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.742271 I [83306:4380] pact-broker -- (0.000295s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('480e5aeb30467856ca995d0024d2c1800b0719e5', 2, '2021-09-06 07:40:26.741589', '2021-09-06 07:40:26.741827')
2021-09-06 11:40:26.742484 I [83306:4380] pact-broker -- (0.000155s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 11:40:26.742680 I [83306:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 3) LIMIT 1
2021-09-06 11:40:26.742765 I [83306:4380] pact-broker -- (0.000043s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.742885 I [83306:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.742942 I [83306:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.743048 I [83306:4380] pact-broker -- (0.000032s) UPDATE `versions` SET `order` = 103 WHERE (`id` = 3)
2021-09-06 11:40:26.743200 I [83306:4380] pact-broker -- (0.000126s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 11:40:26.743731 I [83306:4380] pact-broker -- (0.000505s) COMMIT
2021-09-06 11:40:26.743930 I [83306:4380] pact-broker -- (0.000100s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 3) ORDER BY `created_at`
2021-09-06 11:40:26.744032 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.744445 I [83306:4380] pact-broker -- (0.000306s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (0, 2, 0, '2021-08-23 07:40:26.741038', 1, 3, 2, 1, '2021-09-06 07:40:26.743957', '{"some":"results"}', '[]')
2021-09-06 11:40:26.744684 I [83306:4380] pact-broker -- (0.000179s) SELECT * FROM `verifications` WHERE `id` = 2
2021-09-06 11:40:26.745173 I [83306:4380] pact-broker -- (0.000463s) COMMIT
2021-09-06 11:40:26.745420 I [83306:4380] pact-broker -- (0.000084s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:40:26.745469 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.745798 I [83306:4380] pact-broker -- (0.000246s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 3, 2, 2, 1, '2021-09-06 07:40:26.743957')
2021-09-06 11:40:26.745992 I [83306:4380] pact-broker -- (0.000100s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:40:26.746404 I [83306:4380] pact-broker -- (0.000387s) COMMIT
2021-09-06 11:40:26.746602 I [83306:4380] pact-broker -- (0.000155s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:40:26.746870 I [83306:4380] pact-broker -- (0.000170s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5')) LIMIT 1
2021-09-06 11:40:26.746936 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.747265 I [83306:4380] pact-broker -- (0.000210s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.746947', `branch` = 'main' WHERE (`id` = 3)
2021-09-06 11:40:26.747686 I [83306:4380] pact-broker -- (0.000396s) COMMIT
2021-09-06 11:40:26.748360 I [83306:4380] pact-broker -- (0.000582s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 2)
2021-09-06 11:40:26.748969 I [83306:4380] pact-broker -- (0.000516s) UPDATE `versions` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 3)
2021-09-06 11:40:26.749581 I [83306:4380] pact-broker -- (0.000525s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 3)
2021-09-06 11:40:26.749844 I [83306:4380] pact-broker -- (0.000146s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:40:26.750451 I [83306:4380] pact-broker -- (0.000515s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3))
2021-09-06 11:40:26.750609 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.751050 I [83306:4380] pact-broker -- (0.000319s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 3, '2021-09-06 07:40:26.750541', '2021-09-06 07:40:26.750541', 103, 2)
2021-09-06 11:40:26.751336 I [83306:4380] pact-broker -- (0.000184s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 3)) LIMIT 1
2021-09-06 11:40:26.751825 I [83306:4380] pact-broker -- (0.000464s) COMMIT
2021-09-06 11:40:26.752478 I [83306:4380] pact-broker -- (0.000547s) UPDATE `tags` SET `created_at` = '2021-08-23 07:40:26.750473' WHERE ((`name` = 'main') AND (`version_id` = 3))
2021-09-06 11:40:26.753057 I [83306:4380] pact-broker -- (0.000489s) UPDATE `tags` SET `updated_at` = '2021-08-23 07:40:26.750473' WHERE (`name` = 'main')
2021-09-06 11:40:26.753199 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.753598 I [83306:4380] pact-broker -- (0.000305s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('725c6ccb7cf7efc51b4394f9828585eea9c379d9', 1, 'feat/new-thing', NULL, '2021-09-06 07:40:26.753135', '2021-09-06 07:40:26.753135')
2021-09-06 11:40:26.753837 I [83306:4380] pact-broker -- (0.000181s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:40:26.754033 I [83306:4380] pact-broker -- (0.000127s) SELECT * FROM `versions` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:40:26.754114 I [83306:4380] pact-broker -- (0.000041s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.754230 I [83306:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.754287 I [83306:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.754374 I [83306:4380] pact-broker -- (0.000032s) UPDATE `versions` SET `order` = 104 WHERE (`id` = 4)
2021-09-06 11:40:26.754556 I [83306:4380] pact-broker -- (0.000157s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:40:26.755043 I [83306:4380] pact-broker -- (0.000464s) COMMIT
2021-09-06 11:40:26.755672 I [83306:4380] pact-broker -- (0.000543s) UPDATE `versions` SET `created_at` = '2021-08-30 07:40:26.753067' WHERE (`id` = 4)
2021-09-06 11:40:26.756314 I [83306:4380] pact-broker -- (0.000555s) UPDATE `versions` SET `updated_at` = '2021-08-30 07:40:26.753067' WHERE (`id` = 4)
2021-09-06 11:40:26.756438 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.756880 I [83306:4380] pact-broker -- (0.000328s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 4, '2021-09-06 07:40:26.756374', '2021-09-06 07:40:26.756374', 104, 1)
2021-09-06 11:40:26.757153 I [83306:4380] pact-broker -- (0.000174s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4)) LIMIT 1
2021-09-06 11:40:26.757630 I [83306:4380] pact-broker -- (0.000452s) COMMIT
2021-09-06 11:40:26.758291 I [83306:4380] pact-broker -- (0.000558s) UPDATE `tags` SET `created_at` = '2021-08-30 07:40:26.756325' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4))
2021-09-06 11:40:26.758963 I [83306:4380] pact-broker -- (0.000583s) UPDATE `tags` SET `updated_at` = '2021-08-30 07:40:26.756325' WHERE (`name` = 'feat-new-thing')
2021-09-06 11:40:26.759421 I [83306:4380] pact-broker -- (0.000079s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.759663 I [83306:4380] pact-broker -- (0.000079s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.759939 I [83306:4380] pact-broker -- (0.000074s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')) LIMIT 1
2021-09-06 11:40:26.760038 I [83306:4380] pact-broker -- (0.000052s) BEGIN
2021-09-06 11:40:26.760371 I [83306:4380] pact-broker -- (0.000237s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:40:26.759673', 1, 0)
2021-09-06 11:40:26.760532 I [83306:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:40:26.761004 I [83306:4380] pact-broker -- (0.000447s) COMMIT
2021-09-06 11:40:26.761277 I [83306:4380] pact-broker -- (0.000087s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:40:26.761356 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.761706 I [83306:4380] pact-broker -- (0.000261s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (4, 2, 1, 2, 1, 104, '2021-09-06 07:40:26.761298')
2021-09-06 11:40:26.761903 I [83306:4380] pact-broker -- (0.000137s) SELECT * FROM `pact_publications` WHERE `id` = 2
2021-09-06 11:40:26.762397 I [83306:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 11:40:26.762628 I [83306:4380] pact-broker -- (0.000178s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:40:26.762850 I [83306:4380] pact-broker -- (0.000071s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.762899 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.763223 I [83306:4380] pact-broker -- (0.000242s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (4, 2, 2, 1, 2, '2021-08-30 07:40:26.753067')
2021-09-06 11:40:26.763446 I [83306:4380] pact-broker -- (0.000131s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 11:40:26.763880 I [83306:4380] pact-broker -- (0.000408s) COMMIT
2021-09-06 11:40:26.764061 I [83306:4380] pact-broker -- (0.000137s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 11:40:26.764266 I [83306:4380] pact-broker -- (0.000162s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.764487 I [83306:4380] pact-broker -- (0.000183s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.764706 I [83306:4380] pact-broker -- (0.000165s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 11:40:26.764993 I [83306:4380] pact-broker -- (0.000123s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.765187 I [83306:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.765537 I [83306:4380] pact-broker -- (0.000139s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:40:26.765649 I [83306:4380] pact-broker -- (0.000059s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.766272 I [83306:4380] pact-broker -- (0.000538s) UPDATE `pact_publications` SET `created_at` = '2021-08-30 07:40:26.759179' WHERE (`id` = 2)
2021-09-06 11:40:26.766964 I [83306:4380] pact-broker -- (0.000599s) UPDATE `pact_versions` SET `created_at` = '2021-08-30 07:40:26.759179' WHERE (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')
2021-09-06 11:40:26.767666 I [83306:4380] pact-broker -- (0.000602s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-30 07:40:26.759179' WHERE (`consumer_version_id` = 4)
2021-09-06 11:40:26.767926 I [83306:4380] pact-broker -- (0.000191s) SELECT * FROM `pact_publications` WHERE (`id` = 2) LIMIT 1
2021-09-06 11:40:26.768144 I [83306:4380] pact-broker -- (0.000178s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.768359 I [83306:4380] pact-broker -- (0.000175s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.768684 I [83306:4380] pact-broker -- (0.000285s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:40:26.768917 I [83306:4380] pact-broker -- (0.000180s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 11:40:26.769206 I [83306:4380] pact-broker -- (0.000135s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.769434 I [83306:4380] pact-broker -- (0.000090s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.769603 I [83306:4380] pact-broker -- (0.000127s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:40:26.769899 I [83306:4380] pact-broker -- (0.000138s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:40:26.770069 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.770506 I [83306:4380] pact-broker -- (0.000306s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('6c992f831da299364cf31be6008ee4752189f6d4', 1, 'feat/new-thing', NULL, '2021-09-06 07:40:26.770001', '2021-09-06 07:40:26.770001')
2021-09-06 11:40:26.770698 I [83306:4380] pact-broker -- (0.000134s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:40:26.770886 I [83306:4380] pact-broker -- (0.000121s) SELECT * FROM `versions` WHERE (`id` = 5) LIMIT 1
2021-09-06 11:40:26.770967 I [83306:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.771083 I [83306:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.771168 I [83306:4380] pact-broker -- (0.000062s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.771254 I [83306:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 105 WHERE (`id` = 5)
2021-09-06 11:40:26.771440 I [83306:4380] pact-broker -- (0.000162s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:40:26.771950 I [83306:4380] pact-broker -- (0.000486s) COMMIT
2021-09-06 11:40:26.772628 I [83306:4380] pact-broker -- (0.000590s) UPDATE `versions` SET `created_at` = '2021-08-31 07:40:26.769927' WHERE (`id` = 5)
2021-09-06 11:40:26.773292 I [83306:4380] pact-broker -- (0.000575s) UPDATE `versions` SET `updated_at` = '2021-08-31 07:40:26.769927' WHERE (`id` = 5)
2021-09-06 11:40:26.773440 I [83306:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:40:26.773885 I [83306:4380] pact-broker -- (0.000319s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 5, '2021-09-06 07:40:26.773369', '2021-09-06 07:40:26.773369', 105, 1)
2021-09-06 11:40:26.774165 I [83306:4380] pact-broker -- (0.000140s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5)) LIMIT 1
2021-09-06 11:40:26.774661 I [83306:4380] pact-broker -- (0.000470s) COMMIT
2021-09-06 11:40:26.775337 I [83306:4380] pact-broker -- (0.000569s) UPDATE `tags` SET `created_at` = '2021-08-31 07:40:26.773303' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5))
2021-09-06 11:40:26.775983 I [83306:4380] pact-broker -- (0.000553s) UPDATE `tags` SET `updated_at` = '2021-08-31 07:40:26.773303' WHERE (`name` = 'feat-new-thing')
2021-09-06 11:40:26.776357 I [83306:4380] pact-broker -- (0.000112s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.776693 I [83306:4380] pact-broker -- (0.000145s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.776949 I [83306:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:40:26.777032 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.777393 I [83306:4380] pact-broker -- (0.000267s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (5, 2, 1, 2, 1, 105, '2021-09-06 07:40:26.776970')
2021-09-06 11:40:26.777591 I [83306:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 3
2021-09-06 11:40:26.778091 I [83306:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 11:40:26.778323 I [83306:4380] pact-broker -- (0.000180s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:40:26.778548 I [83306:4380] pact-broker -- (0.000074s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.778597 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.778961 I [83306:4380] pact-broker -- (0.000246s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (5, 2, 3, 1, 2, '2021-08-31 07:40:26.769927')
2021-09-06 11:40:26.779160 I [83306:4380] pact-broker -- (0.000103s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 11:40:26.779623 I [83306:4380] pact-broker -- (0.000437s) COMMIT
2021-09-06 11:40:26.779806 I [83306:4380] pact-broker -- (0.000140s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 11:40:26.780017 I [83306:4380] pact-broker -- (0.000167s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.780231 I [83306:4380] pact-broker -- (0.000174s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.780446 I [83306:4380] pact-broker -- (0.000162s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 11:40:26.780731 I [83306:4380] pact-broker -- (0.000122s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.780966 I [83306:4380] pact-broker -- (0.000082s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.781274 I [83306:4380] pact-broker -- (0.000136s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:40:26.781391 I [83306:4380] pact-broker -- (0.000065s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.782022 I [83306:4380] pact-broker -- (0.000546s) UPDATE `pact_publications` SET `created_at` = '2021-08-30 07:40:26.776122' WHERE (`id` = 3)
2021-09-06 11:40:26.782700 I [83306:4380] pact-broker -- (0.000585s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-30 07:40:26.776122' WHERE (`consumer_version_id` = 5)
2021-09-06 11:40:26.782932 I [83306:4380] pact-broker -- (0.000167s) SELECT * FROM `pact_publications` WHERE (`id` = 3) LIMIT 1
2021-09-06 11:40:26.783134 I [83306:4380] pact-broker -- (0.000163s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.783368 I [83306:4380] pact-broker -- (0.000194s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.783561 I [83306:4380] pact-broker -- (0.000156s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:40:26.783778 I [83306:4380] pact-broker -- (0.000173s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 11:40:26.784046 I [83306:4380] pact-broker -- (0.000117s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.784267 I [83306:4380] pact-broker -- (0.000111s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.784441 I [83306:4380] pact-broker -- (0.000131s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:40:26.784742 I [83306:4380] pact-broker -- (0.000140s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:40:26.784907 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.785344 I [83306:4380] pact-broker -- (0.000305s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('7bd4d9173522826dc3e8704fd62dde0424f4c827', 1, 'main', NULL, '2021-09-06 07:40:26.784839', '2021-09-06 07:40:26.784839')
2021-09-06 11:40:26.785545 I [83306:4380] pact-broker -- (0.000140s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:40:26.785743 I [83306:4380] pact-broker -- (0.000128s) SELECT * FROM `versions` WHERE (`id` = 6) LIMIT 1
2021-09-06 11:40:26.785826 I [83306:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.785945 I [83306:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.786043 I [83306:4380] pact-broker -- (0.000075s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.786131 I [83306:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 106 WHERE (`id` = 6)
2021-09-06 11:40:26.786287 I [83306:4380] pact-broker -- (0.000130s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:40:26.786889 I [83306:4380] pact-broker -- (0.000574s) COMMIT
2021-09-06 11:40:26.787604 I [83306:4380] pact-broker -- (0.000621s) UPDATE `versions` SET `created_at` = '2021-09-05 07:40:26.784767' WHERE (`id` = 6)
2021-09-06 11:40:26.788237 I [83306:4380] pact-broker -- (0.000542s) UPDATE `versions` SET `updated_at` = '2021-09-05 07:40:26.784767' WHERE (`id` = 6)
2021-09-06 11:40:26.788389 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.788831 I [83306:4380] pact-broker -- (0.000318s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 6, '2021-09-06 07:40:26.788316', '2021-09-06 07:40:26.788316', 106, 1)
2021-09-06 11:40:26.789121 I [83306:4380] pact-broker -- (0.000143s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 6)) LIMIT 1
2021-09-06 11:40:26.789578 I [83306:4380] pact-broker -- (0.000431s) COMMIT
2021-09-06 11:40:26.790229 I [83306:4380] pact-broker -- (0.000540s) UPDATE `tags` SET `created_at` = '2021-09-05 07:40:26.788247' WHERE ((`name` = 'main') AND (`version_id` = 6))
2021-09-06 11:40:26.790843 I [83306:4380] pact-broker -- (0.000524s) UPDATE `tags` SET `updated_at` = '2021-09-05 07:40:26.788247' WHERE (`name` = 'main')
2021-09-06 11:40:26.791407 I [83306:4380] pact-broker -- (0.000092s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.791674 I [83306:4380] pact-broker -- (0.000087s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.792016 I [83306:4380] pact-broker -- (0.000079s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 11:40:26.792077 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.792426 I [83306:4380] pact-broker -- (0.000246s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:40:26.791684', 3, 0)
2021-09-06 11:40:26.792629 I [83306:4380] pact-broker -- (0.000144s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:40:26.793143 I [83306:4380] pact-broker -- (0.000488s) COMMIT
2021-09-06 11:40:26.793423 I [83306:4380] pact-broker -- (0.000090s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:40:26.793505 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.793865 I [83306:4380] pact-broker -- (0.000271s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (6, 2, 1, 3, 1, 106, '2021-09-06 07:40:26.793444')
2021-09-06 11:40:26.794025 I [83306:4380] pact-broker -- (0.000100s) SELECT * FROM `pact_publications` WHERE `id` = 4
2021-09-06 11:40:26.794506 I [83306:4380] pact-broker -- (0.000453s) COMMIT
2021-09-06 11:40:26.794797 I [83306:4380] pact-broker -- (0.000234s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:40:26.795033 I [83306:4380] pact-broker -- (0.000076s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.795084 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.795422 I [83306:4380] pact-broker -- (0.000252s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (6, 2, 4, 1, 3, '2021-09-05 07:40:26.784767')
2021-09-06 11:40:26.795619 I [83306:4380] pact-broker -- (0.000103s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 11:40:26.796040 I [83306:4380] pact-broker -- (0.000394s) COMMIT
2021-09-06 11:40:26.796258 I [83306:4380] pact-broker -- (0.000174s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 11:40:26.796469 I [83306:4380] pact-broker -- (0.000166s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.796663 I [83306:4380] pact-broker -- (0.000155s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.796911 I [83306:4380] pact-broker -- (0.000194s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 11:40:26.797218 I [83306:4380] pact-broker -- (0.000129s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.797416 I [83306:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.797768 I [83306:4380] pact-broker -- (0.000142s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:40:26.797881 I [83306:4380] pact-broker -- (0.000061s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.798520 I [83306:4380] pact-broker -- (0.000551s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 07:40:26.791092' WHERE (`id` = 4)
2021-09-06 11:40:26.799107 I [83306:4380] pact-broker -- (0.000492s) UPDATE `pact_versions` SET `created_at` = '2021-09-05 07:40:26.791092' WHERE (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')
2021-09-06 11:40:26.799732 I [83306:4380] pact-broker -- (0.000536s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 07:40:26.791092' WHERE (`consumer_version_id` = 6)
2021-09-06 11:40:26.799940 I [83306:4380] pact-broker -- (0.000144s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:40:26.800178 I [83306:4380] pact-broker -- (0.000200s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.800373 I [83306:4380] pact-broker -- (0.000156s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.800612 I [83306:4380] pact-broker -- (0.000200s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:40:26.800818 I [83306:4380] pact-broker -- (0.000161s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 11:40:26.801088 I [83306:4380] pact-broker -- (0.000117s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.801280 I [83306:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.801477 I [83306:4380] pact-broker -- (0.000156s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:40:26.801771 I [83306:4380] pact-broker -- (0.000131s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:40:26.802124 I [83306:4380] pact-broker -- (0.000136s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 11:40:26.802307 I [83306:4380] pact-broker -- (0.000078s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.802323 I [83306:4380] PactBroker::Versions::Repository -- Upserting version 4fdf20082263d4c5038355a3b734be1c0054d1e1 for pacticipant_id=2
2021-09-06 11:40:26.802542 I [83306:4380] pact-broker -- (0.000075s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:40:26.802620 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.803011 I [83306:4380] pact-broker -- (0.000296s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('4fdf20082263d4c5038355a3b734be1c0054d1e1', 2, '2021-09-06 07:40:26.802327', '2021-09-06 07:40:26.802565')
2021-09-06 11:40:26.803243 I [83306:4380] pact-broker -- (0.000175s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 11:40:26.803439 I [83306:4380] pact-broker -- (0.000126s) SELECT * FROM `versions` WHERE (`id` = 7) LIMIT 1
2021-09-06 11:40:26.803523 I [83306:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.803639 I [83306:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.803695 I [83306:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.803780 I [83306:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 107 WHERE (`id` = 7)
2021-09-06 11:40:26.803976 I [83306:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 11:40:26.804673 I [83306:4380] pact-broker -- (0.000670s) COMMIT
2021-09-06 11:40:26.804878 I [83306:4380] pact-broker -- (0.000104s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 7) ORDER BY `created_at`
2021-09-06 11:40:26.804983 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.805408 I [83306:4380] pact-broker -- (0.000314s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-09-05 07:40:26.801798', 3, 7, 2, 1, '2021-09-06 07:40:26.804908', '{"some":"results"}', '[]')
2021-09-06 11:40:26.805632 I [83306:4380] pact-broker -- (0.000163s) SELECT * FROM `verifications` WHERE `id` = 3
2021-09-06 11:40:26.806252 I [83306:4380] pact-broker -- (0.000592s) COMMIT
2021-09-06 11:40:26.806551 I [83306:4380] pact-broker -- (0.000089s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:40:26.806603 I [83306:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:40:26.806938 I [83306:4380] pact-broker -- (0.000250s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (3, 7, 2, 3, 1, '2021-09-06 07:40:26.804908')
2021-09-06 11:40:26.807137 I [83306:4380] pact-broker -- (0.000104s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:40:26.807648 I [83306:4380] pact-broker -- (0.000484s) COMMIT
2021-09-06 11:40:26.807843 I [83306:4380] pact-broker -- (0.000148s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:40:26.808134 I [83306:4380] pact-broker -- (0.000190s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1')) LIMIT 1
2021-09-06 11:40:26.808203 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.808565 I [83306:4380] pact-broker -- (0.000218s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.808224', `branch` = 'main' WHERE (`id` = 7)
2021-09-06 11:40:26.809104 I [83306:4380] pact-broker -- (0.000511s) COMMIT
2021-09-06 11:40:26.809799 I [83306:4380] pact-broker -- (0.000595s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 3)
2021-09-06 11:40:26.810602 I [83306:4380] pact-broker -- (0.000691s) UPDATE `versions` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 7)
2021-09-06 11:40:26.811327 I [83306:4380] pact-broker -- (0.000589s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:40:26.682290' WHERE (`id` = 7)
2021-09-06 11:40:26.811537 I [83306:4380] pact-broker -- (0.000151s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:40:26.812206 I [83306:4380] pact-broker -- (0.000578s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:40:26.682290' WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7))
2021-09-06 11:40:26.812548 I [83306:4380] pact-broker -- (0.000187s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 11:40:26.812882 I [83306:4380] pact-broker -- (0.000129s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 7) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:40:26.813094 I [83306:4380] pact-broker -- (0.000167s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.813293 I [83306:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.813156' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.813465 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.813836 I [83306:4380] pact-broker -- (0.000233s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('58d7db5f-8bb2-4457-a2af-f52c469de472', 7, 2, 1, NULL, '2021-09-06 07:40:26.813392', '2021-09-06 07:40:26.813392', '')
2021-09-06 11:40:26.814042 I [83306:4380] pact-broker -- (0.000143s) SELECT * FROM `deployed_versions` WHERE `id` = 4
2021-09-06 11:40:26.814234 I [83306:4380] pact-broker -- (0.000050s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:40:26.814388 I [83306:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 1, 7, '', 4)
2021-09-06 11:40:26.814516 I [83306:4380] pact-broker -- (0.000076s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 4
2021-09-06 11:40:26.815182 I [83306:4380] pact-broker -- (0.000637s) COMMIT
2021-09-06 11:40:26.815952 I [83306:4380] pact-broker -- (0.000666s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 07:40:26.812227' WHERE (`id` = 4)
2021-09-06 11:40:26.816679 I [83306:4380] pact-broker -- (0.000636s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 07:40:26.812227' WHERE (`id` = 4)
2021-09-06 11:40:26.816828 I [83306:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:40:26.817266 I [83306:4380] pact-broker -- (0.000315s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 7, '2021-09-06 07:40:26.816757', '2021-09-06 07:40:26.816757', 107, 2)
2021-09-06 11:40:26.817554 I [83306:4380] pact-broker -- (0.000183s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 7)) LIMIT 1
2021-09-06 11:40:26.818127 I [83306:4380] pact-broker -- (0.000542s) COMMIT
2021-09-06 11:40:26.818819 I [83306:4380] pact-broker -- (0.000568s) UPDATE `tags` SET `created_at` = '2021-09-05 07:40:26.816689' WHERE ((`name` = 'main') AND (`version_id` = 7))
2021-09-06 11:40:26.819400 I [83306:4380] pact-broker -- (0.000490s) UPDATE `tags` SET `updated_at` = '2021-09-05 07:40:26.816689' WHERE (`name` = 'main')
2021-09-06 11:40:26.819572 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.819976 I [83306:4380] pact-broker -- (0.000305s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('5556b8149bf8bac76bc30f50a8a2dd4c22c85f30', 1, 'main', NULL, '2021-09-06 07:40:26.819505', '2021-09-06 07:40:26.819505')
2021-09-06 11:40:26.820222 I [83306:4380] pact-broker -- (0.000188s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:40:26.820425 I [83306:4380] pact-broker -- (0.000130s) SELECT * FROM `versions` WHERE (`id` = 8) LIMIT 1
2021-09-06 11:40:26.820509 I [83306:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.820627 I [83306:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:40:26.820684 I [83306:4380] pact-broker -- (0.000035s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:40:26.820769 I [83306:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 108 WHERE (`id` = 8)
2021-09-06 11:40:26.820958 I [83306:4380] pact-broker -- (0.000160s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:40:26.821397 I [83306:4380] pact-broker -- (0.000414s) COMMIT
2021-09-06 11:40:26.822021 I [83306:4380] pact-broker -- (0.000537s) UPDATE `versions` SET `created_at` = '2021-09-05 19:40:26.819411' WHERE (`id` = 8)
2021-09-06 11:40:26.822673 I [83306:4380] pact-broker -- (0.000563s) UPDATE `versions` SET `updated_at` = '2021-09-05 19:40:26.819411' WHERE (`id` = 8)
2021-09-06 11:40:26.822801 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.823236 I [83306:4380] pact-broker -- (0.000315s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 8, '2021-09-06 07:40:26.822735', '2021-09-06 07:40:26.822735', 108, 1)
2021-09-06 11:40:26.823514 I [83306:4380] pact-broker -- (0.000137s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 8)) LIMIT 1
2021-09-06 11:40:26.824005 I [83306:4380] pact-broker -- (0.000465s) COMMIT
2021-09-06 11:40:26.824645 I [83306:4380] pact-broker -- (0.000537s) UPDATE `tags` SET `created_at` = '2021-09-05 19:40:26.822683' WHERE ((`name` = 'main') AND (`version_id` = 8))
2021-09-06 11:40:26.825217 I [83306:4380] pact-broker -- (0.000485s) UPDATE `tags` SET `updated_at` = '2021-09-05 19:40:26.822683' WHERE (`name` = 'main')
2021-09-06 11:40:26.825539 I [83306:4380] pact-broker -- (0.000185s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 11:40:26.825853 I [83306:4380] pact-broker -- (0.000126s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 8) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:40:26.826063 I [83306:4380] pact-broker -- (0.000168s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.826258 I [83306:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:40:26.826119' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:40:26.826417 I [83306:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:40:26.826792 I [83306:4380] pact-broker -- (0.000232s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('192bd3d8-7b49-4163-9c58-19142f2672f6', 8, 1, 1, NULL, '2021-09-06 07:40:26.826347', '2021-09-06 07:40:26.826347', '')
2021-09-06 11:40:26.827004 I [83306:4380] pact-broker -- (0.000149s) SELECT * FROM `deployed_versions` WHERE `id` = 5
2021-09-06 11:40:26.827194 I [83306:4380] pact-broker -- (0.000050s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:40:26.827350 I [83306:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 1, 8, '', 5)
2021-09-06 11:40:26.827452 I [83306:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 5
2021-09-06 11:40:26.827941 I [83306:4380] pact-broker -- (0.000463s) COMMIT
2021-09-06 11:40:26.828628 I [83306:4380] pact-broker -- (0.000592s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 19:40:26.825228' WHERE (`id` = 5)
2021-09-06 11:40:26.829268 I [83306:4380] pact-broker -- (0.000541s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 19:40:26.825228' WHERE (`id` = 5)
2021-09-06 11:40:26.829564 I [83306:4380] pact-broker -- (0.000181s) SELECT * FROM `pact_versions` ORDER BY `id` DESC LIMIT 1
2021-09-06 11:40:26.829682 I [83306:4380] pact-broker -- (0.000080s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.830005 I [83306:4380] pact-broker -- (0.000153s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.830285 I [83306:4380] pact-broker -- (0.000086s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:40:26.830373 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.830753 I [83306:4380] pact-broker -- (0.000282s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (8, 2, 1, 3, 1, 108, '2021-09-06 07:40:26.830308')
2021-09-06 11:40:26.830917 I [83306:4380] pact-broker -- (0.000101s) SELECT * FROM `pact_publications` WHERE `id` = 5
2021-09-06 11:40:26.831412 I [83306:4380] pact-broker -- (0.000468s) COMMIT
2021-09-06 11:40:26.831675 I [83306:4380] pact-broker -- (0.000185s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:40:26.831904 I [83306:4380] pact-broker -- (0.000073s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:40:26.831953 I [83306:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:40:26.832284 I [83306:4380] pact-broker -- (0.000246s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (8, 2, 5, 1, 3, '2021-09-05 19:40:26.819411')
2021-09-06 11:40:26.832492 I [83306:4380] pact-broker -- (0.000116s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 11:40:26.832875 I [83306:4380] pact-broker -- (0.000359s) COMMIT
2021-09-06 11:40:26.833054 I [83306:4380] pact-broker -- (0.000134s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 11:40:26.833258 I [83306:4380] pact-broker -- (0.000163s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.833461 I [83306:4380] pact-broker -- (0.000164s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.833671 I [83306:4380] pact-broker -- (0.000160s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 11:40:26.834046 I [83306:4380] pact-broker -- (0.000216s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.834312 I [83306:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.834719 I [83306:4380] pact-broker -- (0.000237s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:40:26.834922 I [83306:4380] pact-broker -- (0.000062s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:40:26.835543 I [83306:4380] pact-broker -- (0.000538s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 19:40:26.829280' WHERE (`id` = 5)
2021-09-06 11:40:26.836156 I [83306:4380] pact-broker -- (0.000522s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 19:40:26.829280' WHERE (`consumer_version_id` = 8)
2021-09-06 11:40:26.836361 I [83306:4380] pact-broker -- (0.000140s) SELECT * FROM `pact_publications` WHERE (`id` = 5) LIMIT 1
2021-09-06 11:40:26.836589 I [83306:4380] pact-broker -- (0.000190s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:40:26.836777 I [83306:4380] pact-broker -- (0.000150s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:40:26.836991 I [83306:4380] pact-broker -- (0.000178s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:40:26.837196 I [83306:4380] pact-broker -- (0.000160s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 11:40:26.837545 I [83306:4380] pact-broker -- (0.000205s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.837762 I [83306:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:40:26.837927 I [83306:4380] pact-broker -- (0.000122s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:40:26.838339 I [83306:4380] pact-broker -- (0.000261s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:40:26.838371 I [83306:4380] PactBroker::App -- Marking seed as done
2021-09-06 11:40:26.839158 I [83306:4380] pact-broker -- (0.000078s) SELECT * FROM `config` WHERE (`name` = 'seed_example_data') LIMIT 1
2021-09-06 11:40:26.839425 I [83306:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:40:26.839752 I [83306:4380] pact-broker -- (0.000227s) INSERT INTO `config` (`name`, `type`, `value`, `created_at`, `updated_at`) VALUES ('seed_example_data', 'boolean', '0', '2021-09-06 07:40:26.839350', '2021-09-06 07:40:26.839350')
2021-09-06 11:40:26.839949 I [83306:4380] pact-broker -- (0.000134s) SELECT * FROM `config` WHERE `id` = 1
2021-09-06 11:40:26.840527 I [83306:4380] pact-broker -- (0.000551s) COMMIT
2021-09-06 11:40:26.840556 I [83306:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 11:40:26.840562 I [83306:4380] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 11:40:26.840626 I [83306:4380] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 11:40:26.840635 I [83306:4380] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 11:40:26.840641 I [83306:4380] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 11:40:26.840677 I [83306:4380] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 11:40:26.840683 I [83306:4380] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 11:40:26.840689 I [83306:4380] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 11:40:26.840695 I [83306:4380] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 11:40:26.840701 I [83306:4380] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 11:40:26.840707 I [83306:4380] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 11:40:26.840713 I [83306:4380] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 11:40:26.840718 I [83306:4380] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 11:40:26.840725 I [83306:4380] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 11:40:26.840731 I [83306:4380] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 11:40:26.840736 I [83306:4380] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 11:40:26.840742 I [83306:4380] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 11:40:26.840748 I [83306:4380] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 11:40:26.840753 I [83306:4380] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 11:40:26.840759 I [83306:4380] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 11:40:26.840765 I [83306:4380] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 11:40:26.840770 I [83306:4380] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 11:40:26.840776 I [83306:4380] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 11:40:26.840781 I [83306:4380] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 11:40:26.840787 I [83306:4380] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 11:40:26.840792 I [83306:4380] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 11:40:26.840798 I [83306:4380] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 11:40:26.840804 I [83306:4380] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 11:40:26.840809 I [83306:4380] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 11:40:26.840815 I [83306:4380] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 11:40:26.840820 I [83306:4380] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 11:40:26.840825 I [83306:4380] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 11:40:26.840831 I [83306:4380] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 11:40:26.840836 I [83306:4380] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 11:40:26.840842 I [83306:4380] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 11:40:26.840848 I [83306:4380] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 11:40:26.840854 I [83306:4380] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 11:40:26.840859 I [83306:4380] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 11:40:26.840864 I [83306:4380] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-sqlite/log source={:type=>:defaults}
2021-09-06 11:40:26.840870 I [83306:4380] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 11:40:26.840875 I [83306:4380] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 11:40:26.840881 I [83306:4380] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 11:40:26.840889 I [83306:4380] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 11:40:26.840895 I [83306:4380] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 11:40:26.840900 I [83306:4380] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 11:40:26.840906 I [83306:4380] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 11:40:26.840911 I [83306:4380] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 11:40:26.840916 I [83306:4380] pact-broker -- seed_example_data=true source={:type=>:defaults}
2021-09-06 11:40:26.840927 I [83306:4380] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 11:40:26.840933 I [83306:4380] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 11:40:26.840939 I [83306:4380] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 11:40:26.840944 I [83306:4380] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 11:40:26.840966 I [83306:4380] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 11:40:26.840972 I [83306:4380] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 11:40:26.840978 I [83306:4380] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 11:40:26.840984 I [83306:4380] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 11:40:26.840989 I [83306:4380] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 11:40:26.840995 I [83306:4380] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 11:40:26.841000 I [83306:4380] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 11:40:26.841008 I [83306:4380] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 11:40:26.841013 I [83306:4380] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 11:40:26.841021 I [83306:4380] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 11:40:26.841027 I [83306:4380] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 11:40:26.841034 I [83306:4380] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 11:40:26.841041 I [83306:4380] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 11:40:26.841044 I [83306:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 11:40:26.841052 I [83306:4380] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 11:41:05.449734 I [83370:4380] pact-broker -- (0.000126s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.449800 I [83370:4380] pact-broker -- (0.000019s) PRAGMA case_sensitive_like = 1
2021-09-06 11:41:05.451135 I [83370:4380] pact-broker -- (0.000064s) SELECT sqlite_version()
2021-09-06 11:41:05.451304 I [83370:4380] pact-broker -- (0.000075s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:41:05.451471 I [83370:4380] pact-broker -- (0.000088s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:41:05.451483 I [83370:4380] PactBroker::App -- Database schema version is 0
2021-09-06 11:41:05.452720 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_migrations: SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 11:41:05.455097 I [83370:4380] pact-broker -- (0.001504s) CREATE TABLE `schema_migrations` (`filename` varchar(255) NOT NULL PRIMARY KEY)
2021-09-06 11:41:05.455358 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: schema_info: SELECT NULL AS 'nil' FROM `schema_info` LIMIT 1
2021-09-06 11:41:05.455686 I [83370:4380] pact-broker -- (0.000090s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 11:41:05.492251 I [83370:4380] PactBroker::App -- Migrating database schema
2021-09-06 11:41:05.493642 I [83370:4380] pact-broker -- (0.000103s) SELECT NULL AS 'nil' FROM `schema_migrations` LIMIT 1
2021-09-06 11:41:05.493752 I [83370:4380] pact-broker -- (0.000055s) SELECT * FROM `schema_migrations` LIMIT 1
2021-09-06 11:41:05.493873 I [83370:4380] pact-broker -- (0.000053s) SELECT `filename` FROM `schema_migrations` ORDER BY `filename`
2021-09-06 11:41:05.527920 I [83370:4380] pact-broker -- Begin applying migration 000001_create_pacticipant_table.rb, direction: up
2021-09-06 11:41:05.529294 I [83370:4380] pact-broker -- (0.001194s) CREATE TABLE `pacticipants` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) UNIQUE, `repository_url` varchar(255))
2021-09-06 11:41:05.530371 I [83370:4380] pact-broker -- (0.000972s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000001_create_pacticipant_table.rb')
2021-09-06 11:41:05.530408 I [83370:4380] pact-broker -- Finished applying migration 000001_create_pacticipant_table.rb, direction: up, took 0.002487 seconds
2021-09-06 11:41:05.530415 I [83370:4380] pact-broker -- Begin applying migration 000002_create_versions_table.rb, direction: up
2021-09-06 11:41:05.531494 I [83370:4380] pact-broker -- (0.000899s) CREATE TABLE `versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255), `repository_ref` varchar(255), `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 11:41:05.532567 I [83370:4380] pact-broker -- (0.000985s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:41:05.533526 I [83370:4380] pact-broker -- (0.000881s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000002_create_versions_table.rb')
2021-09-06 11:41:05.533550 I [83370:4380] pact-broker -- Finished applying migration 000002_create_versions_table.rb, direction: up, took 0.003131 seconds
2021-09-06 11:41:05.533556 I [83370:4380] pact-broker -- Begin applying migration 000003_create_pacts_table.rb, direction: up
2021-09-06 11:41:05.534590 I [83370:4380] pact-broker -- (0.000857s) CREATE TABLE `pacts` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` text, `version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`)
2021-09-06 11:41:05.535330 I [83370:4380] pact-broker -- (0.000670s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.536012 I [83370:4380] pact-broker -- (0.000618s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000003_create_pacts_table.rb')
2021-09-06 11:41:05.536028 I [83370:4380] pact-broker -- Finished applying migration 000003_create_pacts_table.rb, direction: up, took 0.002468 seconds
2021-09-06 11:41:05.536035 I [83370:4380] pact-broker -- Begin applying migration 000004_create_tags_table.rb, direction: up
2021-09-06 11:41:05.536968 I [83370:4380] pact-broker -- (0.000787s) CREATE TABLE `tags` (`name` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, CONSTRAINT `tags_pk` PRIMARY KEY (`version_id`, `name`))
2021-09-06 11:41:05.537631 I [83370:4380] pact-broker -- (0.000608s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000004_create_tags_table.rb')
2021-09-06 11:41:05.537647 I [83370:4380] pact-broker -- Finished applying migration 000004_create_tags_table.rb, direction: up, took 0.001609 seconds
2021-09-06 11:41:05.537654 I [83370:4380] pact-broker -- Begin applying migration 000005_add_order_column_to_version.rb, direction: up
2021-09-06 11:41:05.537719 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.537747 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.537794 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.538152 I [83370:4380] pact-broker -- (0.000273s) ALTER TABLE `versions` ADD COLUMN `order` integer
2021-09-06 11:41:05.538536 I [83370:4380] pact-broker -- (0.000358s) COMMIT
2021-09-06 11:41:05.538588 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.538616 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.538741 I [83370:4380] pact-broker -- (0.000056s) UPDATE `versions` SET `order` = `id`
2021-09-06 11:41:05.539483 I [83370:4380] pact-broker -- (0.000679s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000005_add_order_column_to_version.rb')
2021-09-06 11:41:05.539503 I [83370:4380] pact-broker -- Finished applying migration 000005_add_order_column_to_version.rb, direction: up, took 0.001846 seconds
2021-09-06 11:41:05.539509 I [83370:4380] pact-broker -- Begin applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up
2021-09-06 11:41:05.539632 I [83370:4380] pact-broker -- (0.000075s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.539661 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.539693 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.539875 I [83370:4380] pact-broker -- (0.000118s) PRAGMA table_info('tags')
2021-09-06 11:41:05.539961 I [83370:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('tags')
2021-09-06 11:41:05.540069 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('tags')
2021-09-06 11:41:05.540127 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:41:05.540295 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.540383 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:41:05.540606 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.540698 I [83370:4380] pact-broker -- (0.000030s) PRAGMA index_list('tags')
2021-09-06 11:41:05.541295 I [83370:4380] pact-broker -- (0.000569s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:41:05.541418 I [83370:4380] pact-broker -- (0.000099s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:41:05.541500 I [83370:4380] pact-broker -- (0.000025s) INSERT INTO `tags`(`name`, `version_id`) SELECT `name`, `version_id` FROM `tags_backup0`
2021-09-06 11:41:05.541608 I [83370:4380] pact-broker -- (0.000090s) DROP TABLE `tags_backup0`
2021-09-06 11:41:05.542184 I [83370:4380] pact-broker -- (0.000552s) COMMIT
2021-09-06 11:41:05.542241 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.542270 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.542894 I [83370:4380] pact-broker -- (0.000571s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000006_make_version_foreign_key_mandatory.rb')
2021-09-06 11:41:05.542911 I [83370:4380] pact-broker -- Finished applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up, took 0.003398 seconds
2021-09-06 11:41:05.542918 I [83370:4380] pact-broker -- Begin applying migration 000007_increase_json_content_length.rb, direction: up
2021-09-06 11:41:05.542981 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.543060 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.543094 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:05.543235 I [83370:4380] pact-broker -- (0.000096s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.543316 I [83370:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.543374 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.543550 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.543627 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.543824 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.543917 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.544040 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.544608 I [83370:4380] pact-broker -- (0.000524s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.544726 I [83370:4380] pact-broker -- (0.000094s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.544797 I [83370:4380] pact-broker -- (0.000051s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`) SELECT `id`, `json_content`, `version_id`, `provider_id` FROM `pacts_backup0`
2021-09-06 11:41:05.544898 I [83370:4380] pact-broker -- (0.000083s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.544973 I [83370:4380] pact-broker -- (0.000056s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.545477 I [83370:4380] pact-broker -- (0.000481s) COMMIT
2021-09-06 11:41:05.545535 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.545564 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.546164 I [83370:4380] pact-broker -- (0.000550s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000007_increase_json_content_length.rb')
2021-09-06 11:41:05.546181 I [83370:4380] pact-broker -- Finished applying migration 000007_increase_json_content_length.rb, direction: up, took 0.003259 seconds
2021-09-06 11:41:05.546187 I [83370:4380] pact-broker -- Begin applying migration 000008_create_latest_pact_view.rb, direction: up
2021-09-06 11:41:05.547280 I [83370:4380] pact-broker -- (0.000796s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 11:41:05.547916 I [83370:4380] pact-broker -- (0.000589s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:41:05.548595 I [83370:4380] pact-broker -- (0.000635s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.549330 I [83370:4380] pact-broker -- (0.000608s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000008_create_latest_pact_view.rb')
2021-09-06 11:41:05.549345 I [83370:4380] pact-broker -- Finished applying migration 000008_create_latest_pact_view.rb, direction: up, took 0.003156 seconds
2021-09-06 11:41:05.549351 I [83370:4380] pact-broker -- Begin applying migration 000009_add_timestamps.rb, direction: up
2021-09-06 11:41:05.549407 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.549434 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.549464 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.549857 I [83370:4380] pact-broker -- (0.000346s) ALTER TABLE `pacts` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.550257 I [83370:4380] pact-broker -- (0.000376s) COMMIT
2021-09-06 11:41:05.550310 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.550338 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.550385 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.550409 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.550436 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.550882 I [83370:4380] pact-broker -- (0.000344s) ALTER TABLE `pacts` ADD COLUMN `updated_at` timestamp
2021-09-06 11:41:05.551278 I [83370:4380] pact-broker -- (0.000372s) COMMIT
2021-09-06 11:41:05.551333 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.551362 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.551408 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.551433 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.551461 I [83370:4380] pact-broker -- (0.000009s) BEGIN
2021-09-06 11:41:05.551842 I [83370:4380] pact-broker -- (0.000340s) ALTER TABLE `tags` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.552160 I [83370:4380] pact-broker -- (0.000295s) COMMIT
2021-09-06 11:41:05.552210 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.552238 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.552318 I [83370:4380] pact-broker -- (0.000044s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.552344 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.552372 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.552753 I [83370:4380] pact-broker -- (0.000339s) ALTER TABLE `tags` ADD COLUMN `updated_at` timestamp
2021-09-06 11:41:05.553118 I [83370:4380] pact-broker -- (0.000343s) COMMIT
2021-09-06 11:41:05.553169 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.553200 I [83370:4380] pact-broker -- (0.000013s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.553246 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.553271 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.553334 I [83370:4380] pact-broker -- (0.000044s) BEGIN
2021-09-06 11:41:05.553723 I [83370:4380] pact-broker -- (0.000347s) ALTER TABLE `versions` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.554106 I [83370:4380] pact-broker -- (0.000358s) COMMIT
2021-09-06 11:41:05.554164 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.554192 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.554239 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.554264 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.554292 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.554738 I [83370:4380] pact-broker -- (0.000356s) ALTER TABLE `versions` ADD COLUMN `updated_at` timestamp
2021-09-06 11:41:05.555145 I [83370:4380] pact-broker -- (0.000383s) COMMIT
2021-09-06 11:41:05.555197 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.555225 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.555270 I [83370:4380] pact-broker -- (0.000009s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.555294 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.555322 I [83370:4380] pact-broker -- (0.000009s) BEGIN
2021-09-06 11:41:05.555706 I [83370:4380] pact-broker -- (0.000342s) ALTER TABLE `pacticipants` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.556105 I [83370:4380] pact-broker -- (0.000336s) COMMIT
2021-09-06 11:41:05.556156 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.556183 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.556228 I [83370:4380] pact-broker -- (0.000009s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.556253 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.556280 I [83370:4380] pact-broker -- (0.000009s) BEGIN
2021-09-06 11:41:05.556658 I [83370:4380] pact-broker -- (0.000337s) ALTER TABLE `pacticipants` ADD COLUMN `updated_at` timestamp
2021-09-06 11:41:05.557017 I [83370:4380] pact-broker -- (0.000337s) COMMIT
2021-09-06 11:41:05.557103 I [83370:4380] pact-broker -- (0.000049s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.557131 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.557721 I [83370:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000009_add_timestamps.rb')
2021-09-06 11:41:05.557737 I [83370:4380] pact-broker -- Finished applying migration 000009_add_timestamps.rb, direction: up, took 0.008382 seconds
2021-09-06 11:41:05.557744 I [83370:4380] pact-broker -- Begin applying migration 000010_populate_timestamps.rb, direction: up
2021-09-06 11:41:05.558004 I [83370:4380] pact-broker -- (0.000061s) UPDATE `pacts` SET `created_at` = '2021-09-06 07:41:05.557783', `updated_at` = '2021-09-06 07:41:05.557798'
2021-09-06 11:41:05.558179 I [83370:4380] pact-broker -- (0.000047s) UPDATE `versions` SET `created_at` = '2021-09-06 07:41:05.558024', `updated_at` = '2021-09-06 07:41:05.558026'
2021-09-06 11:41:05.558295 I [83370:4380] pact-broker -- (0.000044s) UPDATE `pacticipants` SET `created_at` = '2021-09-06 07:41:05.558198', `updated_at` = '2021-09-06 07:41:05.558200'
2021-09-06 11:41:05.558411 I [83370:4380] pact-broker -- (0.000043s) UPDATE `tags` SET `created_at` = '2021-09-06 07:41:05.558314', `updated_at` = '2021-09-06 07:41:05.558315'
2021-09-06 11:41:05.558941 I [83370:4380] pact-broker -- (0.000483s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000010_populate_timestamps.rb')
2021-09-06 11:41:05.558957 I [83370:4380] pact-broker -- Finished applying migration 000010_populate_timestamps.rb, direction: up, took 0.001210 seconds
2021-09-06 11:41:05.558963 I [83370:4380] pact-broker -- Begin applying migration 000011_made_timestamps_mandatory.rb, direction: up
2021-09-06 11:41:05.559065 I [83370:4380] pact-broker -- (0.000060s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.559095 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.559125 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.559288 I [83370:4380] pact-broker -- (0.000111s) PRAGMA table_info('tags')
2021-09-06 11:41:05.559369 I [83370:4380] pact-broker -- (0.000036s) PRAGMA foreign_key_list('tags')
2021-09-06 11:41:05.559481 I [83370:4380] pact-broker -- (0.000037s) PRAGMA index_list('tags')
2021-09-06 11:41:05.559535 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.559586 I [83370:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:41:05.559756 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.559831 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:41:05.560017 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.560154 I [83370:4380] pact-broker -- (0.000034s) PRAGMA index_list('tags')
2021-09-06 11:41:05.560208 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.560990 I [83370:4380] pact-broker -- (0.000757s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:41:05.561137 I [83370:4380] pact-broker -- (0.000124s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:41:05.561181 I [83370:4380] pact-broker -- (0.000026s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:41:05.561309 I [83370:4380] pact-broker -- (0.000108s) DROP TABLE `tags_backup0`
2021-09-06 11:41:05.561467 I [83370:4380] pact-broker -- (0.000069s) PRAGMA table_info('tags')
2021-09-06 11:41:05.561541 I [83370:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('tags')
2021-09-06 11:41:05.561624 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('tags')
2021-09-06 11:41:05.561702 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.561756 I [83370:4380] pact-broker -- (0.000023s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:41:05.561949 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.562016 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:41:05.562197 I [83370:4380] pact-broker -- (0.000027s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.562462 I [83370:4380] pact-broker -- (0.000165s) PRAGMA index_list('tags')
2021-09-06 11:41:05.562521 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.563137 I [83370:4380] pact-broker -- (0.000591s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:41:05.563251 I [83370:4380] pact-broker -- (0.000093s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:41:05.563294 I [83370:4380] pact-broker -- (0.000024s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:41:05.563357 I [83370:4380] pact-broker -- (0.000046s) DROP TABLE `tags_backup0`
2021-09-06 11:41:05.563484 I [83370:4380] pact-broker -- (0.000064s) PRAGMA table_info('tags')
2021-09-06 11:41:05.563574 I [83370:4380] pact-broker -- (0.000037s) PRAGMA foreign_key_list('tags')
2021-09-06 11:41:05.563735 I [83370:4380] pact-broker -- (0.000035s) PRAGMA index_list('tags')
2021-09-06 11:41:05.563789 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.563860 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_tags_1')
2021-09-06 11:41:05.564027 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.564116 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: tags_backup0: SELECT NULL AS 'nil' FROM `tags_backup0` LIMIT 1
2021-09-06 11:41:05.564320 I [83370:4380] pact-broker -- (0.000028s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.564598 I [83370:4380] pact-broker -- (0.000170s) PRAGMA index_list('tags')
2021-09-06 11:41:05.564680 I [83370:4380] pact-broker -- (0.000048s) PRAGMA index_info('sqlite_autoindex_tags_2')
2021-09-06 11:41:05.565319 I [83370:4380] pact-broker -- (0.000613s) ALTER TABLE `tags` RENAME TO `tags_backup0`
2021-09-06 11:41:05.565434 I [83370:4380] pact-broker -- (0.000093s) CREATE TABLE `tags`(`name` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, PRIMARY KEY ('name', 'version_id'), FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, UNIQUE (`version_id`, `name`))
2021-09-06 11:41:05.565477 I [83370:4380] pact-broker -- (0.000024s) INSERT INTO `tags`(`name`, `version_id`, `created_at`, `updated_at`) SELECT `name`, `version_id`, `created_at`, `updated_at` FROM `tags_backup0`
2021-09-06 11:41:05.565539 I [83370:4380] pact-broker -- (0.000045s) DROP TABLE `tags_backup0`
2021-09-06 11:41:05.566100 I [83370:4380] pact-broker -- (0.000537s) COMMIT
2021-09-06 11:41:05.566159 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.566189 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.566278 I [83370:4380] pact-broker -- (0.000012s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.566307 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.566337 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.566530 I [83370:4380] pact-broker -- (0.000128s) PRAGMA table_info('pacticipants')
2021-09-06 11:41:05.566620 I [83370:4380] pact-broker -- (0.000025s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:41:05.566688 I [83370:4380] pact-broker -- (0.000033s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.566778 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.566949 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.567069 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:41:05.567210 I [83370:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.567353 I [83370:4380] pact-broker -- (0.000034s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.567425 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.568224 I [83370:4380] pact-broker -- (0.000773s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:41:05.568355 I [83370:4380] pact-broker -- (0.000107s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:41:05.568447 I [83370:4380] pact-broker -- (0.000070s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:41:05.568551 I [83370:4380] pact-broker -- (0.000084s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:41:05.568693 I [83370:4380] pact-broker -- (0.000094s) PRAGMA table_info('pacticipants')
2021-09-06 11:41:05.568783 I [83370:4380] pact-broker -- (0.000049s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:41:05.568844 I [83370:4380] pact-broker -- (0.000030s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.568925 I [83370:4380] pact-broker -- (0.000051s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.569062 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.569141 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:41:05.569332 I [83370:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.569582 I [83370:4380] pact-broker -- (0.000168s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.569641 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.570273 I [83370:4380] pact-broker -- (0.000606s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:41:05.570389 I [83370:4380] pact-broker -- (0.000094s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:41:05.570437 I [83370:4380] pact-broker -- (0.000029s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:41:05.570503 I [83370:4380] pact-broker -- (0.000048s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:41:05.570635 I [83370:4380] pact-broker -- (0.000072s) PRAGMA table_info('pacticipants')
2021-09-06 11:41:05.570709 I [83370:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('pacticipants')
2021-09-06 11:41:05.570768 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.570843 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.570963 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.571032 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacticipants_backup0: SELECT NULL AS 'nil' FROM `pacticipants_backup0` LIMIT 1
2021-09-06 11:41:05.571205 I [83370:4380] pact-broker -- (0.000028s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.571458 I [83370:4380] pact-broker -- (0.000168s) PRAGMA index_list('pacticipants')
2021-09-06 11:41:05.571517 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('sqlite_autoindex_pacticipants_1')
2021-09-06 11:41:05.572169 I [83370:4380] pact-broker -- (0.000617s) ALTER TABLE `pacticipants` RENAME TO `pacticipants_backup0`
2021-09-06 11:41:05.572265 I [83370:4380] pact-broker -- (0.000074s) CREATE TABLE `pacticipants`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) DEFAULT (NULL) NULL UNIQUE, `repository_url` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:41:05.572320 I [83370:4380] pact-broker -- (0.000032s) INSERT INTO `pacticipants`(`id`, `name`, `repository_url`, `created_at`, `updated_at`) SELECT `id`, `name`, `repository_url`, `created_at`, `updated_at` FROM `pacticipants_backup0`
2021-09-06 11:41:05.572388 I [83370:4380] pact-broker -- (0.000049s) DROP TABLE `pacticipants_backup0`
2021-09-06 11:41:05.572896 I [83370:4380] pact-broker -- (0.000479s) COMMIT
2021-09-06 11:41:05.572953 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.572982 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.573036 I [83370:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.573072 I [83370:4380] pact-broker -- (0.000018s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.573101 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.573274 I [83370:4380] pact-broker -- (0.000129s) PRAGMA table_info('versions')
2021-09-06 11:41:05.573355 I [83370:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('versions')
2021-09-06 11:41:05.573421 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('versions')
2021-09-06 11:41:05.574899 I [83370:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.574996 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:41:05.575159 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.575300 I [83370:4380] pact-broker -- (0.000035s) PRAGMA index_list('versions')
2021-09-06 11:41:05.575359 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:41:05.576259 I [83370:4380] pact-broker -- (0.000821s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:41:05.576411 I [83370:4380] pact-broker -- (0.000123s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.576495 I [83370:4380] pact-broker -- (0.000061s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:41:05.576600 I [83370:4380] pact-broker -- (0.000085s) DROP TABLE `versions_backup0`
2021-09-06 11:41:05.576679 I [83370:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:41:05.576860 I [83370:4380] pact-broker -- (0.000091s) PRAGMA table_info('versions')
2021-09-06 11:41:05.576946 I [83370:4380] pact-broker -- (0.000044s) PRAGMA foreign_key_list('versions')
2021-09-06 11:41:05.577037 I [83370:4380] pact-broker -- (0.000059s) PRAGMA index_list('versions')
2021-09-06 11:41:05.577205 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.577303 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:41:05.577495 I [83370:4380] pact-broker -- (0.000032s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.577773 I [83370:4380] pact-broker -- (0.000178s) PRAGMA index_list('versions')
2021-09-06 11:41:05.577858 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:41:05.578568 I [83370:4380] pact-broker -- (0.000665s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:41:05.578695 I [83370:4380] pact-broker -- (0.000074s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.578747 I [83370:4380] pact-broker -- (0.000029s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:41:05.578808 I [83370:4380] pact-broker -- (0.000043s) DROP TABLE `versions_backup0`
2021-09-06 11:41:05.578883 I [83370:4380] pact-broker -- (0.000056s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:41:05.579012 I [83370:4380] pact-broker -- (0.000083s) PRAGMA table_info('versions')
2021-09-06 11:41:05.579125 I [83370:4380] pact-broker -- (0.000033s) PRAGMA foreign_key_list('versions')
2021-09-06 11:41:05.579183 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_list('versions')
2021-09-06 11:41:05.579374 I [83370:4380] pact-broker -- (0.000044s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.579440 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: versions_backup0: SELECT NULL AS 'nil' FROM `versions_backup0` LIMIT 1
2021-09-06 11:41:05.579630 I [83370:4380] pact-broker -- (0.000031s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.579906 I [83370:4380] pact-broker -- (0.000208s) PRAGMA index_list('versions')
2021-09-06 11:41:05.579969 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('versions_pacticipant_id_number_index')
2021-09-06 11:41:05.580676 I [83370:4380] pact-broker -- (0.000663s) ALTER TABLE `versions` RENAME TO `versions_backup0`
2021-09-06 11:41:05.580766 I [83370:4380] pact-broker -- (0.000067s) CREATE TABLE `versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` varchar(255) DEFAULT (NULL) NULL, `repository_ref` varchar(255) DEFAULT (NULL) NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `order` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pacticipant_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.580837 I [83370:4380] pact-broker -- (0.000029s) INSERT INTO `versions`(`id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at`) SELECT `id`, `number`, `repository_ref`, `pacticipant_id`, `order`, `created_at`, `updated_at` FROM `versions_backup0`
2021-09-06 11:41:05.580913 I [83370:4380] pact-broker -- (0.000054s) DROP TABLE `versions_backup0`
2021-09-06 11:41:05.581890 I [83370:4380] pact-broker -- (0.000954s) CREATE UNIQUE INDEX `versions_pacticipant_id_number_index` ON `versions` (`pacticipant_id`, `number`)
2021-09-06 11:41:05.582766 I [83370:4380] pact-broker -- (0.000847s) COMMIT
2021-09-06 11:41:05.582827 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.582858 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.582939 I [83370:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.582965 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.582996 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.583196 I [83370:4380] pact-broker -- (0.000153s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.583305 I [83370:4380] pact-broker -- (0.000066s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.583366 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.583547 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.583615 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.583784 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.583901 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.583986 I [83370:4380] pact-broker -- (0.000055s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.584915 I [83370:4380] pact-broker -- (0.000885s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.585057 I [83370:4380] pact-broker -- (0.000118s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.585108 I [83370:4380] pact-broker -- (0.000031s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:41:05.585214 I [83370:4380] pact-broker -- (0.000086s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.585292 I [83370:4380] pact-broker -- (0.000060s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.585454 I [83370:4380] pact-broker -- (0.000114s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.585534 I [83370:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.585595 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.585780 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.585870 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.586026 I [83370:4380] pact-broker -- (0.000030s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.586307 I [83370:4380] pact-broker -- (0.000176s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.586370 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.587086 I [83370:4380] pact-broker -- (0.000672s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.587177 I [83370:4380] pact-broker -- (0.000068s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.587223 I [83370:4380] pact-broker -- (0.000027s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:41:05.587283 I [83370:4380] pact-broker -- (0.000042s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.587357 I [83370:4380] pact-broker -- (0.000056s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.587515 I [83370:4380] pact-broker -- (0.000081s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.587590 I [83370:4380] pact-broker -- (0.000037s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.587677 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.587844 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.587907 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.588085 I [83370:4380] pact-broker -- (0.000031s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.588358 I [83370:4380] pact-broker -- (0.000176s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.588440 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.589155 I [83370:4380] pact-broker -- (0.000670s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.589245 I [83370:4380] pact-broker -- (0.000067s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `json_content` mediumtext DEFAULT (NULL) NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.589291 I [83370:4380] pact-broker -- (0.000028s) INSERT INTO `pacts`(`id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at`) SELECT `id`, `json_content`, `version_id`, `provider_id`, `created_at`, `updated_at` FROM `pacts_backup0`
2021-09-06 11:41:05.589578 I [83370:4380] pact-broker -- (0.000257s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.589739 I [83370:4380] pact-broker -- (0.000137s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.590467 I [83370:4380] pact-broker -- (0.000702s) COMMIT
2021-09-06 11:41:05.590525 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.590555 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.591397 I [83370:4380] pact-broker -- (0.000764s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000011_made_timestamps_mandatory.rb')
2021-09-06 11:41:05.591416 I [83370:4380] pact-broker -- Finished applying migration 000011_made_timestamps_mandatory.rb, direction: up, took 0.032447 seconds
2021-09-06 11:41:05.591422 I [83370:4380] pact-broker -- Begin applying migration 000012_create_webhooks_table.rb, direction: up
2021-09-06 11:41:05.592499 I [83370:4380] pact-broker -- (0.000868s) CREATE TABLE `webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_webhook_uuid` UNIQUE, `method` varchar(255) NOT NULL, `url` varchar(255) NOT NULL, `body` varchar(255), `is_json_request_body` Boolean, `consumer_id` integer NOT NULL CONSTRAINT `fk_webhooks_consumer` REFERENCES `pacticipants`, `provider_id` integer NOT NULL CONSTRAINT `fk_webhooks_provider` REFERENCES `pacticipants`)
2021-09-06 11:41:05.593520 I [83370:4380] pact-broker -- (0.000878s) CREATE TABLE `webhook_headers` (`name` varchar(255) NOT NULL, `value` varchar(255), `webhook_id` integer NOT NULL CONSTRAINT `fk_webhookheaders_webhooks` REFERENCES `webhooks`, CONSTRAINT `webhooks_headers_pk` PRIMARY KEY (`webhook_id`, `name`))
2021-09-06 11:41:05.594266 I [83370:4380] pact-broker -- (0.000683s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000012_create_webhooks_table.rb')
2021-09-06 11:41:05.594284 I [83370:4380] pact-broker -- Finished applying migration 000012_create_webhooks_table.rb, direction: up, took 0.002857 seconds
2021-09-06 11:41:05.594300 I [83370:4380] pact-broker -- Begin applying migration 000013_add_columns_to_webhooks.rb, direction: up
2021-09-06 11:41:05.594365 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.594420 I [83370:4380] pact-broker -- (0.000031s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.594454 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.594932 I [83370:4380] pact-broker -- (0.000422s) ALTER TABLE `webhooks` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.595420 I [83370:4380] pact-broker -- (0.000463s) COMMIT
2021-09-06 11:41:05.595478 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.595507 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.595572 I [83370:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.595613 I [83370:4380] pact-broker -- (0.000024s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.595644 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.596112 I [83370:4380] pact-broker -- (0.000417s) ALTER TABLE `webhooks` ADD COLUMN `updated_at` timestamp
2021-09-06 11:41:05.596590 I [83370:4380] pact-broker -- (0.000451s) COMMIT
2021-09-06 11:41:05.596658 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.596689 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.596769 I [83370:4380] pact-broker -- (0.000011s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.596795 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.596825 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.597283 I [83370:4380] pact-broker -- (0.000414s) ALTER TABLE `webhooks` ADD COLUMN `username` varchar(255)
2021-09-06 11:41:05.597818 I [83370:4380] pact-broker -- (0.000509s) COMMIT
2021-09-06 11:41:05.597875 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.597916 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.597964 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.597989 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.598035 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.598497 I [83370:4380] pact-broker -- (0.000417s) ALTER TABLE `webhooks` ADD COLUMN `password` varchar(255)
2021-09-06 11:41:05.598991 I [83370:4380] pact-broker -- (0.000468s) COMMIT
2021-09-06 11:41:05.599060 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.599091 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.599765 I [83370:4380] pact-broker -- (0.000611s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000013_add_columns_to_webhooks.rb')
2021-09-06 11:41:05.599806 I [83370:4380] pact-broker -- Finished applying migration 000013_add_columns_to_webhooks.rb, direction: up, took 0.005512 seconds
2021-09-06 11:41:05.599813 I [83370:4380] pact-broker -- Begin applying migration 000014_add_timestamps_to_pact_views.rb, direction: up
2021-09-06 11:41:05.600601 I [83370:4380] pact-broker -- (0.000641s) DROP VIEW `all_pacts`
2021-09-06 11:41:05.601473 I [83370:4380] pact-broker -- (0.000706s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pacts`.`json_content`, `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`)
2021-09-06 11:41:05.602050 I [83370:4380] pact-broker -- (0.000535s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:41:05.602768 I [83370:4380] pact-broker -- (0.000676s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:41:05.603366 I [83370:4380] pact-broker -- (0.000530s) DROP VIEW `latest_pacts`
2021-09-06 11:41:05.604000 I [83370:4380] pact-broker -- (0.000587s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.604608 I [83370:4380] pact-broker -- (0.000541s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000014_add_timestamps_to_pact_views.rb')
2021-09-06 11:41:05.604624 I [83370:4380] pact-broker -- Finished applying migration 000014_add_timestamps_to_pact_views.rb, direction: up, took 0.004807 seconds
2021-09-06 11:41:05.604636 I [83370:4380] pact-broker -- Begin applying migration 000015_create_pact_version_content.rb, direction: up
2021-09-06 11:41:05.605479 I [83370:4380] pact-broker -- (0.000707s) CREATE TABLE `pact_version_contents` (`sha` varchar(255) NOT NULL CONSTRAINT `pk_pact_version_contents` PRIMARY KEY, `content` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:41:05.606153 I [83370:4380] pact-broker -- (0.000608s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000015_create_pact_version_content.rb')
2021-09-06 11:41:05.606169 I [83370:4380] pact-broker -- Finished applying migration 000015_create_pact_version_content.rb, direction: up, took 0.001535 seconds
2021-09-06 11:41:05.606175 I [83370:4380] pact-broker -- Begin applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up
2021-09-06 11:41:05.606251 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.606283 I [83370:4380] pact-broker -- (0.000014s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.606773 I [83370:4380] pact-broker -- (0.000462s) BEGIN
2021-09-06 11:41:05.607247 I [83370:4380] pact-broker -- (0.000416s) ALTER TABLE `pacts` ADD COLUMN `pact_version_content_sha` varchar(255) NULL CONSTRAINT `fk_pact_version_content` REFERENCES `pact_version_contents`
2021-09-06 11:41:05.607655 I [83370:4380] pact-broker -- (0.000383s) COMMIT
2021-09-06 11:41:05.607708 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.607737 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.608361 I [83370:4380] pact-broker -- (0.000570s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000016_add_pact_content_foreign_key_to_pacts.rb')
2021-09-06 11:41:05.608382 I [83370:4380] pact-broker -- Finished applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up, took 0.002202 seconds
2021-09-06 11:41:05.608389 I [83370:4380] pact-broker -- Begin applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up
2021-09-06 11:41:05.608535 I [83370:4380] pact-broker -- (0.000091s) SELECT * FROM `pacts`
2021-09-06 11:41:05.609142 I [83370:4380] pact-broker -- (0.000552s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000017_migrate_json_content_to_pact_version_content_table.rb')
2021-09-06 11:41:05.609159 I [83370:4380] pact-broker -- Finished applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up, took 0.000767 seconds
2021-09-06 11:41:05.609166 I [83370:4380] pact-broker -- Begin applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up
2021-09-06 11:41:05.609857 I [83370:4380] pact-broker -- (0.000656s) DROP VIEW `latest_pacts`
2021-09-06 11:41:05.610495 I [83370:4380] pact-broker -- (0.000596s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:41:05.611454 I [83370:4380] pact-broker -- (0.000533s) DROP VIEW `all_pacts`
2021-09-06 11:41:05.611518 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.611548 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.611581 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.611764 I [83370:4380] pact-broker -- (0.000130s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.611857 I [83370:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.611923 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.612607 I [83370:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.612686 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.613475 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.613577 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.613635 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.614525 I [83370:4380] pact-broker -- (0.000846s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.614628 I [83370:4380] pact-broker -- (0.000080s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.614678 I [83370:4380] pact-broker -- (0.000030s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 11:41:05.614784 I [83370:4380] pact-broker -- (0.000088s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.614860 I [83370:4380] pact-broker -- (0.000058s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.615555 I [83370:4380] pact-broker -- (0.000671s) COMMIT
2021-09-06 11:41:05.616321 I [83370:4380] pact-broker -- (0.000720s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.616355 I [83370:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.617231 I [83370:4380] pact-broker -- (0.000821s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000018_drop_json_content_column_from_pacts.rb')
2021-09-06 11:41:05.617250 I [83370:4380] pact-broker -- Finished applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up, took 0.008080 seconds
2021-09-06 11:41:05.617257 I [83370:4380] pact-broker -- Begin applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up
2021-09-06 11:41:05.617324 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.617353 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.617384 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:05.617551 I [83370:4380] pact-broker -- (0.000121s) PRAGMA table_info('pacts')
2021-09-06 11:41:05.617641 I [83370:4380] pact-broker -- (0.000046s) PRAGMA foreign_key_list('pacts')
2021-09-06 11:41:05.618305 I [83370:4380] pact-broker -- (0.000033s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.618462 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.618533 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pacts_backup0: SELECT NULL AS 'nil' FROM `pacts_backup0` LIMIT 1
2021-09-06 11:41:05.619240 I [83370:4380] pact-broker -- (0.000014s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.619340 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('pacts')
2021-09-06 11:41:05.619398 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('pacts_version_id_provider_id_index')
2021-09-06 11:41:05.620253 I [83370:4380] pact-broker -- (0.000811s) ALTER TABLE `pacts` RENAME TO `pacts_backup0`
2021-09-06 11:41:05.620380 I [83370:4380] pact-broker -- (0.000102s) CREATE TABLE `pacts`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `version_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `pact_version_content_sha` varchar(255) DEFAULT (NULL) NOT NULL, FOREIGN KEY (`pact_version_content_sha`) REFERENCES `pact_version_contents` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.620436 I [83370:4380] pact-broker -- (0.000036s) INSERT INTO `pacts`(`id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha`) SELECT `id`, `version_id`, `provider_id`, `created_at`, `updated_at`, `pact_version_content_sha` FROM `pacts_backup0`
2021-09-06 11:41:05.621242 I [83370:4380] pact-broker -- (0.000098s) DROP TABLE `pacts_backup0`
2021-09-06 11:41:05.621326 I [83370:4380] pact-broker -- (0.000062s) CREATE UNIQUE INDEX `pacts_version_id_provider_id_index` ON `pacts` (`version_id`, `provider_id`)
2021-09-06 11:41:05.621887 I [83370:4380] pact-broker -- (0.000536s) COMMIT
2021-09-06 11:41:05.621946 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.621977 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.622784 I [83370:4380] pact-broker -- (0.000747s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000019_make_pact_version_content_sha_not_nullable.rb')
2021-09-06 11:41:05.622802 I [83370:4380] pact-broker -- Finished applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up, took 0.005542 seconds
2021-09-06 11:41:05.622810 I [83370:4380] pact-broker -- Begin applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up
2021-09-06 11:41:05.622988 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_pacts: DROP VIEW `all_pacts`
2021-09-06 11:41:05.624691 I [83370:4380] pact-broker -- (0.000838s) CREATE VIEW `all_pacts` AS SELECT `pacts`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pvc`.`sha` AS 'pact_version_content_sha', `pacts`.`created_at`, `pacts`.`updated_at` FROM `pacts` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pacts`.`version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pacts`.`provider_id`) INNER JOIN `pact_version_contents` AS 'pvc' ON (`pvc`.`sha` = `pacts`.`pact_version_content_sha`)
2021-09-06 11:41:05.625491 I [83370:4380] pact-broker -- (0.000730s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000020_add_pact_version_content_sha_to_all_pacts_view.rb')
2021-09-06 11:41:05.625510 I [83370:4380] pact-broker -- Finished applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up, took 0.002696 seconds
2021-09-06 11:41:05.625517 I [83370:4380] pact-broker -- Begin applying migration 000021_recreate_latest_pacts_view.rb, direction: up
2021-09-06 11:41:05.625598 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pact_consumer_version_orders: DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:41:05.626432 I [83370:4380] pact-broker -- (0.000705s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 11:41:05.626522 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_pacts: DROP VIEW `latest_pacts`
2021-09-06 11:41:05.627354 I [83370:4380] pact-broker -- (0.000708s) CREATE VIEW `latest_pacts` AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.628518 I [83370:4380] pact-broker -- (0.001097s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000021_recreate_latest_pacts_view.rb')
2021-09-06 11:41:05.628536 I [83370:4380] pact-broker -- Finished applying migration 000021_recreate_latest_pacts_view.rb, direction: up, took 0.003016 seconds
2021-09-06 11:41:05.628543 I [83370:4380] pact-broker -- Begin applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up
2021-09-06 11:41:05.628637 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pact_consumer_version_orders: DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:41:05.629513 I [83370:4380] pact-broker -- (0.000749s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 11:41:05.629605 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_tagged_pacts: DROP VIEW `latest_tagged_pacts`
2021-09-06 11:41:05.630367 I [83370:4380] pact-broker -- (0.000633s) CREATE VIEW `latest_tagged_pacts` AS select ap.*, lp.tag_name
      from all_pacts ap
      inner join latest_tagged_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
        and ap.provider_id = lp.provider_id
        and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.630956 I [83370:4380] pact-broker -- (0.000520s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000022_create_latest_tagged_pacts_view.rb')
2021-09-06 11:41:05.630972 I [83370:4380] pact-broker -- Finished applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up, took 0.002425 seconds
2021-09-06 11:41:05.630979 I [83370:4380] pact-broker -- Begin applying migration 000023_create_pact_versions_table.rb, direction: up
2021-09-06 11:41:05.632053 I [83370:4380] pact-broker -- (0.000695s) CREATE TABLE `pact_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer REFERENCES `pacticipants`, `provider_id` integer REFERENCES `pacticipants`, `sha` varchar(255) NOT NULL, `content` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 11:41:05.632803 I [83370:4380] pact-broker -- (0.000688s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:41:05.633376 I [83370:4380] pact-broker -- (0.000512s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000023_create_pact_versions_table.rb')
2021-09-06 11:41:05.633394 I [83370:4380] pact-broker -- Finished applying migration 000023_create_pact_versions_table.rb, direction: up, took 0.002412 seconds
2021-09-06 11:41:05.633401 I [83370:4380] pact-broker -- Begin applying migration 000024_populate_pact_versions.rb, direction: up
2021-09-06 11:41:05.633968 I [83370:4380] pact-broker -- (0.000540s) insert into pact_versions (sha, content, created_at) select sha, content, created_at from pact_version_contents
2021-09-06 11:41:05.634130 I [83370:4380] pact-broker -- (0.000133s) update pact_versions set consumer_id = (select consumer_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 11:41:05.634239 I [83370:4380] pact-broker -- (0.000084s) update pact_versions set provider_id = (select provider_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 11:41:05.634310 I [83370:4380] pact-broker -- (0.000046s) delete from pact_versions where consumer_id is null
2021-09-06 11:41:05.634914 I [83370:4380] pact-broker -- (0.000549s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000024_populate_pact_versions.rb')
2021-09-06 11:41:05.634933 I [83370:4380] pact-broker -- Finished applying migration 000024_populate_pact_versions.rb, direction: up, took 0.001529 seconds
2021-09-06 11:41:05.634940 I [83370:4380] pact-broker -- Begin applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up
2021-09-06 11:41:05.635006 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.635036 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.635073 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:05.635658 I [83370:4380] pact-broker -- (0.000177s) PRAGMA table_info('pact_versions')
2021-09-06 11:41:05.635762 I [83370:4380] pact-broker -- (0.000050s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:41:05.635825 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.635976 I [83370:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.636566 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:41:05.636717 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.636824 I [83370:4380] pact-broker -- (0.000033s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.636884 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:41:05.638198 I [83370:4380] pact-broker -- (0.001268s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:41:05.638301 I [83370:4380] pact-broker -- (0.000079s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.638353 I [83370:4380] pact-broker -- (0.000033s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:41:05.638467 I [83370:4380] pact-broker -- (0.000095s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:41:05.638553 I [83370:4380] pact-broker -- (0.000067s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:41:05.639145 I [83370:4380] pact-broker -- (0.000085s) PRAGMA table_info('pact_versions')
2021-09-06 11:41:05.639228 I [83370:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:41:05.639287 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.639422 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.640007 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:41:05.640187 I [83370:4380] pact-broker -- (0.000043s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.640504 I [83370:4380] pact-broker -- (0.000247s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.640569 I [83370:4380] pact-broker -- (0.000031s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:41:05.641657 I [83370:4380] pact-broker -- (0.001043s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:41:05.641790 I [83370:4380] pact-broker -- (0.000110s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.641842 I [83370:4380] pact-broker -- (0.000032s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:41:05.642391 I [83370:4380] pact-broker -- (0.000057s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:41:05.642479 I [83370:4380] pact-broker -- (0.000065s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:41:05.642613 I [83370:4380] pact-broker -- (0.000085s) PRAGMA table_info('pact_versions')
2021-09-06 11:41:05.642691 I [83370:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('pact_versions')
2021-09-06 11:41:05.642750 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.643395 I [83370:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.643465 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: pact_versions_backup0: SELECT NULL AS 'nil' FROM `pact_versions_backup0` LIMIT 1
2021-09-06 11:41:05.643635 I [83370:4380] pact-broker -- (0.000040s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.644437 I [83370:4380] pact-broker -- (0.000733s) PRAGMA index_list('pact_versions')
2021-09-06 11:41:05.644505 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_info('unq_pvc_con_prov_sha')
2021-09-06 11:41:05.645626 I [83370:4380] pact-broker -- (0.001074s) ALTER TABLE `pact_versions` RENAME TO `pact_versions_backup0`
2021-09-06 11:41:05.645723 I [83370:4380] pact-broker -- (0.000074s) CREATE TABLE `pact_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `sha` varchar(255) DEFAULT (NULL) NOT NULL, `content` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.645773 I [83370:4380] pact-broker -- (0.000031s) INSERT INTO `pact_versions`(`id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at`) SELECT `id`, `consumer_id`, `provider_id`, `sha`, `content`, `created_at` FROM `pact_versions_backup0`
2021-09-06 11:41:05.646095 I [83370:4380] pact-broker -- (0.000302s) DROP TABLE `pact_versions_backup0`
2021-09-06 11:41:05.646245 I [83370:4380] pact-broker -- (0.000127s) CREATE UNIQUE INDEX `unq_pvc_con_prov_sha` ON `pact_versions` (`consumer_id`, `provider_id`, `sha`)
2021-09-06 11:41:05.646970 I [83370:4380] pact-broker -- (0.000699s) COMMIT
2021-09-06 11:41:05.647030 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.647061 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.648086 I [83370:4380] pact-broker -- (0.000960s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000025_make_pv_pacticipants_mandatory.rb')
2021-09-06 11:41:05.648106 I [83370:4380] pact-broker -- Finished applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up, took 0.013161 seconds
2021-09-06 11:41:05.648113 I [83370:4380] pact-broker -- Begin applying migration 000026_create_pact_publications.rb, direction: up
2021-09-06 11:41:05.649527 I [83370:4380] pact-broker -- (0.000813s) CREATE TABLE `pact_publications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `consumer_version_id` integer NOT NULL REFERENCES `versions`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `revision_number` integer NOT NULL, `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `created_at` timestamp NOT NULL)
2021-09-06 11:41:05.650504 I [83370:4380] pact-broker -- (0.000912s) CREATE UNIQUE INDEX `cv_prov_revision_unq` ON `pact_publications` (`consumer_version_id`, `provider_id`, `revision_number`)
2021-09-06 11:41:05.651359 I [83370:4380] pact-broker -- (0.000801s) CREATE INDEX `cv_prov_id_ndx` ON `pact_publications` (`consumer_version_id`, `provider_id`, `id`)
2021-09-06 11:41:05.652198 I [83370:4380] pact-broker -- (0.000778s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000026_create_pact_publications.rb')
2021-09-06 11:41:05.652217 I [83370:4380] pact-broker -- Finished applying migration 000026_create_pact_publications.rb, direction: up, took 0.004100 seconds
2021-09-06 11:41:05.652224 I [83370:4380] pact-broker -- Begin applying migration 000027_populate_pact_publications.rb, direction: up
2021-09-06 11:41:05.652946 I [83370:4380] pact-broker -- (0.000695s) insert into pact_publications
        (consumer_version_id, provider_id, revision_number, pact_version_id, created_at)
      select ap.consumer_version_id, ap.provider_id, 1, pc.id, ap.updated_at
      from all_pacts ap inner join pact_versions pc
      on pc.sha = ap.pact_version_content_sha
2021-09-06 11:41:05.653620 I [83370:4380] pact-broker -- (0.000613s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000027_populate_pact_publications.rb')
2021-09-06 11:41:05.653636 I [83370:4380] pact-broker -- Finished applying migration 000027_populate_pact_publications.rb, direction: up, took 0.001410 seconds
2021-09-06 11:41:05.653643 I [83370:4380] pact-broker -- Begin applying migration 000028_create_all_pact_publications.rb, direction: up
2021-09-06 11:41:05.655267 I [83370:4380] pact-broker -- (0.000874s) CREATE VIEW `all_pact_publications` AS SELECT `pact_publications`.`id`, `c`.`id` AS 'consumer_id', `c`.`name` AS 'consumer_name', `cv`.`id` AS 'consumer_version_id', `cv`.`number` AS 'consumer_version_number', `cv`.`order` AS 'consumer_version_order', `p`.`id` AS 'provider_id', `p`.`name` AS 'provider_name', `pact_publications`.`revision_number`, `pv`.`id` AS 'pact_version_id', `pv`.`sha` AS 'pact_version_sha', `pact_publications`.`created_at` FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`cv`.`id` = `pact_publications`.`consumer_version_id`) INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `cv`.`pacticipant_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`) INNER JOIN `pact_versions` AS 'pv' ON (`pv`.`id` = `pact_publications`.`pact_version_id`)
2021-09-06 11:41:05.656000 I [83370:4380] pact-broker -- (0.000677s) CREATE VIEW `latest_pact_publication_revision_numbers` AS select provider_id, consumer_id, consumer_version_order, max(revision_number) as latest_revision_number
      from all_pact_publications
      group by provider_id, consumer_id, consumer_version_order
2021-09-06 11:41:05.656675 I [83370:4380] pact-broker -- (0.000628s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
      from all_pact_publications app
      inner join latest_pact_publication_revision_numbers lr
      on app.consumer_id = lr.consumer_id
        and app.provider_id = lr.provider_id
        and app.consumer_version_order = lr.consumer_version_order
        and app.revision_number = lr.latest_revision_number
2021-09-06 11:41:05.657269 I [83370:4380] pact-broker -- (0.000548s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:41:05.657848 I [83370:4380] pact-broker -- (0.000535s) CREATE VIEW `latest_pact_consumer_version_orders` AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pact_publications
      group by provider_id, consumer_id
2021-09-06 11:41:05.658523 I [83370:4380] pact-broker -- (0.000629s) CREATE VIEW `latest_pact_publications` AS select lpcv.*
      from latest_pact_publications_by_consumer_versions lpcv
      inner join latest_pact_consumer_version_orders lp
      on lpcv.consumer_id = lp.consumer_id
           and lpcv.provider_id = lp.provider_id
           and lpcv.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.659126 I [83370:4380] pact-broker -- (0.000534s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000028_create_all_pact_publications.rb')
2021-09-06 11:41:05.659143 I [83370:4380] pact-broker -- Finished applying migration 000028_create_all_pact_publications.rb, direction: up, took 0.005496 seconds
2021-09-06 11:41:05.659150 I [83370:4380] pact-broker -- Begin applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up
2021-09-06 11:41:05.660291 I [83370:4380] pact-broker -- (0.000550s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:41:05.660937 I [83370:4380] pact-broker -- (0.000602s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from latest_pact_publications_by_consumer_versions ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 11:41:05.661648 I [83370:4380] pact-broker -- (0.000666s) CREATE VIEW `latest_tagged_pact_publications` AS select lp.*, o.tag_name
      from latest_pact_publications_by_consumer_versions lp
      inner join latest_tagged_pact_consumer_version_orders o
      on lp.consumer_id = o.consumer_id
        and lp.provider_id = o.provider_id
        and lp.consumer_version_order = latest_consumer_version_order
2021-09-06 11:41:05.662250 I [83370:4380] pact-broker -- (0.000536s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000029_create_latest_tagged_pact_publications.rb')
2021-09-06 11:41:05.662267 I [83370:4380] pact-broker -- Finished applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up, took 0.003114 seconds
2021-09-06 11:41:05.662275 I [83370:4380] pact-broker -- Begin applying migration 000030_drop_old_tables_and_views.rb, direction: up
2021-09-06 11:41:05.665007 I [83370:4380] pact-broker -- (0.000563s) DROP VIEW `latest_tagged_pacts`
2021-09-06 11:41:05.665566 I [83370:4380] pact-broker -- (0.000517s) DROP VIEW `latest_pacts`
2021-09-06 11:41:05.666122 I [83370:4380] pact-broker -- (0.000516s) DROP VIEW `all_pacts`
2021-09-06 11:41:05.666720 I [83370:4380] pact-broker -- (0.000555s) DROP TABLE `pacts`
2021-09-06 11:41:05.667332 I [83370:4380] pact-broker -- (0.000571s) DROP TABLE `pact_version_contents`
2021-09-06 11:41:05.667935 I [83370:4380] pact-broker -- (0.000539s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000030_drop_old_tables_and_views.rb')
2021-09-06 11:41:05.667951 I [83370:4380] pact-broker -- Finished applying migration 000030_drop_old_tables_and_views.rb, direction: up, took 0.005673 seconds
2021-09-06 11:41:05.667957 I [83370:4380] pact-broker -- Begin applying migration 000031_create_verifications.rb, direction: up
2021-09-06 11:41:05.668768 I [83370:4380] pact-broker -- (0.000641s) CREATE TABLE `verifications` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer, `success` Boolean NOT NULL, `provider_version` varchar(255) NOT NULL, `build_url` varchar(255), `pact_version_id` integer NOT NULL REFERENCES `pact_versions`, `execution_date` timestamp NOT NULL, `created_at` timestamp NOT NULL)
2021-09-06 11:41:05.669441 I [83370:4380] pact-broker -- (0.000612s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 11:41:05.670033 I [83370:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000031_create_verifications.rb')
2021-09-06 11:41:05.670049 I [83370:4380] pact-broker -- Finished applying migration 000031_create_verifications.rb, direction: up, took 0.002089 seconds
2021-09-06 11:41:05.670056 I [83370:4380] pact-broker -- Begin applying migration 000032_create_latest_verifications.rb, direction: up
2021-09-06 11:41:05.670664 I [83370:4380] pact-broker -- (0.000572s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 11:41:05.670754 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications: DROP VIEW `latest_verifications`
2021-09-06 11:41:05.671579 I [83370:4380] pact-broker -- (0.000689s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, v.provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at
        FROM verifications v
        INNER JOIN latest_verification_numbers lv ON v.pact_version_id = lv.pact_version_id AND v.number = lv.latest_number
2021-09-06 11:41:05.672155 I [83370:4380] pact-broker -- (0.000508s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000032_create_latest_verifications.rb')
2021-09-06 11:41:05.672172 I [83370:4380] pact-broker -- Finished applying migration 000032_create_latest_verifications.rb, direction: up, took 0.002113 seconds
2021-09-06 11:41:05.672178 I [83370:4380] pact-broker -- Begin applying migration 000033_create_config_table.rb, direction: up
2021-09-06 11:41:05.673010 I [83370:4380] pact-broker -- (0.000683s) CREATE TABLE `config` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `name` varchar(255) NOT NULL, `type` varchar(255) NOT NULL, `value` mediumtext, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:41:05.673645 I [83370:4380] pact-broker -- (0.000588s) CREATE UNIQUE INDEX `unq_config_name` ON `config` (`name`)
2021-09-06 11:41:05.674226 I [83370:4380] pact-broker -- (0.000525s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000033_create_config_table.rb')
2021-09-06 11:41:05.674242 I [83370:4380] pact-broker -- Finished applying migration 000033_create_config_table.rb, direction: up, took 0.002060 seconds
2021-09-06 11:41:05.674248 I [83370:4380] pact-broker -- Begin applying migration 000034_create_index_on_consumer_version_order.rb, direction: up
2021-09-06 11:41:05.674310 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.674338 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.674375 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:05.674652 I [83370:4380] pact-broker -- (0.000239s) CREATE INDEX `ndx_ver_num` ON `versions` (`number`)
2021-09-06 11:41:05.674793 I [83370:4380] pact-broker -- (0.000103s) CREATE INDEX `ndx_ver_ord` ON `versions` (`order`)
2021-09-06 11:41:05.674890 I [83370:4380] pact-broker -- (0.000061s) CREATE UNIQUE INDEX `uq_ver_ppt_ord` ON `versions` (`pacticipant_id`, `order`)
2021-09-06 11:41:05.675374 I [83370:4380] pact-broker -- (0.000461s) COMMIT
2021-09-06 11:41:05.675428 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.675472 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.676050 I [83370:4380] pact-broker -- (0.000528s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000034_create_index_on_consumer_version_order.rb')
2021-09-06 11:41:05.676066 I [83370:4380] pact-broker -- Finished applying migration 000034_create_index_on_consumer_version_order.rb, direction: up, took 0.001814 seconds
2021-09-06 11:41:05.676072 I [83370:4380] pact-broker -- Begin applying migration 000035_create_index_on_names.rb, direction: up
2021-09-06 11:41:05.676126 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.676154 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.676184 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.676455 I [83370:4380] pact-broker -- (0.000238s) CREATE INDEX `ndx_ppt_name` ON `pacticipants` (`name`)
2021-09-06 11:41:05.676887 I [83370:4380] pact-broker -- (0.000410s) COMMIT
2021-09-06 11:41:05.676939 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.676966 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.677012 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.677036 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.677065 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.677329 I [83370:4380] pact-broker -- (0.000232s) CREATE INDEX `ndx_tag_name` ON `tags` (`name`)
2021-09-06 11:41:05.677762 I [83370:4380] pact-broker -- (0.000410s) COMMIT
2021-09-06 11:41:05.677812 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.677840 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.678412 I [83370:4380] pact-broker -- (0.000523s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000035_create_index_on_names.rb')
2021-09-06 11:41:05.678428 I [83370:4380] pact-broker -- Finished applying migration 000035_create_index_on_names.rb, direction: up, took 0.002353 seconds
2021-09-06 11:41:05.678435 I [83370:4380] pact-broker -- Begin applying migration 000036_create_webhook_execution.rb, direction: up
2021-09-06 11:41:05.679252 I [83370:4380] pact-broker -- (0.000640s) CREATE TABLE `webhook_executions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks`, `pact_publication_id` integer REFERENCES `pact_publications`, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `success` Boolean NOT NULL, `logs` mediumtext, `created_at` timestamp NOT NULL)
2021-09-06 11:41:05.679840 I [83370:4380] pact-broker -- (0.000532s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000036_create_webhook_execution.rb')
2021-09-06 11:41:05.679856 I [83370:4380] pact-broker -- Finished applying migration 000036_create_webhook_execution.rb, direction: up, took 0.001418 seconds
2021-09-06 11:41:05.679863 I [83370:4380] pact-broker -- Begin applying migration 000037_create_labels_table.rb, direction: up
2021-09-06 11:41:05.680679 I [83370:4380] pact-broker -- (0.000685s) CREATE TABLE `labels` (`name` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants`, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL, CONSTRAINT `labels_pk` PRIMARY KEY (`pacticipant_id`, `name`))
2021-09-06 11:41:05.681267 I [83370:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000037_create_labels_table.rb')
2021-09-06 11:41:05.681283 I [83370:4380] pact-broker -- Finished applying migration 000037_create_labels_table.rb, direction: up, took 0.001417 seconds
2021-09-06 11:41:05.681290 I [83370:4380] pact-broker -- Begin applying migration 000038_create_triggered_webhooks_table.rb, direction: up
2021-09-06 11:41:05.682198 I [83370:4380] pact-broker -- (0.000713s) CREATE TABLE `triggered_webhooks` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `trigger_uuid` varchar(255) NOT NULL, `trigger_type` varchar(255) NOT NULL, `pact_publication_id` integer NOT NULL REFERENCES `pact_publications`, `webhook_id` integer REFERENCES `webhooks`, `webhook_uuid` varchar(255) NOT NULL, `consumer_id` integer NOT NULL REFERENCES `pacticipants`, `provider_id` integer NOT NULL REFERENCES `pacticipants`, `status` varchar(255) NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:41:05.682878 I [83370:4380] pact-broker -- (0.000626s) CREATE UNIQUE INDEX `uq_triggered_webhook_wi` ON `triggered_webhooks` (`webhook_id`, `trigger_uuid`)
2021-09-06 11:41:05.683619 I [83370:4380] pact-broker -- (0.000687s) CREATE UNIQUE INDEX `uq_triggered_webhook_ppi_wi` ON `triggered_webhooks` (`pact_publication_id`, `webhook_id`, `trigger_uuid`)
2021-09-06 11:41:05.684224 I [83370:4380] pact-broker -- (0.000548s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000038_create_triggered_webhooks_table.rb')
2021-09-06 11:41:05.684240 I [83370:4380] pact-broker -- Finished applying migration 000038_create_triggered_webhooks_table.rb, direction: up, took 0.002947 seconds
2021-09-06 11:41:05.684246 I [83370:4380] pact-broker -- Begin applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up
2021-09-06 11:41:05.684306 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.684334 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.684365 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.685034 I [83370:4380] pact-broker -- (0.000620s) ALTER TABLE `webhook_executions` ADD COLUMN `triggered_webhook_id` integer REFERENCES `triggered_webhooks`
2021-09-06 11:41:05.685206 I [83370:4380] pact-broker -- (0.000113s) PRAGMA table_info('webhook_executions')
2021-09-06 11:41:05.685336 I [83370:4380] pact-broker -- (0.000059s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:41:05.685390 I [83370:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.685613 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.685693 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:41:05.685889 I [83370:4380] pact-broker -- (0.000055s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.686305 I [83370:4380] pact-broker -- (0.000342s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.687806 I [83370:4380] pact-broker -- (0.001476s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:41:05.687977 I [83370:4380] pact-broker -- (0.000147s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.688053 I [83370:4380] pact-broker -- (0.000056s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:41:05.688138 I [83370:4380] pact-broker -- (0.000066s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:41:05.688317 I [83370:4380] pact-broker -- (0.000103s) PRAGMA table_info('webhook_executions')
2021-09-06 11:41:05.688416 I [83370:4380] pact-broker -- (0.000057s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:41:05.688468 I [83370:4380] pact-broker -- (0.000020s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.688678 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.688743 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:41:05.688923 I [83370:4380] pact-broker -- (0.000054s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.689359 I [83370:4380] pact-broker -- (0.000346s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.690951 I [83370:4380] pact-broker -- (0.001564s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:41:05.691063 I [83370:4380] pact-broker -- (0.000087s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NOT NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.691112 I [83370:4380] pact-broker -- (0.000030s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:41:05.691171 I [83370:4380] pact-broker -- (0.000041s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:41:05.691320 I [83370:4380] pact-broker -- (0.000101s) PRAGMA table_info('webhook_executions')
2021-09-06 11:41:05.691413 I [83370:4380] pact-broker -- (0.000052s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:41:05.691464 I [83370:4380] pact-broker -- (0.000019s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.691673 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.691737 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:41:05.691933 I [83370:4380] pact-broker -- (0.000054s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.692349 I [83370:4380] pact-broker -- (0.000346s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.693881 I [83370:4380] pact-broker -- (0.001508s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:41:05.693986 I [83370:4380] pact-broker -- (0.000084s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.694033 I [83370:4380] pact-broker -- (0.000029s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:41:05.694091 I [83370:4380] pact-broker -- (0.000039s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:41:05.694253 I [83370:4380] pact-broker -- (0.000117s) PRAGMA table_info('webhook_executions')
2021-09-06 11:41:05.694350 I [83370:4380] pact-broker -- (0.000056s) PRAGMA foreign_key_list('webhook_executions')
2021-09-06 11:41:05.694401 I [83370:4380] pact-broker -- (0.000019s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.694608 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.694671 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhook_executions_backup0: SELECT NULL AS 'nil' FROM `webhook_executions_backup0` LIMIT 1
2021-09-06 11:41:05.694846 I [83370:4380] pact-broker -- (0.000053s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.695287 I [83370:4380] pact-broker -- (0.000348s) PRAGMA index_list('webhook_executions')
2021-09-06 11:41:05.696791 I [83370:4380] pact-broker -- (0.001478s) ALTER TABLE `webhook_executions` RENAME TO `webhook_executions_backup0`
2021-09-06 11:41:05.696895 I [83370:4380] pact-broker -- (0.000082s) CREATE TABLE `webhook_executions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer DEFAULT (NULL) NULL, `pact_publication_id` integer DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `logs` mediumtext DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `triggered_webhook_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`webhook_id`) REFERENCES `webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_publication_id`) REFERENCES `pact_publications` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`triggered_webhook_id`) REFERENCES `triggered_webhooks` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.696941 I [83370:4380] pact-broker -- (0.000029s) INSERT INTO `webhook_executions`(`id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id`) SELECT `id`, `webhook_id`, `pact_publication_id`, `consumer_id`, `provider_id`, `success`, `logs`, `created_at`, `triggered_webhook_id` FROM `webhook_executions_backup0`
2021-09-06 11:41:05.696997 I [83370:4380] pact-broker -- (0.000040s) DROP TABLE `webhook_executions_backup0`
2021-09-06 11:41:05.697730 I [83370:4380] pact-broker -- (0.000708s) COMMIT
2021-09-06 11:41:05.697792 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.697822 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.698708 I [83370:4380] pact-broker -- (0.000829s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000039_add_triggered_webhooks_fk_to_execution.rb')
2021-09-06 11:41:05.698728 I [83370:4380] pact-broker -- Finished applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up, took 0.014476 seconds
2021-09-06 11:41:05.698735 I [83370:4380] pact-broker -- Begin applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up
2021-09-06 11:41:05.698827 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_ids: DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 11:41:05.699703 I [83370:4380] pact-broker -- (0.000741s) CREATE VIEW `latest_triggered_webhook_ids` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
      from triggered_webhooks
      group by webhook_uuid, consumer_id, provider_id
2021-09-06 11:41:05.700530 I [83370:4380] pact-broker -- (0.000756s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
      from triggered_webhooks tw
      inner join latest_triggered_webhook_ids ltwi
      on tw.consumer_id = ltwi.consumer_id
      and tw.provider_id = ltwi.provider_id
      and tw.webhook_uuid = ltwi.webhook_uuid
      and tw.created_at = ltwi.latest_triggered_webhook_created_at
2021-09-06 11:41:05.701467 I [83370:4380] pact-broker -- (0.000865s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000040_create_latest_triggered_webhooks_view.rb')
2021-09-06 11:41:05.701485 I [83370:4380] pact-broker -- Finished applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up, took 0.002747 seconds
2021-09-06 11:41:05.701492 I [83370:4380] pact-broker -- Begin applying migration 000041_migrate_execution_data.rb, direction: up
2021-09-06 11:41:05.701643 I [83370:4380] pact-broker -- (0.000092s) SELECT * FROM `webhook_executions`
2021-09-06 11:41:05.702458 I [83370:4380] pact-broker -- (0.000758s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000041_migrate_execution_data.rb')
2021-09-06 11:41:05.702477 I [83370:4380] pact-broker -- Finished applying migration 000041_migrate_execution_data.rb, direction: up, took 0.000980 seconds
2021-09-06 11:41:05.702483 I [83370:4380] pact-broker -- Begin applying migration 000042_delete_orphan_webhook_data.rb, direction: up
2021-09-06 11:41:05.702665 I [83370:4380] pact-broker -- (0.000099s) SELECT * FROM `triggered_webhooks` WHERE (`webhook_id` IS NULL)
2021-09-06 11:41:05.702796 I [83370:4380] pact-broker -- (0.000057s) DELETE FROM `webhook_executions` WHERE ((`webhook_id` IS NULL) AND (`triggered_webhook_id` IS NULL))
2021-09-06 11:41:05.703635 I [83370:4380] pact-broker -- (0.000788s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000042_delete_orphan_webhook_data.rb')
2021-09-06 11:41:05.703653 I [83370:4380] pact-broker -- Finished applying migration 000042_delete_orphan_webhook_data.rb, direction: up, took 0.001166 seconds
2021-09-06 11:41:05.703660 I [83370:4380] pact-broker -- Begin applying migration 000043_add_provider_version_to_verification.rb, direction: up
2021-09-06 11:41:05.703722 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.703751 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.703805 I [83370:4380] pact-broker -- (0.000032s) BEGIN
2021-09-06 11:41:05.704519 I [83370:4380] pact-broker -- (0.000658s) ALTER TABLE `verifications` ADD COLUMN `provider_version_id` integer CONSTRAINT `fk_verifications_versions` REFERENCES `versions`
2021-09-06 11:41:05.705150 I [83370:4380] pact-broker -- (0.000604s) COMMIT
2021-09-06 11:41:05.705207 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.705238 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.706008 I [83370:4380] pact-broker -- (0.000718s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000043_add_provider_version_to_verification.rb')
2021-09-06 11:41:05.706030 I [83370:4380] pact-broker -- Finished applying migration 000043_add_provider_version_to_verification.rb, direction: up, took 0.002366 seconds
2021-09-06 11:41:05.706037 I [83370:4380] pact-broker -- Begin applying migration 000044_populate_verifications_provider_version_id.rb, direction: up
2021-09-06 11:41:05.706245 I [83370:4380] pact-broker -- (0.000085s) SELECT `verifications`.`id`, `provider_version`, `provider_id`, `verifications`.`created_at` FROM `verifications` INNER JOIN `pact_versions` ON (`pact_versions`.`id` = `verifications`.`pact_version_id`)
2021-09-06 11:41:05.707005 I [83370:4380] pact-broker -- (0.000710s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000044_populate_verifications_provider_version_id.rb')
2021-09-06 11:41:05.707021 I [83370:4380] pact-broker -- Finished applying migration 000044_populate_verifications_provider_version_id.rb, direction: up, took 0.000981 seconds
2021-09-06 11:41:05.707027 I [83370:4380] pact-broker -- Begin applying migration 000045_set_verification_provider_number_nullable.rb, direction: up
2021-09-06 11:41:05.707082 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.707110 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.707140 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.707337 I [83370:4380] pact-broker -- (0.000151s) PRAGMA table_info('verifications')
2021-09-06 11:41:05.707420 I [83370:4380] pact-broker -- (0.000041s) PRAGMA foreign_key_list('verifications')
2021-09-06 11:41:05.707479 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('verifications')
2021-09-06 11:41:05.707684 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.707752 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: verifications_backup0: SELECT NULL AS 'nil' FROM `verifications_backup0` LIMIT 1
2021-09-06 11:41:05.707896 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.708028 I [83370:4380] pact-broker -- (0.000036s) PRAGMA index_list('verifications')
2021-09-06 11:41:05.708087 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_info('verifications_pact_version_id_number_index')
2021-09-06 11:41:05.710021 I [83370:4380] pact-broker -- (0.001889s) ALTER TABLE `verifications` RENAME TO `verifications_backup0`
2021-09-06 11:41:05.710177 I [83370:4380] pact-broker -- (0.000131s) CREATE TABLE `verifications`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `number` integer DEFAULT (NULL) NULL, `success` Boolean DEFAULT (NULL) NOT NULL, `provider_version` varchar(255) DEFAULT (NULL) NULL, `build_url` varchar(255) DEFAULT (NULL) NULL, `pact_version_id` integer DEFAULT (NULL) NOT NULL, `execution_date` timestamp DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `provider_version_id` integer DEFAULT (NULL) NULL, FOREIGN KEY (`provider_version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`pact_version_id`) REFERENCES `pact_versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.710253 I [83370:4380] pact-broker -- (0.000055s) INSERT INTO `verifications`(`id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id`) SELECT `id`, `number`, `success`, `provider_version`, `build_url`, `pact_version_id`, `execution_date`, `created_at`, `provider_version_id` FROM `verifications_backup0`
2021-09-06 11:41:05.710361 I [83370:4380] pact-broker -- (0.000089s) DROP TABLE `verifications_backup0`
2021-09-06 11:41:05.710442 I [83370:4380] pact-broker -- (0.000062s) CREATE UNIQUE INDEX `verifications_pact_version_id_number_index` ON `verifications` (`pact_version_id`, `number`)
2021-09-06 11:41:05.711004 I [83370:4380] pact-broker -- (0.000537s) COMMIT
2021-09-06 11:41:05.711062 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.711093 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.711834 I [83370:4380] pact-broker -- (0.000687s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000045_set_verification_provider_number_nullable.rb')
2021-09-06 11:41:05.711852 I [83370:4380] pact-broker -- Finished applying migration 000045_set_verification_provider_number_nullable.rb, direction: up, took 0.004820 seconds
2021-09-06 11:41:05.711859 I [83370:4380] pact-broker -- Begin applying migration 000046_recreate_latest_verifications.rb, direction: up
2021-09-06 11:41:05.712551 I [83370:4380] pact-broker -- (0.000652s) DROP VIEW `latest_verification_numbers`
2021-09-06 11:41:05.713333 I [83370:4380] pact-broker -- (0.000729s) CREATE VIEW `latest_verification_numbers` AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 11:41:05.714176 I [83370:4380] pact-broker -- (0.000796s) DROP VIEW `latest_verifications`
2021-09-06 11:41:05.714872 I [83370:4380] pact-broker -- (0.000651s) CREATE VIEW `latest_verifications` AS SELECT v.id, v.number, v.success, s.number as provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at, v.provider_version_id, s.number as provider_version_number
        FROM verifications v
        INNER JOIN latest_verification_numbers lv
          ON v.pact_version_id = lv.pact_version_id
          AND v.number = lv.latest_number
        INNER JOIN versions s on v.provider_version_id = s.id
2021-09-06 11:41:05.715428 I [83370:4380] pact-broker -- (0.000487s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000046_recreate_latest_verifications.rb')
2021-09-06 11:41:05.715444 I [83370:4380] pact-broker -- Finished applying migration 000046_recreate_latest_verifications.rb, direction: up, took 0.003582 seconds
2021-09-06 11:41:05.715451 I [83370:4380] pact-broker -- Begin applying migration 000047_create_all_verifications.rb, direction: up
2021-09-06 11:41:05.715614 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: all_verifications: DROP VIEW `all_verifications`
2021-09-06 11:41:05.716437 I [83370:4380] pact-broker -- (0.000620s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:41:05.717065 I [83370:4380] pact-broker -- (0.000567s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000047_create_all_verifications.rb')
2021-09-06 11:41:05.717081 I [83370:4380] pact-broker -- Finished applying migration 000047_create_all_verifications.rb, direction: up, took 0.001626 seconds
2021-09-06 11:41:05.717088 I [83370:4380] pact-broker -- Begin applying migration 000048_create_matrix.rb, direction: up
2021-09-06 11:41:05.718093 I [83370:4380] pact-broker -- (0.000725s) CREATE VIEW `matrix` AS SELECT `all_pact_publications`.`consumer_id`, `all_pact_publications`.`consumer_name`, `all_pact_publications`.`consumer_version_id`, `all_pact_publications`.`consumer_version_number`, `all_pact_publications`.`consumer_version_order`, `all_pact_publications`.`id` AS 'pact_publication_id', `all_pact_publications`.`pact_version_id`, `all_pact_publications`.`pact_version_sha`, `all_pact_publications`.`revision_number` AS 'pact_revision_number', `all_pact_publications`.`created_at` AS 'pact_created_at', `all_pact_publications`.`provider_id`, `all_pact_publications`.`provider_name`, `versions`.`id` AS 'provider_version_id', `versions`.`number` AS 'provider_version_number', `versions`.`order` AS 'provider_version_order', `verifications`.`id` AS 'verification_id', `verifications`.`success`, `verifications`.`number` AS 'verification_number', `verifications`.`execution_date` AS 'verification_executed_at', `verifications`.`build_url` AS 'verification_build_url' FROM `all_pact_publications` LEFT OUTER JOIN `verifications` ON (`verifications`.`pact_version_id` = `all_pact_publications`.`pact_version_id`) LEFT OUTER JOIN `versions` ON (`versions`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:41:05.718640 I [83370:4380] pact-broker -- (0.000486s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000048_create_matrix.rb')
2021-09-06 11:41:05.718656 I [83370:4380] pact-broker -- Finished applying migration 000048_create_matrix.rb, direction: up, took 0.001565 seconds
2021-09-06 11:41:05.718663 I [83370:4380] pact-broker -- Begin applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up
2021-09-06 11:41:05.719413 I [83370:4380] pact-broker -- (0.000712s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select consumer_version_id, provider_version_id, max(verification_id) as latest_verification_id
      from matrix
      inner join latest_pact_publication_revision_numbers lr
        on matrix.consumer_id = lr.consumer_id
        and matrix.provider_id = lr.provider_id
        and matrix.consumer_version_order = lr.consumer_version_order
        and matrix.pact_revision_number = lr.latest_revision_number
        group by consumer_version_id, provider_version_id
2021-09-06 11:41:05.720013 I [83370:4380] pact-broker -- (0.000535s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000049_create_latest_verifications_for_cv_and_pv.rb')
2021-09-06 11:41:05.720029 I [83370:4380] pact-broker -- Finished applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up, took 0.001363 seconds
2021-09-06 11:41:05.720036 I [83370:4380] pact-broker -- Begin applying migration 000050_create_latest_matrix.rb, direction: up
2021-09-06 11:41:05.720654 I [83370:4380] pact-broker -- (0.000582s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:41:05.721237 I [83370:4380] pact-broker -- (0.000523s) INSERT INTO `schema_migrations` (`filename`) VALUES ('000050_create_latest_matrix.rb')
2021-09-06 11:41:05.721253 I [83370:4380] pact-broker -- Finished applying migration 000050_create_latest_matrix.rb, direction: up, took 0.001214 seconds
2021-09-06 11:41:05.721259 I [83370:4380] pact-broker -- Begin applying migration 20171112_add_test_results.rb, direction: up
2021-09-06 11:41:05.721321 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.721349 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.721384 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.722214 I [83370:4380] pact-broker -- (0.000780s) ALTER TABLE `verifications` ADD COLUMN `test_results` mediumtext
2021-09-06 11:41:05.722647 I [83370:4380] pact-broker -- (0.000407s) COMMIT
2021-09-06 11:41:05.722705 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.722736 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.723392 I [83370:4380] pact-broker -- (0.000593s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171112_add_test_results.rb')
2021-09-06 11:41:05.723409 I [83370:4380] pact-broker -- Finished applying migration 20171112_add_test_results.rb, direction: up, took 0.002146 seconds
2021-09-06 11:41:05.723417 I [83370:4380] pact-broker -- Begin applying migration 20171117_create_webhook_events.rb, direction: up
2021-09-06 11:41:05.724290 I [83370:4380] pact-broker -- (0.000742s) CREATE TABLE `webhook_events` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `webhook_id` integer REFERENCES `webhooks` ON DELETE CASCADE, `name` varchar(255), `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:41:05.724951 I [83370:4380] pact-broker -- (0.000611s) CREATE UNIQUE INDEX `uq_webhook_id_name` ON `webhook_events` (`id`, `name`)
2021-09-06 11:41:05.725534 I [83370:4380] pact-broker -- (0.000524s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171117_create_webhook_events.rb')
2021-09-06 11:41:05.725549 I [83370:4380] pact-broker -- Finished applying migration 20171117_create_webhook_events.rb, direction: up, took 0.002130 seconds
2021-09-06 11:41:05.725556 I [83370:4380] pact-broker -- Begin applying migration 20171118_create_webhook_events.rb, direction: up
2021-09-06 11:41:05.725720 I [83370:4380] pact-broker -- (0.000110s) SELECT * FROM `webhooks`
2021-09-06 11:41:05.726258 I [83370:4380] pact-broker -- (0.000489s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20171118_create_webhook_events.rb')
2021-09-06 11:41:05.726277 I [83370:4380] pact-broker -- Finished applying migration 20171118_create_webhook_events.rb, direction: up, took 0.000718 seconds
2021-09-06 11:41:05.726284 I [83370:4380] pact-broker -- Begin applying migration 20180108_create_certificates_table.rb, direction: up
2021-09-06 11:41:05.727255 I [83370:4380] pact-broker -- (0.000844s) CREATE TABLE `certificates` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL CONSTRAINT `uq_certificate_uuid` UNIQUE, `description` varchar(255) NULL, `content` mediumtext NOT NULL, `created_at` timestamp NOT NULL, `updated_at` timestamp NOT NULL)
2021-09-06 11:41:05.728111 I [83370:4380] pact-broker -- (0.000777s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180108_create_certificates_table.rb')
2021-09-06 11:41:05.728127 I [83370:4380] pact-broker -- Finished applying migration 20180108_create_certificates_table.rb, direction: up, took 0.001840 seconds
2021-09-06 11:41:05.728134 I [83370:4380] pact-broker -- Begin applying migration 20180109_migrate_trigger_type.rb, direction: up
2021-09-06 11:41:05.728294 I [83370:4380] pact-broker -- (0.000071s) UPDATE `triggered_webhooks` SET `trigger_type` = 'resource_creation' WHERE (`trigger_type` = 'pact_publication')
2021-09-06 11:41:05.729058 I [83370:4380] pact-broker -- (0.000707s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180109_migrate_trigger_type.rb')
2021-09-06 11:41:05.729076 I [83370:4380] pact-broker -- Finished applying migration 20180109_migrate_trigger_type.rb, direction: up, took 0.000938 seconds
2021-09-06 11:41:05.729082 I [83370:4380] pact-broker -- Begin applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 11:41:05.729174 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_triggered_webhook_creation_dates: DROP VIEW `latest_triggered_webhook_creation_dates`
2021-09-06 11:41:05.730074 I [83370:4380] pact-broker -- (0.000734s) CREATE VIEW `latest_triggered_webhook_creation_dates` AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
  from triggered_webhooks
  group by webhook_uuid, consumer_id, provider_id
2021-09-06 11:41:05.730810 I [83370:4380] pact-broker -- (0.000683s) DROP VIEW `latest_triggered_webhook_ids`
2021-09-06 11:41:05.731647 I [83370:4380] pact-broker -- (0.000790s) CREATE VIEW `latest_triggered_webhook_ids` AS select tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at, max(tw.id) as latest_triggered_webhook_id
  from latest_triggered_webhook_creation_dates ltwcd
  inner join triggered_webhooks tw
  on tw.consumer_id = ltwcd.consumer_id
  and tw.provider_id = ltwcd.provider_id
  and tw.webhook_uuid = ltwcd.webhook_uuid
  and tw.created_at = ltwcd.latest_triggered_webhook_created_at
  group by tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at
2021-09-06 11:41:05.732393 I [83370:4380] pact-broker -- (0.000702s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 11:41:05.733026 I [83370:4380] pact-broker -- (0.000590s) CREATE VIEW `latest_triggered_webhooks` AS select tw.*
  from triggered_webhooks tw
  inner join latest_triggered_webhook_ids ltwi
  on tw.consumer_id = ltwi.consumer_id
  and tw.provider_id = ltwi.provider_id
  and tw.webhook_uuid = ltwi.webhook_uuid
  and tw.id = ltwi.latest_triggered_webhook_id
2021-09-06 11:41:05.733632 I [83370:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180119_update_latest_triggered_webhooks.rb')
2021-09-06 11:41:05.733649 I [83370:4380] pact-broker -- Finished applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up, took 0.004562 seconds
2021-09-06 11:41:05.733656 I [83370:4380] pact-broker -- Begin applying migration 20180122_create_head_pact_publications.rb, direction: up
2021-09-06 11:41:05.734249 I [83370:4380] pact-broker -- (0.000557s) CREATE VIEW `head_pact_publications` AS select lp.*, null as tag_name, 1 as latest
      from latest_pact_publications lp

      UNION

      select ltp.*, null as latest
      from latest_tagged_pact_publications ltp
      
2021-09-06 11:41:05.734929 I [83370:4380] pact-broker -- (0.000619s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180122_create_head_pact_publications.rb')
2021-09-06 11:41:05.734949 I [83370:4380] pact-broker -- Finished applying migration 20180122_create_head_pact_publications.rb, direction: up, took 0.001290 seconds
2021-09-06 11:41:05.734956 I [83370:4380] pact-broker -- Begin applying migration 20180123_create_tags_with_latest_flag.rb, direction: up
2021-09-06 11:41:05.735656 I [83370:4380] pact-broker -- (0.000653s) CREATE VIEW `latest_tagged_version_orders` AS 
        select v.pacticipant_id, t.name as tag_name, max(v.`order`) as latest_version_order, 1 as latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        group by v.pacticipant_id, t.name
      
2021-09-06 11:41:05.736352 I [83370:4380] pact-broker -- (0.000620s) CREATE VIEW `tags_with_latest_flag` AS 
        select t.*, ltvo.latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        left outer join latest_tagged_version_orders ltvo
        on t.name = ltvo.tag_name
        and v.pacticipant_id = ltvo.pacticipant_id
        and v.`order` = ltvo.latest_version_order
      
2021-09-06 11:41:05.736951 I [83370:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180123_create_tags_with_latest_flag.rb')
2021-09-06 11:41:05.736967 I [83370:4380] pact-broker -- Finished applying migration 20180123_create_tags_with_latest_flag.rb, direction: up, took 0.002008 seconds
2021-09-06 11:41:05.736973 I [83370:4380] pact-broker -- Begin applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 11:41:05.737642 I [83370:4380] pact-broker -- (0.000633s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:41:05.738460 I [83370:4380] pact-broker -- (0.000772s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider` AS select matrix.consumer_version_id, matrix.provider_id, max(verification_id) as latest_verification_id
      from latest_matrix_for_consumer_version_and_provider_version matrix
      where matrix.verification_id is not null
      group by matrix.consumer_version_id, matrix.provider_id
      
2021-09-06 11:41:05.739080 I [83370:4380] pact-broker -- (0.000572s) DROP VIEW `latest_matrix`
2021-09-06 11:41:05.739888 I [83370:4380] pact-broker -- (0.000758s) CREATE VIEW `latest_matrix` AS SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_id = lv.provider_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      where verification_id is null
      
2021-09-06 11:41:05.740452 I [83370:4380] pact-broker -- (0.000501s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180129_create_latest_matrix_for_cv_and_pv.rb')
2021-09-06 11:41:05.740467 I [83370:4380] pact-broker -- Finished applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.003491 seconds
2021-09-06 11:41:05.740474 I [83370:4380] pact-broker -- Begin applying migration 20180130_create_materialized_matrix.rb, direction: up
2021-09-06 11:41:05.741393 I [83370:4380] pact-broker -- (0.000656s) CREATE TABLE `materialized_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 11:41:05.742088 I [83370:4380] pact-broker -- (0.000645s) CREATE INDEX `ndx_mm_consumer_id` ON `materialized_matrix` (`consumer_id`)
2021-09-06 11:41:05.742832 I [83370:4380] pact-broker -- (0.000696s) CREATE INDEX `ndx_mm_provider_id` ON `materialized_matrix` (`provider_id`)
2021-09-06 11:41:05.743619 I [83370:4380] pact-broker -- (0.000736s) CREATE INDEX `ndx_mm_cv_ord` ON `materialized_matrix` (`consumer_version_order`)
2021-09-06 11:41:05.743958 I [83370:4380] pact-broker -- (0.000235s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 11:41:05.744523 I [83370:4380] pact-broker -- (0.000510s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180130_create_materialized_matrix.rb')
2021-09-06 11:41:05.744540 I [83370:4380] pact-broker -- Finished applying migration 20180130_create_materialized_matrix.rb, direction: up, took 0.004062 seconds
2021-09-06 11:41:05.744564 I [83370:4380] pact-broker -- Begin applying migration 20180131_create_materialized_latest_matrix.rb, direction: up
2021-09-06 11:41:05.745538 I [83370:4380] pact-broker -- (0.000744s) CREATE TABLE `materialized_latest_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255))
2021-09-06 11:41:05.746253 I [83370:4380] pact-broker -- (0.000650s) CREATE INDEX `ndx_mlm_consumer_id` ON `materialized_latest_matrix` (`consumer_id`)
2021-09-06 11:41:05.747068 I [83370:4380] pact-broker -- (0.000770s) CREATE INDEX `ndx_mlm_provider_id` ON `materialized_latest_matrix` (`provider_id`)
2021-09-06 11:41:05.747822 I [83370:4380] pact-broker -- (0.000709s) CREATE INDEX `ndx_mlm_cv_ord` ON `materialized_latest_matrix` (`consumer_version_order`)
2021-09-06 11:41:05.751790 I [83370:4380] pact-broker -- (0.003880s) INSERT INTO `materialized_latest_matrix` SELECT * FROM `latest_matrix`
2021-09-06 11:41:05.752662 I [83370:4380] pact-broker -- (0.000813s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180131_create_materialized_latest_matrix.rb')
2021-09-06 11:41:05.752680 I [83370:4380] pact-broker -- Finished applying migration 20180131_create_materialized_latest_matrix.rb, direction: up, took 0.008130 seconds
2021-09-06 11:41:05.752687 I [83370:4380] pact-broker -- Begin applying migration 20180201_create_head_matrix.rb, direction: up
2021-09-06 11:41:05.753620 I [83370:4380] pact-broker -- (0.000886s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:41:05.754314 I [83370:4380] pact-broker -- (0.000630s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180201_create_head_matrix.rb')
2021-09-06 11:41:05.754330 I [83370:4380] pact-broker -- Finished applying migration 20180201_create_head_matrix.rb, direction: up, took 0.001640 seconds
2021-09-06 11:41:05.754337 I [83370:4380] pact-broker -- Begin applying migration 20180202_create_materialized_head_matrix.rb, direction: up
2021-09-06 11:41:05.755447 I [83370:4380] pact-broker -- (0.000857s) CREATE TABLE `materialized_head_matrix` (`consumer_id` integer NOT NULL, `consumer_name` varchar(255) NOT NULL, `consumer_version_id` integer NOT NULL, `consumer_version_number` varchar(255) NOT NULL, `consumer_version_order` integer NOT NULL, `pact_publication_id` integer NOT NULL, `pact_version_id` integer NOT NULL, `pact_version_sha` varchar(255) NOT NULL, `pact_revision_number` integer NOT NULL, `pact_created_at` timestamp NOT NULL, `provider_id` integer NOT NULL, `provider_name` varchar(255) NOT NULL, `provider_version_id` integer, `provider_version_number` varchar(255), `provider_version_order` integer, `verification_id` integer, `success` Boolean, `verification_number` integer, `verification_executed_at` timestamp, `verification_build_url` varchar(255), `consumer_tag_name` varchar(255))
2021-09-06 11:41:05.756155 I [83370:4380] pact-broker -- (0.000658s) CREATE INDEX `ndx_mhm_consumer_id` ON `materialized_head_matrix` (`consumer_id`)
2021-09-06 11:41:05.756850 I [83370:4380] pact-broker -- (0.000648s) CREATE INDEX `ndx_mhm_provider_id` ON `materialized_head_matrix` (`provider_id`)
2021-09-06 11:41:05.757537 I [83370:4380] pact-broker -- (0.000639s) CREATE INDEX `ndx_mhm_cv_ord` ON `materialized_head_matrix` (`consumer_version_order`)
2021-09-06 11:41:05.758158 I [83370:4380] pact-broker -- (0.000540s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180202_create_materialized_head_matrix.rb')
2021-09-06 11:41:05.758174 I [83370:4380] pact-broker -- Finished applying migration 20180202_create_materialized_head_matrix.rb, direction: up, took 0.003834 seconds
2021-09-06 11:41:05.758181 I [83370:4380] pact-broker -- Begin applying migration 20180203_fix_head_matrix.rb, direction: up
2021-09-06 11:41:05.758783 I [83370:4380] pact-broker -- (0.000567s) DROP VIEW `head_matrix`
2021-09-06 11:41:05.759492 I [83370:4380] pact-broker -- (0.000659s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      where verification_id is null
      
2021-09-06 11:41:05.760090 I [83370:4380] pact-broker -- (0.000537s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180203_fix_head_matrix.rb')
2021-09-06 11:41:05.760106 I [83370:4380] pact-broker -- Finished applying migration 20180203_fix_head_matrix.rb, direction: up, took 0.001922 seconds
2021-09-06 11:41:05.760113 I [83370:4380] pact-broker -- Begin applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 11:41:05.760731 I [83370:4380] pact-broker -- (0.000584s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:41:05.761418 I [83370:4380] pact-broker -- (0.000642s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS 
      SELECT matrix.* FROM matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:41:05.762023 I [83370:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180204_fix_latest_matrix_for_cv_and_pv.rb')
2021-09-06 11:41:05.762042 I [83370:4380] pact-broker -- Finished applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.001926 seconds
2021-09-06 11:41:05.762049 I [83370:4380] pact-broker -- Begin applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up
2021-09-06 11:41:05.762747 I [83370:4380] pact-broker -- (0.000663s) DROP TABLE `materialized_latest_matrix`
2021-09-06 11:41:05.763334 I [83370:4380] pact-broker -- (0.000525s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180205_drop_materialized_latest_matrix.rb')
2021-09-06 11:41:05.763349 I [83370:4380] pact-broker -- Finished applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up, took 0.001297 seconds
2021-09-06 11:41:05.763356 I [83370:4380] pact-broker -- Begin applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up
2021-09-06 11:41:05.763917 I [83370:4380] pact-broker -- (0.000528s) DROP VIEW `head_matrix`
2021-09-06 11:41:05.764600 I [83370:4380] pact-broker -- (0.000639s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:41:05.764673 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.764703 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.764768 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.782351 I [83370:4380] pact-broker -- (0.017529s) ALTER TABLE `materialized_head_matrix` RENAME COLUMN `consumer_tag_name` TO `consumer_version_tag_name`
2021-09-06 11:41:05.783182 I [83370:4380] pact-broker -- (0.000789s) COMMIT
2021-09-06 11:41:05.783267 I [83370:4380] pact-broker -- (0.000020s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.783301 I [83370:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.784290 I [83370:4380] pact-broker -- (0.000909s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180206_recreate_head_matrix_rename_consumer_tag_name.rb')
2021-09-06 11:41:05.784314 I [83370:4380] pact-broker -- Finished applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up, took 0.020953 seconds
2021-09-06 11:41:05.784322 I [83370:4380] pact-broker -- Begin applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up
2021-09-06 11:41:05.785178 I [83370:4380] pact-broker -- (0.000805s) DROP VIEW `head_matrix`
2021-09-06 11:41:05.786011 I [83370:4380] pact-broker -- (0.000778s) CREATE VIEW `head_matrix` AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION ALL

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 11:41:05.786822 I [83370:4380] pact-broker -- (0.000736s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180207_recreate_head_matrix_union_all.rb')
2021-09-06 11:41:05.786839 I [83370:4380] pact-broker -- Finished applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up, took 0.002514 seconds
2021-09-06 11:41:05.786846 I [83370:4380] pact-broker -- Begin applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up
2021-09-06 11:41:05.786910 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.786938 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.786973 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.787300 I [83370:4380] pact-broker -- (0.000275s) CREATE INDEX `materialized_head_matrix_consumer_version_tag_name_index` ON `materialized_head_matrix` (`consumer_version_tag_name`)
2021-09-06 11:41:05.787790 I [83370:4380] pact-broker -- (0.000464s) COMMIT
2021-09-06 11:41:05.787851 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.787880 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.788725 I [83370:4380] pact-broker -- (0.000786s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180208_add_cv_tag_name_index_to_mat_head_matrix.rb')
2021-09-06 11:41:05.788741 I [83370:4380] pact-broker -- Finished applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up, took 0.001892 seconds
2021-09-06 11:41:05.788748 I [83370:4380] pact-broker -- Begin applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up
2021-09-06 11:41:05.789367 I [83370:4380] pact-broker -- (0.000563s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:41:05.790113 I [83370:4380] pact-broker -- (0.000675s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:41:05.790809 I [83370:4380] pact-broker -- (0.000629s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb')
2021-09-06 11:41:05.790830 I [83370:4380] pact-broker -- Finished applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up, took 0.002078 seconds
2021-09-06 11:41:05.790837 I [83370:4380] pact-broker -- Begin applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up
2021-09-06 11:41:05.790904 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.790934 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.790967 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.791325 I [83370:4380] pact-broker -- (0.000314s) CREATE INDEX `ndx_mm_verif_id` ON `materialized_matrix` (`verification_id`)
2021-09-06 11:41:05.791436 I [83370:4380] pact-broker -- (0.000068s) CREATE INDEX `ndx_mm_pact_rev_num` ON `materialized_matrix` (`pact_revision_number`)
2021-09-06 11:41:05.791921 I [83370:4380] pact-broker -- (0.000461s) COMMIT
2021-09-06 11:41:05.791976 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.792005 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.792607 I [83370:4380] pact-broker -- (0.000566s) DROP VIEW `latest_matrix_for_consumer_version_and_provider_version`
2021-09-06 11:41:05.793368 I [83370:4380] pact-broker -- (0.000715s) CREATE VIEW `latest_matrix_for_consumer_version_and_provider_version` AS SELECT matrix.* FROM materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 11:41:05.793526 I [83370:4380] pact-broker -- (0.000063s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:41:05.799974 I [83370:4380] pact-broker -- (0.006342s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 11:41:05.800724 I [83370:4380] pact-broker -- (0.000688s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180210_fix_latest_matrix_for_cv_and_pv_again.rb')
2021-09-06 11:41:05.800742 I [83370:4380] pact-broker -- Finished applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up, took 0.009902 seconds
2021-09-06 11:41:05.800750 I [83370:4380] pact-broker -- Begin applying migration 20180311_optimise_head_matrix.rb, direction: up
2021-09-06 11:41:05.801618 I [83370:4380] pact-broker -- (0.000708s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:41:05.802613 I [83370:4380] pact-broker -- (0.000857s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `pact_publications`.`provider_id`, `cv`.`pacticipant_id` AS 'consumer_id', `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `pact_publications` INNER JOIN `versions` AS 'cv' ON (`pact_publications`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `pact_publications`.`consumer_version_id`) GROUP BY `pact_publications`.`provider_id`, `cv`.`pacticipant_id`, `t`.`name`
2021-09-06 11:41:05.803486 I [83370:4380] pact-broker -- (0.000727s) DROP VIEW `latest_verifications`
2021-09-06 11:41:05.804562 I [83370:4380] pact-broker -- (0.000892s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:41:05.805354 I [83370:4380] pact-broker -- (0.000742s) DROP VIEW `head_matrix`
2021-09-06 11:41:05.806340 I [83370:4380] pact-broker -- (0.000937s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 11:41:05.807104 I [83370:4380] pact-broker -- (0.000695s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180311_optimise_head_matrix.rb')
2021-09-06 11:41:05.807123 I [83370:4380] pact-broker -- Finished applying migration 20180311_optimise_head_matrix.rb, direction: up, took 0.006369 seconds
2021-09-06 11:41:05.807130 I [83370:4380] pact-broker -- Begin applying migration 20180315_create_verification_sequence.rb, direction: up
2021-09-06 11:41:05.807935 I [83370:4380] pact-broker -- (0.000729s) CREATE TABLE `verification_sequence_number` (`value` integer NOT NULL)
2021-09-06 11:41:05.808146 I [83370:4380] pact-broker -- (0.000097s) SELECT max(`number`) AS 'max' FROM `verifications` LIMIT 1
2021-09-06 11:41:05.808746 I [83370:4380] pact-broker -- (0.000524s) INSERT INTO `verification_sequence_number` (`value`) VALUES (100)
2021-09-06 11:41:05.809336 I [83370:4380] pact-broker -- (0.000536s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180315_create_verification_sequence.rb')
2021-09-06 11:41:05.809352 I [83370:4380] pact-broker -- Finished applying migration 20180315_create_verification_sequence.rb, direction: up, took 0.002218 seconds
2021-09-06 11:41:05.809359 I [83370:4380] pact-broker -- Begin applying migration 20180330_refresh_matrix.rb, direction: up
2021-09-06 11:41:05.809493 I [83370:4380] pact-broker -- (0.000062s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 11:41:05.809777 I [83370:4380] pact-broker -- (0.000218s) INSERT INTO `materialized_matrix` SELECT * FROM `matrix`
2021-09-06 11:41:05.809909 I [83370:4380] pact-broker -- (0.000049s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:41:05.811421 I [83370:4380] pact-broker -- (0.001448s) INSERT INTO `materialized_head_matrix` SELECT * FROM `head_matrix`
2021-09-06 11:41:05.812117 I [83370:4380] pact-broker -- (0.000640s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180330_refresh_matrix.rb')
2021-09-06 11:41:05.812135 I [83370:4380] pact-broker -- Finished applying migration 20180330_refresh_matrix.rb, direction: up, took 0.002773 seconds
2021-09-06 11:41:05.812142 I [83370:4380] pact-broker -- Begin applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up
2021-09-06 11:41:05.812784 I [83370:4380] pact-broker -- (0.000601s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:41:05.812998 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_version_tags: DROP VIEW `latest_verifications_for_consumer_version_tags`
2021-09-06 11:41:05.813937 I [83370:4380] pact-broker -- (0.000710s) CREATE VIEW `latest_verifications_for_consumer_version_tags` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `lv`.`consumer_version_tag_name`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_version_tags` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 11:41:05.814515 I [83370:4380] pact-broker -- (0.000500s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180523_create_latest_verifications_for_consumer_version_tags.rb')
2021-09-06 11:41:05.814531 I [83370:4380] pact-broker -- Finished applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up, took 0.002386 seconds
2021-09-06 11:41:05.814538 I [83370:4380] pact-broker -- Begin applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up
2021-09-06 11:41:05.815202 I [83370:4380] pact-broker -- (0.000627s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id
2021-09-06 11:41:05.815385 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_verifications_for_consumer_and_provider: DROP VIEW `latest_verifications_for_consumer_and_provider`
2021-09-06 11:41:05.816357 I [83370:4380] pact-broker -- (0.000774s) CREATE VIEW `latest_verifications_for_consumer_and_provider` AS SELECT `lv`.`consumer_id`, `lv`.`provider_id`, `pv`.`sha` AS 'pact_version_sha', `prv`.`number` AS 'provider_version_number', `prv`.`order` AS 'provider_version_order', `verifications`.* FROM `verifications` INNER JOIN `latest_verification_ids_for_consumer_and_provider` AS 'lv' ON (`verifications`.`id` = `lv`.`latest_verification_id`) INNER JOIN `versions` AS 'prv' ON (`verifications`.`provider_version_id` = `prv`.`id`) INNER JOIN `pact_versions` AS 'pv' ON (`verifications`.`pact_version_id` = `pv`.`id`)
2021-09-06 11:41:05.816981 I [83370:4380] pact-broker -- (0.000563s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180524_create_latest_verifications_for_consumer_and_provider.rb')
2021-09-06 11:41:05.816997 I [83370:4380] pact-broker -- Finished applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up, took 0.002456 seconds
2021-09-06 11:41:05.817007 I [83370:4380] pact-broker -- Begin applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up
2021-09-06 11:41:05.817090 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.817119 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.817154 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.818427 I [83370:4380] pact-broker -- (0.001214s) ALTER TABLE `triggered_webhooks` ADD COLUMN `verification_id` integer REFERENCES `verifications`
2021-09-06 11:41:05.818832 I [83370:4380] pact-broker -- (0.000379s) COMMIT
2021-09-06 11:41:05.818886 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.818919 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.819523 I [83370:4380] pact-broker -- (0.000551s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180608_add_verification_to_triggered_webhook.rb')
2021-09-06 11:41:05.819544 I [83370:4380] pact-broker -- Finished applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up, took 0.002533 seconds
2021-09-06 11:41:05.819551 I [83370:4380] pact-broker -- Begin applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up
2021-09-06 11:41:05.819616 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.819645 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.819683 I [83370:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:41:05.819897 I [83370:4380] pact-broker -- (0.000159s) PRAGMA table_info('webhooks')
2021-09-06 11:41:05.820008 I [83370:4380] pact-broker -- (0.000064s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:41:05.820078 I [83370:4380] pact-broker -- (0.000036s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.820134 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.820366 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.820441 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:41:05.820590 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.820726 I [83370:4380] pact-broker -- (0.000035s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.820781 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.824611 I [83370:4380] pact-broker -- (0.003803s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:41:05.824787 I [83370:4380] pact-broker -- (0.000151s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.824875 I [83370:4380] pact-broker -- (0.000066s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:41:05.824997 I [83370:4380] pact-broker -- (0.000100s) DROP TABLE `webhooks_backup0`
2021-09-06 11:41:05.825175 I [83370:4380] pact-broker -- (0.000125s) PRAGMA table_info('webhooks')
2021-09-06 11:41:05.825262 I [83370:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:41:05.825352 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.825407 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.825629 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.825702 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:41:05.825968 I [83370:4380] pact-broker -- (0.000129s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.826940 I [83370:4380] pact-broker -- (0.000874s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.827002 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.830573 I [83370:4380] pact-broker -- (0.003539s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:41:05.830710 I [83370:4380] pact-broker -- (0.000111s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.830765 I [83370:4380] pact-broker -- (0.000035s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:41:05.830836 I [83370:4380] pact-broker -- (0.000054s) DROP TABLE `webhooks_backup0`
2021-09-06 11:41:05.831006 I [83370:4380] pact-broker -- (0.000120s) PRAGMA table_info('webhooks')
2021-09-06 11:41:05.831085 I [83370:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('webhooks')
2021-09-06 11:41:05.831172 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.831222 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.831448 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.831521 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: webhooks_backup0: SELECT NULL AS 'nil' FROM `webhooks_backup0` LIMIT 1
2021-09-06 11:41:05.831768 I [83370:4380] pact-broker -- (0.000122s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.832668 I [83370:4380] pact-broker -- (0.000818s) PRAGMA index_list('webhooks')
2021-09-06 11:41:05.832729 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('sqlite_autoindex_webhooks_1')
2021-09-06 11:41:05.836237 I [83370:4380] pact-broker -- (0.003481s) ALTER TABLE `webhooks` RENAME TO `webhooks_backup0`
2021-09-06 11:41:05.836391 I [83370:4380] pact-broker -- (0.000128s) CREATE TABLE `webhooks`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL UNIQUE, `method` varchar(255) DEFAULT (NULL) NOT NULL, `url` varchar(255) DEFAULT (NULL) NOT NULL, `body` varchar(255) DEFAULT (NULL) NULL, `is_json_request_body` Boolean DEFAULT (NULL) NULL, `consumer_id` integer DEFAULT (NULL) NULL, `provider_id` integer DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `username` varchar(255) DEFAULT (NULL) NULL, `password` varchar(255) DEFAULT (NULL) NULL, FOREIGN KEY (`provider_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`consumer_id`) REFERENCES `pacticipants` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.836555 I [83370:4380] pact-broker -- (0.000131s) INSERT INTO `webhooks`(`id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password`) SELECT `id`, `uuid`, `method`, `url`, `body`, `is_json_request_body`, `consumer_id`, `provider_id`, `created_at`, `updated_at`, `username`, `password` FROM `webhooks_backup0`
2021-09-06 11:41:05.836836 I [83370:4380] pact-broker -- (0.000228s) DROP TABLE `webhooks_backup0`
2021-09-06 11:41:05.837730 I [83370:4380] pact-broker -- (0.000847s) COMMIT
2021-09-06 11:41:05.837792 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.837821 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.838657 I [83370:4380] pact-broker -- (0.000777s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180611_make_webhook_pacticipant_ids_optional.rb')
2021-09-06 11:41:05.838679 I [83370:4380] pact-broker -- Finished applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up, took 0.019124 seconds
2021-09-06 11:41:05.838690 I [83370:4380] pact-broker -- Begin applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up
2021-09-06 11:41:05.838767 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.838796 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.838829 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.840077 I [83370:4380] pact-broker -- (0.001194s) ALTER TABLE `verifications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 11:41:05.841087 I [83370:4380] pact-broker -- (0.000955s) ALTER TABLE `verifications` ADD COLUMN `provider_id` integer REFERENCES `pacticipants`
2021-09-06 11:41:05.841240 I [83370:4380] pact-broker -- (0.000112s) CREATE INDEX `verifications_consumer_id_index` ON `verifications` (`consumer_id`)
2021-09-06 11:41:05.841333 I [83370:4380] pact-broker -- (0.000058s) CREATE INDEX `verifications_provider_id_index` ON `verifications` (`provider_id`)
2021-09-06 11:41:05.841429 I [83370:4380] pact-broker -- (0.000062s) CREATE INDEX `verifications_provider_id_consumer_id_index` ON `verifications` (`provider_id`, `consumer_id`)
2021-09-06 11:41:05.842008 I [83370:4380] pact-broker -- (0.000554s) COMMIT
2021-09-06 11:41:05.842067 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.842097 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.842863 I [83370:4380] pact-broker -- (0.000710s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180612_add_pacticipant_ids_to_verifications.rb')
2021-09-06 11:41:05.842905 I [83370:4380] pact-broker -- Finished applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up, took 0.004210 seconds
2021-09-06 11:41:05.842915 I [83370:4380] pact-broker -- Begin applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up
2021-09-06 11:41:05.843096 I [83370:4380] pact-broker -- (0.000073s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:05.843320 I [83370:4380] pact-broker -- (0.000158s) PRAGMA table_info('verifications')
2021-09-06 11:41:05.843493 I [83370:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:05.843654 I [83370:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:05.843781 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:05.843964 I [83370:4380] pact-broker -- (0.000107s) PRAGMA table_info('pact_versions')
2021-09-06 11:41:05.844103 I [83370:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:05.844239 I [83370:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:05.844354 I [83370:4380] pact-broker -- (0.000078s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 11:41:05.845134 I [83370:4380] pact-broker -- (0.000727s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180613_migrate_pacticipant_ids_for_verifications.rb')
2021-09-06 11:41:05.845152 I [83370:4380] pact-broker -- Finished applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up, took 0.002233 seconds
2021-09-06 11:41:05.845158 I [83370:4380] pact-broker -- Begin applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 11:41:05.845914 I [83370:4380] pact-broker -- (0.000715s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 11:41:05.846691 I [83370:4380] pact-broker -- (0.000726s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(id) as latest_verification_id
        from verifications v
        group by provider_id, consumer_id
2021-09-06 11:41:05.847632 I [83370:4380] pact-broker -- (0.000871s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180614_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 11:41:05.847650 I [83370:4380] pact-broker -- Finished applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.002488 seconds
2021-09-06 11:41:05.847682 I [83370:4380] pact-broker -- Begin applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up
2021-09-06 11:41:05.847747 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.847776 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.847811 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.849095 I [83370:4380] pact-broker -- (0.001230s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_id` integer REFERENCES `pacticipants`
2021-09-06 11:41:05.849240 I [83370:4380] pact-broker -- (0.000102s) CREATE INDEX `pact_publications_consumer_id_index` ON `pact_publications` (`consumer_id`)
2021-09-06 11:41:05.849873 I [83370:4380] pact-broker -- (0.000604s) COMMIT
2021-09-06 11:41:05.849932 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.849961 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.850818 I [83370:4380] pact-broker -- (0.000805s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180615_add_consumer_id_to_pact_publications.rb')
2021-09-06 11:41:05.850835 I [83370:4380] pact-broker -- Finished applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up, took 0.003175 seconds
2021-09-06 11:41:05.850842 I [83370:4380] pact-broker -- Begin applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up
2021-09-06 11:41:05.851002 I [83370:4380] pact-broker -- (0.000071s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:05.851168 I [83370:4380] pact-broker -- (0.000112s) PRAGMA table_info('pact_publications')
2021-09-06 11:41:05.851336 I [83370:4380] pact-broker -- (0.000075s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:05.851466 I [83370:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:05.851625 I [83370:4380] pact-broker -- (0.000111s) PRAGMA table_info('versions')
2021-09-06 11:41:05.851765 I [83370:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:05.851864 I [83370:4380] pact-broker -- (0.000063s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 11:41:05.852707 I [83370:4380] pact-broker -- (0.000791s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180616_migrate_consumer_ids_for_pact_publications.rb')
2021-09-06 11:41:05.852724 I [83370:4380] pact-broker -- Finished applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up, took 0.001879 seconds
2021-09-06 11:41:05.852731 I [83370:4380] pact-broker -- Begin applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up
2021-09-06 11:41:05.853784 I [83370:4380] pact-broker -- (0.000896s) CREATE TABLE `latest_pact_publication_ids_for_consumer_versions` (`consumer_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `consumer_version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `provider_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `pact_publication_id` integer NOT NULL UNIQUE REFERENCES `pact_publications` ON DELETE CASCADE, `pact_version_id` integer NOT NULL REFERENCES `pact_versions` ON DELETE CASCADE)
2021-09-06 11:41:05.854745 I [83370:4380] pact-broker -- (0.000907s) CREATE UNIQUE INDEX `unq_latest_ppid_prov_conver` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_version_id`)
2021-09-06 11:41:05.855555 I [83370:4380] pact-broker -- (0.000760s) CREATE INDEX `lpp_provider_id_consumer_id_index` ON `latest_pact_publication_ids_for_consumer_versions` (`provider_id`, `consumer_id`)
2021-09-06 11:41:05.856254 I [83370:4380] pact-broker -- (0.000635s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180720_create_latest_pact_publication_ids.rb')
2021-09-06 11:41:05.856271 I [83370:4380] pact-broker -- Finished applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up, took 0.003537 seconds
2021-09-06 11:41:05.856277 I [83370:4380] pact-broker -- Begin applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up
2021-09-06 11:41:05.856782 I [83370:4380] pact-broker -- (0.000411s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` SELECT `consumer_id`, `consumer_version_id`, `provider_id`, `id`, `pact_version_id` FROM `latest_pact_publications_by_consumer_versions`
2021-09-06 11:41:05.857426 I [83370:4380] pact-broker -- (0.000590s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180721_migrate_latest_pact_publication_ids.rb')
2021-09-06 11:41:05.857442 I [83370:4380] pact-broker -- Finished applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up, took 0.001161 seconds
2021-09-06 11:41:05.857448 I [83370:4380] pact-broker -- Begin applying migration 20180722_recreate_views.rb, direction: up
2021-09-06 11:41:05.857995 I [83370:4380] pact-broker -- (0.000511s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 11:41:05.858660 I [83370:4380] pact-broker -- (0.000620s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.consumer_version_id = app.consumer_version_id
  and lpp.pact_publication_id = app.id
  and lpp.provider_id = app.provider_id
2021-09-06 11:41:05.859312 I [83370:4380] pact-broker -- (0.000501s) DROP VIEW `latest_pact_consumer_version_orders`
2021-09-06 11:41:05.860094 I [83370:4380] pact-broker -- (0.000682s) CREATE VIEW `latest_pact_consumer_version_orders` AS SELECT `provider_id`, `consumer_id`, max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) GROUP BY `provider_id`, `consumer_id`
2021-09-06 11:41:05.860679 I [83370:4380] pact-broker -- (0.000512s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180722_recreate_views.rb')
2021-09-06 11:41:05.860700 I [83370:4380] pact-broker -- Finished applying migration 20180722_recreate_views.rb, direction: up, took 0.003248 seconds
2021-09-06 11:41:05.860708 I [83370:4380] pact-broker -- Begin applying migration 20180723_create_latest_verification_ids.rb, direction: up
2021-09-06 11:41:05.861607 I [83370:4380] pact-broker -- (0.000753s) CREATE TABLE `latest_verification_id_for_pact_version_and_provider_version` (`consumer_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_consumer_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `pact_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_pact_version_id_fk` REFERENCES `pact_versions` ON DELETE CASCADE, `provider_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_id_fk` REFERENCES `pacticipants` ON DELETE CASCADE, `provider_version_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_provider_version_id_fk` REFERENCES `versions` ON DELETE CASCADE, `verification_id` integer NOT NULL CONSTRAINT `latest_v_id_for_pv_and_pv_verification_id_fk` REFERENCES `verifications` ON DELETE CASCADE)
2021-09-06 11:41:05.862325 I [83370:4380] pact-broker -- (0.000669s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_v_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`verification_id`)
2021-09-06 11:41:05.862970 I [83370:4380] pact-broker -- (0.000596s) CREATE UNIQUE INDEX `latest_v_id_for_pv_and_pv_pv_id_pv_id_unq` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`)
2021-09-06 11:41:05.863696 I [83370:4380] pact-broker -- (0.000679s) CREATE INDEX `latest_v_id_for_pv_and_pv_pv_id_v_id` ON `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `verification_id`)
2021-09-06 11:41:05.864378 I [83370:4380] pact-broker -- (0.000624s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180723_create_latest_verification_ids.rb')
2021-09-06 11:41:05.864394 I [83370:4380] pact-broker -- Finished applying migration 20180723_create_latest_verification_ids.rb, direction: up, took 0.003683 seconds
2021-09-06 11:41:05.864404 I [83370:4380] pact-broker -- Begin applying migration 20180724_migrate_latest_verification_ids.rb, direction: up
2021-09-06 11:41:05.864635 I [83370:4380] pact-broker -- (0.000092s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` SELECT `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`, max(`verifications`.`id`) AS 'verification_id' FROM `verifications` GROUP BY `verifications`.`consumer_id`, `verifications`.`pact_version_id`, `verifications`.`provider_id`, `verifications`.`provider_version_id`
2021-09-06 11:41:05.865293 I [83370:4380] pact-broker -- (0.000607s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180724_migrate_latest_verification_ids.rb')
2021-09-06 11:41:05.865308 I [83370:4380] pact-broker -- Finished applying migration 20180724_migrate_latest_verification_ids.rb, direction: up, took 0.000901 seconds
2021-09-06 11:41:05.865315 I [83370:4380] pact-broker -- Begin applying migration 20180726_recreate_views.rb, direction: up
2021-09-06 11:41:05.865900 I [83370:4380] pact-broker -- (0.000551s) DROP VIEW `latest_verification_id_for_consumer_version_and_provider_version`
2021-09-06 11:41:05.866553 I [83370:4380] pact-broker -- (0.000611s) CREATE VIEW `latest_verification_id_for_consumer_version_and_provider_version` AS select pp.consumer_version_id, lv.provider_version_id, lv.verification_id as latest_verification_id
      from latest_pact_publication_ids_for_consumer_versions lpp
      inner join pact_publications pp
        on pp.id = lpp.pact_publication_id
      left outer join latest_verification_id_for_pact_version_and_provider_version lv
          on lv.pact_version_id = pp.pact_version_id
2021-09-06 11:41:05.867158 I [83370:4380] pact-broker -- (0.000545s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180726_recreate_views.rb')
2021-09-06 11:41:05.867174 I [83370:4380] pact-broker -- Finished applying migration 20180726_recreate_views.rb, direction: up, took 0.001856 seconds
2021-09-06 11:41:05.867181 I [83370:4380] pact-broker -- Begin applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:41:05.867745 I [83370:4380] pact-broker -- (0.000530s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:41:05.868469 I [83370:4380] pact-broker -- (0.000680s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
      v.provider_id,
      v.consumer_id,
      t.name as consumer_version_tag_name,
      max(v.verification_id) as latest_verification_id
    from latest_verification_id_for_pact_version_and_provider_version v
    join latest_pact_publication_ids_for_consumer_versions lpp
      on v.pact_version_id = lpp.pact_version_id
    join tags t
      on lpp.consumer_version_id = t.version_id
    group by v.provider_id, v.consumer_id, t.name
2021-09-06 11:41:05.869080 I [83370:4380] pact-broker -- (0.000551s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:41:05.869095 I [83370:4380] pact-broker -- Finished applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001911 seconds
2021-09-06 11:41:05.869104 I [83370:4380] pact-broker -- Begin applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up
2021-09-06 11:41:05.869256 I [83370:4380] pact-broker -- (0.000086s) DELETE FROM `materialized_matrix` WHERE (1 = 1)
2021-09-06 11:41:05.869355 I [83370:4380] pact-broker -- (0.000046s) DELETE FROM `materialized_head_matrix` WHERE (1 = 1)
2021-09-06 11:41:05.869971 I [83370:4380] pact-broker -- (0.000566s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180728_truncate_materialized_matrix_tables.rb')
2021-09-06 11:41:05.869986 I [83370:4380] pact-broker -- Finished applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up, took 0.000879 seconds
2021-09-06 11:41:05.869992 I [83370:4380] pact-broker -- Begin applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up
2021-09-06 11:41:05.870771 I [83370:4380] pact-broker -- (0.000741s) CREATE VIEW `latest_verification_ids_for_pact_versions` AS select pact_version_id, MAX(verification_id) latest_verification_id
    FROM latest_verification_id_for_pact_version_and_provider_version
    GROUP BY pact_version_id
2021-09-06 11:41:05.871405 I [83370:4380] pact-broker -- (0.000568s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180729_create_latest_verification_ids_for_provider_versions.rb')
2021-09-06 11:41:05.871421 I [83370:4380] pact-broker -- Finished applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up, took 0.001425 seconds
2021-09-06 11:41:05.871427 I [83370:4380] pact-broker -- Begin applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up
2021-09-06 11:41:05.872295 I [83370:4380] pact-broker -- (0.000664s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order' FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:41:05.872930 I [83370:4380] pact-broker -- (0.000568s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180730_create_latest_verifications_for_provider_versions.rb')
2021-09-06 11:41:05.872946 I [83370:4380] pact-broker -- Finished applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up, took 0.001515 seconds
2021-09-06 11:41:05.872953 I [83370:4380] pact-broker -- Begin applying migration 20180731_update_head_matrix.rb, direction: up
2021-09-06 11:41:05.873500 I [83370:4380] pact-broker -- (0.000512s) DROP VIEW `head_matrix`
2021-09-06 11:41:05.874356 I [83370:4380] pact-broker -- (0.000810s) CREATE VIEW `head_matrix` AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 11:41:05.874921 I [83370:4380] pact-broker -- (0.000505s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180731_update_head_matrix.rb')
2021-09-06 11:41:05.874938 I [83370:4380] pact-broker -- Finished applying migration 20180731_update_head_matrix.rb, direction: up, took 0.001982 seconds
2021-09-06 11:41:05.874945 I [83370:4380] pact-broker -- Begin applying migration 20180828_create_latest_versions.rb, direction: up
2021-09-06 11:41:05.875092 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_version_orders: DROP VIEW `latest_version_orders`
2021-09-06 11:41:05.875849 I [83370:4380] pact-broker -- (0.000593s) CREATE VIEW `latest_version_orders` AS SELECT `pacticipant_id`, max(`order`) AS 'latest_version_order' FROM `versions` GROUP BY `pacticipant_id`
2021-09-06 11:41:05.875999 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such view: latest_versions: DROP VIEW `latest_versions`
2021-09-06 11:41:05.876761 I [83370:4380] pact-broker -- (0.000593s) CREATE VIEW `latest_versions` AS SELECT `versions`.* FROM `versions` INNER JOIN `latest_version_orders` ON ((`versions`.`pacticipant_id` = `latest_version_orders`.`pacticipant_id`) AND (`versions`.`order` = `latest_version_orders`.`latest_version_order`))
2021-09-06 11:41:05.877356 I [83370:4380] pact-broker -- (0.000531s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20180828_create_latest_versions.rb')
2021-09-06 11:41:05.877372 I [83370:4380] pact-broker -- Finished applying migration 20180828_create_latest_versions.rb, direction: up, took 0.002424 seconds
2021-09-06 11:41:05.877379 I [83370:4380] pact-broker -- Begin applying migration 20190509_create_version_sequence.rb, direction: up
2021-09-06 11:41:05.878075 I [83370:4380] pact-broker -- (0.000630s) CREATE TABLE `version_sequence_number` (`value` integer NOT NULL)
2021-09-06 11:41:05.878688 I [83370:4380] pact-broker -- (0.000538s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190509_create_version_sequence.rb')
2021-09-06 11:41:05.878704 I [83370:4380] pact-broker -- Finished applying migration 20190509_create_version_sequence.rb, direction: up, took 0.001322 seconds
2021-09-06 11:41:05.878710 I [83370:4380] pact-broker -- Begin applying migration 20190510_set_version_sequence.rb, direction: up
2021-09-06 11:41:05.878865 I [83370:4380] pact-broker -- (0.000070s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:05.879007 I [83370:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:05.879128 I [83370:4380] pact-broker -- (0.000065s) PRAGMA table_info('version_sequence_number')
2021-09-06 11:41:05.879278 I [83370:4380] pact-broker -- (0.000063s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 11:41:05.879374 I [83370:4380] pact-broker -- (0.000050s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:05.879929 I [83370:4380] pact-broker -- (0.000509s) INSERT INTO `version_sequence_number` (`value`) VALUES (100)
2021-09-06 11:41:05.880055 I [83370:4380] pact-broker -- (0.000059s) DELETE FROM `version_sequence_number` WHERE (`value` != 100)
2021-09-06 11:41:05.880604 I [83370:4380] pact-broker -- (0.000501s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190510_set_version_sequence.rb')
2021-09-06 11:41:05.880620 I [83370:4380] pact-broker -- Finished applying migration 20190510_set_version_sequence.rb, direction: up, took 0.001906 seconds
2021-09-06 11:41:05.880630 I [83370:4380] pact-broker -- Begin applying migration 20190511_create_integrations_view.rb, direction: up
2021-09-06 11:41:05.881605 I [83370:4380] pact-broker -- (0.000791s) CREATE VIEW `integrations` AS SELECT DISTINCT `consumer_id`, `c`.`name` AS 'consumer_name', `provider_id`, `p`.`name` AS 'provider_name' FROM `pact_publications` INNER JOIN `pacticipants` AS 'c' ON (`c`.`id` = `pact_publications`.`consumer_id`) INNER JOIN `pacticipants` AS 'p' ON (`p`.`id` = `pact_publications`.`provider_id`)
2021-09-06 11:41:05.882209 I [83370:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190511_create_integrations_view.rb')
2021-09-06 11:41:05.882225 I [83370:4380] pact-broker -- Finished applying migration 20190511_create_integrations_view.rb, direction: up, took 0.001592 seconds
2021-09-06 11:41:05.882231 I [83370:4380] pact-broker -- Begin applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up
2021-09-06 11:41:05.882288 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.882315 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.882352 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:05.883691 I [83370:4380] pact-broker -- (0.001285s) ALTER TABLE `webhooks` ADD COLUMN `enabled` boolean DEFAULT (1)
2021-09-06 11:41:05.884069 I [83370:4380] pact-broker -- (0.000354s) COMMIT
2021-09-06 11:41:05.884120 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.884147 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.884727 I [83370:4380] pact-broker -- (0.000533s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190523_add_enabled_column_to_webhooks.rb')
2021-09-06 11:41:05.884741 I [83370:4380] pact-broker -- Finished applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up, took 0.002507 seconds
2021-09-06 11:41:05.884747 I [83370:4380] pact-broker -- Begin applying migration 20190524_set_webhooks_enabled.rb, direction: up
2021-09-06 11:41:05.884889 I [83370:4380] pact-broker -- (0.000063s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:41:05.885129 I [83370:4380] pact-broker -- (0.000153s) PRAGMA table_info('webhooks')
2021-09-06 11:41:05.885300 I [83370:4380] pact-broker -- (0.000051s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 11:41:05.885878 I [83370:4380] pact-broker -- (0.000531s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190524_set_webhooks_enabled.rb')
2021-09-06 11:41:05.885892 I [83370:4380] pact-broker -- Finished applying migration 20190524_set_webhooks_enabled.rb, direction: up, took 0.001142 seconds
2021-09-06 11:41:05.885902 I [83370:4380] pact-broker -- Begin applying migration 20190525_add_description_column_to_webhooks.rb, direction: up
2021-09-06 11:41:05.885955 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.885981 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.886011 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.887267 I [83370:4380] pact-broker -- (0.001208s) ALTER TABLE `webhooks` ADD COLUMN `description` varchar(255)
2021-09-06 11:41:05.887642 I [83370:4380] pact-broker -- (0.000352s) COMMIT
2021-09-06 11:41:05.887692 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.887719 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.888397 I [83370:4380] pact-broker -- (0.000627s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190525_add_description_column_to_webhooks.rb')
2021-09-06 11:41:05.888413 I [83370:4380] pact-broker -- Finished applying migration 20190525_add_description_column_to_webhooks.rb, direction: up, took 0.002508 seconds
2021-09-06 11:41:05.888419 I [83370:4380] pact-broker -- Begin applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up
2021-09-06 11:41:05.888472 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.888498 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.888527 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.889793 I [83370:4380] pact-broker -- (0.001216s) ALTER TABLE `webhooks` ADD COLUMN `headers` varchar(255)
2021-09-06 11:41:05.890185 I [83370:4380] pact-broker -- (0.000369s) COMMIT
2021-09-06 11:41:05.890237 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.890265 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.890828 I [83370:4380] pact-broker -- (0.000513s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190602_add_headers_column_to_webhooks.rb')
2021-09-06 11:41:05.890845 I [83370:4380] pact-broker -- Finished applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up, took 0.002424 seconds
2021-09-06 11:41:05.890852 I [83370:4380] pact-broker -- Begin applying migration 20190603_migrate_webhook_headers.rb, direction: up
2021-09-06 11:41:05.891009 I [83370:4380] pact-broker -- (0.000069s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:41:05.891234 I [83370:4380] pact-broker -- (0.000166s) PRAGMA table_info('webhooks')
2021-09-06 11:41:05.891449 I [83370:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:41:05.891572 I [83370:4380] pact-broker -- (0.000074s) PRAGMA table_info('webhook_headers')
2021-09-06 11:41:05.891703 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:41:05.891839 I [83370:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `webhook_headers` LIMIT 1
2021-09-06 11:41:05.891939 I [83370:4380] pact-broker -- (0.000053s) SELECT * FROM `webhook_headers`
2021-09-06 11:41:05.892657 I [83370:4380] pact-broker -- (0.000668s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190603_migrate_webhook_headers.rb')
2021-09-06 11:41:05.892673 I [83370:4380] pact-broker -- Finished applying migration 20190603_migrate_webhook_headers.rb, direction: up, took 0.001819 seconds
2021-09-06 11:41:05.892680 I [83370:4380] pact-broker -- Begin applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up
2021-09-06 11:41:05.893346 I [83370:4380] pact-broker -- (0.000571s) DROP VIEW `all_verifications`
2021-09-06 11:41:05.894083 I [83370:4380] pact-broker -- (0.000630s) CREATE VIEW `all_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `success`, `provider_version_id`, `v`.`number` AS 'provider_version_number', `v`.`order` AS 'provider_version_order', `build_url`, `pact_version_id`, `execution_date`, `verifications`.`created_at`, `test_results` FROM `verifications` INNER JOIN `versions` AS 'v' ON (`v`.`id` = `verifications`.`provider_version_id`)
2021-09-06 11:41:05.894664 I [83370:4380] pact-broker -- (0.000500s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190909_add_test_results_to_all_verifications.rb')
2021-09-06 11:41:05.894680 I [83370:4380] pact-broker -- Finished applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up, took 0.001997 seconds
2021-09-06 11:41:05.894686 I [83370:4380] pact-broker -- Begin applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up
2021-09-06 11:41:05.895377 I [83370:4380] pact-broker -- (0.000559s) DROP VIEW `latest_verifications`
2021-09-06 11:41:05.896326 I [83370:4380] pact-broker -- (0.000818s) CREATE VIEW `latest_verifications` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `s`.`number` AS 'provider_version', `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_numbers` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`number` = `lv`.`latest_number`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:41:05.897003 I [83370:4380] pact-broker -- (0.000617s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190910_add_test_results_to_latest_verifications.rb')
2021-09-06 11:41:05.897019 I [83370:4380] pact-broker -- Finished applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up, took 0.002329 seconds
2021-09-06 11:41:05.897029 I [83370:4380] pact-broker -- Begin applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up
2021-09-06 11:41:05.897750 I [83370:4380] pact-broker -- (0.000599s) DROP VIEW `latest_verifications_for_pact_versions`
2021-09-06 11:41:05.898545 I [83370:4380] pact-broker -- (0.000647s) CREATE VIEW `latest_verifications_for_pact_versions` AS SELECT `verifications`.`id`, `verifications`.`number`, `verifications`.`success`, `verifications`.`build_url`, `verifications`.`pact_version_id`, `verifications`.`execution_date`, `verifications`.`created_at`, `verifications`.`provider_version_id`, `s`.`number` AS 'provider_version_number', `s`.`order` AS 'provider_version_order', `verifications`.`test_results` FROM `verifications` INNER JOIN `latest_verification_ids_for_pact_versions` AS 'lv' ON ((`verifications`.`pact_version_id` = `lv`.`pact_version_id`) AND (`verifications`.`id` = `lv`.`latest_verification_id`)) INNER JOIN `versions` AS 's' ON (`verifications`.`provider_version_id` = `s`.`id`)
2021-09-06 11:41:05.899108 I [83370:4380] pact-broker -- (0.000503s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20190911_add_test_results_to_latest_verifications_for_pact_versions.rb')
2021-09-06 11:41:05.899123 I [83370:4380] pact-broker -- Finished applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up, took 0.002092 seconds
2021-09-06 11:41:05.899130 I [83370:4380] pact-broker -- Begin applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up
2021-09-06 11:41:05.899698 I [83370:4380] pact-broker -- (0.000535s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:41:05.900371 I [83370:4380] pact-broker -- (0.000631s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:41:05.900975 I [83370:4380] pact-broker -- (0.000543s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191025_optimise_latest_verification_ids_for_cv_tags.rb')
2021-09-06 11:41:05.900991 I [83370:4380] pact-broker -- Finished applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up, took 0.001858 seconds
2021-09-06 11:41:05.901001 I [83370:4380] pact-broker -- Begin applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 11:41:05.901713 I [83370:4380] pact-broker -- (0.000595s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:41:05.902495 I [83370:4380] pact-broker -- (0.000671s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 11:41:05.903098 I [83370:4380] pact-broker -- (0.000545s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191028_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 11:41:05.903113 I [83370:4380] pact-broker -- Finished applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002109 seconds
2021-09-06 11:41:05.903119 I [83370:4380] pact-broker -- Begin applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up
2021-09-06 11:41:05.903674 I [83370:4380] pact-broker -- (0.000522s) DROP VIEW `latest_pact_publications_by_consumer_versions`
2021-09-06 11:41:05.904318 I [83370:4380] pact-broker -- (0.000604s) CREATE VIEW `latest_pact_publications_by_consumer_versions` AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.pact_publication_id = app.id
2021-09-06 11:41:05.904871 I [83370:4380] pact-broker -- (0.000493s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191030_optimise_latest_pact_publications_by_consumer_versions_.rb')
2021-09-06 11:41:05.904887 I [83370:4380] pact-broker -- Finished applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up, took 0.001764 seconds
2021-09-06 11:41:05.904893 I [83370:4380] pact-broker -- Begin applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:41:05.905474 I [83370:4380] pact-broker -- (0.000548s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:41:05.906096 I [83370:4380] pact-broker -- (0.000579s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      where v.id in (select latest_verification_id from latest_verification_ids_for_pact_versions)
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 11:41:05.906685 I [83370:4380] pact-broker -- (0.000530s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:41:05.906701 I [83370:4380] pact-broker -- Finished applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001805 seconds
2021-09-06 11:41:05.906711 I [83370:4380] pact-broker -- Begin applying migration 20191101_create_head_pact_tags.rb, direction: up
2021-09-06 11:41:05.907517 I [83370:4380] pact-broker -- (0.000603s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`))
2021-09-06 11:41:05.908073 I [83370:4380] pact-broker -- (0.000493s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20191101_create_head_pact_tags.rb')
2021-09-06 11:41:05.908089 I [83370:4380] pact-broker -- Finished applying migration 20191101_create_head_pact_tags.rb, direction: up, took 0.001375 seconds
2021-09-06 11:41:05.908095 I [83370:4380] pact-broker -- Begin applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up
2021-09-06 11:41:05.908154 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.908182 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.908244 I [83370:4380] pact-broker -- (0.000036s) BEGIN
2021-09-06 11:41:05.909639 I [83370:4380] pact-broker -- (0.001343s) ALTER TABLE `latest_pact_publication_ids_for_consumer_versions` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.910032 I [83370:4380] pact-broker -- (0.000365s) COMMIT
2021-09-06 11:41:05.910086 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.910114 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.910651 I [83370:4380] pact-broker -- (0.000491s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200318_add_created_at_to_latest_pact_publications.rb')
2021-09-06 11:41:05.910666 I [83370:4380] pact-broker -- Finished applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up, took 0.002568 seconds
2021-09-06 11:41:05.910673 I [83370:4380] pact-broker -- Begin applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up
2021-09-06 11:41:05.910727 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.910758 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.910788 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.912128 I [83370:4380] pact-broker -- (0.001291s) ALTER TABLE `latest_verification_id_for_pact_version_and_provider_version` ADD COLUMN `created_at` timestamp
2021-09-06 11:41:05.912509 I [83370:4380] pact-broker -- (0.000357s) COMMIT
2021-09-06 11:41:05.912560 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.912587 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.913224 I [83370:4380] pact-broker -- (0.000589s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200319_add_created_at_to_latest_verifications.rb')
2021-09-06 11:41:05.913240 I [83370:4380] pact-broker -- Finished applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up, took 0.002564 seconds
2021-09-06 11:41:05.913247 I [83370:4380] pact-broker -- Begin applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up
2021-09-06 11:41:05.913299 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.913325 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.913356 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.914715 I [83370:4380] pact-broker -- (0.001293s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_name` varchar(255)
2021-09-06 11:41:05.915107 I [83370:4380] pact-broker -- (0.000368s) COMMIT
2021-09-06 11:41:05.915158 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.915185 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.915778 I [83370:4380] pact-broker -- (0.000542s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200922_add_event_to_triggered_webhook.rb')
2021-09-06 11:41:05.915793 I [83370:4380] pact-broker -- Finished applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up, took 0.002543 seconds
2021-09-06 11:41:05.915799 I [83370:4380] pact-broker -- Begin applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 11:41:05.916310 I [83370:4380] pact-broker -- (0.000478s) DROP VIEW `latest_triggered_webhooks`
2021-09-06 11:41:05.917049 I [83370:4380] pact-broker -- (0.000699s) CREATE VIEW `latest_triggered_webhooks` AS select tw.id, tw.trigger_uuid, tw.trigger_type, tw.pact_publication_id, tw.webhook_id, tw.webhook_uuid, tw.consumer_id, tw.provider_id, tw.status, tw.created_at, tw.updated_at, tw.verification_id, tw.event_name
  from triggered_webhooks tw
  inner join (select max(id) as max_id
    from triggered_webhooks
    group by webhook_uuid, consumer_id, provider_id, event_name) latest_ids
  on latest_ids.max_id = tw.id
2021-09-06 11:41:05.917749 I [83370:4380] pact-broker -- (0.000639s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20200930_update_latest_triggered_webhooks.rb')
2021-09-06 11:41:05.917767 I [83370:4380] pact-broker -- Finished applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up, took 0.001964 seconds
2021-09-06 11:41:05.917777 I [83370:4380] pact-broker -- Begin applying migration 20201006_add_wip_to_verification.rb, direction: up
2021-09-06 11:41:05.917837 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.917866 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.917897 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.919295 I [83370:4380] pact-broker -- (0.001346s) ALTER TABLE `verifications` ADD COLUMN `wip` boolean DEFAULT (0) NOT NULL
2021-09-06 11:41:05.919685 I [83370:4380] pact-broker -- (0.000365s) COMMIT
2021-09-06 11:41:05.919737 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.919770 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.920418 I [83370:4380] pact-broker -- (0.000600s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201006_add_wip_to_verification.rb')
2021-09-06 11:41:05.920434 I [83370:4380] pact-broker -- Finished applying migration 20201006_add_wip_to_verification.rb, direction: up, took 0.002655 seconds
2021-09-06 11:41:05.920440 I [83370:4380] pact-broker -- Begin applying migration 20201023_create_verification_number_sequence.rb, direction: up
2021-09-06 11:41:05.920981 I [83370:4380] pact-broker -- (0.000487s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201023_create_verification_number_sequence.rb')
2021-09-06 11:41:05.920996 I [83370:4380] pact-broker -- Finished applying migration 20201023_create_verification_number_sequence.rb, direction: up, took 0.000553 seconds
2021-09-06 11:41:05.921003 I [83370:4380] pact-broker -- Begin applying migration 20201024_create_version_order_sequence.rb, direction: up
2021-09-06 11:41:05.921673 I [83370:4380] pact-broker -- (0.000615s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201024_create_version_order_sequence.rb')
2021-09-06 11:41:05.921689 I [83370:4380] pact-broker -- Finished applying migration 20201024_create_version_order_sequence.rb, direction: up, took 0.000683 seconds
2021-09-06 11:41:05.921695 I [83370:4380] pact-broker -- Begin applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 11:41:05.922261 I [83370:4380] pact-broker -- (0.000533s) DROP VIEW `latest_verification_ids_for_consumer_and_provider`
2021-09-06 11:41:05.922926 I [83370:4380] pact-broker -- (0.000621s) CREATE VIEW `latest_verification_ids_for_consumer_and_provider` AS select
        provider_id,
        consumer_id,
        max(verification_id) as latest_verification_id
        from latest_verification_id_for_pact_version_and_provider_version v
        group by provider_id, consumer_id
2021-09-06 11:41:05.923498 I [83370:4380] pact-broker -- (0.000508s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20201026_update_latest_verification_ids_for_consumer_and_provider.rb')
2021-09-06 11:41:05.923514 I [83370:4380] pact-broker -- Finished applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.001817 seconds
2021-09-06 11:41:05.923525 I [83370:4380] pact-broker -- Begin applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up
2021-09-06 11:41:05.923587 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.923614 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.923646 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.923930 I [83370:4380] pact-broker -- (0.000247s) CREATE INDEX `webhook_executions_triggered_webhook_id_index` ON `webhook_executions` (`triggered_webhook_id`)
2021-09-06 11:41:05.924363 I [83370:4380] pact-broker -- (0.000411s) COMMIT
2021-09-06 11:41:05.924413 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.924440 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.924508 I [83370:4380] pact-broker -- (0.000010s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.924533 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.924563 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.924885 I [83370:4380] pact-broker -- (0.000285s) CREATE INDEX `triggered_webhooks_webhook_id_index` ON `triggered_webhooks` (`webhook_id`)
2021-09-06 11:41:05.925020 I [83370:4380] pact-broker -- (0.000075s) CREATE INDEX `triggered_webhooks_consumer_id_index` ON `triggered_webhooks` (`consumer_id`)
2021-09-06 11:41:05.925121 I [83370:4380] pact-broker -- (0.000065s) CREATE INDEX `triggered_webhooks_provider_id_index` ON `triggered_webhooks` (`provider_id`)
2021-09-06 11:41:05.925217 I [83370:4380] pact-broker -- (0.000063s) CREATE INDEX `triggered_webhooks_verification_id_index` ON `triggered_webhooks` (`verification_id`)
2021-09-06 11:41:05.925312 I [83370:4380] pact-broker -- (0.000062s) CREATE INDEX `triggered_webhooks_pact_publication_id_index` ON `triggered_webhooks` (`pact_publication_id`)
2021-09-06 11:41:05.925881 I [83370:4380] pact-broker -- (0.000547s) COMMIT
2021-09-06 11:41:05.925936 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.925964 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.926591 I [83370:4380] pact-broker -- (0.000577s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210115_add_webhook_foreign_key_indexes.rb')
2021-09-06 11:41:05.926607 I [83370:4380] pact-broker -- Finished applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up, took 0.003078 seconds
2021-09-06 11:41:05.926613 I [83370:4380] pact-broker -- Begin applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up
2021-09-06 11:41:05.926667 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.926694 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.926723 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.928159 I [83370:4380] pact-broker -- (0.001388s) ALTER TABLE `triggered_webhooks` ADD COLUMN `event_context` varchar(255)
2021-09-06 11:41:05.928622 I [83370:4380] pact-broker -- (0.000437s) COMMIT
2021-09-06 11:41:05.928676 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.928704 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.929513 I [83370:4380] pact-broker -- (0.000753s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210116_add_context_to_triggered_webhook.rb')
2021-09-06 11:41:05.929530 I [83370:4380] pact-broker -- Finished applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up, took 0.002913 seconds
2021-09-06 11:41:05.929537 I [83370:4380] pact-broker -- Begin applying migration 20210117_add_branch_to_version.rb, direction: up
2021-09-06 11:41:05.929596 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.929624 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.929692 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:05.931132 I [83370:4380] pact-broker -- (0.001390s) ALTER TABLE `versions` ADD COLUMN `branch` varchar(255)
2021-09-06 11:41:05.932333 I [83370:4380] pact-broker -- (0.001151s) ALTER TABLE `versions` ADD COLUMN `build_url` varchar(255)
2021-09-06 11:41:05.932487 I [83370:4380] pact-broker -- (0.000108s) CREATE INDEX `versions_pacticipant_id_branch_order_index` ON `versions` (`pacticipant_id`, `branch`, `order`)
2021-09-06 11:41:05.933135 I [83370:4380] pact-broker -- (0.000624s) COMMIT
2021-09-06 11:41:05.933190 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.933219 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.933912 I [83370:4380] pact-broker -- (0.000645s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210117_add_branch_to_version.rb')
2021-09-06 11:41:05.933928 I [83370:4380] pact-broker -- Finished applying migration 20210117_add_branch_to_version.rb, direction: up, took 0.004388 seconds
2021-09-06 11:41:05.933938 I [83370:4380] pact-broker -- Begin applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up
2021-09-06 11:41:05.934718 I [83370:4380] pact-broker -- (0.000622s) DROP VIEW `head_pact_tags`
2021-09-06 11:41:05.935508 I [83370:4380] pact-broker -- (0.000620s) CREATE VIEW `head_pact_tags` AS SELECT `o`.`tag_name` AS 'name', `lp`.`pact_publication_id`, `tags`.`created_at` FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `versions` AS 'cv' ON (`lp`.`consumer_version_id` = `cv`.`id`) INNER JOIN `latest_tagged_pact_consumer_version_orders` AS 'o' ON ((`lp`.`consumer_id` = `o`.`consumer_id`) AND (`lp`.`provider_id` = `o`.`provider_id`) AND (`cv`.`order` = `o`.`latest_consumer_version_order`)) INNER JOIN `tags` ON ((`tags`.`version_id` = `cv`.`id`) AND (`tags`.`name` = `o`.`tag_name`))
2021-09-06 11:41:05.936050 I [83370:4380] pact-broker -- (0.000484s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210202_add_created_at_to_head_pact_tags.rb')
2021-09-06 11:41:05.936065 I [83370:4380] pact-broker -- Finished applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up, took 0.002124 seconds
2021-09-06 11:41:05.936072 I [83370:4380] pact-broker -- Begin applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up
2021-09-06 11:41:05.936130 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.936157 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.936186 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.937540 I [83370:4380] pact-broker -- (0.001310s) ALTER TABLE `tags` ADD COLUMN `pacticipant_id` integer
2021-09-06 11:41:05.938718 I [83370:4380] pact-broker -- (0.001132s) ALTER TABLE `tags` ADD COLUMN `version_order` integer
2021-09-06 11:41:05.938858 I [83370:4380] pact-broker -- (0.000101s) CREATE INDEX `tags_version_order_index` ON `tags` (`version_order`)
2021-09-06 11:41:05.938960 I [83370:4380] pact-broker -- (0.000068s) CREATE INDEX `tags_version_id_index` ON `tags` (`version_id`)
2021-09-06 11:41:05.939052 I [83370:4380] pact-broker -- (0.000061s) CREATE INDEX `tags_pacticipant_id_index` ON `tags` (`pacticipant_id`)
2021-09-06 11:41:05.939622 I [83370:4380] pact-broker -- (0.000547s) COMMIT
2021-09-06 11:41:05.939682 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.939712 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.940366 I [83370:4380] pact-broker -- (0.000604s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210205_add_pacticipant_id_to_tag.rb')
2021-09-06 11:41:05.940404 I [83370:4380] pact-broker -- Finished applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up, took 0.004328 seconds
2021-09-06 11:41:05.940411 I [83370:4380] pact-broker -- Begin applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up
2021-09-06 11:41:05.940471 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.940502 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.940531 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.940821 I [83370:4380] pact-broker -- (0.000254s) CREATE INDEX `tags_pacticipant_id_name_version_order_index` ON `tags` (`pacticipant_id`, `name`, `version_order`)
2021-09-06 11:41:05.941246 I [83370:4380] pact-broker -- (0.000403s) COMMIT
2021-09-06 11:41:05.941299 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.941327 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.941880 I [83370:4380] pact-broker -- (0.000506s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210206_add_index_to_tags_and_versions.rb')
2021-09-06 11:41:05.941896 I [83370:4380] pact-broker -- Finished applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up, took 0.001482 seconds
2021-09-06 11:41:05.941903 I [83370:4380] pact-broker -- Begin applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 11:41:05.942531 I [83370:4380] pact-broker -- (0.000591s) DROP VIEW `latest_verification_ids_for_consumer_version_tags`
2021-09-06 11:41:05.943208 I [83370:4380] pact-broker -- (0.000630s) CREATE VIEW `latest_verification_ids_for_consumer_version_tags` AS select
    lpp.provider_id,
    lpp.consumer_id,
    t.name as consumer_version_tag_name,
    max(lv.latest_verification_id) as latest_verification_id
  from latest_verification_ids_for_pact_versions lv
  join latest_pact_publication_ids_for_consumer_versions lpp
    on lv.pact_version_id = lpp.pact_version_id
  join tags t
    on lpp.consumer_version_id = t.version_id
  group by lpp.provider_id, lpp.consumer_id, t.name

2021-09-06 11:41:05.943866 I [83370:4380] pact-broker -- (0.000593s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb')
2021-09-06 11:41:05.943882 I [83370:4380] pact-broker -- Finished applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001976 seconds
2021-09-06 11:41:05.943889 I [83370:4380] pact-broker -- Begin applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 11:41:05.944645 I [83370:4380] pact-broker -- (0.000637s) DROP VIEW `latest_tagged_pact_consumer_version_orders`
2021-09-06 11:41:05.945430 I [83370:4380] pact-broker -- (0.000635s) CREATE VIEW `latest_tagged_pact_consumer_version_orders` AS SELECT `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name` AS 'tag_name', max(`version_order`) AS 'latest_consumer_version_order' FROM `latest_pact_publication_ids_for_consumer_versions` AS 'lp' INNER JOIN `tags` AS 't' ON (`t`.`version_id` = `lp`.`consumer_version_id`) GROUP BY `lp`.`provider_id`, `lp`.`consumer_id`, `t`.`name`
2021-09-06 11:41:05.946023 I [83370:4380] pact-broker -- (0.000532s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210208_optimise_latest_tagged_pact_cv_orders.rb')
2021-09-06 11:41:05.946043 I [83370:4380] pact-broker -- Finished applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.002150 seconds
2021-09-06 11:41:05.946050 I [83370:4380] pact-broker -- Begin applying migration 20210210_create_environments_table.rb, direction: up
2021-09-06 11:41:05.946912 I [83370:4380] pact-broker -- (0.000726s) CREATE TABLE `environments` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255), `name` varchar(255), `display_name` varchar(255), `production` Boolean, `contacts` varchar(255), `created_at` timestamp, `updated_at` timestamp)
2021-09-06 11:41:05.947614 I [83370:4380] pact-broker -- (0.000649s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:05.948302 I [83370:4380] pact-broker -- (0.000638s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:05.948900 I [83370:4380] pact-broker -- (0.000544s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210210_create_environments_table.rb')
2021-09-06 11:41:05.948915 I [83370:4380] pact-broker -- Finished applying migration 20210210_create_environments_table.rb, direction: up, took 0.002861 seconds
2021-09-06 11:41:05.948922 I [83370:4380] pact-broker -- Begin applying migration 20210216_create_deployed_versions_table.rb, direction: up
2021-09-06 11:41:05.949701 I [83370:4380] pact-broker -- (0.000608s) CREATE TABLE `deployed_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `currently_deployed` Boolean NOT NULL, `replaced_previous_deployed_version` Boolean NOT NULL, `created_at` timestamp, `updated_at` timestamp, `undeployed_at` timestamp)
2021-09-06 11:41:05.950375 I [83370:4380] pact-broker -- (0.000628s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:05.951152 I [83370:4380] pact-broker -- (0.000726s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:05.951766 I [83370:4380] pact-broker -- (0.000555s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210216_create_deployed_versions_table.rb')
2021-09-06 11:41:05.951782 I [83370:4380] pact-broker -- Finished applying migration 20210216_create_deployed_versions_table.rb, direction: up, took 0.002857 seconds
2021-09-06 11:41:05.951788 I [83370:4380] pact-broker -- Begin applying migration 20210226_set_deployment_columns_not_null.rb, direction: up
2021-09-06 11:41:05.951862 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.951889 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.951923 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:05.952124 I [83370:4380] pact-broker -- (0.000145s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:05.952210 I [83370:4380] pact-broker -- (0.000043s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:05.952271 I [83370:4380] pact-broker -- (0.000030s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.952458 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.952535 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:05.952706 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.952822 I [83370:4380] pact-broker -- (0.000041s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.952878 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:41:05.952932 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:05.957402 I [83370:4380] pact-broker -- (0.004397s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:05.957528 I [83370:4380] pact-broker -- (0.000102s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.957607 I [83370:4380] pact-broker -- (0.000058s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:41:05.957744 I [83370:4380] pact-broker -- (0.000118s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:05.957836 I [83370:4380] pact-broker -- (0.000072s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:05.957919 I [83370:4380] pact-broker -- (0.000064s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:05.958077 I [83370:4380] pact-broker -- (0.000108s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:05.958159 I [83370:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:05.958219 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.958405 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.958474 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:05.958791 I [83370:4380] pact-broker -- (0.000148s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.959924 I [83370:4380] pact-broker -- (0.001055s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.959985 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:05.960062 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:41:05.964438 I [83370:4380] pact-broker -- (0.004320s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:05.964614 I [83370:4380] pact-broker -- (0.000153s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.964669 I [83370:4380] pact-broker -- (0.000034s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:41:05.964750 I [83370:4380] pact-broker -- (0.000063s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:05.964837 I [83370:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:05.964921 I [83370:4380] pact-broker -- (0.000065s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:05.965117 I [83370:4380] pact-broker -- (0.000114s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:05.965199 I [83370:4380] pact-broker -- (0.000040s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:05.965263 I [83370:4380] pact-broker -- (0.000032s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.965455 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.965540 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:05.965795 I [83370:4380] pact-broker -- (0.000136s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.966913 I [83370:4380] pact-broker -- (0.001026s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:05.966975 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:41:05.967032 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:05.971290 I [83370:4380] pact-broker -- (0.004206s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:05.971406 I [83370:4380] pact-broker -- (0.000094s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:05.971456 I [83370:4380] pact-broker -- (0.000031s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at` FROM `deployed_versions_backup0`
2021-09-06 11:41:05.971776 I [83370:4380] pact-broker -- (0.000300s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:05.971873 I [83370:4380] pact-broker -- (0.000075s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:05.972018 I [83370:4380] pact-broker -- (0.000125s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:05.973128 I [83370:4380] pact-broker -- (0.001082s) COMMIT
2021-09-06 11:41:05.973196 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:05.973224 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:05.973291 I [83370:4380] pact-broker -- (0.000025s) PRAGMA foreign_keys = 0
2021-09-06 11:41:05.973316 I [83370:4380] pact-broker -- (0.000008s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:05.973349 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:05.973529 I [83370:4380] pact-broker -- (0.000130s) PRAGMA table_info('environments')
2021-09-06 11:41:05.973597 I [83370:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:05.973657 I [83370:4380] pact-broker -- (0.000030s) PRAGMA index_list('environments')
2021-09-06 11:41:05.973801 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.973874 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:05.974018 I [83370:4380] pact-broker -- (0.000012s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.974143 I [83370:4380] pact-broker -- (0.000039s) PRAGMA index_list('environments')
2021-09-06 11:41:05.974194 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:05.974241 I [83370:4380] pact-broker -- (0.000021s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:05.978803 I [83370:4380] pact-broker -- (0.004507s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:05.978945 I [83370:4380] pact-broker -- (0.000117s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:41:05.979019 I [83370:4380] pact-broker -- (0.000054s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:05.979157 I [83370:4380] pact-broker -- (0.000119s) DROP TABLE `environments_backup0`
2021-09-06 11:41:05.979248 I [83370:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:05.979330 I [83370:4380] pact-broker -- (0.000064s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:05.979495 I [83370:4380] pact-broker -- (0.000114s) PRAGMA table_info('environments')
2021-09-06 11:41:05.979560 I [83370:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:05.979621 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('environments')
2021-09-06 11:41:05.979768 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.979841 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:05.980127 I [83370:4380] pact-broker -- (0.000149s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.981226 I [83370:4380] pact-broker -- (0.001014s) PRAGMA index_list('environments')
2021-09-06 11:41:05.981289 I [83370:4380] pact-broker -- (0.000028s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:05.981341 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:05.985709 I [83370:4380] pact-broker -- (0.004314s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:05.985817 I [83370:4380] pact-broker -- (0.000085s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:41:05.985866 I [83370:4380] pact-broker -- (0.000030s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:05.985947 I [83370:4380] pact-broker -- (0.000063s) DROP TABLE `environments_backup0`
2021-09-06 11:41:05.986037 I [83370:4380] pact-broker -- (0.000069s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:05.986117 I [83370:4380] pact-broker -- (0.000063s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:05.986276 I [83370:4380] pact-broker -- (0.000109s) PRAGMA table_info('environments')
2021-09-06 11:41:05.986343 I [83370:4380] pact-broker -- (0.000024s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:05.986402 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('environments')
2021-09-06 11:41:05.986555 I [83370:4380] pact-broker -- (0.000012s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.986637 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:05.986914 I [83370:4380] pact-broker -- (0.000128s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.987991 I [83370:4380] pact-broker -- (0.000991s) PRAGMA index_list('environments')
2021-09-06 11:41:05.988061 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:05.988113 I [83370:4380] pact-broker -- (0.000021s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:05.992703 I [83370:4380] pact-broker -- (0.004511s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:05.992844 I [83370:4380] pact-broker -- (0.000113s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:41:05.992916 I [83370:4380] pact-broker -- (0.000052s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:05.993086 I [83370:4380] pact-broker -- (0.000148s) DROP TABLE `environments_backup0`
2021-09-06 11:41:05.993241 I [83370:4380] pact-broker -- (0.000134s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:05.993382 I [83370:4380] pact-broker -- (0.000122s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:05.993557 I [83370:4380] pact-broker -- (0.000117s) PRAGMA table_info('environments')
2021-09-06 11:41:05.993633 I [83370:4380] pact-broker -- (0.000023s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:05.993697 I [83370:4380] pact-broker -- (0.000030s) PRAGMA index_list('environments')
2021-09-06 11:41:05.993853 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:05.993942 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:05.994232 I [83370:4380] pact-broker -- (0.000134s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:05.995341 I [83370:4380] pact-broker -- (0.001019s) PRAGMA index_list('environments')
2021-09-06 11:41:05.995414 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:05.995479 I [83370:4380] pact-broker -- (0.000035s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:05.999883 I [83370:4380] pact-broker -- (0.004344s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:06.000013 I [83370:4380] pact-broker -- (0.000107s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NULL)
2021-09-06 11:41:06.000082 I [83370:4380] pact-broker -- (0.000049s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:06.000248 I [83370:4380] pact-broker -- (0.000143s) DROP TABLE `environments_backup0`
2021-09-06 11:41:06.000390 I [83370:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:06.000543 I [83370:4380] pact-broker -- (0.000133s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:06.000697 I [83370:4380] pact-broker -- (0.000092s) PRAGMA table_info('environments')
2021-09-06 11:41:06.000765 I [83370:4380] pact-broker -- (0.000028s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:06.000825 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_list('environments')
2021-09-06 11:41:06.000975 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.001059 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:06.001354 I [83370:4380] pact-broker -- (0.000140s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.002504 I [83370:4380] pact-broker -- (0.001050s) PRAGMA index_list('environments')
2021-09-06 11:41:06.002567 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:06.002633 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:06.007031 I [83370:4380] pact-broker -- (0.004340s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:06.007162 I [83370:4380] pact-broker -- (0.000109s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:41:06.007233 I [83370:4380] pact-broker -- (0.000050s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:06.007403 I [83370:4380] pact-broker -- (0.000151s) DROP TABLE `environments_backup0`
2021-09-06 11:41:06.007565 I [83370:4380] pact-broker -- (0.000143s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:06.007713 I [83370:4380] pact-broker -- (0.000126s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:06.008934 I [83370:4380] pact-broker -- (0.001164s) PRAGMA table_info('environments')
2021-09-06 11:41:06.009003 I [83370:4380] pact-broker -- (0.000026s) PRAGMA foreign_key_list('environments')
2021-09-06 11:41:06.009069 I [83370:4380] pact-broker -- (0.000035s) PRAGMA index_list('environments')
2021-09-06 11:41:06.009219 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.009296 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: environments_backup0: SELECT NULL AS 'nil' FROM `environments_backup0` LIMIT 1
2021-09-06 11:41:06.009568 I [83370:4380] pact-broker -- (0.000140s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.010688 I [83370:4380] pact-broker -- (0.001018s) PRAGMA index_list('environments')
2021-09-06 11:41:06.010749 I [83370:4380] pact-broker -- (0.000025s) PRAGMA index_info('environments_uuid_index')
2021-09-06 11:41:06.010805 I [83370:4380] pact-broker -- (0.000021s) PRAGMA index_info('environments_name_index')
2021-09-06 11:41:06.015249 I [83370:4380] pact-broker -- (0.004368s) ALTER TABLE `environments` RENAME TO `environments_backup0`
2021-09-06 11:41:06.015383 I [83370:4380] pact-broker -- (0.000110s) CREATE TABLE `environments`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `name` varchar(255) DEFAULT (NULL) NOT NULL, `display_name` varchar(255) DEFAULT (NULL) NULL, `production` Boolean DEFAULT (NULL) NOT NULL, `contacts` varchar(255) DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL)
2021-09-06 11:41:06.015455 I [83370:4380] pact-broker -- (0.000052s) INSERT INTO `environments`(`id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at`) SELECT `id`, `uuid`, `name`, `display_name`, `production`, `contacts`, `created_at`, `updated_at` FROM `environments_backup0`
2021-09-06 11:41:06.015623 I [83370:4380] pact-broker -- (0.000149s) DROP TABLE `environments_backup0`
2021-09-06 11:41:06.015771 I [83370:4380] pact-broker -- (0.000127s) CREATE UNIQUE INDEX `environments_uuid_index` ON `environments` (`uuid`)
2021-09-06 11:41:06.015916 I [83370:4380] pact-broker -- (0.000123s) CREATE UNIQUE INDEX `environments_name_index` ON `environments` (`name`)
2021-09-06 11:41:06.016553 I [83370:4380] pact-broker -- (0.000611s) COMMIT
2021-09-06 11:41:06.016616 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.016647 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.017409 I [83370:4380] pact-broker -- (0.000700s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210226_set_deployment_columns_not_null.rb')
2021-09-06 11:41:06.017431 I [83370:4380] pact-broker -- Finished applying migration 20210226_set_deployment_columns_not_null.rb, direction: up, took 0.065638 seconds
2021-09-06 11:41:06.017438 I [83370:4380] pact-broker -- Begin applying migration 20210301_add_pacticipant_columns.rb, direction: up
2021-09-06 11:41:06.017512 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.017543 I [83370:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.017577 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:06.019024 I [83370:4380] pact-broker -- (0.001377s) ALTER TABLE `pacticipants` ADD COLUMN `display_name` varchar(255)
2021-09-06 11:41:06.020234 I [83370:4380] pact-broker -- (0.001162s) ALTER TABLE `pacticipants` ADD COLUMN `repository_name` varchar(255)
2021-09-06 11:41:06.021429 I [83370:4380] pact-broker -- (0.001149s) ALTER TABLE `pacticipants` ADD COLUMN `repository_namespace` varchar(255)
2021-09-06 11:41:06.022612 I [83370:4380] pact-broker -- (0.001120s) ALTER TABLE `pacticipants` ADD COLUMN `main_development_branches` varchar(255)
2021-09-06 11:41:06.023234 I [83370:4380] pact-broker -- (0.000591s) COMMIT
2021-09-06 11:41:06.023316 I [83370:4380] pact-broker -- (0.000023s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.023365 I [83370:4380] pact-broker -- (0.000015s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.024239 I [83370:4380] pact-broker -- (0.000801s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210301_add_pacticipant_columns.rb')
2021-09-06 11:41:06.024263 I [83370:4380] pact-broker -- Finished applying migration 20210301_add_pacticipant_columns.rb, direction: up, took 0.006819 seconds
2021-09-06 11:41:06.024272 I [83370:4380] pact-broker -- Begin applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up
2021-09-06 11:41:06.025347 I [83370:4380] pact-broker -- (0.000851s) CREATE TABLE `currently_deployed_version_ids` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `target_for_index` varchar(255) NOT NULL, `pacticipant_id` integer NOT NULL REFERENCES `pacticipants` ON DELETE CASCADE, `environment_id` integer NOT NULL REFERENCES `environments` ON DELETE CASCADE, `version_id` integer NOT NULL REFERENCES `versions` ON DELETE CASCADE, `deployed_version_id` integer NOT NULL)
2021-09-06 11:41:06.026308 I [83370:4380] pact-broker -- (0.000892s) CREATE UNIQUE INDEX `currently_deployed_version_pacticipant_environment_target_index` ON `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `target_for_index`)
2021-09-06 11:41:06.027316 I [83370:4380] pact-broker -- (0.000871s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210413_create_currently_deployed_version_ids_table.rb')
2021-09-06 11:41:06.027335 I [83370:4380] pact-broker -- Finished applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up, took 0.003060 seconds
2021-09-06 11:41:06.027342 I [83370:4380] pact-broker -- Begin applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up
2021-09-06 11:41:06.027410 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.027440 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.027473 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:06.029047 I [83370:4380] pact-broker -- (0.001525s) ALTER TABLE `deployed_versions` ADD COLUMN `target` varchar(255)
2021-09-06 11:41:06.030376 I [83370:4380] pact-broker -- (0.001272s) ALTER TABLE `deployed_versions` ADD COLUMN `target_for_index` varchar(255) DEFAULT ('') NOT NULL
2021-09-06 11:41:06.030601 I [83370:4380] pact-broker -- (0.000162s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:06.030698 I [83370:4380] pact-broker -- (0.000044s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:06.030763 I [83370:4380] pact-broker -- (0.000031s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.031003 I [83370:4380] pact-broker -- (0.000014s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.031084 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:06.031381 I [83370:4380] pact-broker -- (0.000154s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.032577 I [83370:4380] pact-broker -- (0.001090s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.032640 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:06.032697 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:41:06.037390 I [83370:4380] pact-broker -- (0.004608s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:06.037523 I [83370:4380] pact-broker -- (0.000110s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NOT NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:06.037578 I [83370:4380] pact-broker -- (0.000036s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:41:06.037725 I [83370:4380] pact-broker -- (0.000127s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:06.037820 I [83370:4380] pact-broker -- (0.000075s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:06.037908 I [83370:4380] pact-broker -- (0.000068s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:06.038102 I [83370:4380] pact-broker -- (0.000146s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:06.038189 I [83370:4380] pact-broker -- (0.000038s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:06.038387 I [83370:4380] pact-broker -- (0.000160s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.038605 I [83370:4380] pact-broker -- (0.000015s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.038681 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:06.038986 I [83370:4380] pact-broker -- (0.000151s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.040190 I [83370:4380] pact-broker -- (0.001100s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.040255 I [83370:4380] pact-broker -- (0.000029s) PRAGMA index_info('deployed_versions_pacticipant_id_currently_deployed_index')
2021-09-06 11:41:06.040309 I [83370:4380] pact-broker -- (0.000022s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:06.044791 I [83370:4380] pact-broker -- (0.004428s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:06.044920 I [83370:4380] pact-broker -- (0.000106s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `replaced_previous_deployed_version` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:06.044974 I [83370:4380] pact-broker -- (0.000035s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `replaced_previous_deployed_version`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:41:06.045059 I [83370:4380] pact-broker -- (0.000067s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:06.045148 I [83370:4380] pact-broker -- (0.000071s) CREATE INDEX `deployed_versions_pacticipant_id_currently_deployed_index` ON `deployed_versions` (`pacticipant_id`, `currently_deployed`)
2021-09-06 11:41:06.045233 I [83370:4380] pact-broker -- (0.000066s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:06.045308 I [83370:4380] pact-broker -- (0.000049s) DROP INDEX `deployed_versions_pacticipant_id_currently_deployed_index`
2021-09-06 11:41:06.046128 I [83370:4380] pact-broker -- (0.000794s) COMMIT
2021-09-06 11:41:06.046193 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.046223 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.047007 I [83370:4380] pact-broker -- (0.000722s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210415_add_target_column_to_deployed_version.rb')
2021-09-06 11:41:06.047026 I [83370:4380] pact-broker -- Finished applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up, took 0.019680 seconds
2021-09-06 11:41:06.047033 I [83370:4380] pact-broker -- Begin applying migration 20210419_create_released_versions_table.rb, direction: up
2021-09-06 11:41:06.048019 I [83370:4380] pact-broker -- (0.000805s) CREATE TABLE `released_versions` (`id` integer NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) NOT NULL, `version_id` integer NOT NULL REFERENCES `versions`, `pacticipant_id` integer NOT NULL, `environment_id` integer NOT NULL REFERENCES `environments`, `created_at` timestamp, `updated_at` timestamp, `support_ended_at` timestamp)
2021-09-06 11:41:06.048849 I [83370:4380] pact-broker -- (0.000777s) CREATE UNIQUE INDEX `released_versions_uuid_index` ON `released_versions` (`uuid`)
2021-09-06 11:41:06.049827 I [83370:4380] pact-broker -- (0.000926s) CREATE UNIQUE INDEX `released_versions_version_id_environment_id_index` ON `released_versions` (`version_id`, `environment_id`)
2021-09-06 11:41:06.050748 I [83370:4380] pact-broker -- (0.000858s) CREATE INDEX `released_version_support_ended_at_index` ON `released_versions` (`support_ended_at`)
2021-09-06 11:41:06.051518 I [83370:4380] pact-broker -- (0.000698s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210419_create_released_versions_table.rb')
2021-09-06 11:41:06.051536 I [83370:4380] pact-broker -- Finished applying migration 20210419_create_released_versions_table.rb, direction: up, took 0.004498 seconds
2021-09-06 11:41:06.051544 I [83370:4380] pact-broker -- Begin applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up
2021-09-06 11:41:06.051607 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.051637 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.051670 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:06.053215 I [83370:4380] pact-broker -- (0.001474s) ALTER TABLE `pacticipants` ADD COLUMN `main_branch` varchar(255)
2021-09-06 11:41:06.053692 I [83370:4380] pact-broker -- (0.000449s) COMMIT
2021-09-06 11:41:06.053758 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.053787 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.054602 I [83370:4380] pact-broker -- (0.000765s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210529_add_main_branch_to_pacticipant.rb')
2021-09-06 11:41:06.054618 I [83370:4380] pact-broker -- Finished applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up, took 0.003072 seconds
2021-09-06 11:41:06.054625 I [83370:4380] pact-broker -- Begin applying migration 20210608_add_uuid_to_webhook.rb, direction: up
2021-09-06 11:41:06.054680 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.054708 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.054737 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:06.056184 I [83370:4380] pact-broker -- (0.001404s) ALTER TABLE `triggered_webhooks` ADD COLUMN `uuid` varchar(255)
2021-09-06 11:41:06.056372 I [83370:4380] pact-broker -- (0.000118s) CREATE UNIQUE INDEX `triggered_webhooks_uuid` ON `triggered_webhooks` (`uuid`)
2021-09-06 11:41:06.056897 I [83370:4380] pact-broker -- (0.000502s) COMMIT
2021-09-06 11:41:06.056948 I [83370:4380] pact-broker -- (0.000013s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.056976 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.057595 I [83370:4380] pact-broker -- (0.000571s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210608_add_uuid_to_webhook.rb')
2021-09-06 11:41:06.057625 I [83370:4380] pact-broker -- Finished applying migration 20210608_add_uuid_to_webhook.rb, direction: up, took 0.002997 seconds
2021-09-06 11:41:06.057631 I [83370:4380] pact-broker -- Begin applying migration 20210609_set_webhook_uuid.rb, direction: up
2021-09-06 11:41:06.057796 I [83370:4380] pact-broker -- (0.000070s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 11:41:06.058023 I [83370:4380] pact-broker -- (0.000168s) PRAGMA table_info('triggered_webhooks')
2021-09-06 11:41:06.058315 I [83370:4380] pact-broker -- (0.000061s) UPDATE `triggered_webhooks` SET `uuid` = ('6949b50b-782a-451e-9512-dfcf4ebc062b' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 11:41:06.059031 I [83370:4380] pact-broker -- (0.000665s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210609_set_webhook_uuid.rb')
2021-09-06 11:41:06.059047 I [83370:4380] pact-broker -- Finished applying migration 20210609_set_webhook_uuid.rb, direction: up, took 0.001413 seconds
2021-09-06 11:41:06.059053 I [83370:4380] pact-broker -- Begin applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up
2021-09-06 11:41:06.059109 I [83370:4380] pact-broker -- (0.000014s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.059136 I [83370:4380] pact-broker -- (0.000009s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.059192 I [83370:4380] pact-broker -- (0.000035s) BEGIN
2021-09-06 11:41:06.059393 I [83370:4380] pact-broker -- (0.000155s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:06.059505 I [83370:4380] pact-broker -- (0.000062s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:06.059570 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.059777 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.059851 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:06.060026 I [83370:4380] pact-broker -- (0.000013s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.060147 I [83370:4380] pact-broker -- (0.000046s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.060201 I [83370:4380] pact-broker -- (0.000024s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:06.065090 I [83370:4380] pact-broker -- (0.004847s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:06.065271 I [83370:4380] pact-broker -- (0.000157s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `currently_deployed` Boolean DEFAULT (NULL) NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:06.065327 I [83370:4380] pact-broker -- (0.000035s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `currently_deployed`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:41:06.065450 I [83370:4380] pact-broker -- (0.000103s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:06.065541 I [83370:4380] pact-broker -- (0.000072s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:06.065723 I [83370:4380] pact-broker -- (0.000132s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:06.065807 I [83370:4380] pact-broker -- (0.000039s) PRAGMA foreign_key_list('deployed_versions')
2021-09-06 11:41:06.065871 I [83370:4380] pact-broker -- (0.000027s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.066052 I [83370:4380] pact-broker -- (0.000013s) SAVEPOINT autopoint_1
2021-09-06 11:41:06.066118 E [83370:4380 logging.rb:88] pact-broker -- SQLite3::SQLException: no such table: deployed_versions_backup0: SELECT NULL AS 'nil' FROM `deployed_versions_backup0` LIMIT 1
2021-09-06 11:41:06.066406 I [83370:4380] pact-broker -- (0.000145s) ROLLBACK TO SAVEPOINT autopoint_1
2021-09-06 11:41:06.067611 I [83370:4380] pact-broker -- (0.001130s) PRAGMA index_list('deployed_versions')
2021-09-06 11:41:06.067674 I [83370:4380] pact-broker -- (0.000026s) PRAGMA index_info('deployed_versions_uuid_index')
2021-09-06 11:41:06.072167 I [83370:4380] pact-broker -- (0.004450s) ALTER TABLE `deployed_versions` RENAME TO `deployed_versions_backup0`
2021-09-06 11:41:06.072284 I [83370:4380] pact-broker -- (0.000094s) CREATE TABLE `deployed_versions`(`id` integer DEFAULT (NULL) NOT NULL PRIMARY KEY AUTOINCREMENT, `uuid` varchar(255) DEFAULT (NULL) NOT NULL, `version_id` integer DEFAULT (NULL) NOT NULL, `pacticipant_id` integer DEFAULT (NULL) NOT NULL, `environment_id` integer DEFAULT (NULL) NOT NULL, `created_at` timestamp DEFAULT (NULL) NOT NULL, `updated_at` timestamp DEFAULT (NULL) NOT NULL, `undeployed_at` timestamp DEFAULT (NULL) NULL, `target` varchar(255) DEFAULT (NULL) NULL, `target_for_index` varchar(255) DEFAULT ('') NOT NULL, FOREIGN KEY (`environment_id`) REFERENCES `environments` ON DELETE NO ACTION ON UPDATE NO ACTION, FOREIGN KEY (`version_id`) REFERENCES `versions` ON DELETE NO ACTION ON UPDATE NO ACTION)
2021-09-06 11:41:06.072334 I [83370:4380] pact-broker -- (0.000031s) INSERT INTO `deployed_versions`(`id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index`) SELECT `id`, `uuid`, `version_id`, `pacticipant_id`, `environment_id`, `created_at`, `updated_at`, `undeployed_at`, `target`, `target_for_index` FROM `deployed_versions_backup0`
2021-09-06 11:41:06.072411 I [83370:4380] pact-broker -- (0.000059s) DROP TABLE `deployed_versions_backup0`
2021-09-06 11:41:06.072497 I [83370:4380] pact-broker -- (0.000068s) CREATE UNIQUE INDEX `deployed_versions_uuid_index` ON `deployed_versions` (`uuid`)
2021-09-06 11:41:06.073111 I [83370:4380] pact-broker -- (0.000590s) COMMIT
2021-09-06 11:41:06.073169 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.073199 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.073996 I [83370:4380] pact-broker -- (0.000742s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210702_drop_unused_columns_from_deployed_versions.rb')
2021-09-06 11:41:06.074014 I [83370:4380] pact-broker -- Finished applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up, took 0.014956 seconds
2021-09-06 11:41:06.074022 I [83370:4380] pact-broker -- Begin applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up
2021-09-06 11:41:06.074108 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.074139 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.074171 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:06.075733 I [83370:4380] pact-broker -- (0.001510s) ALTER TABLE `pact_publications` ADD COLUMN `consumer_version_order` integer
2021-09-06 11:41:06.076234 I [83370:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 11:41:06.076292 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.076335 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.077111 I [83370:4380] pact-broker -- (0.000711s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210711_add_consumer_version_order_to_pact_publication.rb')
2021-09-06 11:41:06.077129 I [83370:4380] pact-broker -- Finished applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up, took 0.003103 seconds
2021-09-06 11:41:06.077136 I [83370:4380] pact-broker -- Begin applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up
2021-09-06 11:41:06.077195 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.077224 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.077256 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:06.078825 I [83370:4380] pact-broker -- (0.001501s) ALTER TABLE `pact_versions` ADD COLUMN `messages_count` integer
2021-09-06 11:41:06.080165 I [83370:4380] pact-broker -- (0.001289s) ALTER TABLE `pact_versions` ADD COLUMN `interactions_count` integer
2021-09-06 11:41:06.080665 I [83370:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 11:41:06.080724 I [83370:4380] pact-broker -- (0.000016s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.080755 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.081459 I [83370:4380] pact-broker -- (0.000649s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210712_add_interaction_count_to_pact_versions.rb')
2021-09-06 11:41:06.081480 I [83370:4380] pact-broker -- Finished applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up, took 0.004340 seconds
2021-09-06 11:41:06.081488 I [83370:4380] pact-broker -- Begin applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up
2021-09-06 11:41:06.081557 I [83370:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.081586 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.081621 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:06.082016 I [83370:4380] pact-broker -- (0.000329s) CREATE INDEX `triggered_webhooks_webhook_uuid_index` ON `triggered_webhooks` (`webhook_uuid`)
2021-09-06 11:41:06.082570 I [83370:4380] pact-broker -- (0.000522s) COMMIT
2021-09-06 11:41:06.082633 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.082667 I [83370:4380] pact-broker -- (0.000012s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.083566 I [83370:4380] pact-broker -- (0.000836s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210722_add_index_to_triggered_webhooks_webhook_uuid.rb')
2021-09-06 11:41:06.083585 I [83370:4380] pact-broker -- Finished applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up, took 0.002093 seconds
2021-09-06 11:41:06.083593 I [83370:4380] pact-broker -- Begin applying migration 20210810_set_allow_contract_modification.rb, direction: up
2021-09-06 11:41:06.083809 I [83370:4380] pact-broker -- (0.000115s) SELECT count(*) AS 'count' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:06.084584 I [83370:4380] pact-broker -- (0.000716s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210810_set_allow_contract_modification.rb')
2021-09-06 11:41:06.084604 I [83370:4380] pact-broker -- Finished applying migration 20210810_set_allow_contract_modification.rb, direction: up, took 0.001007 seconds
2021-09-06 11:41:06.084611 I [83370:4380] pact-broker -- Begin applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up
2021-09-06 11:41:06.084677 I [83370:4380] pact-broker -- (0.000018s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.084737 I [83370:4380] pact-broker -- (0.000041s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.084772 I [83370:4380] pact-broker -- (0.000012s) BEGIN
2021-09-06 11:41:06.085115 I [83370:4380] pact-broker -- (0.000302s) CREATE INDEX `verifications_pact_version_id_id_index` ON `verifications` (`pact_version_id`, `id`)
2021-09-06 11:41:06.085715 I [83370:4380] pact-broker -- (0.000572s) COMMIT
2021-09-06 11:41:06.085774 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.085804 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.086466 I [83370:4380] pact-broker -- (0.000608s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210815_add_provider_version_id_index_to_verifications.rb')
2021-09-06 11:41:06.086483 I [83370:4380] pact-broker -- Finished applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up, took 0.001869 seconds
2021-09-06 11:41:06.086489 I [83370:4380] pact-broker -- Begin applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up
2021-09-06 11:41:06.086548 I [83370:4380] pact-broker -- (0.000015s) PRAGMA foreign_keys = 0
2021-09-06 11:41:06.086576 I [83370:4380] pact-broker -- (0.000010s) PRAGMA legacy_alter_table = 1
2021-09-06 11:41:06.086608 I [83370:4380] pact-broker -- (0.000010s) BEGIN
2021-09-06 11:41:06.088301 I [83370:4380] pact-broker -- (0.001620s) ALTER TABLE `verifications` ADD COLUMN `consumer_version_selector_hashes` varchar(255)
2021-09-06 11:41:06.089648 I [83370:4380] pact-broker -- (0.001295s) ALTER TABLE `verifications` ADD COLUMN `tag_names` varchar(255)
2021-09-06 11:41:06.090294 I [83370:4380] pact-broker -- (0.000617s) COMMIT
2021-09-06 11:41:06.090356 I [83370:4380] pact-broker -- (0.000017s) PRAGMA foreign_keys = 1
2021-09-06 11:41:06.090386 I [83370:4380] pact-broker -- (0.000011s) PRAGMA legacy_alter_table = 0
2021-09-06 11:41:06.091158 I [83370:4380] pact-broker -- (0.000710s) INSERT INTO `schema_migrations` (`filename`) VALUES ('20210818_add_consumer_version_selectors_to_verification.rb')
2021-09-06 11:41:06.091176 I [83370:4380] pact-broker -- Finished applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up, took 0.004683 seconds
2021-09-06 11:41:06.091549 I [83370:4380] pact-broker -- (0.000251s) SELECT * FROM `sqlite_master` WHERE ((`name` != 'sqlite_sequence') AND (`type` = 'table'))
2021-09-06 11:41:06.091709 I [83370:4380] pact-broker -- (0.000071s) SELECT * FROM `schema_migrations` ORDER BY `filename` DESC LIMIT 1
2021-09-06 11:41:06.091726 I [83370:4380] PactBroker::App -- Database schema version is now 20210818
2021-09-06 11:41:06.091737 I [83370:4380] PactBroker::App -- Migrating data
2021-09-06 11:41:06.091895 I [83370:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:06.092120 I [83370:4380] pact-broker -- (0.000168s) PRAGMA table_info('verifications')
2021-09-06 11:41:06.092292 I [83370:4380] pact-broker -- (0.000051s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:06.092451 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `verifications` LIMIT 1
2021-09-06 11:41:06.092572 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.092761 I [83370:4380] pact-broker -- (0.000141s) PRAGMA table_info('pact_versions')
2021-09-06 11:41:06.092900 I [83370:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.093029 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.093138 I [83370:4380] pact-broker -- (0.000078s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 11:41:06.093256 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:06.093429 I [83370:4380] pact-broker -- (0.000126s) PRAGMA table_info('pact_publications')
2021-09-06 11:41:06.093562 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:06.093682 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.093860 I [83370:4380] pact-broker -- (0.000133s) PRAGMA table_info('versions')
2021-09-06 11:41:06.094002 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.094094 I [83370:4380] pact-broker -- (0.000060s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 11:41:06.094219 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.094365 I [83370:4380] pact-broker -- (0.000053s) SELECT NULL AS 'nil' FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.094502 I [83370:4380] pact-broker -- (0.000061s) SELECT max(`order`) AS 'max' FROM `versions` LIMIT 1
2021-09-06 11:41:06.094598 I [83370:4380] pact-broker -- (0.000054s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.094712 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `webhooks` LIMIT 1
2021-09-06 11:41:06.094832 I [83370:4380] pact-broker -- (0.000051s) UPDATE `webhooks` SET `enabled` = 1 WHERE (`enabled` IS NULL)
2021-09-06 11:41:06.094973 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `webhook_executions` LIMIT 1
2021-09-06 11:41:06.095144 I [83370:4380] pact-broker -- (0.000124s) PRAGMA table_info('webhook_executions')
2021-09-06 11:41:06.095273 I [83370:4380] pact-broker -- (0.000053s) DELETE FROM `webhook_executions` WHERE (`triggered_webhook_id` IS NULL)
2021-09-06 11:41:06.095370 I [83370:4380] pact-broker -- (0.000055s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 11:41:06.095479 I [83370:4380] pact-broker -- (0.000053s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 11:41:06.095600 I [83370:4380] pact-broker -- (0.000050s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.095747 I [83370:4380] pact-broker -- (0.000099s) PRAGMA table_info('tags')
2021-09-06 11:41:06.095884 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.096008 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.096100 I [83370:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.096274 I [83370:4380] pact-broker -- (0.000061s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 11:41:06.096396 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.096490 I [83370:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.096581 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.096696 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.096859 I [83370:4380] pact-broker -- (0.000060s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 11:41:06.096977 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:41:06.097168 I [83370:4380] pact-broker -- (0.000144s) PRAGMA table_info('pacticipants')
2021-09-06 11:41:06.097317 I [83370:4380] pact-broker -- (0.000049s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:41:06.097451 I [83370:4380] pact-broker -- (0.000072s) SELECT * FROM `pacticipants` WHERE (`display_name` IS NULL)
2021-09-06 11:41:06.097596 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:41:06.097689 I [83370:4380] pact-broker -- (0.000046s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:41:06.097778 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `pacticipants` LIMIT 1
2021-09-06 11:41:06.097868 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.097956 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.098072 I [83370:4380] pact-broker -- (0.000051s) SELECT `id`, `name` FROM `pacticipants` WHERE (`main_branch` IS NULL)
2021-09-06 11:41:06.098215 I [83370:4380] pact-broker -- (0.000048s) SELECT NULL AS 'nil' FROM `triggered_webhooks` LIMIT 1
2021-09-06 11:41:06.098407 I [83370:4380] pact-broker -- (0.000145s) PRAGMA table_info('triggered_webhooks')
2021-09-06 11:41:06.098672 I [83370:4380] pact-broker -- (0.000088s) UPDATE `triggered_webhooks` SET `uuid` = ('56b7d65a-a338-4925-840b-896c66d3abad' || '-' || `id`) WHERE (`uuid` IS NULL)
2021-09-06 11:41:06.098805 I [83370:4380] pact-broker -- (0.000052s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:06.098901 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `pact_publications` LIMIT 1
2021-09-06 11:41:06.098994 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.099084 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.099272 I [83370:4380] pact-broker -- (0.000059s) UPDATE `pact_publications` SET `consumer_version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `pact_publications`.`consumer_version_id`)) WHERE (`consumer_version_order` IS NULL)
2021-09-06 11:41:06.099362 I [83370:4380] pact-broker -- (0.000047s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.099452 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.099542 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.099630 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.099788 I [83370:4380] pact-broker -- (0.000060s) UPDATE `tags` SET `pacticipant_id` = (SELECT `pacticipant_id` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`pacticipant_id` IS NULL)
2021-09-06 11:41:06.099903 I [83370:4380] pact-broker -- (0.000075s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.099996 I [83370:4380] pact-broker -- (0.000045s) SELECT NULL AS 'nil' FROM `tags` LIMIT 1
2021-09-06 11:41:06.100086 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.100174 I [83370:4380] pact-broker -- (0.000044s) SELECT NULL AS 'nil' FROM `versions` LIMIT 1
2021-09-06 11:41:06.100330 I [83370:4380] pact-broker -- (0.000059s) UPDATE `tags` SET `version_order` = (SELECT `order` FROM `versions` WHERE (`versions`.`id` = `tags`.`version_id`)) WHERE (`version_order` IS NULL)
2021-09-06 11:41:06.108007 I [83370:4380] pact-broker -- (0.000203s) PRAGMA table_info('tags_with_latest_flag')
2021-09-06 11:41:06.113325 I [83370:4380] pact-broker -- (0.000214s) PRAGMA table_info('latest_versions')
2021-09-06 11:41:06.114113 I [83370:4380] pact-broker -- (0.000105s) PRAGMA table_info('labels')
2021-09-06 11:41:06.320394 I [83370:4380] pact-broker -- (0.000182s) PRAGMA table_info('webhook_events')
2021-09-06 11:41:06.340184 I [83370:4380] pact-broker -- (0.000240s) PRAGMA table_info('latest_verifications_for_pact_versions')
2021-09-06 11:41:06.341154 I [83370:4380] pact-broker -- (0.000156s) PRAGMA table_info('latest_verification_id_for_pact_version_and_provider_version')
2021-09-06 11:41:06.346380 I [83370:4380] pact-broker -- (0.000103s) SELECT `webhook_executions`.`id`, `triggered_webhook_id`, `success`, `logs`, `webhook_executions`.`created_at` FROM `webhook_executions` LIMIT 1
2021-09-06 11:41:06.352528 I [83370:4380] pact-broker -- (0.000177s) SELECT * FROM (SELECT `triggered_webhooks`.* FROM `triggered_webhooks` LEFT JOIN `triggered_webhooks` AS 'triggered_webhooks_2' ON ((`triggered_webhooks`.`webhook_uuid` = `triggered_webhooks_2`.`webhook_uuid`) AND (`triggered_webhooks`.`consumer_id` = `triggered_webhooks_2`.`consumer_id`) AND (`triggered_webhooks`.`provider_id` = `triggered_webhooks_2`.`provider_id`) AND (`triggered_webhooks`.`event_name` = `triggered_webhooks_2`.`event_name`) AND (`triggered_webhooks_2`.`id` > `triggered_webhooks`.`id`)) WHERE ((`triggered_webhooks`.`event_name` IS NOT NULL) AND (`triggered_webhooks_2`.`id` IS NULL))) AS 'triggered_webhooks' LIMIT 1
2021-09-06 11:41:06.358504 I [83370:4380] pact-broker -- (0.000128s) PRAGMA table_info('integrations')
2021-09-06 11:41:06.360407 I [83370:4380] pact-broker -- (0.000147s) PRAGMA table_info('head_pact_tags')
2021-09-06 11:41:06.373611 I [83370:4380] pact-broker -- (0.000869s) PRAGMA table_info('all_pact_publications')
2021-09-06 11:41:06.377338 I [83370:4380] pact-broker -- (0.000213s) PRAGMA table_info('latest_pact_publications_by_consumer_versions')
2021-09-06 11:41:06.382221 I [83370:4380] pact-broker -- (0.002463s) PRAGMA table_info('latest_pact_publications')
2021-09-06 11:41:06.383310 I [83370:4380] pact-broker -- (0.000258s) PRAGMA table_info('latest_tagged_pact_publications')
2021-09-06 11:41:06.386788 I [83370:4380] pact-broker -- (0.000341s) PRAGMA table_info('latest_verifications_for_consumer_version_tags')
2021-09-06 11:41:06.388180 I [83370:4380] pact-broker -- (0.000292s) PRAGMA table_info('latest_verifications_for_consumer_and_provider')
2021-09-06 11:41:06.388982 I [83370:4380] pact-broker -- (0.000267s) PRAGMA table_info('matrix')
2021-09-06 11:41:06.391521 I [83370:4380] pact-broker -- (0.000471s) PRAGMA table_info('head_matrix')
2021-09-06 11:41:06.392780 I [83370:4380] pact-broker -- (0.000109s) PRAGMA table_info('latest_pact_publication_ids_for_consumer_versions')
2021-09-06 11:41:06.422398 I [83370:4380] pact-broker -- (0.000101s) UPDATE `triggered_webhooks` SET `status` = 'failure' WHERE (`status` = 'retrying')
2021-09-06 11:41:06.423781 I [83370:4380] pact-broker -- (0.000137s) PRAGMA table_info('config')
2021-09-06 11:41:06.424429 I [83370:4380] pact-broker -- (0.000080s) SELECT * FROM `config`
2021-09-06 11:41:06.424446 I [83370:4380] PactBroker::App -- Seeding example data
2021-09-06 11:41:06.444894 I [83370:4380] pact-broker -- (0.000113s) PRAGMA table_info('verification_sequence_number')
2021-09-06 11:41:06.448354 I [83370:4380] pact-broker -- (0.000125s) PRAGMA table_info('certificates')
2021-09-06 11:41:06.449824 I [83370:4380] pact-broker -- (0.000129s) PRAGMA table_info('environments')
2021-09-06 11:41:06.452100 I [83370:4380] pact-broker -- (0.000123s) PRAGMA table_info('currently_deployed_version_ids')
2021-09-06 11:41:06.452997 I [83370:4380] pact-broker -- (0.000171s) PRAGMA table_info('deployed_versions')
2021-09-06 11:41:06.455380 I [83370:4380] pact-broker -- (0.000122s) PRAGMA table_info('released_versions')
2021-09-06 11:41:06.456693 I [83370:4380] pact-broker -- (0.000106s) SELECT `pacticipants`.* FROM `pacticipants` ORDER BY lower(`pacticipants`.`name`)
2021-09-06 11:41:06.457062 I [83370:4380] pact-broker -- (0.000018s) BEGIN
2021-09-06 11:41:06.457468 I [83370:4380] pact-broker -- (0.000273s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Test', 0, 'test', 'dbe08867-5fba-4c0f-8212-d0fd7ffd2a68', '2021-09-06 07:41:06.456940', '2021-09-06 07:41:06.456940')
2021-09-06 11:41:06.457963 I [83370:4380] pact-broker -- (0.000419s) SELECT * FROM `environments` WHERE `id` = 1
2021-09-06 11:41:06.458819 I [83370:4380] pact-broker -- (0.000825s) COMMIT
2021-09-06 11:41:06.459560 I [83370:4380] pact-broker -- (0.000618s) UPDATE `environments` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 1)
2021-09-06 11:41:06.460188 I [83370:4380] pact-broker -- (0.000531s) UPDATE `environments` SET `updated_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 1)
2021-09-06 11:41:06.460357 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.460693 I [83370:4380] pact-broker -- (0.000237s) INSERT INTO `environments` (`display_name`, `production`, `name`, `uuid`, `created_at`, `updated_at`) VALUES ('Production', 1, 'production', '1a32c407-7525-472b-ab4d-5841f28892b5', '2021-09-06 07:41:06.460284', '2021-09-06 07:41:06.460284')
2021-09-06 11:41:06.460926 I [83370:4380] pact-broker -- (0.000179s) SELECT * FROM `environments` WHERE `id` = 2
2021-09-06 11:41:06.461383 I [83370:4380] pact-broker -- (0.000432s) COMMIT
2021-09-06 11:41:06.461992 I [83370:4380] pact-broker -- (0.000521s) UPDATE `environments` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 2)
2021-09-06 11:41:06.462599 I [83370:4380] pact-broker -- (0.000520s) UPDATE `environments` SET `updated_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 2)
2021-09-06 11:41:06.462897 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.463336 I [83370:4380] pact-broker -- (0.000240s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example App', 'https://github.com/example-organization/Example App', '2021-08-21 07:41:06.462611', '2021-09-06 07:41:06.462798', 'Example App', NULL)
2021-09-06 11:41:06.463543 I [83370:4380] pact-broker -- (0.000144s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.463983 I [83370:4380] pact-broker -- (0.000415s) COMMIT
2021-09-06 11:41:06.464091 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.464524 I [83370:4380] pact-broker -- (0.000236s) INSERT OR IGNORE INTO `pacticipants` (`name`, `repository_url`, `created_at`, `updated_at`, `display_name`, `main_branch`) VALUES ('Example API', 'https://github.com/example-organization/Example API', '2021-08-21 07:41:06.464000', '2021-09-06 07:41:06.464045', 'Example API', NULL)
2021-09-06 11:41:06.464717 I [83370:4380] pact-broker -- (0.000141s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.465220 I [83370:4380] pact-broker -- (0.000479s) COMMIT
2021-09-06 11:41:06.465649 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.466042 I [83370:4380] pact-broker -- (0.000295s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('e15da45d3943bf10793a6d04cfb9f5dabe430fe2', 1, 'main', NULL, '2021-09-06 07:41:06.465581', '2021-09-06 07:41:06.465581')
2021-09-06 11:41:06.466243 I [83370:4380] pact-broker -- (0.000140s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:41:06.466476 I [83370:4380] pact-broker -- (0.000130s) SELECT * FROM `versions` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:41:06.466602 I [83370:4380] pact-broker -- (0.000044s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.466733 I [83370:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.466814 I [83370:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.466905 I [83370:4380] pact-broker -- (0.000033s) UPDATE `versions` SET `order` = 101 WHERE (`id` = 1)
2021-09-06 11:41:06.467076 I [83370:4380] pact-broker -- (0.000145s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:41:06.467605 I [83370:4380] pact-broker -- (0.000502s) COMMIT
2021-09-06 11:41:06.468268 I [83370:4380] pact-broker -- (0.000559s) UPDATE `versions` SET `created_at` = '2021-08-21 07:41:06.465238' WHERE (`id` = 1)
2021-09-06 11:41:06.468879 I [83370:4380] pact-broker -- (0.000520s) UPDATE `versions` SET `updated_at` = '2021-08-21 07:41:06.465238' WHERE (`id` = 1)
2021-09-06 11:41:06.469249 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.469677 I [83370:4380] pact-broker -- (0.000299s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('prod', 1, '2021-09-06 07:41:06.469179', '2021-09-06 07:41:06.469179', 101, 1)
2021-09-06 11:41:06.469918 I [83370:4380] pact-broker -- (0.000136s) SELECT * FROM `tags` WHERE ((`name` = 'prod') AND (`version_id` = 1)) LIMIT 1
2021-09-06 11:41:06.470442 I [83370:4380] pact-broker -- (0.000498s) COMMIT
2021-09-06 11:41:06.471129 I [83370:4380] pact-broker -- (0.000547s) UPDATE `tags` SET `created_at` = '2021-08-21 07:41:06.468889' WHERE ((`name` = 'prod') AND (`version_id` = 1))
2021-09-06 11:41:06.471697 I [83370:4380] pact-broker -- (0.000476s) UPDATE `tags` SET `updated_at` = '2021-08-21 07:41:06.468889' WHERE (`name` = 'prod')
2021-09-06 11:41:06.471813 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.472223 I [83370:4380] pact-broker -- (0.000297s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 1, '2021-09-06 07:41:06.471752', '2021-09-06 07:41:06.471752', 101, 1)
2021-09-06 11:41:06.472455 I [83370:4380] pact-broker -- (0.000137s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 1)) LIMIT 1
2021-09-06 11:41:06.472940 I [83370:4380] pact-broker -- (0.000462s) COMMIT
2021-09-06 11:41:06.473609 I [83370:4380] pact-broker -- (0.000532s) UPDATE `tags` SET `created_at` = '2021-08-21 07:41:06.471707' WHERE ((`name` = 'main') AND (`version_id` = 1))
2021-09-06 11:41:06.474173 I [83370:4380] pact-broker -- (0.000475s) UPDATE `tags` SET `updated_at` = '2021-08-21 07:41:06.471707' WHERE (`name` = 'main')
2021-09-06 11:41:06.474497 I [83370:4380] pact-broker -- (0.000185s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:41:06.474846 I [83370:4380] pact-broker -- (0.000130s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:41:06.475067 I [83370:4380] pact-broker -- (0.000170s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.475273 I [83370:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.475127' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.475640 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.475967 I [83370:4380] pact-broker -- (0.000217s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('4ee6bca8-7ad4-4a7f-b7cc-aff056fa4f12', 1, 1, 2, NULL, '2021-09-06 07:41:06.475563', '2021-09-06 07:41:06.475563', '')
2021-09-06 11:41:06.476194 I [83370:4380] pact-broker -- (0.000170s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 11:41:06.476472 I [83370:4380] pact-broker -- (0.000046s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:41:06.476628 I [83370:4380] pact-broker -- (0.000075s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 1)
2021-09-06 11:41:06.476723 I [83370:4380] pact-broker -- (0.000045s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 11:41:06.477220 I [83370:4380] pact-broker -- (0.000438s) COMMIT
2021-09-06 11:41:06.477531 I [83370:4380] pact-broker -- (0.000094s) SELECT * FROM `currently_deployed_version_ids` WHERE (`currently_deployed_version_ids`.`deployed_version_id` = 1) LIMIT 1
2021-09-06 11:41:06.478268 I [83370:4380] pact-broker -- (0.000691s) DELETE FROM `currently_deployed_version_ids` WHERE `id` = 1
2021-09-06 11:41:06.478970 I [83370:4380] pact-broker -- (0.000568s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.478321' WHERE ((`id` = 1) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.479255 I [83370:4380] pact-broker -- (0.000249s) SELECT * FROM `deployed_versions` WHERE `id` = 1
2021-09-06 11:41:06.479835 I [83370:4380] pact-broker -- (0.000487s) UPDATE `deployed_versions` SET `created_at` = '2021-08-21 07:41:06.474183' WHERE (`id` = 1)
2021-09-06 11:41:06.480446 I [83370:4380] pact-broker -- (0.000519s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-21 07:41:06.474183' WHERE (`id` = 1)
2021-09-06 11:41:06.480929 I [83370:4380] pact-broker -- (0.000074s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.481206 I [83370:4380] pact-broker -- (0.000077s) SELECT * FROM `pact_versions` WHERE ((`sha` = '64cae7e32cafa53621693e516338df283a2160f1') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.481641 I [83370:4380] pact-broker -- (0.000106s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:41:06.481703 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.482024 I [83370:4380] pact-broker -- (0.000211s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '64cae7e32cafa53621693e516338df283a2160f1', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:41:06.481217', 1, 0)
2021-09-06 11:41:06.482183 I [83370:4380] pact-broker -- (0.000104s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 11:41:06.482629 I [83370:4380] pact-broker -- (0.000422s) COMMIT
2021-09-06 11:41:06.483119 I [83370:4380] pact-broker -- (0.000087s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:41:06.483202 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.483536 I [83370:4380] pact-broker -- (0.000243s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (1, 2, 1, 1, 1, 101, '2021-09-06 07:41:06.483142')
2021-09-06 11:41:06.483694 I [83370:4380] pact-broker -- (0.000100s) SELECT * FROM `pact_publications` WHERE `id` = 1
2021-09-06 11:41:06.484222 I [83370:4380] pact-broker -- (0.000502s) COMMIT
2021-09-06 11:41:06.484534 I [83370:4380] pact-broker -- (0.000213s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:41:06.484905 I [83370:4380] pact-broker -- (0.000113s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.484957 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.485270 I [83370:4380] pact-broker -- (0.000230s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (1, 2, 1, 1, 1, '2021-08-21 07:41:06.465238')
2021-09-06 11:41:06.485464 I [83370:4380] pact-broker -- (0.000098s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 11:41:06.485906 I [83370:4380] pact-broker -- (0.000416s) COMMIT
2021-09-06 11:41:06.486091 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 1)) LIMIT 1
2021-09-06 11:41:06.486367 I [83370:4380] pact-broker -- (0.000205s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.486604 I [83370:4380] pact-broker -- (0.000156s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.487073 I [83370:4380] pact-broker -- (0.000289s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 11:41:06.487389 I [83370:4380] pact-broker -- (0.000122s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.487637 I [83370:4380] pact-broker -- (0.000106s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.487954 I [83370:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 11:41:06.488069 I [83370:4380] pact-broker -- (0.000059s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.488801 I [83370:4380] pact-broker -- (0.000646s) UPDATE `pact_publications` SET `created_at` = '2021-08-21 07:41:06.480579' WHERE (`id` = 1)
2021-09-06 11:41:06.489469 I [83370:4380] pact-broker -- (0.000564s) UPDATE `pact_versions` SET `created_at` = '2021-08-21 07:41:06.480579' WHERE (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')
2021-09-06 11:41:06.490150 I [83370:4380] pact-broker -- (0.000559s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-21 07:41:06.480579' WHERE (`consumer_version_id` = 1)
2021-09-06 11:41:06.490402 I [83370:4380] pact-broker -- (0.000150s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:41:06.490603 I [83370:4380] pact-broker -- (0.000162s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.490815 I [83370:4380] pact-broker -- (0.000173s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.491003 I [83370:4380] pact-broker -- (0.000152s) SELECT * FROM `versions` WHERE `id` = 1
2021-09-06 11:41:06.491308 I [83370:4380] pact-broker -- (0.000260s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 1) ORDER BY `created_at`
2021-09-06 11:41:06.491583 I [83370:4380] pact-broker -- (0.000116s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 1) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.491772 I [83370:4380] pact-broker -- (0.000080s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 1) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.491966 I [83370:4380] pact-broker -- (0.000148s) SELECT * FROM `pact_versions` WHERE `id` = 1
2021-09-06 11:41:06.492267 I [83370:4380] pact-broker -- (0.000135s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 1))) LIMIT 1
2021-09-06 11:41:06.492743 I [83370:4380] pact-broker -- (0.000139s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:41:06.492924 I [83370:4380] pact-broker -- (0.000074s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.492950 I [83370:4380] PactBroker::Versions::Repository -- Upserting version 1315e0b1924cb6f42751f977789be3559373033a for pacticipant_id=2
2021-09-06 11:41:06.493199 I [83370:4380] pact-broker -- (0.000075s) SELECT * FROM `versions` WHERE ((`number` = '1315e0b1924cb6f42751f977789be3559373033a') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.493283 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.493666 I [83370:4380] pact-broker -- (0.000280s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('1315e0b1924cb6f42751f977789be3559373033a', 2, '2021-09-06 07:41:06.492955', '2021-09-06 07:41:06.493224')
2021-09-06 11:41:06.493862 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 11:41:06.494081 I [83370:4380] pact-broker -- (0.000151s) SELECT * FROM `versions` WHERE (`id` = 2) LIMIT 1
2021-09-06 11:41:06.494164 I [83370:4380] pact-broker -- (0.000042s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.494288 I [83370:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.494342 I [83370:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.494426 I [83370:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 102 WHERE (`id` = 2)
2021-09-06 11:41:06.494576 I [83370:4380] pact-broker -- (0.000126s) SELECT * FROM `versions` WHERE `id` = 2
2021-09-06 11:41:06.495148 I [83370:4380] pact-broker -- (0.000545s) COMMIT
2021-09-06 11:41:06.495431 I [83370:4380] pact-broker -- (0.000098s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 2) ORDER BY `created_at`
2021-09-06 11:41:06.495544 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.495959 I [83370:4380] pact-broker -- (0.000293s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-08-22 07:41:06.492296', 1, 2, 2, 1, '2021-09-06 07:41:06.495461', '{"some":"results"}', '[]')
2021-09-06 11:41:06.496180 I [83370:4380] pact-broker -- (0.000162s) SELECT * FROM `verifications` WHERE `id` = 1
2021-09-06 11:41:06.496742 I [83370:4380] pact-broker -- (0.000534s) COMMIT
2021-09-06 11:41:06.497135 I [83370:4380] pact-broker -- (0.000088s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:41:06.497188 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.497510 I [83370:4380] pact-broker -- (0.000234s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 2, 2, 1, 1, '2021-09-06 07:41:06.495461')
2021-09-06 11:41:06.497707 I [83370:4380] pact-broker -- (0.000101s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:41:06.498249 I [83370:4380] pact-broker -- (0.000515s) COMMIT
2021-09-06 11:41:06.498485 I [83370:4380] pact-broker -- (0.000182s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2)) LIMIT 1
2021-09-06 11:41:06.498758 I [83370:4380] pact-broker -- (0.000169s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '1315e0b1924cb6f42751f977789be3559373033a')) LIMIT 1
2021-09-06 11:41:06.498827 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.499157 I [83370:4380] pact-broker -- (0.000196s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.498838', `branch` = 'main' WHERE (`id` = 2)
2021-09-06 11:41:06.499774 I [83370:4380] pact-broker -- (0.000588s) COMMIT
2021-09-06 11:41:06.500615 I [83370:4380] pact-broker -- (0.000740s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 1)
2021-09-06 11:41:06.501447 I [83370:4380] pact-broker -- (0.000699s) UPDATE `versions` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 2)
2021-09-06 11:41:06.502185 I [83370:4380] pact-broker -- (0.000642s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 2)
2021-09-06 11:41:06.502466 I [83370:4380] pact-broker -- (0.000176s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:41:06.503239 I [83370:4380] pact-broker -- (0.000670s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 2))
2021-09-06 11:41:06.503625 I [83370:4380] pact-broker -- (0.000227s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:41:06.503915 I [83370:4380] pact-broker -- (0.000123s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:41:06.504126 I [83370:4380] pact-broker -- (0.000165s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.504321 I [83370:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.504184' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.504522 I [83370:4380] pact-broker -- (0.000054s) BEGIN
2021-09-06 11:41:06.504846 I [83370:4380] pact-broker -- (0.000218s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('db555a98-3818-4b9a-b044-60c8ead8bb4c', 2, 2, 2, NULL, '2021-09-06 07:41:06.504410', '2021-09-06 07:41:06.504410', '')
2021-09-06 11:41:06.505045 I [83370:4380] pact-broker -- (0.000139s) SELECT * FROM `deployed_versions` WHERE `id` = 2
2021-09-06 11:41:06.505236 I [83370:4380] pact-broker -- (0.000045s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:41:06.505389 I [83370:4380] pact-broker -- (0.000074s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 2, 2, '', 2)
2021-09-06 11:41:06.505489 I [83370:4380] pact-broker -- (0.000047s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 2
2021-09-06 11:41:06.506002 I [83370:4380] pact-broker -- (0.000485s) COMMIT
2021-09-06 11:41:06.506764 I [83370:4380] pact-broker -- (0.000629s) UPDATE `deployed_versions` SET `created_at` = '2021-08-22 07:41:06.503261' WHERE (`id` = 2)
2021-09-06 11:41:06.507406 I [83370:4380] pact-broker -- (0.000549s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-22 07:41:06.503261' WHERE (`id` = 2)
2021-09-06 11:41:06.507735 I [83370:4380] pact-broker -- (0.000191s) SELECT * FROM `environments` WHERE (`name` = 'production') LIMIT 1
2021-09-06 11:41:06.508011 I [83370:4380] pact-broker -- (0.000119s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:41:06.508228 I [83370:4380] pact-broker -- (0.000059s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.508092' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.508381 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.508698 I [83370:4380] pact-broker -- (0.000212s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('a5c40b9f-7bb9-44b7-95f8-66369aa4dd67', 1, 1, 2, NULL, '2021-09-06 07:41:06.508311', '2021-09-06 07:41:06.508311', '')
2021-09-06 11:41:06.508893 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `deployed_versions` WHERE `id` = 3
2021-09-06 11:41:06.509091 I [83370:4380] pact-broker -- (0.000048s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 2) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:41:06.509240 I [83370:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 2, 1, '', 3)
2021-09-06 11:41:06.509334 I [83370:4380] pact-broker -- (0.000045s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 3
2021-09-06 11:41:06.509805 I [83370:4380] pact-broker -- (0.000447s) COMMIT
2021-09-06 11:41:06.510420 I [83370:4380] pact-broker -- (0.000523s) UPDATE `deployed_versions` SET `created_at` = '2021-08-23 07:41:06.507416' WHERE (`id` = 3)
2021-09-06 11:41:06.511023 I [83370:4380] pact-broker -- (0.000516s) UPDATE `deployed_versions` SET `updated_at` = '2021-08-23 07:41:06.507416' WHERE (`id` = 3)
2021-09-06 11:41:06.511373 I [83370:4380] pact-broker -- (0.000179s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 11:41:06.511552 I [83370:4380] pact-broker -- (0.000077s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.511568 I [83370:4380] PactBroker::Versions::Repository -- Upserting version 480e5aeb30467856ca995d0024d2c1800b0719e5 for pacticipant_id=2
2021-09-06 11:41:06.511782 I [83370:4380] pact-broker -- (0.000072s) SELECT * FROM `versions` WHERE ((`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.511853 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.512215 I [83370:4380] pact-broker -- (0.000271s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('480e5aeb30467856ca995d0024d2c1800b0719e5', 2, '2021-09-06 07:41:06.511572', '2021-09-06 07:41:06.511802')
2021-09-06 11:41:06.512431 I [83370:4380] pact-broker -- (0.000160s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 11:41:06.512624 I [83370:4380] pact-broker -- (0.000124s) SELECT * FROM `versions` WHERE (`id` = 3) LIMIT 1
2021-09-06 11:41:06.512704 I [83370:4380] pact-broker -- (0.000041s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.512822 I [83370:4380] pact-broker -- (0.000052s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.512910 I [83370:4380] pact-broker -- (0.000066s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.512998 I [83370:4380] pact-broker -- (0.000033s) UPDATE `versions` SET `order` = 103 WHERE (`id` = 3)
2021-09-06 11:41:06.513148 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE `id` = 3
2021-09-06 11:41:06.513627 I [83370:4380] pact-broker -- (0.000456s) COMMIT
2021-09-06 11:41:06.513810 I [83370:4380] pact-broker -- (0.000089s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 3) ORDER BY `created_at`
2021-09-06 11:41:06.513908 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.514291 I [83370:4380] pact-broker -- (0.000279s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (0, 2, 0, '2021-08-23 07:41:06.511033', 1, 3, 2, 1, '2021-09-06 07:41:06.513838', '{"some":"results"}', '[]')
2021-09-06 11:41:06.514539 I [83370:4380] pact-broker -- (0.000189s) SELECT * FROM `verifications` WHERE `id` = 2
2021-09-06 11:41:06.515038 I [83370:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 11:41:06.515280 I [83370:4380] pact-broker -- (0.000081s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:41:06.515328 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.515633 I [83370:4380] pact-broker -- (0.000222s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (1, 3, 2, 2, 1, '2021-09-06 07:41:06.513838')
2021-09-06 11:41:06.515822 I [83370:4380] pact-broker -- (0.000098s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:41:06.516238 I [83370:4380] pact-broker -- (0.000392s) COMMIT
2021-09-06 11:41:06.516441 I [83370:4380] pact-broker -- (0.000162s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3)) LIMIT 1
2021-09-06 11:41:06.516699 I [83370:4380] pact-broker -- (0.000163s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '480e5aeb30467856ca995d0024d2c1800b0719e5')) LIMIT 1
2021-09-06 11:41:06.516762 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.517063 I [83370:4380] pact-broker -- (0.000187s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.516771', `branch` = 'main' WHERE (`id` = 3)
2021-09-06 11:41:06.517562 I [83370:4380] pact-broker -- (0.000474s) COMMIT
2021-09-06 11:41:06.518259 I [83370:4380] pact-broker -- (0.000574s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 2)
2021-09-06 11:41:06.518868 I [83370:4380] pact-broker -- (0.000516s) UPDATE `versions` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 3)
2021-09-06 11:41:06.519550 I [83370:4380] pact-broker -- (0.000595s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 3)
2021-09-06 11:41:06.519828 I [83370:4380] pact-broker -- (0.000160s) SELECT * FROM `pact_publications` WHERE (`id` = 1) LIMIT 1
2021-09-06 11:41:06.520539 I [83370:4380] pact-broker -- (0.000618s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE ((`pact_version_id` = 1) AND (`provider_version_id` = 3))
2021-09-06 11:41:06.520695 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.521139 I [83370:4380] pact-broker -- (0.000294s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 3, '2021-09-06 07:41:06.520627', '2021-09-06 07:41:06.520627', 103, 2)
2021-09-06 11:41:06.521372 I [83370:4380] pact-broker -- (0.000135s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 3)) LIMIT 1
2021-09-06 11:41:06.521860 I [83370:4380] pact-broker -- (0.000463s) COMMIT
2021-09-06 11:41:06.522539 I [83370:4380] pact-broker -- (0.000572s) UPDATE `tags` SET `created_at` = '2021-08-23 07:41:06.520560' WHERE ((`name` = 'main') AND (`version_id` = 3))
2021-09-06 11:41:06.523119 I [83370:4380] pact-broker -- (0.000484s) UPDATE `tags` SET `updated_at` = '2021-08-23 07:41:06.520560' WHERE (`name` = 'main')
2021-09-06 11:41:06.523269 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.523673 I [83370:4380] pact-broker -- (0.000284s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('725c6ccb7cf7efc51b4394f9828585eea9c379d9', 1, 'feat/new-thing', NULL, '2021-09-06 07:41:06.523203', '2021-09-06 07:41:06.523203')
2021-09-06 11:41:06.523870 I [83370:4380] pact-broker -- (0.000141s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:41:06.524062 I [83370:4380] pact-broker -- (0.000123s) SELECT * FROM `versions` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:41:06.524140 I [83370:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.524276 I [83370:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.524330 I [83370:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.524414 I [83370:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 104 WHERE (`id` = 4)
2021-09-06 11:41:06.524562 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:41:06.525097 I [83370:4380] pact-broker -- (0.000509s) COMMIT
2021-09-06 11:41:06.525684 I [83370:4380] pact-broker -- (0.000492s) UPDATE `versions` SET `created_at` = '2021-08-30 07:41:06.523129' WHERE (`id` = 4)
2021-09-06 11:41:06.526323 I [83370:4380] pact-broker -- (0.000548s) UPDATE `versions` SET `updated_at` = '2021-08-30 07:41:06.523129' WHERE (`id` = 4)
2021-09-06 11:41:06.526463 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.526906 I [83370:4380] pact-broker -- (0.000295s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 4, '2021-09-06 07:41:06.526394', '2021-09-06 07:41:06.526394', 104, 1)
2021-09-06 11:41:06.527140 I [83370:4380] pact-broker -- (0.000136s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4)) LIMIT 1
2021-09-06 11:41:06.527576 I [83370:4380] pact-broker -- (0.000411s) COMMIT
2021-09-06 11:41:06.528200 I [83370:4380] pact-broker -- (0.000521s) UPDATE `tags` SET `created_at` = '2021-08-30 07:41:06.526333' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 4))
2021-09-06 11:41:06.528796 I [83370:4380] pact-broker -- (0.000507s) UPDATE `tags` SET `updated_at` = '2021-08-30 07:41:06.526333' WHERE (`name` = 'feat-new-thing')
2021-09-06 11:41:06.529134 I [83370:4380] pact-broker -- (0.000074s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.529371 I [83370:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.529688 I [83370:4380] pact-broker -- (0.000116s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')) LIMIT 1
2021-09-06 11:41:06.529746 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.530052 I [83370:4380] pact-broker -- (0.000209s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:41:06.529379', 1, 0)
2021-09-06 11:41:06.530214 I [83370:4380] pact-broker -- (0.000105s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:41:06.530673 I [83370:4380] pact-broker -- (0.000435s) COMMIT
2021-09-06 11:41:06.530941 I [83370:4380] pact-broker -- (0.000085s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:41:06.531018 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.531352 I [83370:4380] pact-broker -- (0.000243s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (4, 2, 1, 2, 1, 104, '2021-09-06 07:41:06.530961')
2021-09-06 11:41:06.531561 I [83370:4380] pact-broker -- (0.000153s) SELECT * FROM `pact_publications` WHERE `id` = 2
2021-09-06 11:41:06.532004 I [83370:4380] pact-broker -- (0.000419s) COMMIT
2021-09-06 11:41:06.532231 I [83370:4380] pact-broker -- (0.000175s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:41:06.532455 I [83370:4380] pact-broker -- (0.000070s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 4) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.532502 I [83370:4380] pact-broker -- (0.000011s) BEGIN
2021-09-06 11:41:06.532805 I [83370:4380] pact-broker -- (0.000221s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (4, 2, 2, 1, 2, '2021-08-30 07:41:06.523129')
2021-09-06 11:41:06.532995 I [83370:4380] pact-broker -- (0.000097s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 11:41:06.533508 I [83370:4380] pact-broker -- (0.000465s) COMMIT
2021-09-06 11:41:06.533706 I [83370:4380] pact-broker -- (0.000150s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 4)) LIMIT 1
2021-09-06 11:41:06.533921 I [83370:4380] pact-broker -- (0.000170s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.534134 I [83370:4380] pact-broker -- (0.000172s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.534354 I [83370:4380] pact-broker -- (0.000166s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 11:41:06.534651 I [83370:4380] pact-broker -- (0.000127s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.534887 I [83370:4380] pact-broker -- (0.000121s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.535198 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:41:06.535310 I [83370:4380] pact-broker -- (0.000059s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.535938 I [83370:4380] pact-broker -- (0.000541s) UPDATE `pact_publications` SET `created_at` = '2021-08-30 07:41:06.528910' WHERE (`id` = 2)
2021-09-06 11:41:06.536557 I [83370:4380] pact-broker -- (0.000524s) UPDATE `pact_versions` SET `created_at` = '2021-08-30 07:41:06.528910' WHERE (`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')
2021-09-06 11:41:06.537179 I [83370:4380] pact-broker -- (0.000530s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-30 07:41:06.528910' WHERE (`consumer_version_id` = 4)
2021-09-06 11:41:06.537421 I [83370:4380] pact-broker -- (0.000175s) SELECT * FROM `pact_publications` WHERE (`id` = 2) LIMIT 1
2021-09-06 11:41:06.537637 I [83370:4380] pact-broker -- (0.000177s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.537824 I [83370:4380] pact-broker -- (0.000150s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.538042 I [83370:4380] pact-broker -- (0.000181s) SELECT * FROM `versions` WHERE `id` = 4
2021-09-06 11:41:06.538242 I [83370:4380] pact-broker -- (0.000154s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 4) ORDER BY `created_at`
2021-09-06 11:41:06.538508 I [83370:4380] pact-broker -- (0.000121s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 4) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.538733 I [83370:4380] pact-broker -- (0.000116s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 4) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.538901 I [83370:4380] pact-broker -- (0.000127s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:41:06.539192 I [83370:4380] pact-broker -- (0.000131s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:41:06.539354 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.539747 I [83370:4380] pact-broker -- (0.000295s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('6c992f831da299364cf31be6008ee4752189f6d4', 1, 'feat/new-thing', NULL, '2021-09-06 07:41:06.539289', '2021-09-06 07:41:06.539289')
2021-09-06 11:41:06.539980 I [83370:4380] pact-broker -- (0.000175s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:41:06.540175 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 5) LIMIT 1
2021-09-06 11:41:06.540256 I [83370:4380] pact-broker -- (0.000041s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.540373 I [83370:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.540429 I [83370:4380] pact-broker -- (0.000033s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.540515 I [83370:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 105 WHERE (`id` = 5)
2021-09-06 11:41:06.540689 I [83370:4380] pact-broker -- (0.000149s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:41:06.541183 I [83370:4380] pact-broker -- (0.000469s) COMMIT
2021-09-06 11:41:06.541897 I [83370:4380] pact-broker -- (0.000624s) UPDATE `versions` SET `created_at` = '2021-08-31 07:41:06.539219' WHERE (`id` = 5)
2021-09-06 11:41:06.542660 I [83370:4380] pact-broker -- (0.000667s) UPDATE `versions` SET `updated_at` = '2021-08-31 07:41:06.539219' WHERE (`id` = 5)
2021-09-06 11:41:06.542809 I [83370:4380] pact-broker -- (0.000016s) BEGIN
2021-09-06 11:41:06.543261 I [83370:4380] pact-broker -- (0.000326s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('feat-new-thing', 5, '2021-09-06 07:41:06.542737', '2021-09-06 07:41:06.542737', 105, 1)
2021-09-06 11:41:06.543525 I [83370:4380] pact-broker -- (0.000142s) SELECT * FROM `tags` WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5)) LIMIT 1
2021-09-06 11:41:06.544079 I [83370:4380] pact-broker -- (0.000525s) COMMIT
2021-09-06 11:41:06.544823 I [83370:4380] pact-broker -- (0.000633s) UPDATE `tags` SET `created_at` = '2021-08-31 07:41:06.542672' WHERE ((`name` = 'feat-new-thing') AND (`version_id` = 5))
2021-09-06 11:41:06.545555 I [83370:4380] pact-broker -- (0.000637s) UPDATE `tags` SET `updated_at` = '2021-08-31 07:41:06.542672' WHERE (`name` = 'feat-new-thing')
2021-09-06 11:41:06.545960 I [83370:4380] pact-broker -- (0.000080s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.546289 I [83370:4380] pact-broker -- (0.000142s) SELECT * FROM `pact_versions` WHERE ((`sha` = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.546567 I [83370:4380] pact-broker -- (0.000076s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:41:06.546646 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.546983 I [83370:4380] pact-broker -- (0.000249s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (5, 2, 1, 2, 1, 105, '2021-09-06 07:41:06.546587')
2021-09-06 11:41:06.547139 I [83370:4380] pact-broker -- (0.000096s) SELECT * FROM `pact_publications` WHERE `id` = 3
2021-09-06 11:41:06.547769 I [83370:4380] pact-broker -- (0.000605s) COMMIT
2021-09-06 11:41:06.548005 I [83370:4380] pact-broker -- (0.000185s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:41:06.548283 I [83370:4380] pact-broker -- (0.000076s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 5) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.548333 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.548645 I [83370:4380] pact-broker -- (0.000228s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (5, 2, 3, 1, 2, '2021-08-31 07:41:06.539219')
2021-09-06 11:41:06.548840 I [83370:4380] pact-broker -- (0.000101s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 11:41:06.549393 I [83370:4380] pact-broker -- (0.000526s) COMMIT
2021-09-06 11:41:06.549585 I [83370:4380] pact-broker -- (0.000147s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 5)) LIMIT 1
2021-09-06 11:41:06.549827 I [83370:4380] pact-broker -- (0.000200s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.550025 I [83370:4380] pact-broker -- (0.000158s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.550241 I [83370:4380] pact-broker -- (0.000163s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 11:41:06.550552 I [83370:4380] pact-broker -- (0.000147s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.550750 I [83370:4380] pact-broker -- (0.000083s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.551054 I [83370:4380] pact-broker -- (0.000137s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:41:06.551162 I [83370:4380] pact-broker -- (0.000060s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.551954 I [83370:4380] pact-broker -- (0.000706s) UPDATE `pact_publications` SET `created_at` = '2021-08-30 07:41:06.545736' WHERE (`id` = 3)
2021-09-06 11:41:06.552756 I [83370:4380] pact-broker -- (0.000669s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-08-30 07:41:06.545736' WHERE (`consumer_version_id` = 5)
2021-09-06 11:41:06.552973 I [83370:4380] pact-broker -- (0.000150s) SELECT * FROM `pact_publications` WHERE (`id` = 3) LIMIT 1
2021-09-06 11:41:06.553175 I [83370:4380] pact-broker -- (0.000164s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.553385 I [83370:4380] pact-broker -- (0.000170s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.553577 I [83370:4380] pact-broker -- (0.000154s) SELECT * FROM `versions` WHERE `id` = 5
2021-09-06 11:41:06.553781 I [83370:4380] pact-broker -- (0.000160s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 5) ORDER BY `created_at`
2021-09-06 11:41:06.554069 I [83370:4380] pact-broker -- (0.000126s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 5) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.554261 I [83370:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 5) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.554430 I [83370:4380] pact-broker -- (0.000128s) SELECT * FROM `pact_versions` WHERE `id` = 2
2021-09-06 11:41:06.554737 I [83370:4380] pact-broker -- (0.000134s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 2))) LIMIT 1
2021-09-06 11:41:06.554898 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.555281 I [83370:4380] pact-broker -- (0.000285s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('7bd4d9173522826dc3e8704fd62dde0424f4c827', 1, 'main', NULL, '2021-09-06 07:41:06.554833', '2021-09-06 07:41:06.554833')
2021-09-06 11:41:06.555522 I [83370:4380] pact-broker -- (0.000183s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:41:06.555714 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 6) LIMIT 1
2021-09-06 11:41:06.555793 I [83370:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.555913 I [83370:4380] pact-broker -- (0.000053s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.555983 I [83370:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.556069 I [83370:4380] pact-broker -- (0.000030s) UPDATE `versions` SET `order` = 106 WHERE (`id` = 6)
2021-09-06 11:41:06.556237 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:41:06.556928 I [83370:4380] pact-broker -- (0.000664s) COMMIT
2021-09-06 11:41:06.557687 I [83370:4380] pact-broker -- (0.000664s) UPDATE `versions` SET `created_at` = '2021-09-05 07:41:06.554764' WHERE (`id` = 6)
2021-09-06 11:41:06.558533 I [83370:4380] pact-broker -- (0.000749s) UPDATE `versions` SET `updated_at` = '2021-09-05 07:41:06.554764' WHERE (`id` = 6)
2021-09-06 11:41:06.558687 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.559120 I [83370:4380] pact-broker -- (0.000305s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 6, '2021-09-06 07:41:06.558615', '2021-09-06 07:41:06.558615', 106, 1)
2021-09-06 11:41:06.559379 I [83370:4380] pact-broker -- (0.000139s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 6)) LIMIT 1
2021-09-06 11:41:06.560008 I [83370:4380] pact-broker -- (0.000602s) COMMIT
2021-09-06 11:41:06.560733 I [83370:4380] pact-broker -- (0.000612s) UPDATE `tags` SET `created_at` = '2021-09-05 07:41:06.558545' WHERE ((`name` = 'main') AND (`version_id` = 6))
2021-09-06 11:41:06.561454 I [83370:4380] pact-broker -- (0.000625s) UPDATE `tags` SET `updated_at` = '2021-09-05 07:41:06.558545' WHERE (`name` = 'main')
2021-09-06 11:41:06.561816 I [83370:4380] pact-broker -- (0.000074s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.562071 I [83370:4380] pact-broker -- (0.000079s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.562504 I [83370:4380] pact-broker -- (0.000099s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 11:41:06.562568 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.562898 I [83370:4380] pact-broker -- (0.000232s) INSERT INTO `pact_versions` (`consumer_id`, `provider_id`, `sha`, `content`, `created_at`, `interactions_count`, `messages_count`) VALUES (1, 2, 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 07:41:06.562080', 3, 0)
2021-09-06 11:41:06.563103 I [83370:4380] pact-broker -- (0.000143s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:41:06.563661 I [83370:4380] pact-broker -- (0.000530s) COMMIT
2021-09-06 11:41:06.563951 I [83370:4380] pact-broker -- (0.000097s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:41:06.564033 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.564388 I [83370:4380] pact-broker -- (0.000261s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (6, 2, 1, 3, 1, 106, '2021-09-06 07:41:06.563972')
2021-09-06 11:41:06.564552 I [83370:4380] pact-broker -- (0.000102s) SELECT * FROM `pact_publications` WHERE `id` = 4
2021-09-06 11:41:06.565115 I [83370:4380] pact-broker -- (0.000538s) COMMIT
2021-09-06 11:41:06.565365 I [83370:4380] pact-broker -- (0.000198s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:41:06.565592 I [83370:4380] pact-broker -- (0.000073s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 6) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.565641 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.565956 I [83370:4380] pact-broker -- (0.000231s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (6, 2, 4, 1, 3, '2021-09-05 07:41:06.554764')
2021-09-06 11:41:06.566176 I [83370:4380] pact-broker -- (0.000123s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 11:41:06.566606 I [83370:4380] pact-broker -- (0.000405s) COMMIT
2021-09-06 11:41:06.566782 I [83370:4380] pact-broker -- (0.000134s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 6)) LIMIT 1
2021-09-06 11:41:06.566989 I [83370:4380] pact-broker -- (0.000164s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.567195 I [83370:4380] pact-broker -- (0.000167s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.567413 I [83370:4380] pact-broker -- (0.000166s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 11:41:06.567703 I [83370:4380] pact-broker -- (0.000122s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.567897 I [83370:4380] pact-broker -- (0.000081s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.568218 I [83370:4380] pact-broker -- (0.000139s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:41:06.568328 I [83370:4380] pact-broker -- (0.000059s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.569006 I [83370:4380] pact-broker -- (0.000593s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 07:41:06.561543' WHERE (`id` = 4)
2021-09-06 11:41:06.569787 I [83370:4380] pact-broker -- (0.000690s) UPDATE `pact_versions` SET `created_at` = '2021-09-05 07:41:06.561543' WHERE (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')
2021-09-06 11:41:06.570497 I [83370:4380] pact-broker -- (0.000624s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 07:41:06.561543' WHERE (`consumer_version_id` = 6)
2021-09-06 11:41:06.570702 I [83370:4380] pact-broker -- (0.000144s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:41:06.570893 I [83370:4380] pact-broker -- (0.000155s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.571101 I [83370:4380] pact-broker -- (0.000172s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.571286 I [83370:4380] pact-broker -- (0.000148s) SELECT * FROM `versions` WHERE `id` = 6
2021-09-06 11:41:06.571500 I [83370:4380] pact-broker -- (0.000171s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 6) ORDER BY `created_at`
2021-09-06 11:41:06.571761 I [83370:4380] pact-broker -- (0.000116s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 6) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.571943 I [83370:4380] pact-broker -- (0.000077s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 6) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.572104 I [83370:4380] pact-broker -- (0.000121s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:41:06.572408 I [83370:4380] pact-broker -- (0.000132s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:41:06.572721 I [83370:4380] pact-broker -- (0.000132s) SELECT * FROM `pact_versions` WHERE ((`consumer_id` = 1) AND (`provider_id` = 2) AND (`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 11:41:06.572944 I [83370:4380] pact-broker -- (0.000104s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.572961 I [83370:4380] PactBroker::Versions::Repository -- Upserting version 4fdf20082263d4c5038355a3b734be1c0054d1e1 for pacticipant_id=2
2021-09-06 11:41:06.573178 I [83370:4380] pact-broker -- (0.000073s) SELECT * FROM `versions` WHERE ((`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND (`pacticipant_id` = 2)) LIMIT 1
2021-09-06 11:41:06.573256 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.573632 I [83370:4380] pact-broker -- (0.000279s) INSERT INTO `versions` (`number`, `pacticipant_id`, `created_at`, `updated_at`) VALUES ('4fdf20082263d4c5038355a3b734be1c0054d1e1', 2, '2021-09-06 07:41:06.572965', '2021-09-06 07:41:06.573201')
2021-09-06 11:41:06.573841 I [83370:4380] pact-broker -- (0.000151s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 11:41:06.574033 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 7) LIMIT 1
2021-09-06 11:41:06.574113 I [83370:4380] pact-broker -- (0.000040s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.574233 I [83370:4380] pact-broker -- (0.000054s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.574289 I [83370:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.574374 I [83370:4380] pact-broker -- (0.000029s) UPDATE `versions` SET `order` = 107 WHERE (`id` = 7)
2021-09-06 11:41:06.574539 I [83370:4380] pact-broker -- (0.000141s) SELECT * FROM `versions` WHERE `id` = 7
2021-09-06 11:41:06.575090 I [83370:4380] pact-broker -- (0.000524s) COMMIT
2021-09-06 11:41:06.575283 I [83370:4380] pact-broker -- (0.000096s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 7) ORDER BY `created_at`
2021-09-06 11:41:06.575388 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.575791 I [83370:4380] pact-broker -- (0.000293s) INSERT INTO `verifications` (`success`, `number`, `wip`, `execution_date`, `pact_version_id`, `provider_version_id`, `provider_id`, `consumer_id`, `created_at`, `test_results`, `tag_names`) VALUES (1, 1, 0, '2021-09-05 07:41:06.572435', 3, 7, 2, 1, '2021-09-06 07:41:06.575312', '{"some":"results"}', '[]')
2021-09-06 11:41:06.576037 I [83370:4380] pact-broker -- (0.000186s) SELECT * FROM `verifications` WHERE `id` = 3
2021-09-06 11:41:06.576503 I [83370:4380] pact-broker -- (0.000438s) COMMIT
2021-09-06 11:41:06.576761 I [83370:4380] pact-broker -- (0.000085s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:41:06.576813 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.577130 I [83370:4380] pact-broker -- (0.000230s) INSERT INTO `latest_verification_id_for_pact_version_and_provider_version` (`pact_version_id`, `provider_version_id`, `provider_id`, `verification_id`, `consumer_id`, `created_at`) VALUES (3, 7, 2, 3, 1, '2021-09-06 07:41:06.575312')
2021-09-06 11:41:06.577325 I [83370:4380] pact-broker -- (0.000102s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:41:06.577780 I [83370:4380] pact-broker -- (0.000430s) COMMIT
2021-09-06 11:41:06.577966 I [83370:4380] pact-broker -- (0.000140s) SELECT * FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7)) LIMIT 1
2021-09-06 11:41:06.578233 I [83370:4380] pact-broker -- (0.000167s) SELECT * FROM `versions` WHERE ((`pacticipant_id` = 2) AND (`number` = '4fdf20082263d4c5038355a3b734be1c0054d1e1')) LIMIT 1
2021-09-06 11:41:06.578300 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.578612 I [83370:4380] pact-broker -- (0.000194s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.578310', `branch` = 'main' WHERE (`id` = 7)
2021-09-06 11:41:06.579041 I [83370:4380] pact-broker -- (0.000404s) COMMIT
2021-09-06 11:41:06.579694 I [83370:4380] pact-broker -- (0.000536s) UPDATE `verifications` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 3)
2021-09-06 11:41:06.580379 I [83370:4380] pact-broker -- (0.000591s) UPDATE `versions` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 7)
2021-09-06 11:41:06.581044 I [83370:4380] pact-broker -- (0.000575s) UPDATE `versions` SET `updated_at` = '2021-09-06 07:41:06.456713' WHERE (`id` = 7)
2021-09-06 11:41:06.581259 I [83370:4380] pact-broker -- (0.000154s) SELECT * FROM `pact_publications` WHERE (`id` = 4) LIMIT 1
2021-09-06 11:41:06.581885 I [83370:4380] pact-broker -- (0.000532s) UPDATE `latest_verification_id_for_pact_version_and_provider_version` SET `created_at` = '2021-09-06 07:41:06.456713' WHERE ((`pact_version_id` = 3) AND (`provider_version_id` = 7))
2021-09-06 11:41:06.582290 I [83370:4380] pact-broker -- (0.000247s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 11:41:06.582604 I [83370:4380] pact-broker -- (0.000146s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 7) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:41:06.582849 I [83370:4380] pact-broker -- (0.000201s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.583054 I [83370:4380] pact-broker -- (0.000068s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.582907' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.583224 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.583556 I [83370:4380] pact-broker -- (0.000227s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('e44f6804-f6c5-4a64-8ff1-edcdc05f00fc', 7, 2, 1, NULL, '2021-09-06 07:41:06.583148', '2021-09-06 07:41:06.583148', '')
2021-09-06 11:41:06.583773 I [83370:4380] pact-broker -- (0.000155s) SELECT * FROM `deployed_versions` WHERE `id` = 4
2021-09-06 11:41:06.583958 I [83370:4380] pact-broker -- (0.000045s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 2) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:41:06.584115 I [83370:4380] pact-broker -- (0.000079s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (2, 1, 7, '', 4)
2021-09-06 11:41:06.584213 I [83370:4380] pact-broker -- (0.000049s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 4
2021-09-06 11:41:06.584771 I [83370:4380] pact-broker -- (0.000530s) COMMIT
2021-09-06 11:41:06.585473 I [83370:4380] pact-broker -- (0.000604s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 07:41:06.581908' WHERE (`id` = 4)
2021-09-06 11:41:06.586050 I [83370:4380] pact-broker -- (0.000483s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 07:41:06.581908' WHERE (`id` = 4)
2021-09-06 11:41:06.586210 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.586635 I [83370:4380] pact-broker -- (0.000300s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 7, '2021-09-06 07:41:06.586125', '2021-09-06 07:41:06.586125', 107, 2)
2021-09-06 11:41:06.586871 I [83370:4380] pact-broker -- (0.000138s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 7)) LIMIT 1
2021-09-06 11:41:06.587362 I [83370:4380] pact-broker -- (0.000467s) COMMIT
2021-09-06 11:41:06.588047 I [83370:4380] pact-broker -- (0.000581s) UPDATE `tags` SET `created_at` = '2021-09-05 07:41:06.586060' WHERE ((`name` = 'main') AND (`version_id` = 7))
2021-09-06 11:41:06.588670 I [83370:4380] pact-broker -- (0.000533s) UPDATE `tags` SET `updated_at` = '2021-09-05 07:41:06.586060' WHERE (`name` = 'main')
2021-09-06 11:41:06.588892 I [83370:4380] pact-broker -- (0.000014s) BEGIN
2021-09-06 11:41:06.589270 I [83370:4380] pact-broker -- (0.000283s) INSERT INTO `versions` (`number`, `pacticipant_id`, `branch`, `build_url`, `created_at`, `updated_at`) VALUES ('5556b8149bf8bac76bc30f50a8a2dd4c22c85f30', 1, 'main', NULL, '2021-09-06 07:41:06.588803', '2021-09-06 07:41:06.588803')
2021-09-06 11:41:06.589479 I [83370:4380] pact-broker -- (0.000149s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:41:06.589712 I [83370:4380] pact-broker -- (0.000125s) SELECT * FROM `versions` WHERE (`id` = 8) LIMIT 1
2021-09-06 11:41:06.589795 I [83370:4380] pact-broker -- (0.000043s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.589917 I [83370:4380] pact-broker -- (0.000052s) UPDATE `version_sequence_number` SET `value` = (`value` + 1)
2021-09-06 11:41:06.589973 I [83370:4380] pact-broker -- (0.000034s) SELECT * FROM `version_sequence_number` LIMIT 1
2021-09-06 11:41:06.590061 I [83370:4380] pact-broker -- (0.000032s) UPDATE `versions` SET `order` = 108 WHERE (`id` = 8)
2021-09-06 11:41:06.590217 I [83370:4380] pact-broker -- (0.000130s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:41:06.590702 I [83370:4380] pact-broker -- (0.000461s) COMMIT
2021-09-06 11:41:06.591307 I [83370:4380] pact-broker -- (0.000519s) UPDATE `versions` SET `created_at` = '2021-09-05 19:41:06.588680' WHERE (`id` = 8)
2021-09-06 11:41:06.591907 I [83370:4380] pact-broker -- (0.000512s) UPDATE `versions` SET `updated_at` = '2021-09-05 19:41:06.588680' WHERE (`id` = 8)
2021-09-06 11:41:06.592039 I [83370:4380] pact-broker -- (0.000015s) BEGIN
2021-09-06 11:41:06.592477 I [83370:4380] pact-broker -- (0.000299s) INSERT OR IGNORE INTO `tags` (`name`, `version_id`, `created_at`, `updated_at`, `version_order`, `pacticipant_id`) VALUES ('main', 8, '2021-09-06 07:41:06.591973', '2021-09-06 07:41:06.591973', 108, 1)
2021-09-06 11:41:06.592715 I [83370:4380] pact-broker -- (0.000142s) SELECT * FROM `tags` WHERE ((`name` = 'main') AND (`version_id` = 8)) LIMIT 1
2021-09-06 11:41:06.593218 I [83370:4380] pact-broker -- (0.000475s) COMMIT
2021-09-06 11:41:06.593890 I [83370:4380] pact-broker -- (0.000561s) UPDATE `tags` SET `created_at` = '2021-09-05 19:41:06.591917' WHERE ((`name` = 'main') AND (`version_id` = 8))
2021-09-06 11:41:06.594481 I [83370:4380] pact-broker -- (0.000499s) UPDATE `tags` SET `updated_at` = '2021-09-05 19:41:06.591917' WHERE (`name` = 'main')
2021-09-06 11:41:06.594824 I [83370:4380] pact-broker -- (0.000196s) SELECT * FROM `environments` WHERE (`name` = 'test') LIMIT 1
2021-09-06 11:41:06.595134 I [83370:4380] pact-broker -- (0.000133s) SELECT * FROM `deployed_versions` WHERE ((`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`)) AND (`version_id` = 8) AND (`environment_id` = 1) AND (`target` IS NULL)) LIMIT 1
2021-09-06 11:41:06.595357 I [83370:4380] pact-broker -- (0.000181s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.595566 I [83370:4380] pact-broker -- (0.000060s) UPDATE `deployed_versions` SET `undeployed_at` = '2021-09-06 07:41:06.595415' WHERE ((`undeployed_at` IS NULL) AND (`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target` IS NULL) AND (`undeployed_at` IS NULL))
2021-09-06 11:41:06.595734 I [83370:4380] pact-broker -- (0.000020s) BEGIN
2021-09-06 11:41:06.596052 I [83370:4380] pact-broker -- (0.000212s) INSERT OR IGNORE INTO `deployed_versions` (`uuid`, `version_id`, `pacticipant_id`, `environment_id`, `target`, `created_at`, `updated_at`, `target_for_index`) VALUES ('f645b078-7bcc-4010-b2b1-6d2fe9f764a4', 8, 1, 1, NULL, '2021-09-06 07:41:06.595654', '2021-09-06 07:41:06.595654', '')
2021-09-06 11:41:06.596265 I [83370:4380] pact-broker -- (0.000148s) SELECT * FROM `deployed_versions` WHERE `id` = 5
2021-09-06 11:41:06.596456 I [83370:4380] pact-broker -- (0.000050s) SELECT * FROM `currently_deployed_version_ids` WHERE ((`pacticipant_id` = 1) AND (`environment_id` = 1) AND (`target_for_index` = '')) LIMIT 1
2021-09-06 11:41:06.596613 I [83370:4380] pact-broker -- (0.000076s) INSERT INTO `currently_deployed_version_ids` (`pacticipant_id`, `environment_id`, `version_id`, `target_for_index`, `deployed_version_id`) VALUES (1, 1, 8, '', 5)
2021-09-06 11:41:06.596712 I [83370:4380] pact-broker -- (0.000049s) SELECT * FROM `currently_deployed_version_ids` WHERE `id` = 5
2021-09-06 11:41:06.597179 I [83370:4380] pact-broker -- (0.000442s) COMMIT
2021-09-06 11:41:06.597795 I [83370:4380] pact-broker -- (0.000522s) UPDATE `deployed_versions` SET `created_at` = '2021-09-05 19:41:06.594491' WHERE (`id` = 5)
2021-09-06 11:41:06.598361 I [83370:4380] pact-broker -- (0.000476s) UPDATE `deployed_versions` SET `updated_at` = '2021-09-05 19:41:06.594491' WHERE (`id` = 5)
2021-09-06 11:41:06.598622 I [83370:4380] pact-broker -- (0.000152s) SELECT * FROM `pact_versions` ORDER BY `id` DESC LIMIT 1
2021-09-06 11:41:06.598717 I [83370:4380] pact-broker -- (0.000059s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.599000 I [83370:4380] pact-broker -- (0.000139s) SELECT * FROM `pact_versions` WHERE ((`sha` = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND (`consumer_id` = 1) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.599280 I [83370:4380] pact-broker -- (0.000092s) SELECT * FROM `pact_publications` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2) AND (`revision_number` = 1)) LIMIT 1
2021-09-06 11:41:06.599359 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.599698 I [83370:4380] pact-broker -- (0.000243s) INSERT INTO `pact_publications` (`consumer_version_id`, `provider_id`, `consumer_id`, `pact_version_id`, `revision_number`, `consumer_version_order`, `created_at`) VALUES (8, 2, 1, 3, 1, 108, '2021-09-06 07:41:06.599301')
2021-09-06 11:41:06.599898 I [83370:4380] pact-broker -- (0.000123s) SELECT * FROM `pact_publications` WHERE `id` = 5
2021-09-06 11:41:06.600345 I [83370:4380] pact-broker -- (0.000418s) COMMIT
2021-09-06 11:41:06.600597 I [83370:4380] pact-broker -- (0.000201s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:41:06.600854 I [83370:4380] pact-broker -- (0.000072s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`consumer_version_id` = 8) AND (`provider_id` = 2)) LIMIT 1
2021-09-06 11:41:06.600903 I [83370:4380] pact-broker -- (0.000013s) BEGIN
2021-09-06 11:41:06.601214 I [83370:4380] pact-broker -- (0.000224s) INSERT INTO `latest_pact_publication_ids_for_consumer_versions` (`consumer_version_id`, `provider_id`, `pact_publication_id`, `consumer_id`, `pact_version_id`, `created_at`) VALUES (8, 2, 5, 1, 3, '2021-09-05 19:41:06.588680')
2021-09-06 11:41:06.601440 I [83370:4380] pact-broker -- (0.000100s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 11:41:06.601917 I [83370:4380] pact-broker -- (0.000452s) COMMIT
2021-09-06 11:41:06.602121 I [83370:4380] pact-broker -- (0.000156s) SELECT * FROM `latest_pact_publication_ids_for_consumer_versions` WHERE ((`provider_id` = 2) AND (`consumer_version_id` = 8)) LIMIT 1
2021-09-06 11:41:06.602349 I [83370:4380] pact-broker -- (0.000186s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.602566 I [83370:4380] pact-broker -- (0.000178s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.602805 I [83370:4380] pact-broker -- (0.000185s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 11:41:06.603258 I [83370:4380] pact-broker -- (0.000262s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.603537 I [83370:4380] pact-broker -- (0.000092s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.603994 I [83370:4380] pact-broker -- (0.000265s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:41:06.604198 I [83370:4380] pact-broker -- (0.000063s) SELECT count(*) AS 'count' FROM `pact_versions` LIMIT 1
2021-09-06 11:41:06.605065 I [83370:4380] pact-broker -- (0.000762s) UPDATE `pact_publications` SET `created_at` = '2021-09-05 19:41:06.598372' WHERE (`id` = 5)
2021-09-06 11:41:06.605997 I [83370:4380] pact-broker -- (0.000763s) UPDATE `latest_pact_publication_ids_for_consumer_versions` SET `created_at` = '2021-09-05 19:41:06.598372' WHERE (`consumer_version_id` = 8)
2021-09-06 11:41:06.606266 I [83370:4380] pact-broker -- (0.000188s) SELECT * FROM `pact_publications` WHERE (`id` = 5) LIMIT 1
2021-09-06 11:41:06.606523 I [83370:4380] pact-broker -- (0.000212s) SELECT * FROM `pacticipants` WHERE `id` = 2
2021-09-06 11:41:06.606761 I [83370:4380] pact-broker -- (0.000192s) SELECT * FROM `pacticipants` WHERE `id` = 1
2021-09-06 11:41:06.606986 I [83370:4380] pact-broker -- (0.000185s) SELECT * FROM `versions` WHERE `id` = 8
2021-09-06 11:41:06.607278 I [83370:4380] pact-broker -- (0.000220s) SELECT * FROM `tags` WHERE (`tags`.`version_id` = 8) ORDER BY `created_at`
2021-09-06 11:41:06.607712 I [83370:4380] pact-broker -- (0.000248s) SELECT * FROM `deployed_versions` WHERE ((`deployed_versions`.`version_id` = 8) AND (`id` IN (SELECT `deployed_version_id` FROM `currently_deployed_version_ids`))) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.607935 I [83370:4380] pact-broker -- (0.000095s) SELECT * FROM `released_versions` WHERE ((`released_versions`.`version_id` = 8) AND (`support_ended_at` IS NULL)) ORDER BY `created_at`, `id`
2021-09-06 11:41:06.608126 I [83370:4380] pact-broker -- (0.000146s) SELECT * FROM `pact_versions` WHERE `id` = 3
2021-09-06 11:41:06.608583 I [83370:4380] pact-broker -- (0.000267s) SELECT * FROM `verifications` WHERE (`id` IN (SELECT max(`verification_id`) FROM `latest_verification_id_for_pact_version_and_provider_version` WHERE (`pact_version_id` = 3))) LIMIT 1
2021-09-06 11:41:06.608620 I [83370:4380] PactBroker::App -- Marking seed as done
2021-09-06 11:41:06.609277 I [83370:4380] pact-broker -- (0.000081s) SELECT * FROM `config` WHERE (`name` = 'seed_example_data') LIMIT 1
2021-09-06 11:41:06.609593 I [83370:4380] pact-broker -- (0.000031s) BEGIN
2021-09-06 11:41:06.609947 I [83370:4380] pact-broker -- (0.000239s) INSERT INTO `config` (`name`, `type`, `value`, `created_at`, `updated_at`) VALUES ('seed_example_data', 'boolean', '0', '2021-09-06 07:41:06.609481', '2021-09-06 07:41:06.609481')
2021-09-06 11:41:06.610169 I [83370:4380] pact-broker -- (0.000161s) SELECT * FROM `config` WHERE `id` = 1
2021-09-06 11:41:06.610751 I [83370:4380] pact-broker -- (0.000554s) COMMIT
2021-09-06 11:41:06.610782 I [83370:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 11:41:06.610787 I [83370:4380] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 11:41:06.610882 I [83370:4380] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 11:41:06.610895 I [83370:4380] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 11:41:06.610902 I [83370:4380] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 11:41:06.610908 I [83370:4380] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 11:41:06.610915 I [83370:4380] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 11:41:06.610927 I [83370:4380] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 11:41:06.610939 I [83370:4380] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 11:41:06.610951 I [83370:4380] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 11:41:06.610957 I [83370:4380] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 11:41:06.610963 I [83370:4380] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 11:41:06.610976 I [83370:4380] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 11:41:06.610983 I [83370:4380] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 11:41:06.610989 I [83370:4380] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 11:41:06.610994 I [83370:4380] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 11:41:06.610999 I [83370:4380] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 11:41:06.611008 I [83370:4380] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 11:41:06.611014 I [83370:4380] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 11:41:06.611019 I [83370:4380] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 11:41:06.611026 I [83370:4380] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 11:41:06.611037 I [83370:4380] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 11:41:06.611047 I [83370:4380] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 11:41:06.611052 I [83370:4380] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 11:41:06.611066 I [83370:4380] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 11:41:06.611071 I [83370:4380] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 11:41:06.611077 I [83370:4380] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 11:41:06.611092 I [83370:4380] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 11:41:06.611098 I [83370:4380] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 11:41:06.611104 I [83370:4380] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 11:41:06.611109 I [83370:4380] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 11:41:06.611114 I [83370:4380] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 11:41:06.611120 I [83370:4380] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 11:41:06.611141 I [83370:4380] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 11:41:06.611147 I [83370:4380] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 11:41:06.611153 I [83370:4380] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 11:41:06.611158 I [83370:4380] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 11:41:06.611169 I [83370:4380] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 11:41:06.611174 I [83370:4380] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-sqlite/log source={:type=>:defaults}
2021-09-06 11:41:06.611180 I [83370:4380] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 11:41:06.611189 I [83370:4380] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 11:41:06.611195 I [83370:4380] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 11:41:06.611210 I [83370:4380] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 11:41:06.611216 I [83370:4380] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 11:41:06.611227 I [83370:4380] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 11:41:06.611236 I [83370:4380] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 11:41:06.611245 I [83370:4380] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 11:41:06.611251 I [83370:4380] pact-broker -- seed_example_data=true source={:type=>:defaults}
2021-09-06 11:41:06.611266 I [83370:4380] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 11:41:06.611274 I [83370:4380] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 11:41:06.611283 I [83370:4380] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 11:41:06.611291 I [83370:4380] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 11:41:06.611302 I [83370:4380] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 11:41:06.613664 I [83370:4380] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 11:41:06.613673 I [83370:4380] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 11:41:06.613680 I [83370:4380] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 11:41:06.613688 I [83370:4380] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 11:41:06.613695 I [83370:4380] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 11:41:06.613701 I [83370:4380] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 11:41:06.613708 I [83370:4380] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 11:41:06.613714 I [83370:4380] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 11:41:06.613722 I [83370:4380] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 11:41:06.613728 I [83370:4380] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 11:41:06.613735 I [83370:4380] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 11:41:06.613741 I [83370:4380] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 11:41:06.613747 I [83370:4380] pact-broker -- ------------------------------------------------------------------------
2021-09-06 11:41:06.613757 I [83370:4380] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

