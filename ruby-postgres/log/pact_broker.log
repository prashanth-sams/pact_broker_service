2021-09-06 18:54:53.892995 I [20327:4260] pact-broker -- (0.000089s) SET standard_conforming_strings = ON
2021-09-06 18:54:53.893231 I [20327:4260] pact-broker -- (0.000170s) SET client_min_messages = 'WARNING'
2021-09-06 18:54:53.893386 I [20327:4260] pact-broker -- (0.000103s) SET DateStyle = 'ISO'
2021-09-06 18:54:53.895306 I [20327:4260] pact-broker -- (0.000656s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
2021-09-06 18:54:53.896995 I [20327:4260] pact-broker -- (0.001484s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 18:54:53.897517 I [20327:4260] pact-broker -- (0.000322s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 18:54:53.897542 I [20327:4260] PactBroker::App -- Database schema version is 0
2021-09-06 18:54:53.901441 E [20327:4260 logging.rb:88] pact-broker -- PG::UndefinedTable: ERROR:  relation "schema_migrations" does not exist
LINE 1: SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
                                  ^: SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 18:54:53.905786 I [20327:4260] pact-broker -- (0.003370s) CREATE TABLE "schema_migrations" ("filename" text PRIMARY KEY)
2021-09-06 18:54:53.906101 E [20327:4260 logging.rb:88] pact-broker -- PG::UndefinedTable: ERROR:  relation "schema_info" does not exist
LINE 1: SELECT NULL AS "nil" FROM "schema_info" LIMIT 1
                                  ^: SELECT NULL AS "nil" FROM "schema_info" LIMIT 1
2021-09-06 18:54:53.906674 I [20327:4260] pact-broker -- (0.000274s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 18:54:53.946431 I [20327:4260] PactBroker::App -- Migrating database schema
2021-09-06 18:54:53.947926 I [20327:4260] pact-broker -- (0.000221s) SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 18:54:53.948150 I [20327:4260] pact-broker -- (0.000129s) SELECT * FROM "schema_migrations" LIMIT 1
2021-09-06 18:54:53.948393 I [20327:4260] pact-broker -- (0.000148s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 18:54:53.993417 I [20327:4260] pact-broker -- Begin applying migration 000001_create_pacticipant_table.rb, direction: up
2021-09-06 18:54:53.993571 I [20327:4260] pact-broker -- (0.000089s) BEGIN
2021-09-06 18:54:53.997274 I [20327:4260] pact-broker -- (0.003539s) CREATE TABLE "pacticipants" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "name" text UNIQUE, "repository_url" text)
2021-09-06 18:54:53.998329 I [20327:4260] pact-broker -- (0.000836s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"schema_migrations"' AS regclass) AS oid)
2021-09-06 18:54:53.998786 I [20327:4260] pact-broker -- (0.000323s) INSERT INTO "schema_migrations" ("filename") VALUES ('000001_create_pacticipant_table.rb') RETURNING "filename"
2021-09-06 18:54:53.999114 I [20327:4260] pact-broker -- (0.000279s) COMMIT
2021-09-06 18:54:53.999158 I [20327:4260] pact-broker -- Finished applying migration 000001_create_pacticipant_table.rb, direction: up, took 0.005742 seconds
2021-09-06 18:54:53.999166 I [20327:4260] pact-broker -- Begin applying migration 000002_create_versions_table.rb, direction: up
2021-09-06 18:54:53.999347 I [20327:4260] pact-broker -- (0.000147s) BEGIN
2021-09-06 18:54:54.002501 I [20327:4260] pact-broker -- (0.002989s) CREATE TABLE "versions" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "number" text, "repository_ref" text, "pacticipant_id" integer NOT NULL REFERENCES "pacticipants")
2021-09-06 18:54:54.002628 I [20327:4260] pact-broker -- (0.000066s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.003362 I [20327:4260] pact-broker -- (0.000646s) CREATE UNIQUE INDEX "versions_pacticipant_id_number_index" ON "versions" ("pacticipant_id", "number")
2021-09-06 18:54:54.003472 I [20327:4260] pact-broker -- (0.000056s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.003708 I [20327:4260] pact-broker -- (0.000123s) INSERT INTO "schema_migrations" ("filename") VALUES ('000002_create_versions_table.rb') RETURNING "filename"
2021-09-06 18:54:54.003952 I [20327:4260] pact-broker -- (0.000198s) COMMIT
2021-09-06 18:54:54.003987 I [20327:4260] pact-broker -- Finished applying migration 000002_create_versions_table.rb, direction: up, took 0.004816 seconds
2021-09-06 18:54:54.003995 I [20327:4260] pact-broker -- Begin applying migration 000003_create_pacts_table.rb, direction: up
2021-09-06 18:54:54.004180 I [20327:4260] pact-broker -- (0.000153s) BEGIN
2021-09-06 18:54:54.006585 I [20327:4260] pact-broker -- (0.002258s) CREATE TABLE "pacts" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "json_content" text, "version_id" integer NOT NULL REFERENCES "versions", "provider_id" integer NOT NULL REFERENCES "pacticipants")
2021-09-06 18:54:54.006673 I [20327:4260] pact-broker -- (0.000047s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.007379 I [20327:4260] pact-broker -- (0.000645s) CREATE UNIQUE INDEX "pacts_version_id_provider_id_index" ON "pacts" ("version_id", "provider_id")
2021-09-06 18:54:54.007478 I [20327:4260] pact-broker -- (0.000067s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.007658 I [20327:4260] pact-broker -- (0.000085s) INSERT INTO "schema_migrations" ("filename") VALUES ('000003_create_pacts_table.rb') RETURNING "filename"
2021-09-06 18:54:54.007887 I [20327:4260] pact-broker -- (0.000192s) COMMIT
2021-09-06 18:54:54.007914 I [20327:4260] pact-broker -- Finished applying migration 000003_create_pacts_table.rb, direction: up, took 0.003916 seconds
2021-09-06 18:54:54.007922 I [20327:4260] pact-broker -- Begin applying migration 000004_create_tags_table.rb, direction: up
2021-09-06 18:54:54.008079 I [20327:4260] pact-broker -- (0.000131s) BEGIN
2021-09-06 18:54:54.009995 I [20327:4260] pact-broker -- (0.001754s) CREATE TABLE "tags" ("name" text, "version_id" integer REFERENCES "versions", CONSTRAINT "tags_pk" PRIMARY KEY ("version_id", "name"))
2021-09-06 18:54:54.010416 I [20327:4260] pact-broker -- (0.000148s) INSERT INTO "schema_migrations" ("filename") VALUES ('000004_create_tags_table.rb') RETURNING "filename"
2021-09-06 18:54:54.010807 I [20327:4260] pact-broker -- (0.000274s) COMMIT
2021-09-06 18:54:54.010835 I [20327:4260] pact-broker -- Finished applying migration 000004_create_tags_table.rb, direction: up, took 0.002909 seconds
2021-09-06 18:54:54.010842 I [20327:4260] pact-broker -- Begin applying migration 000005_add_order_column_to_version.rb, direction: up
2021-09-06 18:54:54.010907 I [20327:4260] pact-broker -- (0.000042s) BEGIN
2021-09-06 18:54:54.011107 I [20327:4260] pact-broker -- (0.000119s) ALTER TABLE "versions" ADD COLUMN "order" integer
2021-09-06 18:54:54.011384 I [20327:4260] pact-broker -- (0.000198s) UPDATE "versions" SET "order" = "id"
2021-09-06 18:54:54.011531 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('000005_add_order_column_to_version.rb') RETURNING "filename"
2021-09-06 18:54:54.011726 I [20327:4260] pact-broker -- (0.000164s) COMMIT
2021-09-06 18:54:54.011748 I [20327:4260] pact-broker -- Finished applying migration 000005_add_order_column_to_version.rb, direction: up, took 0.000903 seconds
2021-09-06 18:54:54.011754 I [20327:4260] pact-broker -- Begin applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up
2021-09-06 18:54:54.011846 I [20327:4260] pact-broker -- (0.000071s) BEGIN
2021-09-06 18:54:54.011971 I [20327:4260] pact-broker -- (0.000078s) ALTER TABLE "tags" ALTER COLUMN "version_id" SET NOT NULL
2021-09-06 18:54:54.012090 I [20327:4260] pact-broker -- (0.000060s) INSERT INTO "schema_migrations" ("filename") VALUES ('000006_make_version_foreign_key_mandatory.rb') RETURNING "filename"
2021-09-06 18:54:54.012282 I [20327:4260] pact-broker -- (0.000165s) COMMIT
2021-09-06 18:54:54.012303 I [20327:4260] pact-broker -- Finished applying migration 000006_make_version_foreign_key_mandatory.rb, direction: up, took 0.000546 seconds
2021-09-06 18:54:54.012310 I [20327:4260] pact-broker -- Begin applying migration 000007_increase_json_content_length.rb, direction: up
2021-09-06 18:54:54.012380 I [20327:4260] pact-broker -- (0.000052s) BEGIN
2021-09-06 18:54:54.012552 I [20327:4260] pact-broker -- (0.000120s) ALTER TABLE "pacts" ALTER COLUMN "json_content" TYPE text
2021-09-06 18:54:54.012723 I [20327:4260] pact-broker -- (0.000059s) INSERT INTO "schema_migrations" ("filename") VALUES ('000007_increase_json_content_length.rb') RETURNING "filename"
2021-09-06 18:54:54.012923 I [20327:4260] pact-broker -- (0.000171s) COMMIT
2021-09-06 18:54:54.012946 I [20327:4260] pact-broker -- Finished applying migration 000007_increase_json_content_length.rb, direction: up, took 0.000634 seconds
2021-09-06 18:54:54.012953 I [20327:4260] pact-broker -- Begin applying migration 000008_create_latest_pact_view.rb, direction: up
2021-09-06 18:54:54.013064 I [20327:4260] pact-broker -- (0.000086s) BEGIN
2021-09-06 18:54:54.014299 I [20327:4260] pact-broker -- (0.000996s) CREATE VIEW "all_pacts" AS SELECT "pacts"."id", "c"."id" AS "consumer_id", "c"."name" AS "consumer_name", "cv"."number" AS "consumer_version_number", "cv"."order" AS "consumer_version_order", "p"."id" AS "provider_id", "p"."name" AS "provider_name", "pacts"."json_content" FROM "pacts" INNER JOIN "versions" AS "cv" ON ("cv"."id" = "pacts"."version_id") INNER JOIN "pacticipants" AS "c" ON ("c"."id" = "cv"."pacticipant_id") INNER JOIN "pacticipants" AS "p" ON ("p"."id" = "pacts"."provider_id")
2021-09-06 18:54:54.014992 I [20327:4260] pact-broker -- (0.000648s) CREATE VIEW "latest_pact_consumer_version_orders" AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 18:54:54.015594 I [20327:4260] pact-broker -- (0.000552s) CREATE VIEW "latest_pacts" AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.015794 I [20327:4260] pact-broker -- (0.000120s) INSERT INTO "schema_migrations" ("filename") VALUES ('000008_create_latest_pact_view.rb') RETURNING "filename"
2021-09-06 18:54:54.016023 I [20327:4260] pact-broker -- (0.000192s) COMMIT
2021-09-06 18:54:54.016047 I [20327:4260] pact-broker -- Finished applying migration 000008_create_latest_pact_view.rb, direction: up, took 0.003091 seconds
2021-09-06 18:54:54.016054 I [20327:4260] pact-broker -- Begin applying migration 000009_add_timestamps.rb, direction: up
2021-09-06 18:54:54.016157 I [20327:4260] pact-broker -- (0.000077s) BEGIN
2021-09-06 18:54:54.016350 I [20327:4260] pact-broker -- (0.000113s) ALTER TABLE "pacts" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.016485 I [20327:4260] pact-broker -- (0.000080s) ALTER TABLE "pacts" ADD COLUMN "updated_at" timestamp
2021-09-06 18:54:54.016625 I [20327:4260] pact-broker -- (0.000086s) ALTER TABLE "tags" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.016776 I [20327:4260] pact-broker -- (0.000078s) ALTER TABLE "tags" ADD COLUMN "updated_at" timestamp
2021-09-06 18:54:54.017019 I [20327:4260] pact-broker -- (0.000137s) ALTER TABLE "versions" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.017160 I [20327:4260] pact-broker -- (0.000086s) ALTER TABLE "versions" ADD COLUMN "updated_at" timestamp
2021-09-06 18:54:54.017297 I [20327:4260] pact-broker -- (0.000085s) ALTER TABLE "pacticipants" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.017419 I [20327:4260] pact-broker -- (0.000073s) ALTER TABLE "pacticipants" ADD COLUMN "updated_at" timestamp
2021-09-06 18:54:54.017551 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('000009_add_timestamps.rb') RETURNING "filename"
2021-09-06 18:54:54.017730 I [20327:4260] pact-broker -- (0.000147s) COMMIT
2021-09-06 18:54:54.017754 I [20327:4260] pact-broker -- Finished applying migration 000009_add_timestamps.rb, direction: up, took 0.001697 seconds
2021-09-06 18:54:54.017761 I [20327:4260] pact-broker -- Begin applying migration 000010_populate_timestamps.rb, direction: up
2021-09-06 18:54:54.017839 I [20327:4260] pact-broker -- (0.000058s) BEGIN
2021-09-06 18:54:54.018293 I [20327:4260] pact-broker -- (0.000234s) UPDATE "pacts" SET "created_at" = '2021-09-06 14:54:54.017878+0000', "updated_at" = '2021-09-06 14:54:54.017891+0000'
2021-09-06 18:54:54.018495 I [20327:4260] pact-broker -- (0.000120s) UPDATE "versions" SET "created_at" = '2021-09-06 14:54:54.018316+0000', "updated_at" = '2021-09-06 14:54:54.018318+0000'
2021-09-06 18:54:54.018753 I [20327:4260] pact-broker -- (0.000184s) UPDATE "pacticipants" SET "created_at" = '2021-09-06 14:54:54.018516+0000', "updated_at" = '2021-09-06 14:54:54.018518+0000'
2021-09-06 18:54:54.018977 I [20327:4260] pact-broker -- (0.000148s) UPDATE "tags" SET "created_at" = '2021-09-06 14:54:54.018773+0000', "updated_at" = '2021-09-06 14:54:54.018774+0000'
2021-09-06 18:54:54.019101 I [20327:4260] pact-broker -- (0.000063s) INSERT INTO "schema_migrations" ("filename") VALUES ('000010_populate_timestamps.rb') RETURNING "filename"
2021-09-06 18:54:54.019276 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.019300 I [20327:4260] pact-broker -- Finished applying migration 000010_populate_timestamps.rb, direction: up, took 0.001536 seconds
2021-09-06 18:54:54.019342 I [20327:4260] pact-broker -- Begin applying migration 000011_made_timestamps_mandatory.rb, direction: up
2021-09-06 18:54:54.019424 I [20327:4260] pact-broker -- (0.000057s) BEGIN
2021-09-06 18:54:54.019641 I [20327:4260] pact-broker -- (0.000159s) ALTER TABLE "tags" ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.019798 I [20327:4260] pact-broker -- (0.000112s) ALTER TABLE "pacticipants" ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.019951 I [20327:4260] pact-broker -- (0.000110s) ALTER TABLE "versions" ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.020111 I [20327:4260] pact-broker -- (0.000119s) ALTER TABLE "pacts" ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.020238 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('000011_made_timestamps_mandatory.rb') RETURNING "filename"
2021-09-06 18:54:54.020426 I [20327:4260] pact-broker -- (0.000161s) COMMIT
2021-09-06 18:54:54.020448 I [20327:4260] pact-broker -- Finished applying migration 000011_made_timestamps_mandatory.rb, direction: up, took 0.001104 seconds
2021-09-06 18:54:54.020454 I [20327:4260] pact-broker -- Begin applying migration 000012_create_webhooks_table.rb, direction: up
2021-09-06 18:54:54.020558 I [20327:4260] pact-broker -- (0.000085s) BEGIN
2021-09-06 18:54:54.023220 I [20327:4260] pact-broker -- (0.002504s) CREATE TABLE "webhooks" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "uuid" text NOT NULL CONSTRAINT "uq_webhook_uuid" UNIQUE, "method" text NOT NULL, "url" text NOT NULL, "body" text, "is_json_request_body" Boolean, "consumer_id" integer NOT NULL CONSTRAINT "fk_webhooks_consumer" REFERENCES "pacticipants", "provider_id" integer NOT NULL CONSTRAINT "fk_webhooks_provider" REFERENCES "pacticipants")
2021-09-06 18:54:54.025024 I [20327:4260] pact-broker -- (0.001664s) CREATE TABLE "webhook_headers" ("name" text NOT NULL, "value" text, "webhook_id" integer NOT NULL CONSTRAINT "fk_webhookheaders_webhooks" REFERENCES "webhooks", CONSTRAINT "webhooks_headers_pk" PRIMARY KEY ("webhook_id", "name"))
2021-09-06 18:54:54.025222 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('000012_create_webhooks_table.rb') RETURNING "filename"
2021-09-06 18:54:54.025501 I [20327:4260] pact-broker -- (0.000240s) COMMIT
2021-09-06 18:54:54.025528 I [20327:4260] pact-broker -- Finished applying migration 000012_create_webhooks_table.rb, direction: up, took 0.005070 seconds
2021-09-06 18:54:54.025535 I [20327:4260] pact-broker -- Begin applying migration 000013_add_columns_to_webhooks.rb, direction: up
2021-09-06 18:54:54.025667 I [20327:4260] pact-broker -- (0.000109s) BEGIN
2021-09-06 18:54:54.025920 I [20327:4260] pact-broker -- (0.000182s) ALTER TABLE "webhooks" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.026082 I [20327:4260] pact-broker -- (0.000081s) ALTER TABLE "webhooks" ADD COLUMN "updated_at" timestamp
2021-09-06 18:54:54.026267 I [20327:4260] pact-broker -- (0.000082s) ALTER TABLE "webhooks" ADD COLUMN "username" text
2021-09-06 18:54:54.026391 I [20327:4260] pact-broker -- (0.000073s) ALTER TABLE "webhooks" ADD COLUMN "password" text
2021-09-06 18:54:54.026593 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('000013_add_columns_to_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.026765 I [20327:4260] pact-broker -- (0.000142s) COMMIT
2021-09-06 18:54:54.026848 I [20327:4260] pact-broker -- Finished applying migration 000013_add_columns_to_webhooks.rb, direction: up, took 0.001309 seconds
2021-09-06 18:54:54.026855 I [20327:4260] pact-broker -- Begin applying migration 000014_add_timestamps_to_pact_views.rb, direction: up
2021-09-06 18:54:54.026960 I [20327:4260] pact-broker -- (0.000081s) BEGIN
2021-09-06 18:54:54.028460 I [20327:4260] pact-broker -- (0.001234s) CREATE OR REPLACE VIEW "all_pacts" AS SELECT "pacts"."id", "c"."id" AS "consumer_id", "c"."name" AS "consumer_name", "cv"."number" AS "consumer_version_number", "cv"."order" AS "consumer_version_order", "p"."id" AS "provider_id", "p"."name" AS "provider_name", "pacts"."json_content", "pacts"."created_at", "pacts"."updated_at" FROM "pacts" INNER JOIN "versions" AS "cv" ON ("cv"."id" = "pacts"."version_id") INNER JOIN "pacticipants" AS "c" ON ("c"."id" = "cv"."pacticipant_id") INNER JOIN "pacticipants" AS "p" ON ("p"."id" = "pacts"."provider_id")
2021-09-06 18:54:54.028845 I [20327:4260] pact-broker -- (0.000339s) CREATE OR REPLACE VIEW "latest_pact_consumer_version_orders" AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 18:54:54.029705 I [20327:4260] pact-broker -- (0.000821s) CREATE OR REPLACE VIEW "latest_pacts" AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.029900 I [20327:4260] pact-broker -- (0.000115s) INSERT INTO "schema_migrations" ("filename") VALUES ('000014_add_timestamps_to_pact_views.rb') RETURNING "filename"
2021-09-06 18:54:54.030125 I [20327:4260] pact-broker -- (0.000183s) COMMIT
2021-09-06 18:54:54.030155 I [20327:4260] pact-broker -- Finished applying migration 000014_add_timestamps_to_pact_views.rb, direction: up, took 0.003296 seconds
2021-09-06 18:54:54.030163 I [20327:4260] pact-broker -- Begin applying migration 000015_create_pact_version_content.rb, direction: up
2021-09-06 18:54:54.030264 I [20327:4260] pact-broker -- (0.000053s) BEGIN
2021-09-06 18:54:54.031923 I [20327:4260] pact-broker -- (0.001510s) CREATE TABLE "pact_version_contents" ("sha" text NOT NULL CONSTRAINT "pk_pact_version_contents" PRIMARY KEY, "content" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)
2021-09-06 18:54:54.032088 I [20327:4260] pact-broker -- (0.000076s) INSERT INTO "schema_migrations" ("filename") VALUES ('000015_create_pact_version_content.rb') RETURNING "filename"
2021-09-06 18:54:54.032337 I [20327:4260] pact-broker -- (0.000207s) COMMIT
2021-09-06 18:54:54.032370 I [20327:4260] pact-broker -- Finished applying migration 000015_create_pact_version_content.rb, direction: up, took 0.002203 seconds
2021-09-06 18:54:54.032377 I [20327:4260] pact-broker -- Begin applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up
2021-09-06 18:54:54.032459 I [20327:4260] pact-broker -- (0.000051s) BEGIN
2021-09-06 18:54:54.033022 I [20327:4260] pact-broker -- (0.000452s) ALTER TABLE "pacts" ADD COLUMN "pact_version_content_sha" text NULL CONSTRAINT "fk_pact_version_content" REFERENCES "pact_version_contents"
2021-09-06 18:54:54.033197 I [20327:4260] pact-broker -- (0.000090s) INSERT INTO "schema_migrations" ("filename") VALUES ('000016_add_pact_content_foreign_key_to_pacts.rb') RETURNING "filename"
2021-09-06 18:54:54.033390 I [20327:4260] pact-broker -- (0.000155s) COMMIT
2021-09-06 18:54:54.033415 I [20327:4260] pact-broker -- Finished applying migration 000016_add_pact_content_foreign_key_to_pacts.rb, direction: up, took 0.001035 seconds
2021-09-06 18:54:54.033422 I [20327:4260] pact-broker -- Begin applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up
2021-09-06 18:54:54.033504 I [20327:4260] pact-broker -- (0.000060s) BEGIN
2021-09-06 18:54:54.033688 I [20327:4260] pact-broker -- (0.000129s) SELECT * FROM "pacts"
2021-09-06 18:54:54.033830 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('000017_migrate_json_content_to_pact_version_content_table.rb') RETURNING "filename"
2021-09-06 18:54:54.033995 I [20327:4260] pact-broker -- (0.000137s) COMMIT
2021-09-06 18:54:54.034018 I [20327:4260] pact-broker -- Finished applying migration 000017_migrate_json_content_to_pact_version_content_table.rb, direction: up, took 0.000592 seconds
2021-09-06 18:54:54.034024 I [20327:4260] pact-broker -- Begin applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up
2021-09-06 18:54:54.034134 I [20327:4260] pact-broker -- (0.000087s) BEGIN
2021-09-06 18:54:54.034769 I [20327:4260] pact-broker -- (0.000594s) DROP VIEW "latest_pacts"
2021-09-06 18:54:54.035006 I [20327:4260] pact-broker -- (0.000199s) DROP VIEW "latest_pact_consumer_version_orders"
2021-09-06 18:54:54.035328 I [20327:4260] pact-broker -- (0.000291s) DROP VIEW "all_pacts"
2021-09-06 18:54:54.035491 I [20327:4260] pact-broker -- (0.000109s) ALTER TABLE "pacts" DROP COLUMN "json_content"
2021-09-06 18:54:54.035627 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('000018_drop_json_content_column_from_pacts.rb') RETURNING "filename"
2021-09-06 18:54:54.035834 I [20327:4260] pact-broker -- (0.000172s) COMMIT
2021-09-06 18:54:54.035865 I [20327:4260] pact-broker -- Finished applying migration 000018_drop_json_content_column_from_pacts.rb, direction: up, took 0.001836 seconds
2021-09-06 18:54:54.035873 I [20327:4260] pact-broker -- Begin applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up
2021-09-06 18:54:54.035994 I [20327:4260] pact-broker -- (0.000063s) BEGIN
2021-09-06 18:54:54.036181 I [20327:4260] pact-broker -- (0.000125s) ALTER TABLE "pacts" ALTER COLUMN "pact_version_content_sha" SET NOT NULL
2021-09-06 18:54:54.036323 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('000019_make_pact_version_content_sha_not_nullable.rb') RETURNING "filename"
2021-09-06 18:54:54.036507 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.036530 I [20327:4260] pact-broker -- Finished applying migration 000019_make_pact_version_content_sha_not_nullable.rb, direction: up, took 0.000654 seconds
2021-09-06 18:54:54.036536 I [20327:4260] pact-broker -- Begin applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up
2021-09-06 18:54:54.036697 I [20327:4260] pact-broker -- (0.000140s) BEGIN
2021-09-06 18:54:54.037965 I [20327:4260] pact-broker -- (0.001016s) CREATE OR REPLACE VIEW "all_pacts" AS SELECT "pacts"."id", "c"."id" AS "consumer_id", "c"."name" AS "consumer_name", "cv"."id" AS "consumer_version_id", "cv"."number" AS "consumer_version_number", "cv"."order" AS "consumer_version_order", "p"."id" AS "provider_id", "p"."name" AS "provider_name", "pvc"."sha" AS "pact_version_content_sha", "pacts"."created_at", "pacts"."updated_at" FROM "pacts" INNER JOIN "versions" AS "cv" ON ("cv"."id" = "pacts"."version_id") INNER JOIN "pacticipants" AS "c" ON ("c"."id" = "cv"."pacticipant_id") INNER JOIN "pacticipants" AS "p" ON ("p"."id" = "pacts"."provider_id") INNER JOIN "pact_version_contents" AS "pvc" ON ("pvc"."sha" = "pacts"."pact_version_content_sha")
2021-09-06 18:54:54.038100 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('000020_add_pact_version_content_sha_to_all_pacts_view.rb') RETURNING "filename"
2021-09-06 18:54:54.038282 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.038305 I [20327:4260] pact-broker -- Finished applying migration 000020_add_pact_version_content_sha_to_all_pacts_view.rb, direction: up, took 0.001766 seconds
2021-09-06 18:54:54.038312 I [20327:4260] pact-broker -- Begin applying migration 000021_recreate_latest_pacts_view.rb, direction: up
2021-09-06 18:54:54.038418 I [20327:4260] pact-broker -- (0.000084s) BEGIN
2021-09-06 18:54:54.038979 I [20327:4260] pact-broker -- (0.000505s) CREATE OR REPLACE VIEW "latest_pact_consumer_version_orders" AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts
      group by provider_id, consumer_id
2021-09-06 18:54:54.039612 I [20327:4260] pact-broker -- (0.000592s) CREATE OR REPLACE VIEW "latest_pacts" AS select ap.*
      from all_pacts ap
      inner join latest_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
           and ap.provider_id = lp.provider_id
           and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.039757 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('000021_recreate_latest_pacts_view.rb') RETURNING "filename"
2021-09-06 18:54:54.039941 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.039966 I [20327:4260] pact-broker -- Finished applying migration 000021_recreate_latest_pacts_view.rb, direction: up, took 0.001651 seconds
2021-09-06 18:54:54.039973 I [20327:4260] pact-broker -- Begin applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up
2021-09-06 18:54:54.040080 I [20327:4260] pact-broker -- (0.000087s) BEGIN
2021-09-06 18:54:54.040644 I [20327:4260] pact-broker -- (0.000527s) CREATE OR REPLACE VIEW "latest_tagged_pact_consumer_version_orders" AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from all_pacts ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 18:54:54.041369 I [20327:4260] pact-broker -- (0.000678s) CREATE OR REPLACE VIEW "latest_tagged_pacts" AS select ap.*, lp.tag_name
      from all_pacts ap
      inner join latest_tagged_pact_consumer_version_orders lp
      on ap.consumer_id = lp.consumer_id
        and ap.provider_id = lp.provider_id
        and ap.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.041544 I [20327:4260] pact-broker -- (0.000089s) INSERT INTO "schema_migrations" ("filename") VALUES ('000022_create_latest_tagged_pacts_view.rb') RETURNING "filename"
2021-09-06 18:54:54.041753 I [20327:4260] pact-broker -- (0.000166s) COMMIT
2021-09-06 18:54:54.041781 I [20327:4260] pact-broker -- Finished applying migration 000022_create_latest_tagged_pacts_view.rb, direction: up, took 0.001805 seconds
2021-09-06 18:54:54.041788 I [20327:4260] pact-broker -- Begin applying migration 000023_create_pact_versions_table.rb, direction: up
2021-09-06 18:54:54.041855 I [20327:4260] pact-broker -- (0.000045s) BEGIN
2021-09-06 18:54:54.044269 I [20327:4260] pact-broker -- (0.002218s) CREATE TABLE "pact_versions" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "consumer_id" integer REFERENCES "pacticipants", "provider_id" integer REFERENCES "pacticipants", "sha" text NOT NULL, "content" text, "created_at" timestamp NOT NULL)
2021-09-06 18:54:54.044339 I [20327:4260] pact-broker -- (0.000035s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.044899 I [20327:4260] pact-broker -- (0.000516s) CREATE UNIQUE INDEX "unq_pvc_con_prov_sha" ON "pact_versions" ("consumer_id", "provider_id", "sha")
2021-09-06 18:54:54.044956 I [20327:4260] pact-broker -- (0.000035s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.045091 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('000023_create_pact_versions_table.rb') RETURNING "filename"
2021-09-06 18:54:54.045288 I [20327:4260] pact-broker -- (0.000167s) COMMIT
2021-09-06 18:54:54.045310 I [20327:4260] pact-broker -- Finished applying migration 000023_create_pact_versions_table.rb, direction: up, took 0.003518 seconds
2021-09-06 18:54:54.045343 I [20327:4260] pact-broker -- Begin applying migration 000024_populate_pact_versions.rb, direction: up
2021-09-06 18:54:54.045458 I [20327:4260] pact-broker -- (0.000094s) BEGIN
2021-09-06 18:54:54.045708 I [20327:4260] pact-broker -- (0.000219s) insert into pact_versions (sha, content, created_at) select sha, content, created_at from pact_version_contents
2021-09-06 18:54:54.046473 I [20327:4260] pact-broker -- (0.000740s) update pact_versions set consumer_id = (select consumer_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 18:54:54.046893 I [20327:4260] pact-broker -- (0.000398s) update pact_versions set provider_id = (select provider_id from all_pacts where pact_version_content_sha = pact_versions.sha limit 1)
2021-09-06 18:54:54.046985 I [20327:4260] pact-broker -- (0.000070s) delete from pact_versions where consumer_id is null
2021-09-06 18:54:54.047113 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('000024_populate_pact_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.047286 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.047308 I [20327:4260] pact-broker -- Finished applying migration 000024_populate_pact_versions.rb, direction: up, took 0.001963 seconds
2021-09-06 18:54:54.047315 I [20327:4260] pact-broker -- Begin applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up
2021-09-06 18:54:54.047386 I [20327:4260] pact-broker -- (0.000052s) BEGIN
2021-09-06 18:54:54.047579 I [20327:4260] pact-broker -- (0.000133s) ALTER TABLE "pact_versions" ALTER COLUMN "consumer_id" SET NOT NULL, ALTER COLUMN "provider_id" SET NOT NULL
2021-09-06 18:54:54.047702 I [20327:4260] pact-broker -- (0.000061s) INSERT INTO "schema_migrations" ("filename") VALUES ('000025_make_pv_pacticipants_mandatory.rb') RETURNING "filename"
2021-09-06 18:54:54.047867 I [20327:4260] pact-broker -- (0.000137s) COMMIT
2021-09-06 18:54:54.047888 I [20327:4260] pact-broker -- Finished applying migration 000025_make_pv_pacticipants_mandatory.rb, direction: up, took 0.000571 seconds
2021-09-06 18:54:54.047894 I [20327:4260] pact-broker -- Begin applying migration 000026_create_pact_publications.rb, direction: up
2021-09-06 18:54:54.047971 I [20327:4260] pact-broker -- (0.000057s) BEGIN
2021-09-06 18:54:54.050090 I [20327:4260] pact-broker -- (0.001981s) CREATE TABLE "pact_publications" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "consumer_version_id" integer NOT NULL REFERENCES "versions", "provider_id" integer NOT NULL REFERENCES "pacticipants", "revision_number" integer NOT NULL, "pact_version_id" integer NOT NULL REFERENCES "pact_versions", "created_at" timestamp NOT NULL)
2021-09-06 18:54:54.050192 I [20327:4260] pact-broker -- (0.000061s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.050840 I [20327:4260] pact-broker -- (0.000591s) CREATE UNIQUE INDEX "cv_prov_revision_unq" ON "pact_publications" ("consumer_version_id", "provider_id", "revision_number")
2021-09-06 18:54:54.050928 I [20327:4260] pact-broker -- (0.000058s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.051028 I [20327:4260] pact-broker -- (0.000060s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.051735 I [20327:4260] pact-broker -- (0.000647s) CREATE INDEX "cv_prov_id_ndx" ON "pact_publications" ("consumer_version_id", "provider_id", "id")
2021-09-06 18:54:54.051830 I [20327:4260] pact-broker -- (0.000062s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.052038 I [20327:4260] pact-broker -- (0.000099s) INSERT INTO "schema_migrations" ("filename") VALUES ('000026_create_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.052288 I [20327:4260] pact-broker -- (0.000207s) COMMIT
2021-09-06 18:54:54.052318 I [20327:4260] pact-broker -- Finished applying migration 000026_create_pact_publications.rb, direction: up, took 0.004419 seconds
2021-09-06 18:54:54.052325 I [20327:4260] pact-broker -- Begin applying migration 000027_populate_pact_publications.rb, direction: up
2021-09-06 18:54:54.052467 I [20327:4260] pact-broker -- (0.000119s) BEGIN
2021-09-06 18:54:54.053432 I [20327:4260] pact-broker -- (0.000936s) insert into pact_publications
        (consumer_version_id, provider_id, revision_number, pact_version_id, created_at)
      select ap.consumer_version_id, ap.provider_id, 1, pc.id, ap.updated_at
      from all_pacts ap inner join pact_versions pc
      on pc.sha = ap.pact_version_content_sha
2021-09-06 18:54:54.053594 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('000027_populate_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.053792 I [20327:4260] pact-broker -- (0.000162s) COMMIT
2021-09-06 18:54:54.053820 I [20327:4260] pact-broker -- Finished applying migration 000027_populate_pact_publications.rb, direction: up, took 0.001490 seconds
2021-09-06 18:54:54.053827 I [20327:4260] pact-broker -- Begin applying migration 000028_create_all_pact_publications.rb, direction: up
2021-09-06 18:54:54.053920 I [20327:4260] pact-broker -- (0.000072s) BEGIN
2021-09-06 18:54:54.055173 I [20327:4260] pact-broker -- (0.000932s) CREATE VIEW "all_pact_publications" AS SELECT "pact_publications"."id", "c"."id" AS "consumer_id", "c"."name" AS "consumer_name", "cv"."id" AS "consumer_version_id", "cv"."number" AS "consumer_version_number", "cv"."order" AS "consumer_version_order", "p"."id" AS "provider_id", "p"."name" AS "provider_name", "pact_publications"."revision_number", "pv"."id" AS "pact_version_id", "pv"."sha" AS "pact_version_sha", "pact_publications"."created_at" FROM "pact_publications" INNER JOIN "versions" AS "cv" ON ("cv"."id" = "pact_publications"."consumer_version_id") INNER JOIN "pacticipants" AS "c" ON ("c"."id" = "cv"."pacticipant_id") INNER JOIN "pacticipants" AS "p" ON ("p"."id" = "pact_publications"."provider_id") INNER JOIN "pact_versions" AS "pv" ON ("pv"."id" = "pact_publications"."pact_version_id")
2021-09-06 18:54:54.055635 I [20327:4260] pact-broker -- (0.000418s) CREATE VIEW "latest_pact_publication_revision_numbers" AS select provider_id, consumer_id, consumer_version_order, max(revision_number) as latest_revision_number
      from all_pact_publications
      group by provider_id, consumer_id, consumer_version_order
2021-09-06 18:54:54.056338 I [20327:4260] pact-broker -- (0.000668s) CREATE VIEW "latest_pact_publications_by_consumer_versions" AS select app.*
      from all_pact_publications app
      inner join latest_pact_publication_revision_numbers lr
      on app.consumer_id = lr.consumer_id
        and app.provider_id = lr.provider_id
        and app.consumer_version_order = lr.consumer_version_order
        and app.revision_number = lr.latest_revision_number
2021-09-06 18:54:54.056757 I [20327:4260] pact-broker -- (0.000379s) CREATE OR REPLACE VIEW "latest_pact_consumer_version_orders" AS select provider_id, consumer_id, max(consumer_version_order) as latest_consumer_version_order
      from all_pact_publications
      group by provider_id, consumer_id
2021-09-06 18:54:54.057437 I [20327:4260] pact-broker -- (0.000629s) CREATE VIEW "latest_pact_publications" AS select lpcv.*
      from latest_pact_publications_by_consumer_versions lpcv
      inner join latest_pact_consumer_version_orders lp
      on lpcv.consumer_id = lp.consumer_id
           and lpcv.provider_id = lp.provider_id
           and lpcv.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.057594 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('000028_create_all_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.057836 I [20327:4260] pact-broker -- (0.000181s) COMMIT
2021-09-06 18:54:54.057862 I [20327:4260] pact-broker -- Finished applying migration 000028_create_all_pact_publications.rb, direction: up, took 0.004032 seconds
2021-09-06 18:54:54.057869 I [20327:4260] pact-broker -- Begin applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up
2021-09-06 18:54:54.057986 I [20327:4260] pact-broker -- (0.000095s) BEGIN
2021-09-06 18:54:54.058558 I [20327:4260] pact-broker -- (0.000539s) CREATE OR REPLACE VIEW "latest_tagged_pact_consumer_version_orders" AS select provider_id, consumer_id, t.name as tag_name, max(consumer_version_order) as latest_consumer_version_order
      from latest_pact_publications_by_consumer_versions ap
      inner join tags t
      on t.version_id = ap.consumer_version_id
      group by provider_id, consumer_id, t.name
2021-09-06 18:54:54.059241 I [20327:4260] pact-broker -- (0.000648s) CREATE VIEW "latest_tagged_pact_publications" AS select lp.*, o.tag_name
      from latest_pact_publications_by_consumer_versions lp
      inner join latest_tagged_pact_consumer_version_orders o
      on lp.consumer_id = o.consumer_id
        and lp.provider_id = o.provider_id
        and lp.consumer_version_order = latest_consumer_version_order
2021-09-06 18:54:54.059377 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('000029_create_latest_tagged_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.059563 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.059587 I [20327:4260] pact-broker -- Finished applying migration 000029_create_latest_tagged_pact_publications.rb, direction: up, took 0.001714 seconds
2021-09-06 18:54:54.059594 I [20327:4260] pact-broker -- Begin applying migration 000030_drop_old_tables_and_views.rb, direction: up
2021-09-06 18:54:54.059690 I [20327:4260] pact-broker -- (0.000076s) BEGIN
2021-09-06 18:54:54.059975 I [20327:4260] pact-broker -- (0.000257s) DROP VIEW "latest_tagged_pacts"
2021-09-06 18:54:54.060223 I [20327:4260] pact-broker -- (0.000217s) DROP VIEW "latest_pacts"
2021-09-06 18:54:54.060455 I [20327:4260] pact-broker -- (0.000161s) DROP VIEW "all_pacts"
2021-09-06 18:54:54.061351 I [20327:4260] pact-broker -- (0.000859s) DROP TABLE "pacts"
2021-09-06 18:54:54.061688 I [20327:4260] pact-broker -- (0.000302s) DROP TABLE "pact_version_contents"
2021-09-06 18:54:54.061822 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('000030_drop_old_tables_and_views.rb') RETURNING "filename"
2021-09-06 18:54:54.063250 I [20327:4260] pact-broker -- (0.001396s) COMMIT
2021-09-06 18:54:54.063277 I [20327:4260] pact-broker -- Finished applying migration 000030_drop_old_tables_and_views.rb, direction: up, took 0.003680 seconds
2021-09-06 18:54:54.063284 I [20327:4260] pact-broker -- Begin applying migration 000031_create_verifications.rb, direction: up
2021-09-06 18:54:54.063401 I [20327:4260] pact-broker -- (0.000094s) BEGIN
2021-09-06 18:54:54.065962 I [20327:4260] pact-broker -- (0.002362s) CREATE TABLE "verifications" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "number" integer, "success" Boolean NOT NULL, "provider_version" text NOT NULL, "build_url" text, "pact_version_id" integer NOT NULL REFERENCES "pact_versions", "execution_date" timestamp NOT NULL, "created_at" timestamp NOT NULL)
2021-09-06 18:54:54.066074 I [20327:4260] pact-broker -- (0.000067s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.066674 I [20327:4260] pact-broker -- (0.000539s) CREATE UNIQUE INDEX "verifications_pact_version_id_number_index" ON "verifications" ("pact_version_id", "number")
2021-09-06 18:54:54.066773 I [20327:4260] pact-broker -- (0.000067s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.066941 I [20327:4260] pact-broker -- (0.000081s) INSERT INTO "schema_migrations" ("filename") VALUES ('000031_create_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.067175 I [20327:4260] pact-broker -- (0.000192s) COMMIT
2021-09-06 18:54:54.067203 I [20327:4260] pact-broker -- Finished applying migration 000031_create_verifications.rb, direction: up, took 0.003916 seconds
2021-09-06 18:54:54.067211 I [20327:4260] pact-broker -- Begin applying migration 000032_create_latest_verifications.rb, direction: up
2021-09-06 18:54:54.067356 I [20327:4260] pact-broker -- (0.000121s) BEGIN
2021-09-06 18:54:54.067786 I [20327:4260] pact-broker -- (0.000386s) CREATE VIEW "latest_verification_numbers" AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 18:54:54.068415 I [20327:4260] pact-broker -- (0.000527s) CREATE OR REPLACE VIEW "latest_verifications" AS SELECT v.id, v.number, v.success, v.provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at
        FROM verifications v
        INNER JOIN latest_verification_numbers lv ON v.pact_version_id = lv.pact_version_id AND v.number = lv.latest_number
2021-09-06 18:54:54.068561 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('000032_create_latest_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.068750 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.068774 I [20327:4260] pact-broker -- Finished applying migration 000032_create_latest_verifications.rb, direction: up, took 0.001560 seconds
2021-09-06 18:54:54.068781 I [20327:4260] pact-broker -- Begin applying migration 000033_create_config_table.rb, direction: up
2021-09-06 18:54:54.068884 I [20327:4260] pact-broker -- (0.000076s) BEGIN
2021-09-06 18:54:54.070768 I [20327:4260] pact-broker -- (0.001734s) CREATE TABLE "config" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "name" text NOT NULL, "type" text NOT NULL, "value" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)
2021-09-06 18:54:54.070862 I [20327:4260] pact-broker -- (0.000036s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.071382 I [20327:4260] pact-broker -- (0.000479s) CREATE UNIQUE INDEX "unq_config_name" ON "config" ("name")
2021-09-06 18:54:54.071452 I [20327:4260] pact-broker -- (0.000048s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.071611 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('000033_create_config_table.rb') RETURNING "filename"
2021-09-06 18:54:54.071803 I [20327:4260] pact-broker -- (0.000161s) COMMIT
2021-09-06 18:54:54.071825 I [20327:4260] pact-broker -- Finished applying migration 000033_create_config_table.rb, direction: up, took 0.003041 seconds
2021-09-06 18:54:54.071832 I [20327:4260] pact-broker -- Begin applying migration 000034_create_index_on_consumer_version_order.rb, direction: up
2021-09-06 18:54:54.071945 I [20327:4260] pact-broker -- (0.000094s) BEGIN
2021-09-06 18:54:54.072505 I [20327:4260] pact-broker -- (0.000480s) CREATE INDEX "ndx_ver_num" ON "versions" ("number")
2021-09-06 18:54:54.073009 I [20327:4260] pact-broker -- (0.000476s) CREATE INDEX "ndx_ver_ord" ON "versions" ("order")
2021-09-06 18:54:54.073610 I [20327:4260] pact-broker -- (0.000570s) CREATE UNIQUE INDEX "uq_ver_ppt_ord" ON "versions" ("pacticipant_id", "order")
2021-09-06 18:54:54.073768 I [20327:4260] pact-broker -- (0.000083s) INSERT INTO "schema_migrations" ("filename") VALUES ('000034_create_index_on_consumer_version_order.rb') RETURNING "filename"
2021-09-06 18:54:54.073965 I [20327:4260] pact-broker -- (0.000162s) COMMIT
2021-09-06 18:54:54.073993 I [20327:4260] pact-broker -- Finished applying migration 000034_create_index_on_consumer_version_order.rb, direction: up, took 0.002156 seconds
2021-09-06 18:54:54.074000 I [20327:4260] pact-broker -- Begin applying migration 000035_create_index_on_names.rb, direction: up
2021-09-06 18:54:54.074065 I [20327:4260] pact-broker -- (0.000039s) BEGIN
2021-09-06 18:54:54.074660 I [20327:4260] pact-broker -- (0.000491s) CREATE INDEX "ndx_ppt_name" ON "pacticipants" ("name")
2021-09-06 18:54:54.075157 I [20327:4260] pact-broker -- (0.000449s) CREATE INDEX "ndx_tag_name" ON "tags" ("name")
2021-09-06 18:54:54.075291 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('000035_create_index_on_names.rb') RETURNING "filename"
2021-09-06 18:54:54.075459 I [20327:4260] pact-broker -- (0.000138s) COMMIT
2021-09-06 18:54:54.075483 I [20327:4260] pact-broker -- Finished applying migration 000035_create_index_on_names.rb, direction: up, took 0.001480 seconds
2021-09-06 18:54:54.075490 I [20327:4260] pact-broker -- Begin applying migration 000036_create_webhook_execution.rb, direction: up
2021-09-06 18:54:54.075570 I [20327:4260] pact-broker -- (0.000061s) BEGIN
2021-09-06 18:54:54.078404 I [20327:4260] pact-broker -- (0.002626s) CREATE TABLE "webhook_executions" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "webhook_id" integer REFERENCES "webhooks", "pact_publication_id" integer REFERENCES "pact_publications", "consumer_id" integer NOT NULL REFERENCES "pacticipants", "provider_id" integer NOT NULL REFERENCES "pacticipants", "success" Boolean NOT NULL, "logs" text, "created_at" timestamp NOT NULL)
2021-09-06 18:54:54.078602 I [20327:4260] pact-broker -- (0.000115s) INSERT INTO "schema_migrations" ("filename") VALUES ('000036_create_webhook_execution.rb') RETURNING "filename"
2021-09-06 18:54:54.078853 I [20327:4260] pact-broker -- (0.000204s) COMMIT
2021-09-06 18:54:54.078882 I [20327:4260] pact-broker -- Finished applying migration 000036_create_webhook_execution.rb, direction: up, took 0.003388 seconds
2021-09-06 18:54:54.078890 I [20327:4260] pact-broker -- Begin applying migration 000037_create_labels_table.rb, direction: up
2021-09-06 18:54:54.079061 I [20327:4260] pact-broker -- (0.000143s) BEGIN
2021-09-06 18:54:54.081406 I [20327:4260] pact-broker -- (0.002177s) CREATE TABLE "labels" ("name" text, "pacticipant_id" integer REFERENCES "pacticipants", "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, CONSTRAINT "labels_pk" PRIMARY KEY ("pacticipant_id", "name"))
2021-09-06 18:54:54.081597 I [20327:4260] pact-broker -- (0.000093s) INSERT INTO "schema_migrations" ("filename") VALUES ('000037_create_labels_table.rb') RETURNING "filename"
2021-09-06 18:54:54.081820 I [20327:4260] pact-broker -- (0.000183s) COMMIT
2021-09-06 18:54:54.081850 I [20327:4260] pact-broker -- Finished applying migration 000037_create_labels_table.rb, direction: up, took 0.002957 seconds
2021-09-06 18:54:54.081857 I [20327:4260] pact-broker -- Begin applying migration 000038_create_triggered_webhooks_table.rb, direction: up
2021-09-06 18:54:54.081925 I [20327:4260] pact-broker -- (0.000043s) BEGIN
2021-09-06 18:54:54.084972 I [20327:4260] pact-broker -- (0.002765s) CREATE TABLE "triggered_webhooks" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "trigger_uuid" text NOT NULL, "trigger_type" text NOT NULL, "pact_publication_id" integer NOT NULL REFERENCES "pact_publications", "webhook_id" integer REFERENCES "webhooks", "webhook_uuid" text NOT NULL, "consumer_id" integer NOT NULL REFERENCES "pacticipants", "provider_id" integer NOT NULL REFERENCES "pacticipants", "status" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)
2021-09-06 18:54:54.085077 I [20327:4260] pact-broker -- (0.000054s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.085686 I [20327:4260] pact-broker -- (0.000548s) CREATE UNIQUE INDEX "uq_triggered_webhook_wi" ON "triggered_webhooks" ("webhook_id", "trigger_uuid")
2021-09-06 18:54:54.085757 I [20327:4260] pact-broker -- (0.000041s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.085831 I [20327:4260] pact-broker -- (0.000039s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.086413 I [20327:4260] pact-broker -- (0.000536s) CREATE UNIQUE INDEX "uq_triggered_webhook_ppi_wi" ON "triggered_webhooks" ("pact_publication_id", "webhook_id", "trigger_uuid")
2021-09-06 18:54:54.086488 I [20327:4260] pact-broker -- (0.000053s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.086704 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('000038_create_triggered_webhooks_table.rb') RETURNING "filename"
2021-09-06 18:54:54.086881 I [20327:4260] pact-broker -- (0.000138s) COMMIT
2021-09-06 18:54:54.086914 I [20327:4260] pact-broker -- Finished applying migration 000038_create_triggered_webhooks_table.rb, direction: up, took 0.005051 seconds
2021-09-06 18:54:54.086921 I [20327:4260] pact-broker -- Begin applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up
2021-09-06 18:54:54.087078 I [20327:4260] pact-broker -- (0.000130s) BEGIN
2021-09-06 18:54:54.087606 I [20327:4260] pact-broker -- (0.000413s) ALTER TABLE "webhook_executions" ADD COLUMN "triggered_webhook_id" integer REFERENCES "triggered_webhooks", ALTER COLUMN "webhook_id" DROP NOT NULL, ALTER COLUMN "pact_publication_id" DROP NOT NULL, ALTER COLUMN "consumer_id" DROP NOT NULL, ALTER COLUMN "provider_id" DROP NOT NULL
2021-09-06 18:54:54.087756 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('000039_add_triggered_webhooks_fk_to_execution.rb') RETURNING "filename"
2021-09-06 18:54:54.087938 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.087961 I [20327:4260] pact-broker -- Finished applying migration 000039_add_triggered_webhooks_fk_to_execution.rb, direction: up, took 0.001038 seconds
2021-09-06 18:54:54.087968 I [20327:4260] pact-broker -- Begin applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up
2021-09-06 18:54:54.088040 I [20327:4260] pact-broker -- (0.000051s) BEGIN
2021-09-06 18:54:54.088563 I [20327:4260] pact-broker -- (0.000446s) CREATE OR REPLACE VIEW "latest_triggered_webhook_ids" AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
      from triggered_webhooks
      group by webhook_uuid, consumer_id, provider_id
2021-09-06 18:54:54.089327 I [20327:4260] pact-broker -- (0.000726s) CREATE VIEW "latest_triggered_webhooks" AS select tw.*
      from triggered_webhooks tw
      inner join latest_triggered_webhook_ids ltwi
      on tw.consumer_id = ltwi.consumer_id
      and tw.provider_id = ltwi.provider_id
      and tw.webhook_uuid = ltwi.webhook_uuid
      and tw.created_at = ltwi.latest_triggered_webhook_created_at
2021-09-06 18:54:54.089467 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('000040_create_latest_triggered_webhooks_view.rb') RETURNING "filename"
2021-09-06 18:54:54.089650 I [20327:4260] pact-broker -- (0.000150s) COMMIT
2021-09-06 18:54:54.089671 I [20327:4260] pact-broker -- Finished applying migration 000040_create_latest_triggered_webhooks_view.rb, direction: up, took 0.001701 seconds
2021-09-06 18:54:54.089677 I [20327:4260] pact-broker -- Begin applying migration 000041_migrate_execution_data.rb, direction: up
2021-09-06 18:54:54.089791 I [20327:4260] pact-broker -- (0.000095s) BEGIN
2021-09-06 18:54:54.090019 I [20327:4260] pact-broker -- (0.000170s) SELECT * FROM "webhook_executions"
2021-09-06 18:54:54.090150 I [20327:4260] pact-broker -- (0.000062s) INSERT INTO "schema_migrations" ("filename") VALUES ('000041_migrate_execution_data.rb') RETURNING "filename"
2021-09-06 18:54:54.090320 I [20327:4260] pact-broker -- (0.000143s) COMMIT
2021-09-06 18:54:54.090340 I [20327:4260] pact-broker -- Finished applying migration 000041_migrate_execution_data.rb, direction: up, took 0.000660 seconds
2021-09-06 18:54:54.090347 I [20327:4260] pact-broker -- Begin applying migration 000042_delete_orphan_webhook_data.rb, direction: up
2021-09-06 18:54:54.090441 I [20327:4260] pact-broker -- (0.000051s) BEGIN
2021-09-06 18:54:54.090814 I [20327:4260] pact-broker -- (0.000252s) SELECT * FROM "triggered_webhooks" WHERE ("webhook_id" IS NULL)
2021-09-06 18:54:54.090977 I [20327:4260] pact-broker -- (0.000070s) DELETE FROM "webhook_executions" WHERE (("webhook_id" IS NULL) AND ("triggered_webhook_id" IS NULL))
2021-09-06 18:54:54.091106 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('000042_delete_orphan_webhook_data.rb') RETURNING "filename"
2021-09-06 18:54:54.091278 I [20327:4260] pact-broker -- (0.000146s) COMMIT
2021-09-06 18:54:54.091299 I [20327:4260] pact-broker -- Finished applying migration 000042_delete_orphan_webhook_data.rb, direction: up, took 0.000950 seconds
2021-09-06 18:54:54.091306 I [20327:4260] pact-broker -- Begin applying migration 000043_add_provider_version_to_verification.rb, direction: up
2021-09-06 18:54:54.091439 I [20327:4260] pact-broker -- (0.000108s) BEGIN
2021-09-06 18:54:54.091891 I [20327:4260] pact-broker -- (0.000367s) ALTER TABLE "verifications" ADD COLUMN "provider_version_id" integer CONSTRAINT "fk_verifications_versions" REFERENCES "versions"
2021-09-06 18:54:54.092032 I [20327:4260] pact-broker -- (0.000074s) INSERT INTO "schema_migrations" ("filename") VALUES ('000043_add_provider_version_to_verification.rb') RETURNING "filename"
2021-09-06 18:54:54.092213 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.092239 I [20327:4260] pact-broker -- Finished applying migration 000043_add_provider_version_to_verification.rb, direction: up, took 0.000930 seconds
2021-09-06 18:54:54.092245 I [20327:4260] pact-broker -- Begin applying migration 000044_populate_verifications_provider_version_id.rb, direction: up
2021-09-06 18:54:54.092346 I [20327:4260] pact-broker -- (0.000078s) BEGIN
2021-09-06 18:54:54.092860 I [20327:4260] pact-broker -- (0.000342s) SELECT "verifications"."id", "provider_version", "provider_id", "verifications"."created_at" FROM "verifications" INNER JOIN "pact_versions" ON ("pact_versions"."id" = "verifications"."pact_version_id")
2021-09-06 18:54:54.092999 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('000044_populate_verifications_provider_version_id.rb') RETURNING "filename"
2021-09-06 18:54:54.093174 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.093198 I [20327:4260] pact-broker -- Finished applying migration 000044_populate_verifications_provider_version_id.rb, direction: up, took 0.000949 seconds
2021-09-06 18:54:54.093205 I [20327:4260] pact-broker -- Begin applying migration 000045_set_verification_provider_number_nullable.rb, direction: up
2021-09-06 18:54:54.093290 I [20327:4260] pact-broker -- (0.000061s) BEGIN
2021-09-06 18:54:54.093442 I [20327:4260] pact-broker -- (0.000095s) ALTER TABLE "verifications" ALTER COLUMN "provider_version" DROP NOT NULL
2021-09-06 18:54:54.093571 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('000045_set_verification_provider_number_nullable.rb') RETURNING "filename"
2021-09-06 18:54:54.093764 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.093789 I [20327:4260] pact-broker -- Finished applying migration 000045_set_verification_provider_number_nullable.rb, direction: up, took 0.000581 seconds
2021-09-06 18:54:54.093796 I [20327:4260] pact-broker -- Begin applying migration 000046_recreate_latest_verifications.rb, direction: up
2021-09-06 18:54:54.093945 I [20327:4260] pact-broker -- (0.000067s) BEGIN
2021-09-06 18:54:54.094327 I [20327:4260] pact-broker -- (0.000339s) CREATE OR REPLACE VIEW "latest_verification_numbers" AS SELECT pact_version_id, MAX(number) latest_number
          FROM verifications
          GROUP BY pact_version_id
2021-09-06 18:54:54.095276 I [20327:4260] pact-broker -- (0.000900s) CREATE OR REPLACE VIEW "latest_verifications" AS SELECT v.id, v.number, v.success, s.number as provider_version, v.build_url, v.pact_version_id, v.execution_date, v.created_at, v.provider_version_id, s.number as provider_version_number
        FROM verifications v
        INNER JOIN latest_verification_numbers lv
          ON v.pact_version_id = lv.pact_version_id
          AND v.number = lv.latest_number
        INNER JOIN versions s on v.provider_version_id = s.id
2021-09-06 18:54:54.095430 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('000046_recreate_latest_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.095619 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.095642 I [20327:4260] pact-broker -- Finished applying migration 000046_recreate_latest_verifications.rb, direction: up, took 0.001843 seconds
2021-09-06 18:54:54.095649 I [20327:4260] pact-broker -- Begin applying migration 000047_create_all_verifications.rb, direction: up
2021-09-06 18:54:54.095742 I [20327:4260] pact-broker -- (0.000069s) BEGIN
2021-09-06 18:54:54.096512 I [20327:4260] pact-broker -- (0.000609s) CREATE OR REPLACE VIEW "all_verifications" AS SELECT "verifications"."id", "verifications"."number", "success", "provider_version_id", "v"."number" AS "provider_version_number", "v"."order" AS "provider_version_order", "build_url", "pact_version_id", "execution_date", "verifications"."created_at" FROM "verifications" INNER JOIN "versions" AS "v" ON ("v"."id" = "verifications"."provider_version_id")
2021-09-06 18:54:54.096688 I [20327:4260] pact-broker -- (0.000105s) INSERT INTO "schema_migrations" ("filename") VALUES ('000047_create_all_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.096881 I [20327:4260] pact-broker -- (0.000162s) COMMIT
2021-09-06 18:54:54.096904 I [20327:4260] pact-broker -- Finished applying migration 000047_create_all_verifications.rb, direction: up, took 0.001252 seconds
2021-09-06 18:54:54.096910 I [20327:4260] pact-broker -- Begin applying migration 000048_create_matrix.rb, direction: up
2021-09-06 18:54:54.097012 I [20327:4260] pact-broker -- (0.000082s) BEGIN
2021-09-06 18:54:54.098367 I [20327:4260] pact-broker -- (0.001117s) CREATE VIEW "matrix" AS SELECT "all_pact_publications"."consumer_id", "all_pact_publications"."consumer_name", "all_pact_publications"."consumer_version_id", "all_pact_publications"."consumer_version_number", "all_pact_publications"."consumer_version_order", "all_pact_publications"."id" AS "pact_publication_id", "all_pact_publications"."pact_version_id", "all_pact_publications"."pact_version_sha", "all_pact_publications"."revision_number" AS "pact_revision_number", "all_pact_publications"."created_at" AS "pact_created_at", "all_pact_publications"."provider_id", "all_pact_publications"."provider_name", "versions"."id" AS "provider_version_id", "versions"."number" AS "provider_version_number", "versions"."order" AS "provider_version_order", "verifications"."id" AS "verification_id", "verifications"."success", "verifications"."number" AS "verification_number", "verifications"."execution_date" AS "verification_executed_at", "verifications"."build_url" AS "verification_build_url" FROM "all_pact_publications" LEFT OUTER JOIN "verifications" ON ("verifications"."pact_version_id" = "all_pact_publications"."pact_version_id") LEFT OUTER JOIN "versions" ON ("versions"."id" = "verifications"."provider_version_id")
2021-09-06 18:54:54.098534 I [20327:4260] pact-broker -- (0.000094s) INSERT INTO "schema_migrations" ("filename") VALUES ('000048_create_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.098757 I [20327:4260] pact-broker -- (0.000186s) COMMIT
2021-09-06 18:54:54.098785 I [20327:4260] pact-broker -- Finished applying migration 000048_create_matrix.rb, direction: up, took 0.001871 seconds
2021-09-06 18:54:54.098792 I [20327:4260] pact-broker -- Begin applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up
2021-09-06 18:54:54.098899 I [20327:4260] pact-broker -- (0.000079s) BEGIN
2021-09-06 18:54:54.099790 I [20327:4260] pact-broker -- (0.000845s) CREATE VIEW "latest_verification_id_for_consumer_version_and_provider_version" AS select consumer_version_id, provider_version_id, max(verification_id) as latest_verification_id
      from matrix
      inner join latest_pact_publication_revision_numbers lr
        on matrix.consumer_id = lr.consumer_id
        and matrix.provider_id = lr.provider_id
        and matrix.consumer_version_order = lr.consumer_version_order
        and matrix.pact_revision_number = lr.latest_revision_number
        group by consumer_version_id, provider_version_id
2021-09-06 18:54:54.099949 I [20327:4260] pact-broker -- (0.000079s) INSERT INTO "schema_migrations" ("filename") VALUES ('000049_create_latest_verifications_for_cv_and_pv.rb') RETURNING "filename"
2021-09-06 18:54:54.100136 I [20327:4260] pact-broker -- (0.000156s) COMMIT
2021-09-06 18:54:54.100158 I [20327:4260] pact-broker -- Finished applying migration 000049_create_latest_verifications_for_cv_and_pv.rb, direction: up, took 0.001363 seconds
2021-09-06 18:54:54.100165 I [20327:4260] pact-broker -- Begin applying migration 000050_create_latest_matrix.rb, direction: up
2021-09-06 18:54:54.100260 I [20327:4260] pact-broker -- (0.000052s) BEGIN
2021-09-06 18:54:54.101805 I [20327:4260] pact-broker -- (0.001513s) CREATE VIEW "latest_matrix" AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 18:54:54.101936 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('000050_create_latest_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.102120 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.102140 I [20327:4260] pact-broker -- Finished applying migration 000050_create_latest_matrix.rb, direction: up, took 0.001973 seconds
2021-09-06 18:54:54.102147 I [20327:4260] pact-broker -- Begin applying migration 20171112_add_test_results.rb, direction: up
2021-09-06 18:54:54.102232 I [20327:4260] pact-broker -- (0.000066s) BEGIN
2021-09-06 18:54:54.102427 I [20327:4260] pact-broker -- (0.000123s) ALTER TABLE "verifications" ADD COLUMN "test_results" text
2021-09-06 18:54:54.102552 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('20171112_add_test_results.rb') RETURNING "filename"
2021-09-06 18:54:54.102740 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.102770 I [20327:4260] pact-broker -- Finished applying migration 20171112_add_test_results.rb, direction: up, took 0.000619 seconds
2021-09-06 18:54:54.102777 I [20327:4260] pact-broker -- Begin applying migration 20171117_create_webhook_events.rb, direction: up
2021-09-06 18:54:54.102860 I [20327:4260] pact-broker -- (0.000060s) BEGIN
2021-09-06 18:54:54.105091 I [20327:4260] pact-broker -- (0.002091s) CREATE TABLE "webhook_events" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "webhook_id" integer REFERENCES "webhooks" ON DELETE CASCADE, "name" text, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)
2021-09-06 18:54:54.105166 I [20327:4260] pact-broker -- (0.000041s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.105757 I [20327:4260] pact-broker -- (0.000549s) CREATE UNIQUE INDEX "uq_webhook_id_name" ON "webhook_events" ("id", "name")
2021-09-06 18:54:54.105842 I [20327:4260] pact-broker -- (0.000054s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.105984 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20171117_create_webhook_events.rb') RETURNING "filename"
2021-09-06 18:54:54.106192 I [20327:4260] pact-broker -- (0.000177s) COMMIT
2021-09-06 18:54:54.106216 I [20327:4260] pact-broker -- Finished applying migration 20171117_create_webhook_events.rb, direction: up, took 0.003436 seconds
2021-09-06 18:54:54.106227 I [20327:4260] pact-broker -- Begin applying migration 20171118_create_webhook_events.rb, direction: up
2021-09-06 18:54:54.106359 I [20327:4260] pact-broker -- (0.000111s) BEGIN
2021-09-06 18:54:54.106629 I [20327:4260] pact-broker -- (0.000209s) SELECT * FROM "webhooks"
2021-09-06 18:54:54.106827 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20171118_create_webhook_events.rb') RETURNING "filename"
2021-09-06 18:54:54.106998 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.107021 I [20327:4260] pact-broker -- Finished applying migration 20171118_create_webhook_events.rb, direction: up, took 0.000792 seconds
2021-09-06 18:54:54.107028 I [20327:4260] pact-broker -- Begin applying migration 20180108_create_certificates_table.rb, direction: up
2021-09-06 18:54:54.107105 I [20327:4260] pact-broker -- (0.000058s) BEGIN
2021-09-06 18:54:54.109688 I [20327:4260] pact-broker -- (0.002442s) CREATE TABLE "certificates" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "uuid" text NOT NULL CONSTRAINT "uq_certificate_uuid" UNIQUE, "description" text NULL, "content" text NOT NULL, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL)
2021-09-06 18:54:54.109832 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180108_create_certificates_table.rb') RETURNING "filename"
2021-09-06 18:54:54.110098 I [20327:4260] pact-broker -- (0.000233s) COMMIT
2021-09-06 18:54:54.110121 I [20327:4260] pact-broker -- Finished applying migration 20180108_create_certificates_table.rb, direction: up, took 0.003090 seconds
2021-09-06 18:54:54.110128 I [20327:4260] pact-broker -- Begin applying migration 20180109_migrate_trigger_type.rb, direction: up
2021-09-06 18:54:54.110248 I [20327:4260] pact-broker -- (0.000100s) BEGIN
2021-09-06 18:54:54.110438 I [20327:4260] pact-broker -- (0.000095s) UPDATE "triggered_webhooks" SET "trigger_type" = 'resource_creation' WHERE ("trigger_type" = 'pact_publication')
2021-09-06 18:54:54.110562 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180109_migrate_trigger_type.rb') RETURNING "filename"
2021-09-06 18:54:54.110679 I [20327:4260] pact-broker -- (0.000089s) COMMIT
2021-09-06 18:54:54.110701 I [20327:4260] pact-broker -- Finished applying migration 20180109_migrate_trigger_type.rb, direction: up, took 0.000570 seconds
2021-09-06 18:54:54.110707 I [20327:4260] pact-broker -- Begin applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 18:54:54.110796 I [20327:4260] pact-broker -- (0.000064s) BEGIN
2021-09-06 18:54:54.111251 I [20327:4260] pact-broker -- (0.000409s) CREATE OR REPLACE VIEW "latest_triggered_webhook_creation_dates" AS select webhook_uuid, consumer_id, provider_id, max(created_at) as latest_triggered_webhook_created_at
  from triggered_webhooks
  group by webhook_uuid, consumer_id, provider_id
2021-09-06 18:54:54.111926 I [20327:4260] pact-broker -- (0.000628s) CREATE OR REPLACE VIEW "latest_triggered_webhook_ids" AS select tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at, max(tw.id) as latest_triggered_webhook_id
  from latest_triggered_webhook_creation_dates ltwcd
  inner join triggered_webhooks tw
  on tw.consumer_id = ltwcd.consumer_id
  and tw.provider_id = ltwcd.provider_id
  and tw.webhook_uuid = ltwcd.webhook_uuid
  and tw.created_at = ltwcd.latest_triggered_webhook_created_at
  group by tw.webhook_uuid, tw.consumer_id, tw.provider_id, ltwcd.latest_triggered_webhook_created_at
2021-09-06 18:54:54.112535 I [20327:4260] pact-broker -- (0.000566s) CREATE OR REPLACE VIEW "latest_triggered_webhooks" AS select tw.*
  from triggered_webhooks tw
  inner join latest_triggered_webhook_ids ltwi
  on tw.consumer_id = ltwi.consumer_id
  and tw.provider_id = ltwi.provider_id
  and tw.webhook_uuid = ltwi.webhook_uuid
  and tw.id = ltwi.latest_triggered_webhook_id
2021-09-06 18:54:54.112696 I [20327:4260] pact-broker -- (0.000087s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180119_update_latest_triggered_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.112885 I [20327:4260] pact-broker -- (0.000160s) COMMIT
2021-09-06 18:54:54.112909 I [20327:4260] pact-broker -- Finished applying migration 20180119_update_latest_triggered_webhooks.rb, direction: up, took 0.002198 seconds
2021-09-06 18:54:54.112916 I [20327:4260] pact-broker -- Begin applying migration 20180122_create_head_pact_publications.rb, direction: up
2021-09-06 18:54:54.113021 I [20327:4260] pact-broker -- (0.000080s) BEGIN
2021-09-06 18:54:54.114155 I [20327:4260] pact-broker -- (0.001103s) CREATE VIEW "head_pact_publications" AS select lp.*, null as tag_name, 1 as latest
      from latest_pact_publications lp

      UNION

      select ltp.*, null as latest
      from latest_tagged_pact_publications ltp
      
2021-09-06 18:54:54.114305 I [20327:4260] pact-broker -- (0.000078s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180122_create_head_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.114538 I [20327:4260] pact-broker -- (0.000195s) COMMIT
2021-09-06 18:54:54.114567 I [20327:4260] pact-broker -- Finished applying migration 20180122_create_head_pact_publications.rb, direction: up, took 0.001648 seconds
2021-09-06 18:54:54.114574 I [20327:4260] pact-broker -- Begin applying migration 20180123_create_tags_with_latest_flag.rb, direction: up
2021-09-06 18:54:54.114711 I [20327:4260] pact-broker -- (0.000085s) BEGIN
2021-09-06 18:54:54.115246 I [20327:4260] pact-broker -- (0.000492s) CREATE VIEW "latest_tagged_version_orders" AS 
        select v.pacticipant_id, t.name as tag_name, max(v.order) as latest_version_order, 1 as latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        group by v.pacticipant_id, t.name
      
2021-09-06 18:54:54.115929 I [20327:4260] pact-broker -- (0.000640s) CREATE VIEW "tags_with_latest_flag" AS 
        select t.*, ltvo.latest
        from tags t
        inner join versions v
        on v.id = t.version_id
        left outer join latest_tagged_version_orders ltvo
        on t.name = ltvo.tag_name
        and v.pacticipant_id = ltvo.pacticipant_id
        and v.order = ltvo.latest_version_order
      
2021-09-06 18:54:54.116097 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180123_create_tags_with_latest_flag.rb') RETURNING "filename"
2021-09-06 18:54:54.116300 I [20327:4260] pact-broker -- (0.000162s) COMMIT
2021-09-06 18:54:54.116329 I [20327:4260] pact-broker -- Finished applying migration 20180123_create_tags_with_latest_flag.rb, direction: up, took 0.001750 seconds
2021-09-06 18:54:54.116336 I [20327:4260] pact-broker -- Begin applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 18:54:54.116420 I [20327:4260] pact-broker -- (0.000062s) BEGIN
2021-09-06 18:54:54.117888 I [20327:4260] pact-broker -- (0.001433s) CREATE VIEW "latest_matrix_for_consumer_version_and_provider_version" AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 18:54:54.118325 I [20327:4260] pact-broker -- (0.000402s) CREATE VIEW "latest_verification_id_for_consumer_version_and_provider" AS select matrix.consumer_version_id, matrix.provider_id, max(verification_id) as latest_verification_id
      from latest_matrix_for_consumer_version_and_provider_version matrix
      where matrix.verification_id is not null
      group by matrix.consumer_version_id, matrix.provider_id
      
2021-09-06 18:54:54.120221 I [20327:4260] pact-broker -- (0.001858s) CREATE OR REPLACE VIEW "latest_matrix" AS SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_id = lv.provider_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      SELECT matrix.* FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN latest_pact_consumer_version_orders lpcvo
      ON matrix.consumer_id = lpcvo.consumer_id
      AND matrix.provider_id = lpcvo.provider_id
      AND matrix.consumer_version_order = lpcvo.latest_consumer_version_order
      where verification_id is null
      
2021-09-06 18:54:54.120388 I [20327:4260] pact-broker -- (0.000083s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180129_create_latest_matrix_for_cv_and_pv.rb') RETURNING "filename"
2021-09-06 18:54:54.120608 I [20327:4260] pact-broker -- (0.000185s) COMMIT
2021-09-06 18:54:54.120633 I [20327:4260] pact-broker -- Finished applying migration 20180129_create_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.004295 seconds
2021-09-06 18:54:54.120640 I [20327:4260] pact-broker -- Begin applying migration 20180130_create_materialized_matrix.rb, direction: up
2021-09-06 18:54:54.120749 I [20327:4260] pact-broker -- (0.000088s) BEGIN
2021-09-06 18:54:54.122280 I [20327:4260] pact-broker -- (0.001169s) CREATE TABLE "materialized_matrix" ("consumer_id" integer NOT NULL, "consumer_name" text NOT NULL, "consumer_version_id" integer NOT NULL, "consumer_version_number" text NOT NULL, "consumer_version_order" integer NOT NULL, "pact_publication_id" integer NOT NULL, "pact_version_id" integer NOT NULL, "pact_version_sha" text NOT NULL, "pact_revision_number" integer NOT NULL, "pact_created_at" timestamp NOT NULL, "provider_id" integer NOT NULL, "provider_name" text NOT NULL, "provider_version_id" integer, "provider_version_number" text, "provider_version_order" integer, "verification_id" integer, "success" Boolean, "verification_number" integer, "verification_executed_at" timestamp, "verification_build_url" text)
2021-09-06 18:54:54.122400 I [20327:4260] pact-broker -- (0.000075s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.123169 I [20327:4260] pact-broker -- (0.000711s) CREATE INDEX "ndx_mm_consumer_id" ON "materialized_matrix" ("consumer_id")
2021-09-06 18:54:54.123242 I [20327:4260] pact-broker -- (0.000044s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.123327 I [20327:4260] pact-broker -- (0.000050s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.123935 I [20327:4260] pact-broker -- (0.000560s) CREATE INDEX "ndx_mm_provider_id" ON "materialized_matrix" ("provider_id")
2021-09-06 18:54:54.124010 I [20327:4260] pact-broker -- (0.000044s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.124119 I [20327:4260] pact-broker -- (0.000074s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.124689 I [20327:4260] pact-broker -- (0.000522s) CREATE INDEX "ndx_mm_cv_ord" ON "materialized_matrix" ("consumer_version_order")
2021-09-06 18:54:54.124781 I [20327:4260] pact-broker -- (0.000049s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.125238 I [20327:4260] pact-broker -- (0.000340s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"materialized_matrix"' AS regclass) AS oid)
2021-09-06 18:54:54.126632 I [20327:4260] pact-broker -- (0.001275s) INSERT INTO "materialized_matrix" SELECT * FROM "matrix" RETURNING NULL
2021-09-06 18:54:54.126801 I [20327:4260] pact-broker -- (0.000079s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180130_create_materialized_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.127005 I [20327:4260] pact-broker -- (0.000172s) COMMIT
2021-09-06 18:54:54.127030 I [20327:4260] pact-broker -- Finished applying migration 20180130_create_materialized_matrix.rb, direction: up, took 0.006387 seconds
2021-09-06 18:54:54.127037 I [20327:4260] pact-broker -- Begin applying migration 20180131_create_materialized_latest_matrix.rb, direction: up
2021-09-06 18:54:54.127101 I [20327:4260] pact-broker -- (0.000044s) BEGIN
2021-09-06 18:54:54.128677 I [20327:4260] pact-broker -- (0.001303s) CREATE TABLE "materialized_latest_matrix" ("consumer_id" integer NOT NULL, "consumer_name" text NOT NULL, "consumer_version_id" integer NOT NULL, "consumer_version_number" text NOT NULL, "consumer_version_order" integer NOT NULL, "pact_publication_id" integer NOT NULL, "pact_version_id" integer NOT NULL, "pact_version_sha" text NOT NULL, "pact_revision_number" integer NOT NULL, "pact_created_at" timestamp NOT NULL, "provider_id" integer NOT NULL, "provider_name" text NOT NULL, "provider_version_id" integer, "provider_version_number" text, "provider_version_order" integer, "verification_id" integer, "success" Boolean, "verification_number" integer, "verification_executed_at" timestamp, "verification_build_url" text)
2021-09-06 18:54:54.128838 I [20327:4260] pact-broker -- (0.000072s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.129474 I [20327:4260] pact-broker -- (0.000585s) CREATE INDEX "ndx_mlm_consumer_id" ON "materialized_latest_matrix" ("consumer_id")
2021-09-06 18:54:54.129568 I [20327:4260] pact-broker -- (0.000061s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.129663 I [20327:4260] pact-broker -- (0.000049s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.130428 I [20327:4260] pact-broker -- (0.000719s) CREATE INDEX "ndx_mlm_provider_id" ON "materialized_latest_matrix" ("provider_id")
2021-09-06 18:54:54.130589 I [20327:4260] pact-broker -- (0.000125s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.130712 I [20327:4260] pact-broker -- (0.000067s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.131254 I [20327:4260] pact-broker -- (0.000493s) CREATE INDEX "ndx_mlm_cv_ord" ON "materialized_latest_matrix" ("consumer_version_order")
2021-09-06 18:54:54.131357 I [20327:4260] pact-broker -- (0.000070s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.131877 I [20327:4260] pact-broker -- (0.000386s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"materialized_latest_matrix"' AS regclass) AS oid)
2021-09-06 18:54:54.170634 I [20327:4260] pact-broker -- (0.038633s) INSERT INTO "materialized_latest_matrix" SELECT * FROM "latest_matrix" RETURNING NULL
2021-09-06 18:54:54.170983 I [20327:4260] pact-broker -- (0.000200s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180131_create_materialized_latest_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.171295 I [20327:4260] pact-broker -- (0.000260s) COMMIT
2021-09-06 18:54:54.171332 I [20327:4260] pact-broker -- Finished applying migration 20180131_create_materialized_latest_matrix.rb, direction: up, took 0.044289 seconds
2021-09-06 18:54:54.171340 I [20327:4260] pact-broker -- Begin applying migration 20180201_create_head_matrix.rb, direction: up
2021-09-06 18:54:54.171474 I [20327:4260] pact-broker -- (0.000101s) BEGIN
2021-09-06 18:54:54.173643 I [20327:4260] pact-broker -- (0.002112s) CREATE VIEW "head_matrix" AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 18:54:54.173850 I [20327:4260] pact-broker -- (0.000115s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180201_create_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.174178 I [20327:4260] pact-broker -- (0.000276s) COMMIT
2021-09-06 18:54:54.174213 I [20327:4260] pact-broker -- Finished applying migration 20180201_create_head_matrix.rb, direction: up, took 0.002869 seconds
2021-09-06 18:54:54.174220 I [20327:4260] pact-broker -- Begin applying migration 20180202_create_materialized_head_matrix.rb, direction: up
2021-09-06 18:54:54.174370 I [20327:4260] pact-broker -- (0.000120s) BEGIN
2021-09-06 18:54:54.175912 I [20327:4260] pact-broker -- (0.001233s) CREATE TABLE "materialized_head_matrix" ("consumer_id" integer NOT NULL, "consumer_name" text NOT NULL, "consumer_version_id" integer NOT NULL, "consumer_version_number" text NOT NULL, "consumer_version_order" integer NOT NULL, "pact_publication_id" integer NOT NULL, "pact_version_id" integer NOT NULL, "pact_version_sha" text NOT NULL, "pact_revision_number" integer NOT NULL, "pact_created_at" timestamp NOT NULL, "provider_id" integer NOT NULL, "provider_name" text NOT NULL, "provider_version_id" integer, "provider_version_number" text, "provider_version_order" integer, "verification_id" integer, "success" Boolean, "verification_number" integer, "verification_executed_at" timestamp, "verification_build_url" text, "consumer_tag_name" text)
2021-09-06 18:54:54.176019 I [20327:4260] pact-broker -- (0.000069s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.176696 I [20327:4260] pact-broker -- (0.000634s) CREATE INDEX "ndx_mhm_consumer_id" ON "materialized_head_matrix" ("consumer_id")
2021-09-06 18:54:54.176770 I [20327:4260] pact-broker -- (0.000047s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.176885 I [20327:4260] pact-broker -- (0.000072s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.177546 I [20327:4260] pact-broker -- (0.000616s) CREATE INDEX "ndx_mhm_provider_id" ON "materialized_head_matrix" ("provider_id")
2021-09-06 18:54:54.177624 I [20327:4260] pact-broker -- (0.000041s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.177714 I [20327:4260] pact-broker -- (0.000046s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.178277 I [20327:4260] pact-broker -- (0.000519s) CREATE INDEX "ndx_mhm_cv_ord" ON "materialized_head_matrix" ("consumer_version_order")
2021-09-06 18:54:54.178360 I [20327:4260] pact-broker -- (0.000033s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.178514 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180202_create_materialized_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.178745 I [20327:4260] pact-broker -- (0.000191s) COMMIT
2021-09-06 18:54:54.178774 I [20327:4260] pact-broker -- Finished applying migration 20180202_create_materialized_head_matrix.rb, direction: up, took 0.004550 seconds
2021-09-06 18:54:54.178781 I [20327:4260] pact-broker -- Begin applying migration 20180203_fix_head_matrix.rb, direction: up
2021-09-06 18:54:54.178911 I [20327:4260] pact-broker -- (0.000106s) BEGIN
2021-09-06 18:54:54.180988 I [20327:4260] pact-broker -- (0.002031s) CREATE OR REPLACE VIEW "head_matrix" AS SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      AND matrix.pact_revision_number = hpp.revision_number
      where verification_id is null
      
2021-09-06 18:54:54.181188 I [20327:4260] pact-broker -- (0.000109s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180203_fix_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.181374 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.181397 I [20327:4260] pact-broker -- Finished applying migration 20180203_fix_head_matrix.rb, direction: up, took 0.002613 seconds
2021-09-06 18:54:54.181404 I [20327:4260] pact-broker -- Begin applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up
2021-09-06 18:54:54.181589 I [20327:4260] pact-broker -- (0.000161s) BEGIN
2021-09-06 18:54:54.183257 I [20327:4260] pact-broker -- (0.001601s) CREATE OR REPLACE VIEW "latest_matrix_for_consumer_version_and_provider_version" AS 
      SELECT matrix.* FROM matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 18:54:54.183512 I [20327:4260] pact-broker -- (0.000125s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180204_fix_latest_matrix_for_cv_and_pv.rb') RETURNING "filename"
2021-09-06 18:54:54.183727 I [20327:4260] pact-broker -- (0.000175s) COMMIT
2021-09-06 18:54:54.183754 I [20327:4260] pact-broker -- Finished applying migration 20180204_fix_latest_matrix_for_cv_and_pv.rb, direction: up, took 0.002347 seconds
2021-09-06 18:54:54.183765 I [20327:4260] pact-broker -- Begin applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up
2021-09-06 18:54:54.183865 I [20327:4260] pact-broker -- (0.000053s) BEGIN
2021-09-06 18:54:54.184346 I [20327:4260] pact-broker -- (0.000449s) DROP TABLE "materialized_latest_matrix"
2021-09-06 18:54:54.184480 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180205_drop_materialized_latest_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.185386 I [20327:4260] pact-broker -- (0.000812s) COMMIT
2021-09-06 18:54:54.185419 I [20327:4260] pact-broker -- Finished applying migration 20180205_drop_materialized_latest_matrix.rb, direction: up, took 0.001649 seconds
2021-09-06 18:54:54.185427 I [20327:4260] pact-broker -- Begin applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up
2021-09-06 18:54:54.185541 I [20327:4260] pact-broker -- (0.000087s) BEGIN
2021-09-06 18:54:54.186056 I [20327:4260] pact-broker -- (0.000476s) DROP VIEW "head_matrix"
2021-09-06 18:54:54.187989 I [20327:4260] pact-broker -- (0.001887s) CREATE VIEW "head_matrix" AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 18:54:54.188147 I [20327:4260] pact-broker -- (0.000092s) ALTER TABLE "materialized_head_matrix" RENAME COLUMN "consumer_tag_name" TO "consumer_version_tag_name"
2021-09-06 18:54:54.188295 I [20327:4260] pact-broker -- (0.000072s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180206_recreate_head_matrix_rename_consumer_tag_name.rb') RETURNING "filename"
2021-09-06 18:54:54.188498 I [20327:4260] pact-broker -- (0.000171s) COMMIT
2021-09-06 18:54:54.188521 I [20327:4260] pact-broker -- Finished applying migration 20180206_recreate_head_matrix_rename_consumer_tag_name.rb, direction: up, took 0.003092 seconds
2021-09-06 18:54:54.188528 I [20327:4260] pact-broker -- Begin applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up
2021-09-06 18:54:54.188608 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.189057 I [20327:4260] pact-broker -- (0.000423s) DROP VIEW "head_matrix"
2021-09-06 18:54:54.190751 I [20327:4260] pact-broker -- (0.001612s) CREATE VIEW "head_matrix" AS SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      INNER JOIN latest_verification_id_for_consumer_version_and_provider AS lv
      ON matrix.consumer_version_id = lv.consumer_version_id
      AND matrix.provider_id = lv.provider_id
      AND matrix.verification_id = lv.latest_verification_id

      UNION ALL

      SELECT matrix.*, hpp.tag_name as consumer_version_tag_name
      FROM latest_matrix_for_consumer_version_and_provider_version matrix
      INNER JOIN head_pact_publications hpp
      ON matrix.consumer_id = hpp.consumer_id
      AND matrix.provider_id = hpp.provider_id
      AND matrix.consumer_version_order = hpp.consumer_version_order
      where verification_id is null
      
2021-09-06 18:54:54.190892 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180207_recreate_head_matrix_union_all.rb') RETURNING "filename"
2021-09-06 18:54:54.191101 I [20327:4260] pact-broker -- (0.000170s) COMMIT
2021-09-06 18:54:54.191133 I [20327:4260] pact-broker -- Finished applying migration 20180207_recreate_head_matrix_union_all.rb, direction: up, took 0.002601 seconds
2021-09-06 18:54:54.191140 I [20327:4260] pact-broker -- Begin applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up
2021-09-06 18:54:54.191239 I [20327:4260] pact-broker -- (0.000074s) BEGIN
2021-09-06 18:54:54.191864 I [20327:4260] pact-broker -- (0.000552s) CREATE INDEX "materialized_head_matrix_consumer_version_tag_name_index" ON "materialized_head_matrix" ("consumer_version_tag_name")
2021-09-06 18:54:54.192012 I [20327:4260] pact-broker -- (0.000071s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180208_add_cv_tag_name_index_to_mat_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.192182 I [20327:4260] pact-broker -- (0.000138s) COMMIT
2021-09-06 18:54:54.192205 I [20327:4260] pact-broker -- Finished applying migration 20180208_add_cv_tag_name_index_to_mat_head_matrix.rb, direction: up, took 0.001063 seconds
2021-09-06 18:54:54.192212 I [20327:4260] pact-broker -- Begin applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up
2021-09-06 18:54:54.192293 I [20327:4260] pact-broker -- (0.000060s) BEGIN
2021-09-06 18:54:54.193695 I [20327:4260] pact-broker -- (0.001366s) CREATE OR REPLACE VIEW "latest_matrix_for_consumer_version_and_provider_version" AS SELECT matrix.* FROM matrix
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 18:54:54.193830 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb') RETURNING "filename"
2021-09-06 18:54:54.194006 I [20327:4260] pact-broker -- (0.000148s) COMMIT
2021-09-06 18:54:54.194027 I [20327:4260] pact-broker -- Finished applying migration 20180209_recreate_latest_matrix_for_cv_and_pv_union_all.rb, direction: up, took 0.001812 seconds
2021-09-06 18:54:54.194033 I [20327:4260] pact-broker -- Begin applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up
2021-09-06 18:54:54.194116 I [20327:4260] pact-broker -- (0.000061s) BEGIN
2021-09-06 18:54:54.194678 I [20327:4260] pact-broker -- (0.000491s) CREATE INDEX "ndx_mm_verif_id" ON "materialized_matrix" ("verification_id")
2021-09-06 18:54:54.195176 I [20327:4260] pact-broker -- (0.000471s) CREATE INDEX "ndx_mm_pact_rev_num" ON "materialized_matrix" ("pact_revision_number")
2021-09-06 18:54:54.196854 I [20327:4260] pact-broker -- (0.001638s) CREATE OR REPLACE VIEW "latest_matrix_for_consumer_version_and_provider_version" AS SELECT matrix.* FROM materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      INNER JOIN latest_verification_id_for_consumer_version_and_provider_version AS lv
      ON ((matrix.consumer_version_id = lv.consumer_version_id)
      AND (matrix.provider_version_id = lv.provider_version_id)
      AND ((matrix.verification_id = lv.latest_verification_id)))

      UNION ALL

      select matrix.* from materialized_matrix matrix
      inner join latest_pact_publication_revision_numbers lr
      on matrix.consumer_id = lr.consumer_id
      and matrix.provider_id = lr.provider_id
      and matrix.consumer_version_order = lr.consumer_version_order
      and matrix.pact_revision_number = lr.latest_revision_number
      where verification_id is null
      
2021-09-06 18:54:54.197280 I [20327:4260] pact-broker -- (0.000348s) DELETE FROM "materialized_head_matrix"
2021-09-06 18:54:54.197747 I [20327:4260] pact-broker -- (0.000305s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"materialized_head_matrix"' AS regclass) AS oid)
2021-09-06 18:54:54.253643 I [20327:4260] pact-broker -- (0.055800s) INSERT INTO "materialized_head_matrix" SELECT * FROM "head_matrix" RETURNING NULL
2021-09-06 18:54:54.253938 I [20327:4260] pact-broker -- (0.000146s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180210_fix_latest_matrix_for_cv_and_pv_again.rb') RETURNING "filename"
2021-09-06 18:54:54.254494 I [20327:4260] pact-broker -- (0.000506s) COMMIT
2021-09-06 18:54:54.254529 I [20327:4260] pact-broker -- Finished applying migration 20180210_fix_latest_matrix_for_cv_and_pv_again.rb, direction: up, took 0.060490 seconds
2021-09-06 18:54:54.254536 I [20327:4260] pact-broker -- Begin applying migration 20180311_optimise_head_matrix.rb, direction: up
2021-09-06 18:54:54.254673 I [20327:4260] pact-broker -- (0.000108s) BEGIN
2021-09-06 18:54:54.255600 I [20327:4260] pact-broker -- (0.000673s) CREATE OR REPLACE VIEW "latest_tagged_pact_consumer_version_orders" AS SELECT "pact_publications"."provider_id", "cv"."pacticipant_id" AS "consumer_id", "t"."name" AS "tag_name", max("order") AS "latest_consumer_version_order" FROM "pact_publications" INNER JOIN "versions" AS "cv" ON ("pact_publications"."consumer_version_id" = "cv"."id") INNER JOIN "tags" AS "t" ON ("t"."version_id" = "pact_publications"."consumer_version_id") GROUP BY "pact_publications"."provider_id", "cv"."pacticipant_id", "t"."name"
2021-09-06 18:54:54.256773 I [20327:4260] pact-broker -- (0.000879s) CREATE OR REPLACE VIEW "latest_verifications" AS SELECT "verifications"."id", "verifications"."number", "verifications"."success", "s"."number" AS "provider_version", "verifications"."build_url", "verifications"."pact_version_id", "verifications"."execution_date", "verifications"."created_at", "verifications"."provider_version_id", "s"."number" AS "provider_version_number", "s"."order" AS "provider_version_order" FROM "verifications" INNER JOIN "latest_verification_numbers" AS "lv" ON (("verifications"."pact_version_id" = "lv"."pact_version_id") AND ("verifications"."number" = "lv"."latest_number")) INNER JOIN "versions" AS "s" ON ("verifications"."provider_version_id" = "s"."id")
2021-09-06 18:54:54.258552 I [20327:4260] pact-broker -- (0.001727s) CREATE OR REPLACE VIEW "head_matrix" AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 18:54:54.258762 I [20327:4260] pact-broker -- (0.000121s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180311_optimise_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.259095 I [20327:4260] pact-broker -- (0.000292s) COMMIT
2021-09-06 18:54:54.259126 I [20327:4260] pact-broker -- Finished applying migration 20180311_optimise_head_matrix.rb, direction: up, took 0.004585 seconds
2021-09-06 18:54:54.259133 I [20327:4260] pact-broker -- Begin applying migration 20180315_create_verification_sequence.rb, direction: up
2021-09-06 18:54:54.259286 I [20327:4260] pact-broker -- (0.000125s) BEGIN
2021-09-06 18:54:54.259767 I [20327:4260] pact-broker -- (0.000389s) CREATE TABLE "verification_sequence_number" ("value" integer NOT NULL)
2021-09-06 18:54:54.260065 I [20327:4260] pact-broker -- (0.000190s) SELECT max("number") AS "max" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.261035 I [20327:4260] pact-broker -- (0.000811s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"verification_sequence_number"' AS regclass) AS oid)
2021-09-06 18:54:54.261320 I [20327:4260] pact-broker -- (0.000207s) INSERT INTO "verification_sequence_number" ("value") VALUES (100) RETURNING NULL
2021-09-06 18:54:54.261522 I [20327:4260] pact-broker -- (0.000114s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180315_create_verification_sequence.rb') RETURNING "filename"
2021-09-06 18:54:54.261830 I [20327:4260] pact-broker -- (0.000267s) COMMIT
2021-09-06 18:54:54.261863 I [20327:4260] pact-broker -- Finished applying migration 20180315_create_verification_sequence.rb, direction: up, took 0.002725 seconds
2021-09-06 18:54:54.261870 I [20327:4260] pact-broker -- Begin applying migration 20180330_refresh_matrix.rb, direction: up
2021-09-06 18:54:54.262105 I [20327:4260] pact-broker -- (0.000208s) BEGIN
2021-09-06 18:54:54.262402 I [20327:4260] pact-broker -- (0.000234s) DELETE FROM "materialized_matrix"
2021-09-06 18:54:54.262794 I [20327:4260] pact-broker -- (0.000301s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"materialized_matrix"' AS regclass) AS oid)
2021-09-06 18:54:54.263622 I [20327:4260] pact-broker -- (0.000758s) INSERT INTO "materialized_matrix" SELECT * FROM "matrix" RETURNING NULL
2021-09-06 18:54:54.263819 I [20327:4260] pact-broker -- (0.000098s) DELETE FROM "materialized_head_matrix"
2021-09-06 18:54:54.277404 I [20327:4260] pact-broker -- (0.013483s) INSERT INTO "materialized_head_matrix" SELECT * FROM "head_matrix" RETURNING NULL
2021-09-06 18:54:54.277676 I [20327:4260] pact-broker -- (0.000127s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180330_refresh_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.278073 I [20327:4260] pact-broker -- (0.000343s) COMMIT
2021-09-06 18:54:54.278111 I [20327:4260] pact-broker -- Finished applying migration 20180330_refresh_matrix.rb, direction: up, took 0.016235 seconds
2021-09-06 18:54:54.278124 I [20327:4260] pact-broker -- Begin applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up
2021-09-06 18:54:54.278290 I [20327:4260] pact-broker -- (0.000090s) BEGIN
2021-09-06 18:54:54.279731 I [20327:4260] pact-broker -- (0.001388s) CREATE VIEW "latest_verification_ids_for_consumer_version_tags" AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 18:54:54.281439 I [20327:4260] pact-broker -- (0.001359s) CREATE OR REPLACE VIEW "latest_verifications_for_consumer_version_tags" AS SELECT "lv"."consumer_id", "lv"."provider_id", "lv"."consumer_version_tag_name", "pv"."sha" AS "pact_version_sha", "prv"."number" AS "provider_version_number", "prv"."order" AS "provider_version_order", "verifications".* FROM "verifications" INNER JOIN "latest_verification_ids_for_consumer_version_tags" AS "lv" ON ("verifications"."id" = "lv"."latest_verification_id") INNER JOIN "versions" AS "prv" ON ("verifications"."provider_version_id" = "prv"."id") INNER JOIN "pact_versions" AS "pv" ON ("verifications"."pact_version_id" = "pv"."id")
2021-09-06 18:54:54.281650 I [20327:4260] pact-broker -- (0.000109s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180523_create_latest_verifications_for_consumer_version_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.282035 I [20327:4260] pact-broker -- (0.000340s) COMMIT
2021-09-06 18:54:54.282067 I [20327:4260] pact-broker -- Finished applying migration 20180523_create_latest_verifications_for_consumer_version_tags.rb, direction: up, took 0.003939 seconds
2021-09-06 18:54:54.282075 I [20327:4260] pact-broker -- Begin applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up
2021-09-06 18:54:54.282243 I [20327:4260] pact-broker -- (0.000136s) BEGIN
2021-09-06 18:54:54.283055 I [20327:4260] pact-broker -- (0.000755s) CREATE VIEW "latest_verification_ids_for_consumer_and_provider" AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publications_by_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id
2021-09-06 18:54:54.284299 I [20327:4260] pact-broker -- (0.000975s) CREATE OR REPLACE VIEW "latest_verifications_for_consumer_and_provider" AS SELECT "lv"."consumer_id", "lv"."provider_id", "pv"."sha" AS "pact_version_sha", "prv"."number" AS "provider_version_number", "prv"."order" AS "provider_version_order", "verifications".* FROM "verifications" INNER JOIN "latest_verification_ids_for_consumer_and_provider" AS "lv" ON ("verifications"."id" = "lv"."latest_verification_id") INNER JOIN "versions" AS "prv" ON ("verifications"."provider_version_id" = "prv"."id") INNER JOIN "pact_versions" AS "pv" ON ("verifications"."pact_version_id" = "pv"."id")
2021-09-06 18:54:54.284533 I [20327:4260] pact-broker -- (0.000083s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180524_create_latest_verifications_for_consumer_and_provider.rb') RETURNING "filename"
2021-09-06 18:54:54.284763 I [20327:4260] pact-broker -- (0.000188s) COMMIT
2021-09-06 18:54:54.284790 I [20327:4260] pact-broker -- Finished applying migration 20180524_create_latest_verifications_for_consumer_and_provider.rb, direction: up, took 0.002711 seconds
2021-09-06 18:54:54.284797 I [20327:4260] pact-broker -- Begin applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up
2021-09-06 18:54:54.284910 I [20327:4260] pact-broker -- (0.000064s) BEGIN
2021-09-06 18:54:54.285347 I [20327:4260] pact-broker -- (0.000352s) ALTER TABLE "triggered_webhooks" ADD COLUMN "verification_id" integer REFERENCES "verifications"
2021-09-06 18:54:54.285481 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180608_add_verification_to_triggered_webhook.rb') RETURNING "filename"
2021-09-06 18:54:54.285654 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.285676 I [20327:4260] pact-broker -- Finished applying migration 20180608_add_verification_to_triggered_webhook.rb, direction: up, took 0.000877 seconds
2021-09-06 18:54:54.285682 I [20327:4260] pact-broker -- Begin applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up
2021-09-06 18:54:54.285789 I [20327:4260] pact-broker -- (0.000084s) BEGIN
2021-09-06 18:54:54.286000 I [20327:4260] pact-broker -- (0.000142s) ALTER TABLE "webhooks" ALTER COLUMN "consumer_id" DROP NOT NULL, ALTER COLUMN "provider_id" DROP NOT NULL
2021-09-06 18:54:54.286165 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180611_make_webhook_pacticipant_ids_optional.rb') RETURNING "filename"
2021-09-06 18:54:54.286343 I [20327:4260] pact-broker -- (0.000146s) COMMIT
2021-09-06 18:54:54.286366 I [20327:4260] pact-broker -- Finished applying migration 20180611_make_webhook_pacticipant_ids_optional.rb, direction: up, took 0.000680 seconds
2021-09-06 18:54:54.286376 I [20327:4260] pact-broker -- Begin applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up
2021-09-06 18:54:54.286461 I [20327:4260] pact-broker -- (0.000065s) BEGIN
2021-09-06 18:54:54.287179 I [20327:4260] pact-broker -- (0.000599s) ALTER TABLE "verifications" ADD COLUMN "consumer_id" integer REFERENCES "pacticipants", ADD COLUMN "provider_id" integer REFERENCES "pacticipants"
2021-09-06 18:54:54.287733 I [20327:4260] pact-broker -- (0.000528s) CREATE INDEX "verifications_consumer_id_index" ON "verifications" ("consumer_id")
2021-09-06 18:54:54.288199 I [20327:4260] pact-broker -- (0.000444s) CREATE INDEX "verifications_provider_id_index" ON "verifications" ("provider_id")
2021-09-06 18:54:54.288690 I [20327:4260] pact-broker -- (0.000474s) CREATE INDEX "verifications_provider_id_consumer_id_index" ON "verifications" ("provider_id", "consumer_id")
2021-09-06 18:54:54.288817 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180612_add_pacticipant_ids_to_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.288996 I [20327:4260] pact-broker -- (0.000150s) COMMIT
2021-09-06 18:54:54.289018 I [20327:4260] pact-broker -- Finished applying migration 20180612_add_pacticipant_ids_to_verifications.rb, direction: up, took 0.002639 seconds
2021-09-06 18:54:54.289024 I [20327:4260] pact-broker -- Begin applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up
2021-09-06 18:54:54.289133 I [20327:4260] pact-broker -- (0.000089s) BEGIN
2021-09-06 18:54:54.289223 I [20327:4260] pact-broker -- (0.000044s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.289543 I [20327:4260] pact-broker -- (0.000250s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.289611 I [20327:4260] pact-broker -- (0.000041s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.291361 I [20327:4260] pact-broker -- (0.001133s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.291599 I [20327:4260] pact-broker -- (0.000051s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.291733 I [20327:4260] pact-broker -- (0.000074s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.291811 I [20327:4260] pact-broker -- (0.000046s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.291923 I [20327:4260] pact-broker -- (0.000059s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.292153 I [20327:4260] pact-broker -- (0.000085s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.292246 I [20327:4260] pact-broker -- (0.000058s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.292355 I [20327:4260] pact-broker -- (0.000042s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.292483 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.292573 I [20327:4260] pact-broker -- (0.000061s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.293680 I [20327:4260] pact-broker -- (0.000627s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.293839 I [20327:4260] pact-broker -- (0.000047s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.293966 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.294077 I [20327:4260] pact-broker -- (0.000083s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.294190 I [20327:4260] pact-broker -- (0.000067s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.294352 I [20327:4260] pact-broker -- (0.000077s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.294427 I [20327:4260] pact-broker -- (0.000047s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.294611 I [20327:4260] pact-broker -- (0.000148s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 18:54:54.294745 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180613_migrate_pacticipant_ids_for_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.294938 I [20327:4260] pact-broker -- (0.000159s) COMMIT
2021-09-06 18:54:54.294966 I [20327:4260] pact-broker -- Finished applying migration 20180613_migrate_pacticipant_ids_for_verifications.rb, direction: up, took 0.005938 seconds
2021-09-06 18:54:54.294977 I [20327:4260] pact-broker -- Begin applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 18:54:54.295057 I [20327:4260] pact-broker -- (0.000058s) BEGIN
2021-09-06 18:54:54.295508 I [20327:4260] pact-broker -- (0.000416s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_and_provider" AS select
        provider_id,
        consumer_id,
        max(id) as latest_verification_id
        from verifications v
        group by provider_id, consumer_id
2021-09-06 18:54:54.295684 I [20327:4260] pact-broker -- (0.000098s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180614_update_latest_verification_ids_for_consumer_and_provider.rb') RETURNING "filename"
2021-09-06 18:54:54.295828 I [20327:4260] pact-broker -- (0.000107s) COMMIT
2021-09-06 18:54:54.295854 I [20327:4260] pact-broker -- Finished applying migration 20180614_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.000874 seconds
2021-09-06 18:54:54.295861 I [20327:4260] pact-broker -- Begin applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up
2021-09-06 18:54:54.295923 I [20327:4260] pact-broker -- (0.000041s) BEGIN
2021-09-06 18:54:54.296352 I [20327:4260] pact-broker -- (0.000340s) ALTER TABLE "pact_publications" ADD COLUMN "consumer_id" integer REFERENCES "pacticipants"
2021-09-06 18:54:54.296889 I [20327:4260] pact-broker -- (0.000517s) CREATE INDEX "pact_publications_consumer_id_index" ON "pact_publications" ("consumer_id")
2021-09-06 18:54:54.297019 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180615_add_consumer_id_to_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.297196 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.297219 I [20327:4260] pact-broker -- Finished applying migration 20180615_add_consumer_id_to_pact_publications.rb, direction: up, took 0.001354 seconds
2021-09-06 18:54:54.297225 I [20327:4260] pact-broker -- Begin applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up
2021-09-06 18:54:54.297358 I [20327:4260] pact-broker -- (0.000109s) BEGIN
2021-09-06 18:54:54.297493 I [20327:4260] pact-broker -- (0.000091s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.297773 I [20327:4260] pact-broker -- (0.000208s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.297903 I [20327:4260] pact-broker -- (0.000095s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.299168 I [20327:4260] pact-broker -- (0.000791s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.299471 I [20327:4260] pact-broker -- (0.000143s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.299650 I [20327:4260] pact-broker -- (0.000105s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.299751 I [20327:4260] pact-broker -- (0.000063s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.299858 I [20327:4260] pact-broker -- (0.000042s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.300002 I [20327:4260] pact-broker -- (0.000087s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.300078 I [20327:4260] pact-broker -- (0.000044s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.301247 I [20327:4260] pact-broker -- (0.000677s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.301467 I [20327:4260] pact-broker -- (0.000063s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.301624 I [20327:4260] pact-broker -- (0.000088s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.301700 I [20327:4260] pact-broker -- (0.000047s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.301864 I [20327:4260] pact-broker -- (0.000126s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 18:54:54.302007 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180616_migrate_consumer_ids_for_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.302207 I [20327:4260] pact-broker -- (0.000171s) COMMIT
2021-09-06 18:54:54.302231 I [20327:4260] pact-broker -- Finished applying migration 20180616_migrate_consumer_ids_for_pact_publications.rb, direction: up, took 0.005002 seconds
2021-09-06 18:54:54.302238 I [20327:4260] pact-broker -- Begin applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up
2021-09-06 18:54:54.302338 I [20327:4260] pact-broker -- (0.000078s) BEGIN
2021-09-06 18:54:54.304452 I [20327:4260] pact-broker -- (0.001918s) CREATE TABLE "latest_pact_publication_ids_for_consumer_versions" ("consumer_id" integer NOT NULL REFERENCES "pacticipants" ON DELETE CASCADE, "consumer_version_id" integer NOT NULL REFERENCES "versions" ON DELETE CASCADE, "provider_id" integer NOT NULL REFERENCES "pacticipants" ON DELETE CASCADE, "pact_publication_id" integer NOT NULL UNIQUE REFERENCES "pact_publications" ON DELETE CASCADE, "pact_version_id" integer NOT NULL REFERENCES "pact_versions" ON DELETE CASCADE)
2021-09-06 18:54:54.304543 I [20327:4260] pact-broker -- (0.000048s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.305121 I [20327:4260] pact-broker -- (0.000528s) CREATE UNIQUE INDEX "unq_latest_ppid_prov_conver" ON "latest_pact_publication_ids_for_consumer_versions" ("provider_id", "consumer_version_id")
2021-09-06 18:54:54.305197 I [20327:4260] pact-broker -- (0.000037s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.305278 I [20327:4260] pact-broker -- (0.000047s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.305801 I [20327:4260] pact-broker -- (0.000474s) CREATE INDEX "lpp_provider_id_consumer_id_index" ON "latest_pact_publication_ids_for_consumer_versions" ("provider_id", "consumer_id")
2021-09-06 18:54:54.305877 I [20327:4260] pact-broker -- (0.000050s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.306048 I [20327:4260] pact-broker -- (0.000086s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180720_create_latest_pact_publication_ids.rb') RETURNING "filename"
2021-09-06 18:54:54.306252 I [20327:4260] pact-broker -- (0.000173s) COMMIT
2021-09-06 18:54:54.306276 I [20327:4260] pact-broker -- Finished applying migration 20180720_create_latest_pact_publication_ids.rb, direction: up, took 0.004035 seconds
2021-09-06 18:54:54.306282 I [20327:4260] pact-broker -- Begin applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up
2021-09-06 18:54:54.306390 I [20327:4260] pact-broker -- (0.000086s) BEGIN
2021-09-06 18:54:54.306805 I [20327:4260] pact-broker -- (0.000322s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid)
2021-09-06 18:54:54.309088 I [20327:4260] pact-broker -- (0.002200s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" SELECT "consumer_id", "consumer_version_id", "provider_id", "id", "pact_version_id" FROM "latest_pact_publications_by_consumer_versions" RETURNING NULL
2021-09-06 18:54:54.309242 I [20327:4260] pact-broker -- (0.000074s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180721_migrate_latest_pact_publication_ids.rb') RETURNING "filename"
2021-09-06 18:54:54.309453 I [20327:4260] pact-broker -- (0.000174s) COMMIT
2021-09-06 18:54:54.309479 I [20327:4260] pact-broker -- Finished applying migration 20180721_migrate_latest_pact_publication_ids.rb, direction: up, took 0.003193 seconds
2021-09-06 18:54:54.309485 I [20327:4260] pact-broker -- Begin applying migration 20180722_recreate_views.rb, direction: up
2021-09-06 18:54:54.309594 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.310165 I [20327:4260] pact-broker -- (0.000528s) CREATE OR REPLACE VIEW "latest_pact_publications_by_consumer_versions" AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.consumer_version_id = app.consumer_version_id
  and lpp.pact_publication_id = app.id
  and lpp.provider_id = app.provider_id
2021-09-06 18:54:54.310735 I [20327:4260] pact-broker -- (0.000394s) CREATE OR REPLACE VIEW "latest_pact_consumer_version_orders" AS SELECT "provider_id", "consumer_id", max("order") AS "latest_consumer_version_order" FROM "latest_pact_publication_ids_for_consumer_versions" AS "lp" INNER JOIN "versions" AS "cv" ON ("lp"."consumer_version_id" = "cv"."id") GROUP BY "provider_id", "consumer_id"
2021-09-06 18:54:54.310887 I [20327:4260] pact-broker -- (0.000071s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180722_recreate_views.rb') RETURNING "filename"
2021-09-06 18:54:54.311066 I [20327:4260] pact-broker -- (0.000146s) COMMIT
2021-09-06 18:54:54.311090 I [20327:4260] pact-broker -- Finished applying migration 20180722_recreate_views.rb, direction: up, took 0.001601 seconds
2021-09-06 18:54:54.311097 I [20327:4260] pact-broker -- Begin applying migration 20180723_create_latest_verification_ids.rb, direction: up
2021-09-06 18:54:54.311222 I [20327:4260] pact-broker -- (0.000099s) BEGIN
2021-09-06 18:54:54.312850 I [20327:4260] pact-broker -- (0.001432s) CREATE TABLE "latest_verification_id_for_pact_version_and_provider_version" ("consumer_id" integer NOT NULL CONSTRAINT "latest_v_id_for_pv_and_pv_consumer_id_fk" REFERENCES "pacticipants" ON DELETE CASCADE, "pact_version_id" integer NOT NULL CONSTRAINT "latest_v_id_for_pv_and_pv_pact_version_id_fk" REFERENCES "pact_versions" ON DELETE CASCADE, "provider_id" integer NOT NULL CONSTRAINT "latest_v_id_for_pv_and_pv_provider_id_fk" REFERENCES "pacticipants" ON DELETE CASCADE, "provider_version_id" integer NOT NULL CONSTRAINT "latest_v_id_for_pv_and_pv_provider_version_id_fk" REFERENCES "versions" ON DELETE CASCADE, "verification_id" integer NOT NULL CONSTRAINT "latest_v_id_for_pv_and_pv_verification_id_fk" REFERENCES "verifications" ON DELETE CASCADE)
2021-09-06 18:54:54.312952 I [20327:4260] pact-broker -- (0.000062s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.313541 I [20327:4260] pact-broker -- (0.000540s) CREATE UNIQUE INDEX "latest_v_id_for_pv_and_pv_v_id_unq" ON "latest_verification_id_for_pact_version_and_provider_version" ("verification_id")
2021-09-06 18:54:54.313645 I [20327:4260] pact-broker -- (0.000072s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.313744 I [20327:4260] pact-broker -- (0.000058s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.314327 I [20327:4260] pact-broker -- (0.000532s) CREATE UNIQUE INDEX "latest_v_id_for_pv_and_pv_pv_id_pv_id_unq" ON "latest_verification_id_for_pact_version_and_provider_version" ("pact_version_id", "provider_version_id")
2021-09-06 18:54:54.314412 I [20327:4260] pact-broker -- (0.000051s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.314505 I [20327:4260] pact-broker -- (0.000055s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.315067 I [20327:4260] pact-broker -- (0.000520s) CREATE INDEX "latest_v_id_for_pv_and_pv_pv_id_v_id" ON "latest_verification_id_for_pact_version_and_provider_version" ("pact_version_id", "verification_id")
2021-09-06 18:54:54.315189 I [20327:4260] pact-broker -- (0.000094s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.315355 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180723_create_latest_verification_ids.rb') RETURNING "filename"
2021-09-06 18:54:54.315575 I [20327:4260] pact-broker -- (0.000183s) COMMIT
2021-09-06 18:54:54.315601 I [20327:4260] pact-broker -- Finished applying migration 20180723_create_latest_verification_ids.rb, direction: up, took 0.004500 seconds
2021-09-06 18:54:54.315612 I [20327:4260] pact-broker -- Begin applying migration 20180724_migrate_latest_verification_ids.rb, direction: up
2021-09-06 18:54:54.315727 I [20327:4260] pact-broker -- (0.000090s) BEGIN
2021-09-06 18:54:54.316193 I [20327:4260] pact-broker -- (0.000323s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid)
2021-09-06 18:54:54.316555 I [20327:4260] pact-broker -- (0.000260s) INSERT INTO "latest_verification_id_for_pact_version_and_provider_version" SELECT "verifications"."consumer_id", "verifications"."pact_version_id", "verifications"."provider_id", "verifications"."provider_version_id", max("verifications"."id") AS "verification_id" FROM "verifications" GROUP BY "verifications"."consumer_id", "verifications"."pact_version_id", "verifications"."provider_id", "verifications"."provider_version_id" RETURNING NULL
2021-09-06 18:54:54.316720 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180724_migrate_latest_verification_ids.rb') RETURNING "filename"
2021-09-06 18:54:54.316906 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.316934 I [20327:4260] pact-broker -- Finished applying migration 20180724_migrate_latest_verification_ids.rb, direction: up, took 0.001319 seconds
2021-09-06 18:54:54.316942 I [20327:4260] pact-broker -- Begin applying migration 20180726_recreate_views.rb, direction: up
2021-09-06 18:54:54.317024 I [20327:4260] pact-broker -- (0.000062s) BEGIN
2021-09-06 18:54:54.317537 I [20327:4260] pact-broker -- (0.000478s) CREATE OR REPLACE VIEW "latest_verification_id_for_consumer_version_and_provider_version" AS select pp.consumer_version_id, lv.provider_version_id, lv.verification_id as latest_verification_id
      from latest_pact_publication_ids_for_consumer_versions lpp
      inner join pact_publications pp
        on pp.id = lpp.pact_publication_id
      left outer join latest_verification_id_for_pact_version_and_provider_version lv
          on lv.pact_version_id = pp.pact_version_id
2021-09-06 18:54:54.317680 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180726_recreate_views.rb') RETURNING "filename"
2021-09-06 18:54:54.317852 I [20327:4260] pact-broker -- (0.000142s) COMMIT
2021-09-06 18:54:54.317876 I [20327:4260] pact-broker -- Finished applying migration 20180726_recreate_views.rb, direction: up, took 0.000931 seconds
2021-09-06 18:54:54.317882 I [20327:4260] pact-broker -- Begin applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 18:54:54.317964 I [20327:4260] pact-broker -- (0.000063s) BEGIN
2021-09-06 18:54:54.318640 I [20327:4260] pact-broker -- (0.000642s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_version_tags" AS select
      v.provider_id,
      v.consumer_id,
      t.name as consumer_version_tag_name,
      max(v.verification_id) as latest_verification_id
    from latest_verification_id_for_pact_version_and_provider_version v
    join latest_pact_publication_ids_for_consumer_versions lpp
      on v.pact_version_id = lpp.pact_version_id
    join tags t
      on lpp.consumer_version_id = t.version_id
    group by v.provider_id, v.consumer_id, t.name
2021-09-06 18:54:54.318790 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.318965 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.318988 I [20327:4260] pact-broker -- Finished applying migration 20180727_recreate_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001103 seconds
2021-09-06 18:54:54.318995 I [20327:4260] pact-broker -- Begin applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up
2021-09-06 18:54:54.319084 I [20327:4260] pact-broker -- (0.000064s) BEGIN
2021-09-06 18:54:54.319226 I [20327:4260] pact-broker -- (0.000088s) DELETE FROM "materialized_matrix"
2021-09-06 18:54:54.319334 I [20327:4260] pact-broker -- (0.000064s) DELETE FROM "materialized_head_matrix"
2021-09-06 18:54:54.319462 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180728_truncate_materialized_matrix_tables.rb') RETURNING "filename"
2021-09-06 18:54:54.319617 I [20327:4260] pact-broker -- (0.000120s) COMMIT
2021-09-06 18:54:54.319643 I [20327:4260] pact-broker -- Finished applying migration 20180728_truncate_materialized_matrix_tables.rb, direction: up, took 0.000645 seconds
2021-09-06 18:54:54.319650 I [20327:4260] pact-broker -- Begin applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up
2021-09-06 18:54:54.319738 I [20327:4260] pact-broker -- (0.000062s) BEGIN
2021-09-06 18:54:54.320152 I [20327:4260] pact-broker -- (0.000377s) CREATE VIEW "latest_verification_ids_for_pact_versions" AS select pact_version_id, MAX(verification_id) latest_verification_id
    FROM latest_verification_id_for_pact_version_and_provider_version
    GROUP BY pact_version_id
2021-09-06 18:54:54.320296 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180729_create_latest_verification_ids_for_provider_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.320483 I [20327:4260] pact-broker -- (0.000158s) COMMIT
2021-09-06 18:54:54.320506 I [20327:4260] pact-broker -- Finished applying migration 20180729_create_latest_verification_ids_for_provider_versions.rb, direction: up, took 0.000853 seconds
2021-09-06 18:54:54.320513 I [20327:4260] pact-broker -- Begin applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up
2021-09-06 18:54:54.320596 I [20327:4260] pact-broker -- (0.000064s) BEGIN
2021-09-06 18:54:54.321619 I [20327:4260] pact-broker -- (0.000805s) CREATE VIEW "latest_verifications_for_pact_versions" AS SELECT "verifications"."id", "verifications"."number", "verifications"."success", "verifications"."build_url", "verifications"."pact_version_id", "verifications"."execution_date", "verifications"."created_at", "verifications"."provider_version_id", "s"."number" AS "provider_version_number", "s"."order" AS "provider_version_order" FROM "verifications" INNER JOIN "latest_verification_ids_for_pact_versions" AS "lv" ON (("verifications"."pact_version_id" = "lv"."pact_version_id") AND ("verifications"."id" = "lv"."latest_verification_id")) INNER JOIN "versions" AS "s" ON ("verifications"."provider_version_id" = "s"."id")
2021-09-06 18:54:54.321776 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180730_create_latest_verifications_for_provider_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.321961 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.321982 I [20327:4260] pact-broker -- Finished applying migration 20180730_create_latest_verifications_for_provider_versions.rb, direction: up, took 0.001466 seconds
2021-09-06 18:54:54.321988 I [20327:4260] pact-broker -- Begin applying migration 20180731_update_head_matrix.rb, direction: up
2021-09-06 18:54:54.322084 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.323707 I [20327:4260] pact-broker -- (0.001587s) CREATE OR REPLACE VIEW "head_matrix" AS 
select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  null as consumer_version_tag_name
from latest_pact_publications p
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

union all

select
  p.consumer_id, p.consumer_name, p.consumer_version_id, p.consumer_version_number, p.consumer_version_order,
  p.id as pact_publication_id, p.pact_version_id, p.pact_version_sha, p.revision_number as pact_revision_number,
  p.created_at as pact_created_at,
  p.provider_id, p.provider_name, lv.provider_version_id, lv.provider_version_number, lv.provider_version_order,
  lv.id as verification_id, lv.success, lv.number as verification_number, lv.execution_date as verification_executed_at,
  lv.build_url as verification_build_url,
  lt.tag_name as consumer_version_tag_name
from latest_tagged_pact_consumer_version_orders lt
inner join latest_pact_publications_by_consumer_versions p
  on lt.consumer_id = p.consumer_id
  and lt.provider_id = p.provider_id
  and lt.latest_consumer_version_order = p.consumer_version_order
left outer join latest_verifications_for_pact_versions lv
  on p.pact_version_id = lv.pact_version_id

2021-09-06 18:54:54.323855 I [20327:4260] pact-broker -- (0.000075s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180731_update_head_matrix.rb') RETURNING "filename"
2021-09-06 18:54:54.324035 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.324057 I [20327:4260] pact-broker -- Finished applying migration 20180731_update_head_matrix.rb, direction: up, took 0.002066 seconds
2021-09-06 18:54:54.324063 I [20327:4260] pact-broker -- Begin applying migration 20180828_create_latest_versions.rb, direction: up
2021-09-06 18:54:54.324132 I [20327:4260] pact-broker -- (0.000050s) BEGIN
2021-09-06 18:54:54.324619 I [20327:4260] pact-broker -- (0.000366s) CREATE OR REPLACE VIEW "latest_version_orders" AS SELECT "pacticipant_id", max("order") AS "latest_version_order" FROM "versions" GROUP BY "pacticipant_id"
2021-09-06 18:54:54.325308 I [20327:4260] pact-broker -- (0.000533s) CREATE OR REPLACE VIEW "latest_versions" AS SELECT "versions".* FROM "versions" INNER JOIN "latest_version_orders" ON (("versions"."pacticipant_id" = "latest_version_orders"."pacticipant_id") AND ("versions"."order" = "latest_version_orders"."latest_version_order"))
2021-09-06 18:54:54.325443 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20180828_create_latest_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.325634 I [20327:4260] pact-broker -- (0.000155s) COMMIT
2021-09-06 18:54:54.325657 I [20327:4260] pact-broker -- Finished applying migration 20180828_create_latest_versions.rb, direction: up, took 0.001590 seconds
2021-09-06 18:54:54.325664 I [20327:4260] pact-broker -- Begin applying migration 20190509_create_version_sequence.rb, direction: up
2021-09-06 18:54:54.325763 I [20327:4260] pact-broker -- (0.000079s) BEGIN
2021-09-06 18:54:54.326131 I [20327:4260] pact-broker -- (0.000292s) CREATE TABLE "version_sequence_number" ("value" integer NOT NULL)
2021-09-06 18:54:54.326261 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190509_create_version_sequence.rb') RETURNING "filename"
2021-09-06 18:54:54.326431 I [20327:4260] pact-broker -- (0.000140s) COMMIT
2021-09-06 18:54:54.326453 I [20327:4260] pact-broker -- Finished applying migration 20190509_create_version_sequence.rb, direction: up, took 0.000787 seconds
2021-09-06 18:54:54.326460 I [20327:4260] pact-broker -- Begin applying migration 20190510_set_version_sequence.rb, direction: up
2021-09-06 18:54:54.326549 I [20327:4260] pact-broker -- (0.000069s) BEGIN
2021-09-06 18:54:54.326671 I [20327:4260] pact-broker -- (0.000076s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.326864 I [20327:4260] pact-broker -- (0.000130s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.326936 I [20327:4260] pact-broker -- (0.000045s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.327038 I [20327:4260] pact-broker -- (0.000046s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.327201 I [20327:4260] pact-broker -- (0.000104s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 18:54:54.327291 I [20327:4260] pact-broker -- (0.000064s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.328538 I [20327:4260] pact-broker -- (0.000681s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"version_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.328809 I [20327:4260] pact-broker -- (0.000136s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 18:54:54.328951 I [20327:4260] pact-broker -- (0.000072s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 18:54:54.329323 I [20327:4260] pact-broker -- (0.000284s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"version_sequence_number"' AS regclass) AS oid)
2021-09-06 18:54:54.329522 I [20327:4260] pact-broker -- (0.000128s) INSERT INTO "version_sequence_number" ("value") VALUES (100) RETURNING NULL
2021-09-06 18:54:54.329721 I [20327:4260] pact-broker -- (0.000132s) DELETE FROM "version_sequence_number" WHERE ("value" != 100)
2021-09-06 18:54:54.329855 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190510_set_version_sequence.rb') RETURNING "filename"
2021-09-06 18:54:54.330027 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.330049 I [20327:4260] pact-broker -- Finished applying migration 20190510_set_version_sequence.rb, direction: up, took 0.003586 seconds
2021-09-06 18:54:54.330074 I [20327:4260] pact-broker -- Begin applying migration 20190511_create_integrations_view.rb, direction: up
2021-09-06 18:54:54.330178 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.330918 I [20327:4260] pact-broker -- (0.000561s) CREATE VIEW "integrations" AS SELECT DISTINCT "consumer_id", "c"."name" AS "consumer_name", "provider_id", "p"."name" AS "provider_name" FROM "pact_publications" INNER JOIN "pacticipants" AS "c" ON ("c"."id" = "pact_publications"."consumer_id") INNER JOIN "pacticipants" AS "p" ON ("p"."id" = "pact_publications"."provider_id")
2021-09-06 18:54:54.331073 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190511_create_integrations_view.rb') RETURNING "filename"
2021-09-06 18:54:54.331252 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.331274 I [20327:4260] pact-broker -- Finished applying migration 20190511_create_integrations_view.rb, direction: up, took 0.001215 seconds
2021-09-06 18:54:54.331284 I [20327:4260] pact-broker -- Begin applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up
2021-09-06 18:54:54.331401 I [20327:4260] pact-broker -- (0.000093s) BEGIN
2021-09-06 18:54:54.331832 I [20327:4260] pact-broker -- (0.000332s) ALTER TABLE "webhooks" ADD COLUMN "enabled" boolean DEFAULT true
2021-09-06 18:54:54.332036 I [20327:4260] pact-broker -- (0.000127s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190523_add_enabled_column_to_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.332274 I [20327:4260] pact-broker -- (0.000186s) COMMIT
2021-09-06 18:54:54.332301 I [20327:4260] pact-broker -- Finished applying migration 20190523_add_enabled_column_to_webhooks.rb, direction: up, took 0.001014 seconds
2021-09-06 18:54:54.332319 I [20327:4260] pact-broker -- Begin applying migration 20190524_set_webhooks_enabled.rb, direction: up
2021-09-06 18:54:54.332481 I [20327:4260] pact-broker -- (0.000137s) BEGIN
2021-09-06 18:54:54.332618 I [20327:4260] pact-broker -- (0.000065s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.332885 I [20327:4260] pact-broker -- (0.000176s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 18:54:54.332983 I [20327:4260] pact-broker -- (0.000063s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.335249 I [20327:4260] pact-broker -- (0.000805s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.335635 I [20327:4260] pact-broker -- (0.000101s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 18:54:54.335788 I [20327:4260] pact-broker -- (0.000075s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190524_set_webhooks_enabled.rb') RETURNING "filename"
2021-09-06 18:54:54.335989 I [20327:4260] pact-broker -- (0.000163s) COMMIT
2021-09-06 18:54:54.336015 I [20327:4260] pact-broker -- Finished applying migration 20190524_set_webhooks_enabled.rb, direction: up, took 0.003703 seconds
2021-09-06 18:54:54.336022 I [20327:4260] pact-broker -- Begin applying migration 20190525_add_description_column_to_webhooks.rb, direction: up
2021-09-06 18:54:54.336149 I [20327:4260] pact-broker -- (0.000097s) BEGIN
2021-09-06 18:54:54.336454 I [20327:4260] pact-broker -- (0.000177s) ALTER TABLE "webhooks" ADD COLUMN "description" text
2021-09-06 18:54:54.336634 I [20327:4260] pact-broker -- (0.000085s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190525_add_description_column_to_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.336839 I [20327:4260] pact-broker -- (0.000165s) COMMIT
2021-09-06 18:54:54.336867 I [20327:4260] pact-broker -- Finished applying migration 20190525_add_description_column_to_webhooks.rb, direction: up, took 0.000841 seconds
2021-09-06 18:54:54.336874 I [20327:4260] pact-broker -- Begin applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up
2021-09-06 18:54:54.336989 I [20327:4260] pact-broker -- (0.000090s) BEGIN
2021-09-06 18:54:54.337216 I [20327:4260] pact-broker -- (0.000145s) ALTER TABLE "webhooks" ADD COLUMN "headers" text
2021-09-06 18:54:54.337356 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190602_add_headers_column_to_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.337531 I [20327:4260] pact-broker -- (0.000143s) COMMIT
2021-09-06 18:54:54.337555 I [20327:4260] pact-broker -- Finished applying migration 20190602_add_headers_column_to_webhooks.rb, direction: up, took 0.000678 seconds
2021-09-06 18:54:54.337582 I [20327:4260] pact-broker -- Begin applying migration 20190603_migrate_webhook_headers.rb, direction: up
2021-09-06 18:54:54.337671 I [20327:4260] pact-broker -- (0.000064s) BEGIN
2021-09-06 18:54:54.337777 I [20327:4260] pact-broker -- (0.000058s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.337989 I [20327:4260] pact-broker -- (0.000147s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 18:54:54.338060 I [20327:4260] pact-broker -- (0.000044s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.339282 I [20327:4260] pact-broker -- (0.000708s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.339554 I [20327:4260] pact-broker -- (0.000048s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.339829 I [20327:4260] pact-broker -- (0.000198s) SELECT NULL AS "nil" FROM "webhook_headers" LIMIT 1
2021-09-06 18:54:54.339937 I [20327:4260] pact-broker -- (0.000074s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.341071 I [20327:4260] pact-broker -- (0.000656s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_headers"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.341215 I [20327:4260] pact-broker -- (0.000055s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.341337 I [20327:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "webhook_headers" LIMIT 1
2021-09-06 18:54:54.341439 I [20327:4260] pact-broker -- (0.000044s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.341534 I [20327:4260] pact-broker -- (0.000043s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.341685 I [20327:4260] pact-broker -- (0.000072s) SELECT NULL AS "nil" FROM "webhook_headers" LIMIT 1
2021-09-06 18:54:54.341761 I [20327:4260] pact-broker -- (0.000049s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.341884 I [20327:4260] pact-broker -- (0.000067s) SELECT * FROM "webhook_headers" FOR UPDATE
2021-09-06 18:54:54.342028 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190603_migrate_webhook_headers.rb') RETURNING "filename"
2021-09-06 18:54:54.342212 I [20327:4260] pact-broker -- (0.000154s) COMMIT
2021-09-06 18:54:54.342235 I [20327:4260] pact-broker -- Finished applying migration 20190603_migrate_webhook_headers.rb, direction: up, took 0.004669 seconds
2021-09-06 18:54:54.342241 I [20327:4260] pact-broker -- Begin applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up
2021-09-06 18:54:54.342340 I [20327:4260] pact-broker -- (0.000056s) BEGIN
2021-09-06 18:54:54.343146 I [20327:4260] pact-broker -- (0.000674s) CREATE OR REPLACE VIEW "all_verifications" AS SELECT "verifications"."id", "verifications"."number", "success", "provider_version_id", "v"."number" AS "provider_version_number", "v"."order" AS "provider_version_order", "build_url", "pact_version_id", "execution_date", "verifications"."created_at", "test_results" FROM "verifications" INNER JOIN "versions" AS "v" ON ("v"."id" = "verifications"."provider_version_id")
2021-09-06 18:54:54.343278 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190909_add_test_results_to_all_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.343458 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.343479 I [20327:4260] pact-broker -- Finished applying migration 20190909_add_test_results_to_all_verifications.rb, direction: up, took 0.001235 seconds
2021-09-06 18:54:54.343486 I [20327:4260] pact-broker -- Begin applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up
2021-09-06 18:54:54.343569 I [20327:4260] pact-broker -- (0.000041s) BEGIN
2021-09-06 18:54:54.344562 I [20327:4260] pact-broker -- (0.000783s) CREATE OR REPLACE VIEW "latest_verifications" AS SELECT "verifications"."id", "verifications"."number", "verifications"."success", "s"."number" AS "provider_version", "verifications"."build_url", "verifications"."pact_version_id", "verifications"."execution_date", "verifications"."created_at", "verifications"."provider_version_id", "s"."number" AS "provider_version_number", "s"."order" AS "provider_version_order", "verifications"."test_results" FROM "verifications" INNER JOIN "latest_verification_numbers" AS "lv" ON (("verifications"."pact_version_id" = "lv"."pact_version_id") AND ("verifications"."number" = "lv"."latest_number")) INNER JOIN "versions" AS "s" ON ("verifications"."provider_version_id" = "s"."id")
2021-09-06 18:54:54.344694 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190910_add_test_results_to_latest_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.344873 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.344894 I [20327:4260] pact-broker -- Finished applying migration 20190910_add_test_results_to_latest_verifications.rb, direction: up, took 0.001406 seconds
2021-09-06 18:54:54.344900 I [20327:4260] pact-broker -- Begin applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up
2021-09-06 18:54:54.345001 I [20327:4260] pact-broker -- (0.000082s) BEGIN
2021-09-06 18:54:54.345938 I [20327:4260] pact-broker -- (0.000762s) CREATE OR REPLACE VIEW "latest_verifications_for_pact_versions" AS SELECT "verifications"."id", "verifications"."number", "verifications"."success", "verifications"."build_url", "verifications"."pact_version_id", "verifications"."execution_date", "verifications"."created_at", "verifications"."provider_version_id", "s"."number" AS "provider_version_number", "s"."order" AS "provider_version_order", "verifications"."test_results" FROM "verifications" INNER JOIN "latest_verification_ids_for_pact_versions" AS "lv" ON (("verifications"."pact_version_id" = "lv"."pact_version_id") AND ("verifications"."id" = "lv"."latest_verification_id")) INNER JOIN "versions" AS "s" ON ("verifications"."provider_version_id" = "s"."id")
2021-09-06 18:54:54.346067 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20190911_add_test_results_to_latest_verifications_for_pact_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.346239 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.346259 I [20327:4260] pact-broker -- Finished applying migration 20190911_add_test_results_to_latest_verifications_for_pact_versions.rb, direction: up, took 0.001356 seconds
2021-09-06 18:54:54.346266 I [20327:4260] pact-broker -- Begin applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up
2021-09-06 18:54:54.346352 I [20327:4260] pact-broker -- (0.000068s) BEGIN
2021-09-06 18:54:54.347135 I [20327:4260] pact-broker -- (0.000755s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_version_tags" AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 18:54:54.347264 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20191025_optimise_latest_verification_ids_for_cv_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.347465 I [20327:4260] pact-broker -- (0.000175s) COMMIT
2021-09-06 18:54:54.347485 I [20327:4260] pact-broker -- Finished applying migration 20191025_optimise_latest_verification_ids_for_cv_tags.rb, direction: up, took 0.001218 seconds
2021-09-06 18:54:54.347492 I [20327:4260] pact-broker -- Begin applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 18:54:54.347557 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.348232 I [20327:4260] pact-broker -- (0.000498s) CREATE OR REPLACE VIEW "latest_tagged_pact_consumer_version_orders" AS SELECT "lp"."provider_id", "lp"."consumer_id", "t"."name" AS "tag_name", max("order") AS "latest_consumer_version_order" FROM "latest_pact_publication_ids_for_consumer_versions" AS "lp" INNER JOIN "versions" AS "cv" ON ("lp"."consumer_version_id" = "cv"."id") INNER JOIN "tags" AS "t" ON ("t"."version_id" = "lp"."consumer_version_id") GROUP BY "lp"."provider_id", "lp"."consumer_id", "t"."name"
2021-09-06 18:54:54.348372 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20191028_optimise_latest_tagged_pact_cv_orders.rb') RETURNING "filename"
2021-09-06 18:54:54.348540 I [20327:4260] pact-broker -- (0.000139s) COMMIT
2021-09-06 18:54:54.348563 I [20327:4260] pact-broker -- Finished applying migration 20191028_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.001068 seconds
2021-09-06 18:54:54.348569 I [20327:4260] pact-broker -- Begin applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up
2021-09-06 18:54:54.348666 I [20327:4260] pact-broker -- (0.000053s) BEGIN
2021-09-06 18:54:54.349167 I [20327:4260] pact-broker -- (0.000469s) CREATE OR REPLACE VIEW "latest_pact_publications_by_consumer_versions" AS select app.*
  from latest_pact_publication_ids_for_consumer_versions lpp
  inner join all_pact_publications app
  on lpp.pact_publication_id = app.id
2021-09-06 18:54:54.349315 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20191030_optimise_latest_pact_publications_by_consumer_versions_.rb') RETURNING "filename"
2021-09-06 18:54:54.349583 I [20327:4260] pact-broker -- (0.000236s) COMMIT
2021-09-06 18:54:54.349613 I [20327:4260] pact-broker -- Finished applying migration 20191030_optimise_latest_pact_publications_by_consumer_versions_.rb, direction: up, took 0.001039 seconds
2021-09-06 18:54:54.349621 I [20327:4260] pact-broker -- Begin applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 18:54:54.349795 I [20327:4260] pact-broker -- (0.000106s) BEGIN
2021-09-06 18:54:54.350845 I [20327:4260] pact-broker -- (0.001007s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_version_tags" AS select
        pv.pacticipant_id as provider_id,
        lpp.consumer_id,
        t.name as consumer_version_tag_name,
        max(v.id) as latest_verification_id
      from verifications v
      join latest_pact_publication_ids_for_consumer_versions lpp
        on v.pact_version_id = lpp.pact_version_id
      join tags t
        on lpp.consumer_version_id = t.version_id
      join versions pv
        on v.provider_version_id = pv.id
      where v.id in (select latest_verification_id from latest_verification_ids_for_pact_versions)
      group by pv.pacticipant_id, lpp.consumer_id, t.name
2021-09-06 18:54:54.351209 I [20327:4260] pact-broker -- (0.000285s) INSERT INTO "schema_migrations" ("filename") VALUES ('20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.351397 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.351423 I [20327:4260] pact-broker -- Finished applying migration 20191031_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001799 seconds
2021-09-06 18:54:54.351430 I [20327:4260] pact-broker -- Begin applying migration 20191101_create_head_pact_tags.rb, direction: up
2021-09-06 18:54:54.351506 I [20327:4260] pact-broker -- (0.000055s) BEGIN
2021-09-06 18:54:54.352346 I [20327:4260] pact-broker -- (0.000623s) CREATE VIEW "head_pact_tags" AS SELECT "o"."tag_name" AS "name", "lp"."pact_publication_id" FROM "latest_pact_publication_ids_for_consumer_versions" AS "lp" INNER JOIN "versions" AS "cv" ON ("lp"."consumer_version_id" = "cv"."id") INNER JOIN "latest_tagged_pact_consumer_version_orders" AS "o" ON (("lp"."consumer_id" = "o"."consumer_id") AND ("lp"."provider_id" = "o"."provider_id") AND ("cv"."order" = "o"."latest_consumer_version_order"))
2021-09-06 18:54:54.352484 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20191101_create_head_pact_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.352668 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.352691 I [20327:4260] pact-broker -- Finished applying migration 20191101_create_head_pact_tags.rb, direction: up, took 0.001257 seconds
2021-09-06 18:54:54.352697 I [20327:4260] pact-broker -- Begin applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up
2021-09-06 18:54:54.352786 I [20327:4260] pact-broker -- (0.000068s) BEGIN
2021-09-06 18:54:54.352966 I [20327:4260] pact-broker -- (0.000103s) ALTER TABLE "latest_pact_publication_ids_for_consumer_versions" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.353104 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20200318_add_created_at_to_latest_pact_publications.rb') RETURNING "filename"
2021-09-06 18:54:54.353279 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.353303 I [20327:4260] pact-broker -- Finished applying migration 20200318_add_created_at_to_latest_pact_publications.rb, direction: up, took 0.000602 seconds
2021-09-06 18:54:54.353309 I [20327:4260] pact-broker -- Begin applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up
2021-09-06 18:54:54.353410 I [20327:4260] pact-broker -- (0.000041s) BEGIN
2021-09-06 18:54:54.353600 I [20327:4260] pact-broker -- (0.000119s) ALTER TABLE "latest_verification_id_for_pact_version_and_provider_version" ADD COLUMN "created_at" timestamp
2021-09-06 18:54:54.353730 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20200319_add_created_at_to_latest_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.353900 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.353923 I [20327:4260] pact-broker -- Finished applying migration 20200319_add_created_at_to_latest_verifications.rb, direction: up, took 0.000610 seconds
2021-09-06 18:54:54.353929 I [20327:4260] pact-broker -- Begin applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up
2021-09-06 18:54:54.354030 I [20327:4260] pact-broker -- (0.000081s) BEGIN
2021-09-06 18:54:54.354226 I [20327:4260] pact-broker -- (0.000139s) ALTER TABLE "triggered_webhooks" ADD COLUMN "event_name" text
2021-09-06 18:54:54.354351 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20200922_add_event_to_triggered_webhook.rb') RETURNING "filename"
2021-09-06 18:54:54.354617 I [20327:4260] pact-broker -- (0.000238s) COMMIT
2021-09-06 18:54:54.354638 I [20327:4260] pact-broker -- Finished applying migration 20200922_add_event_to_triggered_webhook.rb, direction: up, took 0.000706 seconds
2021-09-06 18:54:54.354644 I [20327:4260] pact-broker -- Begin applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up
2021-09-06 18:54:54.354751 I [20327:4260] pact-broker -- (0.000087s) BEGIN
2021-09-06 18:54:54.355699 I [20327:4260] pact-broker -- (0.000914s) CREATE OR REPLACE VIEW "latest_triggered_webhooks" AS select tw.id, tw.trigger_uuid, tw.trigger_type, tw.pact_publication_id, tw.webhook_id, tw.webhook_uuid, tw.consumer_id, tw.provider_id, tw.status, tw.created_at, tw.updated_at, tw.verification_id, tw.event_name
  from triggered_webhooks tw
  inner join (select max(id) as max_id
    from triggered_webhooks
    group by webhook_uuid, consumer_id, provider_id, event_name) latest_ids
  on latest_ids.max_id = tw.id
2021-09-06 18:54:54.355843 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20200930_update_latest_triggered_webhooks.rb') RETURNING "filename"
2021-09-06 18:54:54.356031 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.356054 I [20327:4260] pact-broker -- Finished applying migration 20200930_update_latest_triggered_webhooks.rb, direction: up, took 0.001406 seconds
2021-09-06 18:54:54.356061 I [20327:4260] pact-broker -- Begin applying migration 20201006_add_wip_to_verification.rb, direction: up
2021-09-06 18:54:54.356163 I [20327:4260] pact-broker -- (0.000083s) BEGIN
2021-09-06 18:54:54.356446 I [20327:4260] pact-broker -- (0.000198s) ALTER TABLE "verifications" ADD COLUMN "wip" boolean DEFAULT false NOT NULL
2021-09-06 18:54:54.356571 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20201006_add_wip_to_verification.rb') RETURNING "filename"
2021-09-06 18:54:54.356745 I [20327:4260] pact-broker -- (0.000147s) COMMIT
2021-09-06 18:54:54.356766 I [20327:4260] pact-broker -- Finished applying migration 20201006_add_wip_to_verification.rb, direction: up, took 0.000703 seconds
2021-09-06 18:54:54.356773 I [20327:4260] pact-broker -- Begin applying migration 20201023_create_verification_number_sequence.rb, direction: up
2021-09-06 18:54:54.356846 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.357059 I [20327:4260] pact-broker -- (0.000138s) SELECT "value" FROM "verification_sequence_number" LIMIT 1
2021-09-06 18:54:54.357515 I [20327:4260] pact-broker -- (0.000417s) CREATE SEQUENCE verification_number_sequence START WITH 200
2021-09-06 18:54:54.357659 I [20327:4260] pact-broker -- (0.000074s) INSERT INTO "schema_migrations" ("filename") VALUES ('20201023_create_verification_number_sequence.rb') RETURNING "filename"
2021-09-06 18:54:54.357836 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.357859 I [20327:4260] pact-broker -- Finished applying migration 20201023_create_verification_number_sequence.rb, direction: up, took 0.001083 seconds
2021-09-06 18:54:54.357866 I [20327:4260] pact-broker -- Begin applying migration 20201024_create_version_order_sequence.rb, direction: up
2021-09-06 18:54:54.357976 I [20327:4260] pact-broker -- (0.000091s) BEGIN
2021-09-06 18:54:54.358109 I [20327:4260] pact-broker -- (0.000064s) SELECT "value" FROM "version_sequence_number" LIMIT 1
2021-09-06 18:54:54.358518 I [20327:4260] pact-broker -- (0.000380s) CREATE SEQUENCE version_order_sequence START WITH 200
2021-09-06 18:54:54.358644 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20201024_create_version_order_sequence.rb') RETURNING "filename"
2021-09-06 18:54:54.358821 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.358842 I [20327:4260] pact-broker -- Finished applying migration 20201024_create_version_order_sequence.rb, direction: up, took 0.000974 seconds
2021-09-06 18:54:54.358848 I [20327:4260] pact-broker -- Begin applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up
2021-09-06 18:54:54.358985 I [20327:4260] pact-broker -- (0.000117s) BEGIN
2021-09-06 18:54:54.359357 I [20327:4260] pact-broker -- (0.000338s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_and_provider" AS select
        provider_id,
        consumer_id,
        max(verification_id) as latest_verification_id
        from latest_verification_id_for_pact_version_and_provider_version v
        group by provider_id, consumer_id
2021-09-06 18:54:54.359485 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20201026_update_latest_verification_ids_for_consumer_and_provider.rb') RETURNING "filename"
2021-09-06 18:54:54.359651 I [20327:4260] pact-broker -- (0.000139s) COMMIT
2021-09-06 18:54:54.359671 I [20327:4260] pact-broker -- Finished applying migration 20201026_update_latest_verification_ids_for_consumer_and_provider.rb, direction: up, took 0.000820 seconds
2021-09-06 18:54:54.359678 I [20327:4260] pact-broker -- Begin applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up
2021-09-06 18:54:54.359790 I [20327:4260] pact-broker -- (0.000091s) BEGIN
2021-09-06 18:54:54.360360 I [20327:4260] pact-broker -- (0.000509s) CREATE INDEX "webhook_executions_triggered_webhook_id_index" ON "webhook_executions" ("triggered_webhook_id")
2021-09-06 18:54:54.360925 I [20327:4260] pact-broker -- (0.000477s) CREATE INDEX "triggered_webhooks_webhook_id_index" ON "triggered_webhooks" ("webhook_id")
2021-09-06 18:54:54.361385 I [20327:4260] pact-broker -- (0.000442s) CREATE INDEX "triggered_webhooks_consumer_id_index" ON "triggered_webhooks" ("consumer_id")
2021-09-06 18:54:54.361955 I [20327:4260] pact-broker -- (0.000548s) CREATE INDEX "triggered_webhooks_provider_id_index" ON "triggered_webhooks" ("provider_id")
2021-09-06 18:54:54.362486 I [20327:4260] pact-broker -- (0.000501s) CREATE INDEX "triggered_webhooks_verification_id_index" ON "triggered_webhooks" ("verification_id")
2021-09-06 18:54:54.363094 I [20327:4260] pact-broker -- (0.000581s) CREATE INDEX "triggered_webhooks_pact_publication_id_index" ON "triggered_webhooks" ("pact_publication_id")
2021-09-06 18:54:54.363238 I [20327:4260] pact-broker -- (0.000073s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210115_add_webhook_foreign_key_indexes.rb') RETURNING "filename"
2021-09-06 18:54:54.363445 I [20327:4260] pact-broker -- (0.000174s) COMMIT
2021-09-06 18:54:54.363472 I [20327:4260] pact-broker -- Finished applying migration 20210115_add_webhook_foreign_key_indexes.rb, direction: up, took 0.003791 seconds
2021-09-06 18:54:54.363500 I [20327:4260] pact-broker -- Begin applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up
2021-09-06 18:54:54.363600 I [20327:4260] pact-broker -- (0.000079s) BEGIN
2021-09-06 18:54:54.363813 I [20327:4260] pact-broker -- (0.000146s) ALTER TABLE "triggered_webhooks" ADD COLUMN "event_context" text
2021-09-06 18:54:54.363944 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210116_add_context_to_triggered_webhook.rb') RETURNING "filename"
2021-09-06 18:54:54.364114 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.364136 I [20327:4260] pact-broker -- Finished applying migration 20210116_add_context_to_triggered_webhook.rb, direction: up, took 0.000634 seconds
2021-09-06 18:54:54.364143 I [20327:4260] pact-broker -- Begin applying migration 20210117_add_branch_to_version.rb, direction: up
2021-09-06 18:54:54.364222 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.364484 I [20327:4260] pact-broker -- (0.000142s) ALTER TABLE "versions" ADD COLUMN "branch" text, ADD COLUMN "build_url" text
2021-09-06 18:54:54.365073 I [20327:4260] pact-broker -- (0.000565s) CREATE INDEX "versions_pacticipant_id_branch_order_index" ON "versions" ("pacticipant_id", "branch", "order")
2021-09-06 18:54:54.365290 I [20327:4260] pact-broker -- (0.000142s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210117_add_branch_to_version.rb') RETURNING "filename"
2021-09-06 18:54:54.365531 I [20327:4260] pact-broker -- (0.000203s) COMMIT
2021-09-06 18:54:54.365560 I [20327:4260] pact-broker -- Finished applying migration 20210117_add_branch_to_version.rb, direction: up, took 0.001414 seconds
2021-09-06 18:54:54.365567 I [20327:4260] pact-broker -- Begin applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up
2021-09-06 18:54:54.365668 I [20327:4260] pact-broker -- (0.000075s) BEGIN
2021-09-06 18:54:54.366850 I [20327:4260] pact-broker -- (0.000891s) CREATE OR REPLACE VIEW "head_pact_tags" AS SELECT "o"."tag_name" AS "name", "lp"."pact_publication_id", "tags"."created_at" FROM "latest_pact_publication_ids_for_consumer_versions" AS "lp" INNER JOIN "versions" AS "cv" ON ("lp"."consumer_version_id" = "cv"."id") INNER JOIN "latest_tagged_pact_consumer_version_orders" AS "o" ON (("lp"."consumer_id" = "o"."consumer_id") AND ("lp"."provider_id" = "o"."provider_id") AND ("cv"."order" = "o"."latest_consumer_version_order")) INNER JOIN "tags" ON (("tags"."version_id" = "cv"."id") AND ("tags"."name" = "o"."tag_name"))
2021-09-06 18:54:54.366996 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210202_add_created_at_to_head_pact_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.367179 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.367201 I [20327:4260] pact-broker -- Finished applying migration 20210202_add_created_at_to_head_pact_tags.rb, direction: up, took 0.001631 seconds
2021-09-06 18:54:54.367208 I [20327:4260] pact-broker -- Begin applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up
2021-09-06 18:54:54.367294 I [20327:4260] pact-broker -- (0.000067s) BEGIN
2021-09-06 18:54:54.367562 I [20327:4260] pact-broker -- (0.000138s) ALTER TABLE "tags" ADD COLUMN "pacticipant_id" integer, ADD COLUMN "version_order" integer
2021-09-06 18:54:54.368059 I [20327:4260] pact-broker -- (0.000476s) CREATE INDEX "tags_version_order_index" ON "tags" ("version_order")
2021-09-06 18:54:54.368673 I [20327:4260] pact-broker -- (0.000589s) CREATE INDEX "tags_version_id_index" ON "tags" ("version_id")
2021-09-06 18:54:54.369168 I [20327:4260] pact-broker -- (0.000469s) CREATE INDEX "tags_pacticipant_id_index" ON "tags" ("pacticipant_id")
2021-09-06 18:54:54.369307 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210205_add_pacticipant_id_to_tag.rb') RETURNING "filename"
2021-09-06 18:54:54.369488 I [20327:4260] pact-broker -- (0.000150s) COMMIT
2021-09-06 18:54:54.369513 I [20327:4260] pact-broker -- Finished applying migration 20210205_add_pacticipant_id_to_tag.rb, direction: up, took 0.002302 seconds
2021-09-06 18:54:54.369520 I [20327:4260] pact-broker -- Begin applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up
2021-09-06 18:54:54.369619 I [20327:4260] pact-broker -- (0.000078s) BEGIN
2021-09-06 18:54:54.370210 I [20327:4260] pact-broker -- (0.000561s) CREATE INDEX tags_pacticipant_id_name_version_order_desc_index ON tags (pacticipant_id, name, version_order DESC);
2021-09-06 18:54:54.370756 I [20327:4260] pact-broker -- (0.000518s) CREATE INDEX versions_pacticipant_id_order_desc_index ON versions (pacticipant_id, "order" DESC);
2021-09-06 18:54:54.370893 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210206_add_index_to_tags_and_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.371072 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.371094 I [20327:4260] pact-broker -- Finished applying migration 20210206_add_index_to_tags_and_versions.rb, direction: up, took 0.001572 seconds
2021-09-06 18:54:54.371101 I [20327:4260] pact-broker -- Begin applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up
2021-09-06 18:54:54.371216 I [20327:4260] pact-broker -- (0.000090s) BEGIN
2021-09-06 18:54:54.371925 I [20327:4260] pact-broker -- (0.000670s) CREATE OR REPLACE VIEW "latest_verification_ids_for_consumer_version_tags" AS select
    lpp.provider_id,
    lpp.consumer_id,
    t.name as consumer_version_tag_name,
    max(lv.latest_verification_id) as latest_verification_id
  from latest_verification_ids_for_pact_versions lv
  join latest_pact_publication_ids_for_consumer_versions lpp
    on lv.pact_version_id = lpp.pact_version_id
  join tags t
    on lpp.consumer_version_id = t.version_id
  group by lpp.provider_id, lpp.consumer_id, t.name

2021-09-06 18:54:54.372100 I [20327:4260] pact-broker -- (0.000076s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb') RETURNING "filename"
2021-09-06 18:54:54.372283 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.372306 I [20327:4260] pact-broker -- Finished applying migration 20210207_optimise_latest_verification_ids_for_consumer_version_tags.rb, direction: up, took 0.001202 seconds
2021-09-06 18:54:54.372312 I [20327:4260] pact-broker -- Begin applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up
2021-09-06 18:54:54.372459 I [20327:4260] pact-broker -- (0.000122s) BEGIN
2021-09-06 18:54:54.373130 I [20327:4260] pact-broker -- (0.000490s) CREATE OR REPLACE VIEW "latest_tagged_pact_consumer_version_orders" AS SELECT "lp"."provider_id", "lp"."consumer_id", "t"."name" AS "tag_name", max("version_order") AS "latest_consumer_version_order" FROM "latest_pact_publication_ids_for_consumer_versions" AS "lp" INNER JOIN "tags" AS "t" ON ("t"."version_id" = "lp"."consumer_version_id") GROUP BY "lp"."provider_id", "lp"."consumer_id", "t"."name"
2021-09-06 18:54:54.373288 I [20327:4260] pact-broker -- (0.000085s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210208_optimise_latest_tagged_pact_cv_orders.rb') RETURNING "filename"
2021-09-06 18:54:54.373469 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.373491 I [20327:4260] pact-broker -- Finished applying migration 20210208_optimise_latest_tagged_pact_cv_orders.rb, direction: up, took 0.001176 seconds
2021-09-06 18:54:54.373497 I [20327:4260] pact-broker -- Begin applying migration 20210210_create_environments_table.rb, direction: up
2021-09-06 18:54:54.373553 I [20327:4260] pact-broker -- (0.000036s) BEGIN
2021-09-06 18:54:54.375432 I [20327:4260] pact-broker -- (0.001734s) CREATE TABLE "environments" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "uuid" text, "name" text, "display_name" text, "production" Boolean, "contacts" text, "created_at" timestamp, "updated_at" timestamp)
2021-09-06 18:54:54.375508 I [20327:4260] pact-broker -- (0.000046s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.375978 I [20327:4260] pact-broker -- (0.000426s) CREATE UNIQUE INDEX "environments_uuid_index" ON "environments" ("uuid")
2021-09-06 18:54:54.376052 I [20327:4260] pact-broker -- (0.000037s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.376151 I [20327:4260] pact-broker -- (0.000064s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.376659 I [20327:4260] pact-broker -- (0.000465s) CREATE UNIQUE INDEX "environments_name_index" ON "environments" ("name")
2021-09-06 18:54:54.376743 I [20327:4260] pact-broker -- (0.000058s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.376883 I [20327:4260] pact-broker -- (0.000065s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210210_create_environments_table.rb') RETURNING "filename"
2021-09-06 18:54:54.377077 I [20327:4260] pact-broker -- (0.000163s) COMMIT
2021-09-06 18:54:54.377099 I [20327:4260] pact-broker -- Finished applying migration 20210210_create_environments_table.rb, direction: up, took 0.003598 seconds
2021-09-06 18:54:54.377106 I [20327:4260] pact-broker -- Begin applying migration 20210216_create_deployed_versions_table.rb, direction: up
2021-09-06 18:54:54.377246 I [20327:4260] pact-broker -- (0.000095s) BEGIN
2021-09-06 18:54:54.379994 I [20327:4260] pact-broker -- (0.002544s) CREATE TABLE "deployed_versions" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "uuid" text NOT NULL, "version_id" integer NOT NULL REFERENCES "versions", "pacticipant_id" integer NOT NULL, "environment_id" integer NOT NULL REFERENCES "environments", "currently_deployed" Boolean NOT NULL, "replaced_previous_deployed_version" Boolean NOT NULL, "created_at" timestamp, "updated_at" timestamp, "undeployed_at" timestamp)
2021-09-06 18:54:54.380078 I [20327:4260] pact-broker -- (0.000046s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.380609 I [20327:4260] pact-broker -- (0.000493s) CREATE UNIQUE INDEX "deployed_versions_uuid_index" ON "deployed_versions" ("uuid")
2021-09-06 18:54:54.380689 I [20327:4260] pact-broker -- (0.000052s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.380792 I [20327:4260] pact-broker -- (0.000061s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.381344 I [20327:4260] pact-broker -- (0.000506s) CREATE INDEX "deployed_versions_pacticipant_id_currently_deployed_index" ON "deployed_versions" ("pacticipant_id", "currently_deployed")
2021-09-06 18:54:54.381423 I [20327:4260] pact-broker -- (0.000038s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.381566 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210216_create_deployed_versions_table.rb') RETURNING "filename"
2021-09-06 18:54:54.381766 I [20327:4260] pact-broker -- (0.000170s) COMMIT
2021-09-06 18:54:54.381815 I [20327:4260] pact-broker -- Finished applying migration 20210216_create_deployed_versions_table.rb, direction: up, took 0.004706 seconds
2021-09-06 18:54:54.381822 I [20327:4260] pact-broker -- Begin applying migration 20210226_set_deployment_columns_not_null.rb, direction: up
2021-09-06 18:54:54.381953 I [20327:4260] pact-broker -- (0.000110s) BEGIN
2021-09-06 18:54:54.382183 I [20327:4260] pact-broker -- (0.000162s) ALTER TABLE "deployed_versions" ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.382507 I [20327:4260] pact-broker -- (0.000244s) ALTER TABLE "environments" ALTER COLUMN "uuid" SET NOT NULL, ALTER COLUMN "name" SET NOT NULL, ALTER COLUMN "production" SET NOT NULL, ALTER COLUMN "created_at" SET NOT NULL, ALTER COLUMN "updated_at" SET NOT NULL
2021-09-06 18:54:54.382670 I [20327:4260] pact-broker -- (0.000084s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210226_set_deployment_columns_not_null.rb') RETURNING "filename"
2021-09-06 18:54:54.382870 I [20327:4260] pact-broker -- (0.000162s) COMMIT
2021-09-06 18:54:54.382901 I [20327:4260] pact-broker -- Finished applying migration 20210226_set_deployment_columns_not_null.rb, direction: up, took 0.001075 seconds
2021-09-06 18:54:54.382909 I [20327:4260] pact-broker -- Begin applying migration 20210301_add_pacticipant_columns.rb, direction: up
2021-09-06 18:54:54.383056 I [20327:4260] pact-broker -- (0.000097s) BEGIN
2021-09-06 18:54:54.383427 I [20327:4260] pact-broker -- (0.000261s) ALTER TABLE "pacticipants" ADD COLUMN "display_name" text, ADD COLUMN "repository_name" text, ADD COLUMN "repository_namespace" text, ADD COLUMN "main_development_branches" text
2021-09-06 18:54:54.383561 I [20327:4260] pact-broker -- (0.000067s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210301_add_pacticipant_columns.rb') RETURNING "filename"
2021-09-06 18:54:54.383749 I [20327:4260] pact-broker -- (0.000158s) COMMIT
2021-09-06 18:54:54.383771 I [20327:4260] pact-broker -- Finished applying migration 20210301_add_pacticipant_columns.rb, direction: up, took 0.000860 seconds
2021-09-06 18:54:54.383778 I [20327:4260] pact-broker -- Begin applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up
2021-09-06 18:54:54.383937 I [20327:4260] pact-broker -- (0.000134s) BEGIN
2021-09-06 18:54:54.386721 I [20327:4260] pact-broker -- (0.002611s) CREATE TABLE "currently_deployed_version_ids" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "target_for_index" text NOT NULL, "pacticipant_id" integer NOT NULL REFERENCES "pacticipants" ON DELETE CASCADE, "environment_id" integer NOT NULL REFERENCES "environments" ON DELETE CASCADE, "version_id" integer NOT NULL REFERENCES "versions" ON DELETE CASCADE, "deployed_version_id" integer NOT NULL)
2021-09-06 18:54:54.386822 I [20327:4260] pact-broker -- (0.000053s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.387533 I [20327:4260] pact-broker -- (0.000609s) CREATE UNIQUE INDEX "currently_deployed_version_pacticipant_environment_target_index" ON "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "target_for_index")
2021-09-06 18:54:54.387625 I [20327:4260] pact-broker -- (0.000053s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.387813 I [20327:4260] pact-broker -- (0.000087s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210413_create_currently_deployed_version_ids_table.rb') RETURNING "filename"
2021-09-06 18:54:54.388033 I [20327:4260] pact-broker -- (0.000184s) COMMIT
2021-09-06 18:54:54.388058 I [20327:4260] pact-broker -- Finished applying migration 20210413_create_currently_deployed_version_ids_table.rb, direction: up, took 0.004276 seconds
2021-09-06 18:54:54.388065 I [20327:4260] pact-broker -- Begin applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up
2021-09-06 18:54:54.388192 I [20327:4260] pact-broker -- (0.000104s) BEGIN
2021-09-06 18:54:54.388588 I [20327:4260] pact-broker -- (0.000274s) ALTER TABLE "deployed_versions" ADD COLUMN "target" text, ADD COLUMN "target_for_index" text DEFAULT '' NOT NULL, ALTER COLUMN "replaced_previous_deployed_version" DROP NOT NULL, ALTER COLUMN "currently_deployed" DROP NOT NULL
2021-09-06 18:54:54.388708 I [20327:4260] pact-broker -- (0.000100s) DROP INDEX "deployed_versions_pacticipant_id_currently_deployed_index"
2021-09-06 18:54:54.388830 I [20327:4260] pact-broker -- (0.000063s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210415_add_target_column_to_deployed_version.rb') RETURNING "filename"
2021-09-06 18:54:54.389178 I [20327:4260] pact-broker -- (0.000318s) COMMIT
2021-09-06 18:54:54.389203 I [20327:4260] pact-broker -- Finished applying migration 20210415_add_target_column_to_deployed_version.rb, direction: up, took 0.001135 seconds
2021-09-06 18:54:54.389210 I [20327:4260] pact-broker -- Begin applying migration 20210419_create_released_versions_table.rb, direction: up
2021-09-06 18:54:54.389280 I [20327:4260] pact-broker -- (0.000050s) BEGIN
2021-09-06 18:54:54.391802 I [20327:4260] pact-broker -- (0.002334s) CREATE TABLE "released_versions" ("id" integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY, "uuid" text NOT NULL, "version_id" integer NOT NULL REFERENCES "versions", "pacticipant_id" integer NOT NULL, "environment_id" integer NOT NULL REFERENCES "environments", "created_at" timestamp, "updated_at" timestamp, "support_ended_at" timestamp)
2021-09-06 18:54:54.391891 I [20327:4260] pact-broker -- (0.000048s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.392475 I [20327:4260] pact-broker -- (0.000537s) CREATE UNIQUE INDEX "released_versions_uuid_index" ON "released_versions" ("uuid")
2021-09-06 18:54:54.392564 I [20327:4260] pact-broker -- (0.000047s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.392644 I [20327:4260] pact-broker -- (0.000043s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.393157 I [20327:4260] pact-broker -- (0.000475s) CREATE UNIQUE INDEX "released_versions_version_id_environment_id_index" ON "released_versions" ("version_id", "environment_id")
2021-09-06 18:54:54.393222 I [20327:4260] pact-broker -- (0.000041s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.393340 I [20327:4260] pact-broker -- (0.000087s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.393846 I [20327:4260] pact-broker -- (0.000465s) CREATE INDEX "released_version_support_ended_at_index" ON "released_versions" ("support_ended_at")
2021-09-06 18:54:54.393921 I [20327:4260] pact-broker -- (0.000050s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.394082 I [20327:4260] pact-broker -- (0.000075s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210419_create_released_versions_table.rb') RETURNING "filename"
2021-09-06 18:54:54.394437 I [20327:4260] pact-broker -- (0.000318s) COMMIT
2021-09-06 18:54:54.394468 I [20327:4260] pact-broker -- Finished applying migration 20210419_create_released_versions_table.rb, direction: up, took 0.005253 seconds
2021-09-06 18:54:54.394476 I [20327:4260] pact-broker -- Begin applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up
2021-09-06 18:54:54.394611 I [20327:4260] pact-broker -- (0.000113s) BEGIN
2021-09-06 18:54:54.394836 I [20327:4260] pact-broker -- (0.000141s) ALTER TABLE "pacticipants" ADD COLUMN "main_branch" text
2021-09-06 18:54:54.395019 I [20327:4260] pact-broker -- (0.000082s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210529_add_main_branch_to_pacticipant.rb') RETURNING "filename"
2021-09-06 18:54:54.395251 I [20327:4260] pact-broker -- (0.000198s) COMMIT
2021-09-06 18:54:54.395274 I [20327:4260] pact-broker -- Finished applying migration 20210529_add_main_branch_to_pacticipant.rb, direction: up, took 0.000795 seconds
2021-09-06 18:54:54.395280 I [20327:4260] pact-broker -- Begin applying migration 20210608_add_uuid_to_webhook.rb, direction: up
2021-09-06 18:54:54.395381 I [20327:4260] pact-broker -- (0.000082s) BEGIN
2021-09-06 18:54:54.395590 I [20327:4260] pact-broker -- (0.000133s) ALTER TABLE "triggered_webhooks" ADD COLUMN "uuid" text
2021-09-06 18:54:54.396134 I [20327:4260] pact-broker -- (0.000525s) CREATE UNIQUE INDEX "triggered_webhooks_uuid" ON "triggered_webhooks" ("uuid")
2021-09-06 18:54:54.396261 I [20327:4260] pact-broker -- (0.000070s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210608_add_uuid_to_webhook.rb') RETURNING "filename"
2021-09-06 18:54:54.396431 I [20327:4260] pact-broker -- (0.000142s) COMMIT
2021-09-06 18:54:54.396451 I [20327:4260] pact-broker -- Finished applying migration 20210608_add_uuid_to_webhook.rb, direction: up, took 0.001168 seconds
2021-09-06 18:54:54.396458 I [20327:4260] pact-broker -- Begin applying migration 20210609_set_webhook_uuid.rb, direction: up
2021-09-06 18:54:54.396545 I [20327:4260] pact-broker -- (0.000068s) BEGIN
2021-09-06 18:54:54.396647 I [20327:4260] pact-broker -- (0.000057s) SAVEPOINT autopoint_1
2021-09-06 18:54:54.397094 I [20327:4260] pact-broker -- (0.000384s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 18:54:54.397171 I [20327:4260] pact-broker -- (0.000052s) RELEASE SAVEPOINT autopoint_1
2021-09-06 18:54:54.398401 I [20327:4260] pact-broker -- (0.000708s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.399065 I [20327:4260] pact-broker -- (0.000310s) UPDATE "triggered_webhooks" SET "uuid" = ('ffe3cb2b-f986-4d0b-b1cc-bd792ad74b3b' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 18:54:54.399231 I [20327:4260] pact-broker -- (0.000069s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210609_set_webhook_uuid.rb') RETURNING "filename"
2021-09-06 18:54:54.399434 I [20327:4260] pact-broker -- (0.000168s) COMMIT
2021-09-06 18:54:54.399463 I [20327:4260] pact-broker -- Finished applying migration 20210609_set_webhook_uuid.rb, direction: up, took 0.003001 seconds
2021-09-06 18:54:54.399471 I [20327:4260] pact-broker -- Begin applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up
2021-09-06 18:54:54.399576 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.399873 I [20327:4260] pact-broker -- (0.000228s) ALTER TABLE "deployed_versions" DROP COLUMN "replaced_previous_deployed_version", DROP COLUMN "currently_deployed"
2021-09-06 18:54:54.400025 I [20327:4260] pact-broker -- (0.000080s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210702_drop_unused_columns_from_deployed_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.400209 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.400234 I [20327:4260] pact-broker -- Finished applying migration 20210702_drop_unused_columns_from_deployed_versions.rb, direction: up, took 0.000760 seconds
2021-09-06 18:54:54.400241 I [20327:4260] pact-broker -- Begin applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up
2021-09-06 18:54:54.400354 I [20327:4260] pact-broker -- (0.000088s) BEGIN
2021-09-06 18:54:54.400566 I [20327:4260] pact-broker -- (0.000134s) ALTER TABLE "pact_publications" ADD COLUMN "consumer_version_order" integer
2021-09-06 18:54:54.400791 I [20327:4260] pact-broker -- (0.000161s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210711_add_consumer_version_order_to_pact_publication.rb') RETURNING "filename"
2021-09-06 18:54:54.400961 I [20327:4260] pact-broker -- (0.000142s) COMMIT
2021-09-06 18:54:54.400983 I [20327:4260] pact-broker -- Finished applying migration 20210711_add_consumer_version_order_to_pact_publication.rb, direction: up, took 0.000740 seconds
2021-09-06 18:54:54.400990 I [20327:4260] pact-broker -- Begin applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up
2021-09-06 18:54:54.401065 I [20327:4260] pact-broker -- (0.000056s) BEGIN
2021-09-06 18:54:54.401315 I [20327:4260] pact-broker -- (0.000151s) ALTER TABLE "pact_versions" ADD COLUMN "messages_count" integer, ADD COLUMN "interactions_count" integer
2021-09-06 18:54:54.401438 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210712_add_interaction_count_to_pact_versions.rb') RETURNING "filename"
2021-09-06 18:54:54.401605 I [20327:4260] pact-broker -- (0.000138s) COMMIT
2021-09-06 18:54:54.401626 I [20327:4260] pact-broker -- Finished applying migration 20210712_add_interaction_count_to_pact_versions.rb, direction: up, took 0.000633 seconds
2021-09-06 18:54:54.401632 I [20327:4260] pact-broker -- Begin applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up
2021-09-06 18:54:54.401707 I [20327:4260] pact-broker -- (0.000055s) BEGIN
2021-09-06 18:54:54.402279 I [20327:4260] pact-broker -- (0.000517s) CREATE INDEX "triggered_webhooks_webhook_uuid_index" ON "triggered_webhooks" ("webhook_uuid")
2021-09-06 18:54:54.402400 I [20327:4260] pact-broker -- (0.000066s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210722_add_index_to_triggered_webhooks_webhook_uuid.rb') RETURNING "filename"
2021-09-06 18:54:54.402566 I [20327:4260] pact-broker -- (0.000139s) COMMIT
2021-09-06 18:54:54.402588 I [20327:4260] pact-broker -- Finished applying migration 20210722_add_index_to_triggered_webhooks_webhook_uuid.rb, direction: up, took 0.000954 seconds
2021-09-06 18:54:54.402595 I [20327:4260] pact-broker -- Begin applying migration 20210810_set_allow_contract_modification.rb, direction: up
2021-09-06 18:54:54.402663 I [20327:4260] pact-broker -- (0.000050s) BEGIN
2021-09-06 18:54:54.402945 I [20327:4260] pact-broker -- (0.000201s) SELECT count(*) AS "count" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.403074 I [20327:4260] pact-broker -- (0.000064s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210810_set_allow_contract_modification.rb') RETURNING "filename"
2021-09-06 18:54:54.403238 I [20327:4260] pact-broker -- (0.000137s) COMMIT
2021-09-06 18:54:54.403259 I [20327:4260] pact-broker -- Finished applying migration 20210810_set_allow_contract_modification.rb, direction: up, took 0.000662 seconds
2021-09-06 18:54:54.403266 I [20327:4260] pact-broker -- Begin applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up
2021-09-06 18:54:54.403357 I [20327:4260] pact-broker -- (0.000067s) BEGIN
2021-09-06 18:54:54.404033 I [20327:4260] pact-broker -- (0.000586s) CREATE INDEX "verifications_pact_version_id_id_index" ON "verifications" ("pact_version_id", "id")
2021-09-06 18:54:54.404170 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210815_add_provider_version_id_index_to_verifications.rb') RETURNING "filename"
2021-09-06 18:54:54.404354 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.404381 I [20327:4260] pact-broker -- Finished applying migration 20210815_add_provider_version_id_index_to_verifications.rb, direction: up, took 0.001112 seconds
2021-09-06 18:54:54.404388 I [20327:4260] pact-broker -- Begin applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up
2021-09-06 18:54:54.404479 I [20327:4260] pact-broker -- (0.000067s) BEGIN
2021-09-06 18:54:54.404744 I [20327:4260] pact-broker -- (0.000179s) ALTER TABLE "verifications" ADD COLUMN "consumer_version_selector_hashes" text, ADD COLUMN "tag_names" text
2021-09-06 18:54:54.404896 I [20327:4260] pact-broker -- (0.000068s) INSERT INTO "schema_migrations" ("filename") VALUES ('20210818_add_consumer_version_selectors_to_verification.rb') RETURNING "filename"
2021-09-06 18:54:54.405081 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.405109 I [20327:4260] pact-broker -- Finished applying migration 20210818_add_consumer_version_selectors_to_verification.rb, direction: up, took 0.000718 seconds
2021-09-06 18:54:54.405624 I [20327:4260] pact-broker -- (0.000323s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 18:54:54.405862 I [20327:4260] pact-broker -- (0.000122s) SELECT * FROM "schema_migrations" ORDER BY "filename" DESC LIMIT 1
2021-09-06 18:54:54.405893 I [20327:4260] PactBroker::App -- Database schema version is now 20210818
2021-09-06 18:54:54.405905 I [20327:4260] PactBroker::App -- Migrating data
2021-09-06 18:54:54.406211 I [20327:4260] pact-broker -- (0.000223s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.407399 I [20327:4260] pact-broker -- (0.000697s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.407749 I [20327:4260] pact-broker -- (0.000086s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.407935 I [20327:4260] pact-broker -- (0.000090s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:54:54.408150 I [20327:4260] pact-broker -- (0.000134s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.409215 I [20327:4260] pact-broker -- (0.000614s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.409467 I [20327:4260] pact-broker -- (0.000072s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.409615 I [20327:4260] pact-broker -- (0.000061s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.409795 I [20327:4260] pact-broker -- (0.000145s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 18:54:54.409937 I [20327:4260] pact-broker -- (0.000073s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.411066 I [20327:4260] pact-broker -- (0.000648s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.411314 I [20327:4260] pact-broker -- (0.000082s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.411656 I [20327:4260] pact-broker -- (0.000234s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.412729 I [20327:4260] pact-broker -- (0.000617s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.413002 I [20327:4260] pact-broker -- (0.000088s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.413163 I [20327:4260] pact-broker -- (0.000123s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 18:54:54.413320 I [20327:4260] pact-broker -- (0.000079s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.413464 I [20327:4260] pact-broker -- (0.000063s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 18:54:54.413688 I [20327:4260] pact-broker -- (0.000116s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 18:54:54.413794 I [20327:4260] pact-broker -- (0.000055s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 18:54:54.413930 I [20327:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 18:54:54.414072 I [20327:4260] pact-broker -- (0.000072s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 18:54:54.414304 I [20327:4260] pact-broker -- (0.000163s) SELECT NULL AS "nil" FROM "webhook_executions" LIMIT 1
2021-09-06 18:54:54.415381 I [20327:4260] pact-broker -- (0.000606s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_executions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.415650 I [20327:4260] pact-broker -- (0.000103s) DELETE FROM "webhook_executions" WHERE ("triggered_webhook_id" IS NULL)
2021-09-06 18:54:54.416027 I [20327:4260] pact-broker -- (0.000325s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 18:54:54.416339 I [20327:4260] pact-broker -- (0.000256s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 18:54:54.416691 I [20327:4260] pact-broker -- (0.000269s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.417778 I [20327:4260] pact-broker -- (0.000616s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.418012 I [20327:4260] pact-broker -- (0.000084s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.418145 I [20327:4260] pact-broker -- (0.000076s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.418264 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.418505 I [20327:4260] pact-broker -- (0.000124s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 18:54:54.418653 I [20327:4260] pact-broker -- (0.000070s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.418769 I [20327:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.418888 I [20327:4260] pact-broker -- (0.000069s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.419004 I [20327:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.419228 I [20327:4260] pact-broker -- (0.000117s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 18:54:54.419454 I [20327:4260] pact-broker -- (0.000154s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:54:54.420511 I [20327:4260] pact-broker -- (0.000613s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pacticipants"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.420786 I [20327:4260] pact-broker -- (0.000077s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:54:54.420925 I [20327:4260] pact-broker -- (0.000068s) SELECT * FROM "pacticipants" WHERE ("display_name" IS NULL)
2021-09-06 18:54:54.421078 I [20327:4260] pact-broker -- (0.000064s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:54:54.421190 I [20327:4260] pact-broker -- (0.000060s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:54:54.421321 I [20327:4260] pact-broker -- (0.000059s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:54:54.421438 I [20327:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.421551 I [20327:4260] pact-broker -- (0.000063s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.421681 I [20327:4260] pact-broker -- (0.000061s) SELECT "id", "name" FROM "pacticipants" WHERE ("main_branch" IS NULL)
2021-09-06 18:54:54.421947 I [20327:4260] pact-broker -- (0.000193s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 18:54:54.423060 I [20327:4260] pact-broker -- (0.000633s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.423502 I [20327:4260] pact-broker -- (0.000130s) UPDATE "triggered_webhooks" SET "uuid" = ('39e5af7b-c9a0-4f9f-9cd2-cf07d76c0dcf' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 18:54:54.423666 I [20327:4260] pact-broker -- (0.000079s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.423784 I [20327:4260] pact-broker -- (0.000063s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:54:54.423935 I [20327:4260] pact-broker -- (0.000098s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.424077 I [20327:4260] pact-broker -- (0.000090s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.424377 I [20327:4260] pact-broker -- (0.000146s) UPDATE "pact_publications" SET "consumer_version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "pact_publications"."consumer_version_id")) WHERE ("consumer_version_order" IS NULL)
2021-09-06 18:54:54.424503 I [20327:4260] pact-broker -- (0.000079s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.424623 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.424743 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.424858 I [20327:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.425105 I [20327:4260] pact-broker -- (0.000119s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 18:54:54.425216 I [20327:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.425331 I [20327:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:54:54.425447 I [20327:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.425561 I [20327:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:54:54.425776 I [20327:4260] pact-broker -- (0.000114s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 18:54:54.434189 I [20327:4260] pact-broker -- (0.000737s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags_with_latest_flag"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.440364 I [20327:4260] pact-broker -- (0.000784s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.442240 I [20327:4260] pact-broker -- (0.000671s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"labels"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.667746 I [20327:4260] pact-broker -- (0.000866s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_events"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.688016 I [20327:4260] pact-broker -- (0.000797s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.690125 I [20327:4260] pact-broker -- (0.000740s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.695170 I [20327:4260] pact-broker -- (0.000140s) SELECT "webhook_executions"."id", "triggered_webhook_id", "success", "logs", "webhook_executions"."created_at" FROM "webhook_executions" LIMIT 1
2021-09-06 18:54:54.698410 I [20327:4260] pact-broker -- (0.000379s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" LIMIT 1
2021-09-06 18:54:54.702849 I [20327:4260] pact-broker -- (0.000725s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"integrations"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.708309 I [20327:4260] pact-broker -- (0.000729s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_pact_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.716457 I [20327:4260] pact-broker -- (0.000758s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"all_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.719617 I [20327:4260] pact-broker -- (0.000681s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications_by_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.721743 I [20327:4260] pact-broker -- (0.000665s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.723644 I [20327:4260] pact-broker -- (0.000649s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_tagged_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.729620 I [20327:4260] pact-broker -- (0.000825s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_version_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.731738 I [20327:4260] pact-broker -- (0.000665s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_and_provider"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.733356 I [20327:4260] pact-broker -- (0.000654s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.736687 I [20327:4260] pact-broker -- (0.000722s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.738950 I [20327:4260] pact-broker -- (0.000643s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.768697 I [20327:4260] pact-broker -- (0.000210s) UPDATE "triggered_webhooks" SET "status" = 'failure' WHERE ("status" = 'retrying')
2021-09-06 18:54:54.771162 I [20327:4260] pact-broker -- (0.000734s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"config"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.772147 I [20327:4260] pact-broker -- (0.000268s) SELECT * FROM "config"
2021-09-06 18:54:54.772202 I [20327:4260] PactBroker::App -- Seeding example data
2021-09-06 18:54:54.802454 I [20327:4260] pact-broker -- (0.000775s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verification_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.809909 I [20327:4260] pact-broker -- (0.000771s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"certificates"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.814417 I [20327:4260] pact-broker -- (0.000745s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"environments"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.821987 I [20327:4260] pact-broker -- (0.000846s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"currently_deployed_version_ids"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.824305 I [20327:4260] pact-broker -- (0.000901s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"deployed_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.828354 I [20327:4260] pact-broker -- (0.000783s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"released_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:54:54.830119 I [20327:4260] pact-broker -- (0.000236s) SELECT "pacticipants".* FROM "pacticipants" ORDER BY lower("pacticipants"."name")
2021-09-06 18:54:54.830627 I [20327:4260] pact-broker -- (0.000087s) BEGIN
2021-09-06 18:54:54.831496 I [20327:4260] pact-broker -- (0.000660s) INSERT INTO "environments" ("display_name", "production", "name", "uuid", "created_at", "updated_at") VALUES ('Test', false, 'test', 'a21a5b1e-9aef-42fb-9432-625c33ba28d0', '2021-09-06 14:54:54.830418+0000', '2021-09-06 14:54:54.830418+0000') RETURNING *
2021-09-06 18:54:54.832214 I [20327:4260] pact-broker -- (0.000248s) COMMIT
2021-09-06 18:54:54.832864 I [20327:4260] pact-broker -- (0.000452s) UPDATE "environments" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.833333 I [20327:4260] pact-broker -- (0.000332s) UPDATE "environments" SET "updated_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.833612 I [20327:4260] pact-broker -- (0.000083s) BEGIN
2021-09-06 18:54:54.833970 I [20327:4260] pact-broker -- (0.000172s) INSERT INTO "environments" ("display_name", "production", "name", "uuid", "created_at", "updated_at") VALUES ('Production', true, 'production', '56a93130-5483-4cb0-96b7-8330717cfeab', '2021-09-06 14:54:54.833458+0000', '2021-09-06 14:54:54.833458+0000') RETURNING *
2021-09-06 18:54:54.834384 I [20327:4260] pact-broker -- (0.000249s) COMMIT
2021-09-06 18:54:54.834805 I [20327:4260] pact-broker -- (0.000300s) UPDATE "environments" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.835285 I [20327:4260] pact-broker -- (0.000362s) UPDATE "environments" SET "updated_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.835705 I [20327:4260] pact-broker -- (0.000072s) BEGIN
2021-09-06 18:54:54.836433 I [20327:4260] pact-broker -- (0.000440s) INSERT INTO "pacticipants" ("name", "repository_url", "created_at", "updated_at", "display_name", "main_branch") VALUES ('Example App', 'https://github.com/example-organization/Example App', '2021-08-21 14:54:54.835304+0000', '2021-09-06 14:54:54.835564+0000', 'Example App', NULL) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.836781 I [20327:4260] pact-broker -- (0.000183s) COMMIT
2021-09-06 18:54:54.836983 I [20327:4260] pact-broker -- (0.000078s) BEGIN
2021-09-06 18:54:54.837429 I [20327:4260] pact-broker -- (0.000174s) INSERT INTO "pacticipants" ("name", "repository_url", "created_at", "updated_at", "display_name", "main_branch") VALUES ('Example API', 'https://github.com/example-organization/Example API', '2021-08-21 14:54:54.836808+0000', '2021-09-06 14:54:54.836862+0000', 'Example API', NULL) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.837752 I [20327:4260] pact-broker -- (0.000174s) COMMIT
2021-09-06 18:54:54.838314 I [20327:4260] pact-broker -- (0.000081s) BEGIN
2021-09-06 18:54:54.839169 I [20327:4260] pact-broker -- (0.000702s) INSERT INTO "versions" ("number", "pacticipant_id", "branch", "build_url", "created_at", "updated_at") VALUES ('e15da45d3943bf10793a6d04cfb9f5dabe430fe2', 1, 'main', NULL, '2021-09-06 14:54:54.838165+0000', '2021-09-06 14:54:54.838165+0000') RETURNING *
2021-09-06 18:54:54.839621 I [20327:4260] pact-broker -- (0.000157s) SELECT * FROM "versions" WHERE ("id" = 1) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.839921 I [20327:4260] pact-broker -- (0.000143s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.840220 I [20327:4260] pact-broker -- (0.000211s) UPDATE "versions" SET "order" = 200 WHERE ("id" = 1)
2021-09-06 18:54:54.840408 I [20327:4260] pact-broker -- (0.000135s) SELECT * FROM "versions" WHERE "id" = 1
2021-09-06 18:54:54.840758 I [20327:4260] pact-broker -- (0.000202s) COMMIT
2021-09-06 18:54:54.841137 I [20327:4260] pact-broker -- (0.000264s) UPDATE "versions" SET "created_at" = '2021-08-21 14:54:54.837776+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.841555 I [20327:4260] pact-broker -- (0.000280s) UPDATE "versions" SET "updated_at" = '2021-08-21 14:54:54.837776+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.842054 I [20327:4260] pact-broker -- (0.000086s) BEGIN
2021-09-06 18:54:54.842907 I [20327:4260] pact-broker -- (0.000605s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('prod', 1, '2021-09-06 14:54:54.841898+0000', '2021-09-06 14:54:54.841898+0000', 200, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.843255 I [20327:4260] pact-broker -- (0.000193s) COMMIT
2021-09-06 18:54:54.843717 I [20327:4260] pact-broker -- (0.000303s) UPDATE "tags" SET "created_at" = '2021-08-21 14:54:54.841573+0000' WHERE (("name" = 'prod') AND ("version_id" = 1))
2021-09-06 18:54:54.844048 I [20327:4260] pact-broker -- (0.000228s) UPDATE "tags" SET "updated_at" = '2021-08-21 14:54:54.841573+0000' WHERE ("name" = 'prod')
2021-09-06 18:54:54.844235 I [20327:4260] pact-broker -- (0.000068s) BEGIN
2021-09-06 18:54:54.844618 I [20327:4260] pact-broker -- (0.000203s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('main', 1, '2021-09-06 14:54:54.844110+0000', '2021-09-06 14:54:54.844110+0000', 200, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.844948 I [20327:4260] pact-broker -- (0.000165s) COMMIT
2021-09-06 18:54:54.845333 I [20327:4260] pact-broker -- (0.000262s) UPDATE "tags" SET "created_at" = '2021-08-21 14:54:54.844061+0000' WHERE (("name" = 'main') AND ("version_id" = 1))
2021-09-06 18:54:54.845665 I [20327:4260] pact-broker -- (0.000227s) UPDATE "tags" SET "updated_at" = '2021-08-21 14:54:54.844061+0000' WHERE ("name" = 'main')
2021-09-06 18:54:54.845964 I [20327:4260] pact-broker -- (0.000111s) SELECT * FROM "environments" WHERE ("name" = 'production') LIMIT 1
2021-09-06 18:54:54.846807 I [20327:4260] pact-broker -- (0.000493s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("version_id" = 1) AND ("environment_id" = 2) AND ("target" IS NULL)) LIMIT 1
2021-09-06 18:54:54.846970 I [20327:4260] pact-broker -- (0.000095s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.847347 I [20327:4260] pact-broker -- (0.000100s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.847156+0000' WHERE (("undeployed_at" IS NULL) AND ("pacticipant_id" = 1) AND ("environment_id" = 2) AND ("target" IS NULL) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.847799 I [20327:4260] pact-broker -- (0.000063s) BEGIN
2021-09-06 18:54:54.848380 I [20327:4260] pact-broker -- (0.000434s) INSERT INTO "deployed_versions" ("uuid", "version_id", "pacticipant_id", "environment_id", "target", "created_at", "updated_at", "target_for_index") VALUES ('d71b9cd7-77dd-4a4c-80d9-650b2cc53d58', 1, 1, 2, NULL, '2021-09-06 14:54:54.847665+0000', '2021-09-06 14:54:54.847665+0000', '') ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.849262 I [20327:4260] pact-broker -- (0.000460s) INSERT INTO "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "version_id", "target_for_index", "deployed_version_id") VALUES (1, 2, 1, '', 1) ON CONFLICT ("pacticipant_id", "environment_id", "target_for_index") DO UPDATE SET "version_id" = 1, "deployed_version_id" = 1 RETURNING *
2021-09-06 18:54:54.849485 I [20327:4260] pact-broker -- (0.000175s) COMMIT
2021-09-06 18:54:54.849912 I [20327:4260] pact-broker -- (0.000140s) SELECT * FROM "currently_deployed_version_ids" WHERE ("currently_deployed_version_ids"."deployed_version_id" = 1) LIMIT 1
2021-09-06 18:54:54.850193 I [20327:4260] pact-broker -- (0.000205s) DELETE FROM "currently_deployed_version_ids" WHERE "id" = 1
2021-09-06 18:54:54.850564 I [20327:4260] pact-broker -- (0.000233s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.850249+0000' WHERE (("id" = 1) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.850711 I [20327:4260] pact-broker -- (0.000082s) SELECT * FROM "deployed_versions" WHERE "id" = 1
2021-09-06 18:54:54.851125 I [20327:4260] pact-broker -- (0.000197s) UPDATE "deployed_versions" SET "created_at" = '2021-08-21 14:54:54.845678+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.851445 I [20327:4260] pact-broker -- (0.000190s) UPDATE "deployed_versions" SET "updated_at" = '2021-08-21 14:54:54.845678+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.851893 I [20327:4260] pact-broker -- (0.000090s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.852180 I [20327:4260] pact-broker -- (0.000092s) SELECT * FROM "pact_versions" WHERE (("sha" = '64cae7e32cafa53621693e516338df283a2160f1') AND ("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:54:54.852533 I [20327:4260] pact-broker -- (0.000049s) BEGIN
2021-09-06 18:54:54.853162 I [20327:4260] pact-broker -- (0.000456s) INSERT INTO "pact_versions" ("consumer_id", "provider_id", "sha", "content", "created_at", "interactions_count", "messages_count") VALUES (1, 2, '64cae7e32cafa53621693e516338df283a2160f1', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 14:54:54.852204+0000', 1, 0) ON CONFLICT ("consumer_id", "provider_id", "sha") DO UPDATE SET "content" = '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"114f1beac2ea4ed3a574c2723640aae634719dd0","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', "messages_count" = 0, "interactions_count" = 1 RETURNING *
2021-09-06 18:54:54.853407 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.853815 I [20327:4260] pact-broker -- (0.000046s) BEGIN
2021-09-06 18:54:54.854599 I [20327:4260] pact-broker -- (0.000639s) INSERT INTO "pact_publications" ("consumer_version_id", "provider_id", "consumer_id", "pact_version_id", "revision_number", "consumer_version_order", "created_at") VALUES (1, 2, 1, 1, 1, 200, '2021-09-06 14:54:54.853718+0000') ON CONFLICT ("consumer_version_id", "provider_id", "revision_number") DO UPDATE SET "pact_version_id" = 1, "consumer_id" = 1, "consumer_version_order" = 200 RETURNING *
2021-09-06 18:54:54.854850 I [20327:4260] pact-broker -- (0.000158s) COMMIT
2021-09-06 18:54:54.855078 I [20327:4260] pact-broker -- (0.000106s) SELECT * FROM "versions" WHERE "id" = 1
2021-09-06 18:54:54.855429 I [20327:4260] pact-broker -- (0.000047s) BEGIN
2021-09-06 18:54:54.856165 I [20327:4260] pact-broker -- (0.000600s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" ("consumer_version_id", "provider_id", "pact_publication_id", "consumer_id", "pact_version_id", "created_at") VALUES (1, 2, 1, 1, 1, '2021-08-21 14:54:54.837776+0000') ON CONFLICT ("provider_id", "consumer_version_id") DO UPDATE SET "consumer_id" = 1, "pact_publication_id" = 1, "pact_version_id" = 1 RETURNING *
2021-09-06 18:54:54.856445 I [20327:4260] pact-broker -- (0.000173s) COMMIT
2021-09-06 18:54:54.856703 I [20327:4260] pact-broker -- (0.000124s) SELECT * FROM "latest_pact_publication_ids_for_consumer_versions" WHERE (("provider_id" = 2) AND ("consumer_version_id" = 1)) LIMIT 1
2021-09-06 18:54:54.856915 I [20327:4260] pact-broker -- (0.000082s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.857168 I [20327:4260] pact-broker -- (0.000076s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.857585 I [20327:4260] pact-broker -- (0.000117s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 1) ORDER BY "created_at"
2021-09-06 18:54:54.858107 I [20327:4260] pact-broker -- (0.000169s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 1) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.858646 I [20327:4260] pact-broker -- (0.000351s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 1) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.859095 I [20327:4260] pact-broker -- (0.000237s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 1))) LIMIT 1
2021-09-06 18:54:54.859257 I [20327:4260] pact-broker -- (0.000087s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.859582 I [20327:4260] pact-broker -- (0.000224s) UPDATE "pact_publications" SET "created_at" = '2021-08-21 14:54:54.851531+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.859885 I [20327:4260] pact-broker -- (0.000207s) UPDATE "pact_versions" SET "created_at" = '2021-08-21 14:54:54.851531+0000' WHERE ("sha" = '64cae7e32cafa53621693e516338df283a2160f1')
2021-09-06 18:54:54.860153 I [20327:4260] pact-broker -- (0.000190s) UPDATE "latest_pact_publication_ids_for_consumer_versions" SET "created_at" = '2021-08-21 14:54:54.851531+0000' WHERE ("consumer_version_id" = 1)
2021-09-06 18:54:54.860340 I [20327:4260] pact-broker -- (0.000092s) SELECT * FROM "pact_publications" WHERE ("id" = 1) LIMIT 1
2021-09-06 18:54:54.860520 I [20327:4260] pact-broker -- (0.000078s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.860719 I [20327:4260] pact-broker -- (0.000072s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.860921 I [20327:4260] pact-broker -- (0.000082s) SELECT * FROM "versions" WHERE "id" = 1
2021-09-06 18:54:54.861185 I [20327:4260] pact-broker -- (0.000100s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 1) ORDER BY "created_at"
2021-09-06 18:54:54.861633 I [20327:4260] pact-broker -- (0.000163s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 1) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.861887 I [20327:4260] pact-broker -- (0.000108s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 1) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.862020 I [20327:4260] pact-broker -- (0.000076s) SELECT * FROM "pact_versions" WHERE "id" = 1
2021-09-06 18:54:54.862445 I [20327:4260] pact-broker -- (0.000200s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 1))) LIMIT 1
2021-09-06 18:54:54.862889 I [20327:4260] pact-broker -- (0.000096s) SELECT * FROM "pact_versions" WHERE (("consumer_id" = 1) AND ("provider_id" = 2) AND ("sha" = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 18:54:54.863204 I [20327:4260] pact-broker -- (0.000136s) SELECT * FROM "versions" WHERE (("number" = '1315e0b1924cb6f42751f977789be3559373033a') AND ("pacticipant_id" = 2)) LIMIT 1
2021-09-06 18:54:54.863244 I [20327:4260] PactBroker::Versions::Repository -- Upserting version 1315e0b1924cb6f42751f977789be3559373033a for pacticipant_id=2
2021-09-06 18:54:54.863432 I [20327:4260] pact-broker -- (0.000038s) BEGIN
2021-09-06 18:54:54.863843 I [20327:4260] pact-broker -- (0.000209s) INSERT INTO "versions" ("number", "pacticipant_id", "created_at", "updated_at") VALUES ('1315e0b1924cb6f42751f977789be3559373033a', 2, '2021-09-06 14:54:54.863249+0000', '2021-09-06 14:54:54.863325+0000') ON CONFLICT ("pacticipant_id", "number") DO UPDATE SET "number" = '1315e0b1924cb6f42751f977789be3559373033a', "repository_ref" = NULL, "pacticipant_id" = 2, "updated_at" = '2021-09-06 14:54:54.863325+0000', "branch" = NULL, "build_url" = NULL RETURNING *
2021-09-06 18:54:54.864153 I [20327:4260] pact-broker -- (0.000108s) SELECT * FROM "versions" WHERE ("id" = 2) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.864344 I [20327:4260] pact-broker -- (0.000073s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.864598 I [20327:4260] pact-broker -- (0.000171s) UPDATE "versions" SET "order" = 201 WHERE ("id" = 2)
2021-09-06 18:54:54.864720 I [20327:4260] pact-broker -- (0.000084s) SELECT * FROM "versions" WHERE "id" = 2
2021-09-06 18:54:54.864992 I [20327:4260] pact-broker -- (0.000149s) COMMIT
2021-09-06 18:54:54.865261 I [20327:4260] pact-broker -- (0.000123s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 2) ORDER BY "created_at"
2021-09-06 18:54:54.865475 I [20327:4260] pact-broker -- (0.000096s) BEGIN
2021-09-06 18:54:54.866379 I [20327:4260] pact-broker -- (0.000763s) INSERT INTO "verifications" ("success", "number", "wip", "execution_date", "pact_version_id", "provider_version_id", "provider_id", "consumer_id", "created_at", "test_results", "tag_names") VALUES (true, 1, false, '2021-08-22 14:54:54.862486+0000', 1, 2, 2, 1, '2021-09-06 14:54:54.865303+0000', '{"some":"results"}', '[]') RETURNING *
2021-09-06 18:54:54.866728 I [20327:4260] pact-broker -- (0.000183s) COMMIT
2021-09-06 18:54:54.866984 I [20327:4260] pact-broker -- (0.000051s) BEGIN
2021-09-06 18:54:54.867724 I [20327:4260] pact-broker -- (0.000604s) INSERT INTO "latest_verification_id_for_pact_version_and_provider_version" ("pact_version_id", "provider_version_id", "provider_id", "verification_id", "consumer_id", "created_at") VALUES (1, 2, 2, 1, 1, '2021-09-06 14:54:54.865303+0000') ON CONFLICT ("pact_version_id", "provider_version_id") DO UPDATE SET "consumer_id" = 1, "provider_id" = 2, "verification_id" = 1 RETURNING *
2021-09-06 18:54:54.867950 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.868185 I [20327:4260] pact-broker -- (0.000098s) SELECT * FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE (("pact_version_id" = 1) AND ("provider_version_id" = 2)) LIMIT 1
2021-09-06 18:54:54.868449 I [20327:4260] pact-broker -- (0.000104s) SELECT * FROM "versions" WHERE (("pacticipant_id" = 2) AND ("number" = '1315e0b1924cb6f42751f977789be3559373033a')) LIMIT 1
2021-09-06 18:54:54.868648 I [20327:4260] pact-broker -- (0.000046s) BEGIN
2021-09-06 18:54:54.868953 I [20327:4260] pact-broker -- (0.000145s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.868670+0000', "branch" = 'main' WHERE ("id" = 2)
2021-09-06 18:54:54.869123 I [20327:4260] pact-broker -- (0.000142s) COMMIT
2021-09-06 18:54:54.869465 I [20327:4260] pact-broker -- (0.000224s) UPDATE "verifications" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 1)
2021-09-06 18:54:54.869752 I [20327:4260] pact-broker -- (0.000202s) UPDATE "versions" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.870070 I [20327:4260] pact-broker -- (0.000240s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.870267 I [20327:4260] pact-broker -- (0.000098s) SELECT * FROM "pact_publications" WHERE ("id" = 1) LIMIT 1
2021-09-06 18:54:54.870649 I [20327:4260] pact-broker -- (0.000217s) UPDATE "latest_verification_id_for_pact_version_and_provider_version" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE (("pact_version_id" = 1) AND ("provider_version_id" = 2))
2021-09-06 18:54:54.870929 I [20327:4260] pact-broker -- (0.000104s) SELECT * FROM "environments" WHERE ("name" = 'production') LIMIT 1
2021-09-06 18:54:54.871381 I [20327:4260] pact-broker -- (0.000171s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("version_id" = 2) AND ("environment_id" = 2) AND ("target" IS NULL)) LIMIT 1
2021-09-06 18:54:54.871517 I [20327:4260] pact-broker -- (0.000081s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.871859 I [20327:4260] pact-broker -- (0.000113s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.871669+0000' WHERE (("undeployed_at" IS NULL) AND ("pacticipant_id" = 2) AND ("environment_id" = 2) AND ("target" IS NULL) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.872094 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.872447 I [20327:4260] pact-broker -- (0.000207s) INSERT INTO "deployed_versions" ("uuid", "version_id", "pacticipant_id", "environment_id", "target", "created_at", "updated_at", "target_for_index") VALUES ('70ded592-cf4d-448e-baad-7e8366a11623', 2, 2, 2, NULL, '2021-09-06 14:54:54.871953+0000', '2021-09-06 14:54:54.871953+0000', '') ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.872928 I [20327:4260] pact-broker -- (0.000217s) INSERT INTO "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "version_id", "target_for_index", "deployed_version_id") VALUES (2, 2, 2, '', 2) ON CONFLICT ("pacticipant_id", "environment_id", "target_for_index") DO UPDATE SET "version_id" = 2, "deployed_version_id" = 2 RETURNING *
2021-09-06 18:54:54.873120 I [20327:4260] pact-broker -- (0.000150s) COMMIT
2021-09-06 18:54:54.873410 I [20327:4260] pact-broker -- (0.000198s) UPDATE "deployed_versions" SET "created_at" = '2021-08-22 14:54:54.870677+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.873697 I [20327:4260] pact-broker -- (0.000187s) UPDATE "deployed_versions" SET "updated_at" = '2021-08-22 14:54:54.870677+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.873921 I [20327:4260] pact-broker -- (0.000091s) SELECT * FROM "environments" WHERE ("name" = 'production') LIMIT 1
2021-09-06 18:54:54.874351 I [20327:4260] pact-broker -- (0.000166s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("version_id" = 1) AND ("environment_id" = 2) AND ("target" IS NULL)) LIMIT 1
2021-09-06 18:54:54.874581 I [20327:4260] pact-broker -- (0.000090s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.874416+0000' WHERE (("undeployed_at" IS NULL) AND ("pacticipant_id" = 1) AND ("environment_id" = 2) AND ("target" IS NULL) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.874775 I [20327:4260] pact-broker -- (0.000040s) BEGIN
2021-09-06 18:54:54.875085 I [20327:4260] pact-broker -- (0.000182s) INSERT INTO "deployed_versions" ("uuid", "version_id", "pacticipant_id", "environment_id", "target", "created_at", "updated_at", "target_for_index") VALUES ('d63fe3a6-62ce-4d7a-80de-2e67578a0b18', 1, 1, 2, NULL, '2021-09-06 14:54:54.874681+0000', '2021-09-06 14:54:54.874681+0000', '') ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.875531 I [20327:4260] pact-broker -- (0.000206s) INSERT INTO "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "version_id", "target_for_index", "deployed_version_id") VALUES (1, 2, 1, '', 3) ON CONFLICT ("pacticipant_id", "environment_id", "target_for_index") DO UPDATE SET "version_id" = 1, "deployed_version_id" = 3 RETURNING *
2021-09-06 18:54:54.875719 I [20327:4260] pact-broker -- (0.000143s) COMMIT
2021-09-06 18:54:54.876013 I [20327:4260] pact-broker -- (0.000200s) UPDATE "deployed_versions" SET "created_at" = '2021-08-23 14:54:54.873709+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.876323 I [20327:4260] pact-broker -- (0.000188s) UPDATE "deployed_versions" SET "updated_at" = '2021-08-23 14:54:54.873709+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.876604 I [20327:4260] pact-broker -- (0.000111s) SELECT * FROM "pact_versions" WHERE (("consumer_id" = 1) AND ("provider_id" = 2) AND ("sha" = '64cae7e32cafa53621693e516338df283a2160f1')) LIMIT 1
2021-09-06 18:54:54.876875 I [20327:4260] pact-broker -- (0.000098s) SELECT * FROM "versions" WHERE (("number" = '480e5aeb30467856ca995d0024d2c1800b0719e5') AND ("pacticipant_id" = 2)) LIMIT 1
2021-09-06 18:54:54.876904 I [20327:4260] PactBroker::Versions::Repository -- Upserting version 480e5aeb30467856ca995d0024d2c1800b0719e5 for pacticipant_id=2
2021-09-06 18:54:54.877079 I [20327:4260] pact-broker -- (0.000072s) BEGIN
2021-09-06 18:54:54.877421 I [20327:4260] pact-broker -- (0.000180s) INSERT INTO "versions" ("number", "pacticipant_id", "created_at", "updated_at") VALUES ('480e5aeb30467856ca995d0024d2c1800b0719e5', 2, '2021-09-06 14:54:54.876908+0000', '2021-09-06 14:54:54.876972+0000') ON CONFLICT ("pacticipant_id", "number") DO UPDATE SET "number" = '480e5aeb30467856ca995d0024d2c1800b0719e5', "repository_ref" = NULL, "pacticipant_id" = 2, "updated_at" = '2021-09-06 14:54:54.876972+0000', "branch" = NULL, "build_url" = NULL RETURNING *
2021-09-06 18:54:54.877706 I [20327:4260] pact-broker -- (0.000103s) SELECT * FROM "versions" WHERE ("id" = 3) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.877891 I [20327:4260] pact-broker -- (0.000054s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.878094 I [20327:4260] pact-broker -- (0.000137s) UPDATE "versions" SET "order" = 202 WHERE ("id" = 3)
2021-09-06 18:54:54.878209 I [20327:4260] pact-broker -- (0.000077s) SELECT * FROM "versions" WHERE "id" = 3
2021-09-06 18:54:54.878520 I [20327:4260] pact-broker -- (0.000159s) COMMIT
2021-09-06 18:54:54.878721 I [20327:4260] pact-broker -- (0.000111s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 3) ORDER BY "created_at"
2021-09-06 18:54:54.878893 I [20327:4260] pact-broker -- (0.000058s) BEGIN
2021-09-06 18:54:54.879320 I [20327:4260] pact-broker -- (0.000304s) INSERT INTO "verifications" ("success", "number", "wip", "execution_date", "pact_version_id", "provider_version_id", "provider_id", "consumer_id", "created_at", "test_results", "tag_names") VALUES (false, 2, false, '2021-08-23 14:54:54.876336+0000', 1, 3, 2, 1, '2021-09-06 14:54:54.878759+0000', '{"some":"results"}', '[]') RETURNING *
2021-09-06 18:54:54.879597 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.879755 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.880229 I [20327:4260] pact-broker -- (0.000332s) INSERT INTO "latest_verification_id_for_pact_version_and_provider_version" ("pact_version_id", "provider_version_id", "provider_id", "verification_id", "consumer_id", "created_at") VALUES (1, 3, 2, 2, 1, '2021-09-06 14:54:54.878759+0000') ON CONFLICT ("pact_version_id", "provider_version_id") DO UPDATE SET "consumer_id" = 1, "provider_id" = 2, "verification_id" = 2 RETURNING *
2021-09-06 18:54:54.880467 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.880676 I [20327:4260] pact-broker -- (0.000102s) SELECT * FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE (("pact_version_id" = 1) AND ("provider_version_id" = 3)) LIMIT 1
2021-09-06 18:54:54.880938 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "versions" WHERE (("pacticipant_id" = 2) AND ("number" = '480e5aeb30467856ca995d0024d2c1800b0719e5')) LIMIT 1
2021-09-06 18:54:54.881131 I [20327:4260] pact-broker -- (0.000052s) BEGIN
2021-09-06 18:54:54.881385 I [20327:4260] pact-broker -- (0.000110s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.881146+0000', "branch" = 'main' WHERE ("id" = 3)
2021-09-06 18:54:54.881550 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.881842 I [20327:4260] pact-broker -- (0.000207s) UPDATE "verifications" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.882135 I [20327:4260] pact-broker -- (0.000209s) UPDATE "versions" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.882452 I [20327:4260] pact-broker -- (0.000235s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.882697 I [20327:4260] pact-broker -- (0.000114s) SELECT * FROM "pact_publications" WHERE ("id" = 1) LIMIT 1
2021-09-06 18:54:54.883084 I [20327:4260] pact-broker -- (0.000228s) UPDATE "latest_verification_id_for_pact_version_and_provider_version" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE (("pact_version_id" = 1) AND ("provider_version_id" = 3))
2021-09-06 18:54:54.883317 I [20327:4260] pact-broker -- (0.000084s) BEGIN
2021-09-06 18:54:54.883644 I [20327:4260] pact-broker -- (0.000175s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('main', 3, '2021-09-06 14:54:54.883178+0000', '2021-09-06 14:54:54.883178+0000', 202, 2) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.883918 I [20327:4260] pact-broker -- (0.000147s) COMMIT
2021-09-06 18:54:54.884249 I [20327:4260] pact-broker -- (0.000219s) UPDATE "tags" SET "created_at" = '2021-08-23 14:54:54.883110+0000' WHERE (("name" = 'main') AND ("version_id" = 3))
2021-09-06 18:54:54.884541 I [20327:4260] pact-broker -- (0.000205s) UPDATE "tags" SET "updated_at" = '2021-08-23 14:54:54.883110+0000' WHERE ("name" = 'main')
2021-09-06 18:54:54.884725 I [20327:4260] pact-broker -- (0.000053s) BEGIN
2021-09-06 18:54:54.885009 I [20327:4260] pact-broker -- (0.000133s) INSERT INTO "versions" ("number", "pacticipant_id", "branch", "build_url", "created_at", "updated_at") VALUES ('725c6ccb7cf7efc51b4394f9828585eea9c379d9', 1, 'feat/new-thing', NULL, '2021-09-06 14:54:54.884622+0000', '2021-09-06 14:54:54.884622+0000') RETURNING *
2021-09-06 18:54:54.885296 I [20327:4260] pact-broker -- (0.000100s) SELECT * FROM "versions" WHERE ("id" = 4) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.885465 I [20327:4260] pact-broker -- (0.000053s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.885638 I [20327:4260] pact-broker -- (0.000111s) UPDATE "versions" SET "order" = 203 WHERE ("id" = 4)
2021-09-06 18:54:54.885751 I [20327:4260] pact-broker -- (0.000078s) SELECT * FROM "versions" WHERE "id" = 4
2021-09-06 18:54:54.886026 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.886310 I [20327:4260] pact-broker -- (0.000199s) UPDATE "versions" SET "created_at" = '2021-08-30 14:54:54.884553+0000' WHERE ("id" = 4)
2021-09-06 18:54:54.886591 I [20327:4260] pact-broker -- (0.000198s) UPDATE "versions" SET "updated_at" = '2021-08-30 14:54:54.884553+0000' WHERE ("id" = 4)
2021-09-06 18:54:54.886750 I [20327:4260] pact-broker -- (0.000043s) BEGIN
2021-09-06 18:54:54.887035 I [20327:4260] pact-broker -- (0.000141s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('feat-new-thing', 4, '2021-09-06 14:54:54.886656+0000', '2021-09-06 14:54:54.886656+0000', 203, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.887316 I [20327:4260] pact-broker -- (0.000141s) COMMIT
2021-09-06 18:54:54.887640 I [20327:4260] pact-broker -- (0.000209s) UPDATE "tags" SET "created_at" = '2021-08-30 14:54:54.886604+0000' WHERE (("name" = 'feat-new-thing') AND ("version_id" = 4))
2021-09-06 18:54:54.887921 I [20327:4260] pact-broker -- (0.000193s) UPDATE "tags" SET "updated_at" = '2021-08-30 14:54:54.886604+0000' WHERE ("name" = 'feat-new-thing')
2021-09-06 18:54:54.888897 I [20327:4260] pact-broker -- (0.000095s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.889191 I [20327:4260] pact-broker -- (0.000096s) SELECT * FROM "pact_versions" WHERE (("sha" = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND ("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:54:54.889410 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.889831 I [20327:4260] pact-broker -- (0.000249s) INSERT INTO "pact_versions" ("consumer_id", "provider_id", "sha", "content", "created_at", "interactions_count", "messages_count") VALUES (1, 2, '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 14:54:54.889216+0000', 1, 0) ON CONFLICT ("consumer_id", "provider_id", "sha") DO UPDATE SET "content" = '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', "messages_count" = 0, "interactions_count" = 1 RETURNING *
2021-09-06 18:54:54.893387 I [20327:4260] pact-broker -- (0.003453s) COMMIT
2021-09-06 18:54:54.893619 I [20327:4260] pact-broker -- (0.000070s) BEGIN
2021-09-06 18:54:54.894067 I [20327:4260] pact-broker -- (0.000300s) INSERT INTO "pact_publications" ("consumer_version_id", "provider_id", "consumer_id", "pact_version_id", "revision_number", "consumer_version_order", "created_at") VALUES (4, 2, 1, 2, 1, 203, '2021-09-06 14:54:54.893499+0000') ON CONFLICT ("consumer_version_id", "provider_id", "revision_number") DO UPDATE SET "pact_version_id" = 2, "consumer_id" = 1, "consumer_version_order" = 203 RETURNING *
2021-09-06 18:54:54.894419 I [20327:4260] pact-broker -- (0.000254s) COMMIT
2021-09-06 18:54:54.894620 I [20327:4260] pact-broker -- (0.000140s) SELECT * FROM "versions" WHERE "id" = 4
2021-09-06 18:54:54.894890 I [20327:4260] pact-broker -- (0.000055s) BEGIN
2021-09-06 18:54:54.895409 I [20327:4260] pact-broker -- (0.000315s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" ("consumer_version_id", "provider_id", "pact_publication_id", "consumer_id", "pact_version_id", "created_at") VALUES (4, 2, 2, 1, 2, '2021-08-30 14:54:54.884553+0000') ON CONFLICT ("provider_id", "consumer_version_id") DO UPDATE SET "consumer_id" = 1, "pact_publication_id" = 2, "pact_version_id" = 2 RETURNING *
2021-09-06 18:54:54.895687 I [20327:4260] pact-broker -- (0.000163s) COMMIT
2021-09-06 18:54:54.895939 I [20327:4260] pact-broker -- (0.000124s) SELECT * FROM "latest_pact_publication_ids_for_consumer_versions" WHERE (("provider_id" = 2) AND ("consumer_version_id" = 4)) LIMIT 1
2021-09-06 18:54:54.896136 I [20327:4260] pact-broker -- (0.000087s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.896351 I [20327:4260] pact-broker -- (0.000077s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.896597 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 4) ORDER BY "created_at"
2021-09-06 18:54:54.897030 I [20327:4260] pact-broker -- (0.000175s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 4) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.897268 I [20327:4260] pact-broker -- (0.000114s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 4) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.897693 I [20327:4260] pact-broker -- (0.000221s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 2))) LIMIT 1
2021-09-06 18:54:54.897861 I [20327:4260] pact-broker -- (0.000082s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.898179 I [20327:4260] pact-broker -- (0.000215s) UPDATE "pact_publications" SET "created_at" = '2021-08-30 14:54:54.888673+0000' WHERE ("id" = 2)
2021-09-06 18:54:54.898469 I [20327:4260] pact-broker -- (0.000196s) UPDATE "pact_versions" SET "created_at" = '2021-08-30 14:54:54.888673+0000' WHERE ("sha" = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7')
2021-09-06 18:54:54.898794 I [20327:4260] pact-broker -- (0.000237s) UPDATE "latest_pact_publication_ids_for_consumer_versions" SET "created_at" = '2021-08-30 14:54:54.888673+0000' WHERE ("consumer_version_id" = 4)
2021-09-06 18:54:54.898964 I [20327:4260] pact-broker -- (0.000100s) SELECT * FROM "pact_publications" WHERE ("id" = 2) LIMIT 1
2021-09-06 18:54:54.899152 I [20327:4260] pact-broker -- (0.000080s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.899452 I [20327:4260] pact-broker -- (0.000127s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.899733 I [20327:4260] pact-broker -- (0.000128s) SELECT * FROM "versions" WHERE "id" = 4
2021-09-06 18:54:54.900011 I [20327:4260] pact-broker -- (0.000123s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 4) ORDER BY "created_at"
2021-09-06 18:54:54.900452 I [20327:4260] pact-broker -- (0.000167s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 4) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.900682 I [20327:4260] pact-broker -- (0.000104s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 4) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.900812 I [20327:4260] pact-broker -- (0.000076s) SELECT * FROM "pact_versions" WHERE "id" = 2
2021-09-06 18:54:54.901254 I [20327:4260] pact-broker -- (0.000210s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 2))) LIMIT 1
2021-09-06 18:54:54.901557 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.901837 I [20327:4260] pact-broker -- (0.000150s) INSERT INTO "versions" ("number", "pacticipant_id", "branch", "build_url", "created_at", "updated_at") VALUES ('6c992f831da299364cf31be6008ee4752189f6d4', 1, 'feat/new-thing', NULL, '2021-09-06 14:54:54.901433+0000', '2021-09-06 14:54:54.901433+0000') RETURNING *
2021-09-06 18:54:54.902139 I [20327:4260] pact-broker -- (0.000111s) SELECT * FROM "versions" WHERE ("id" = 5) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.902317 I [20327:4260] pact-broker -- (0.000053s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.902503 I [20327:4260] pact-broker -- (0.000118s) UPDATE "versions" SET "order" = 204 WHERE ("id" = 5)
2021-09-06 18:54:54.902619 I [20327:4260] pact-broker -- (0.000078s) SELECT * FROM "versions" WHERE "id" = 5
2021-09-06 18:54:54.902894 I [20327:4260] pact-broker -- (0.000159s) COMMIT
2021-09-06 18:54:54.903174 I [20327:4260] pact-broker -- (0.000193s) UPDATE "versions" SET "created_at" = '2021-08-31 14:54:54.901348+0000' WHERE ("id" = 5)
2021-09-06 18:54:54.903445 I [20327:4260] pact-broker -- (0.000177s) UPDATE "versions" SET "updated_at" = '2021-08-31 14:54:54.901348+0000' WHERE ("id" = 5)
2021-09-06 18:54:54.903675 I [20327:4260] pact-broker -- (0.000084s) BEGIN
2021-09-06 18:54:54.904012 I [20327:4260] pact-broker -- (0.000177s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('feat-new-thing', 5, '2021-09-06 14:54:54.903528+0000', '2021-09-06 14:54:54.903528+0000', 204, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.904322 I [20327:4260] pact-broker -- (0.000180s) COMMIT
2021-09-06 18:54:54.904681 I [20327:4260] pact-broker -- (0.000246s) UPDATE "tags" SET "created_at" = '2021-08-31 14:54:54.903461+0000' WHERE (("name" = 'feat-new-thing') AND ("version_id" = 5))
2021-09-06 18:54:54.905013 I [20327:4260] pact-broker -- (0.000236s) UPDATE "tags" SET "updated_at" = '2021-08-31 14:54:54.903461+0000' WHERE ("name" = 'feat-new-thing')
2021-09-06 18:54:54.905326 I [20327:4260] pact-broker -- (0.000090s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.905646 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "pact_versions" WHERE (("sha" = '7fea0092c8da3f313a8f7a2b7921b80b2bbb68d7') AND ("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:54:54.905969 I [20327:4260] pact-broker -- (0.000085s) BEGIN
2021-09-06 18:54:54.906437 I [20327:4260] pact-broker -- (0.000310s) INSERT INTO "pact_publications" ("consumer_version_id", "provider_id", "consumer_id", "pact_version_id", "revision_number", "consumer_version_order", "created_at") VALUES (5, 2, 1, 2, 1, 204, '2021-09-06 14:54:54.905830+0000') ON CONFLICT ("consumer_version_id", "provider_id", "revision_number") DO UPDATE SET "pact_version_id" = 2, "consumer_id" = 1, "consumer_version_order" = 204 RETURNING *
2021-09-06 18:54:54.906728 I [20327:4260] pact-broker -- (0.000156s) COMMIT
2021-09-06 18:54:54.906873 I [20327:4260] pact-broker -- (0.000093s) SELECT * FROM "versions" WHERE "id" = 5
2021-09-06 18:54:54.907127 I [20327:4260] pact-broker -- (0.000063s) BEGIN
2021-09-06 18:54:54.907599 I [20327:4260] pact-broker -- (0.000319s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" ("consumer_version_id", "provider_id", "pact_publication_id", "consumer_id", "pact_version_id", "created_at") VALUES (5, 2, 3, 1, 2, '2021-08-31 14:54:54.901348+0000') ON CONFLICT ("provider_id", "consumer_version_id") DO UPDATE SET "consumer_id" = 1, "pact_publication_id" = 3, "pact_version_id" = 2 RETURNING *
2021-09-06 18:54:54.907848 I [20327:4260] pact-broker -- (0.000153s) COMMIT
2021-09-06 18:54:54.908086 I [20327:4260] pact-broker -- (0.000110s) SELECT * FROM "latest_pact_publication_ids_for_consumer_versions" WHERE (("provider_id" = 2) AND ("consumer_version_id" = 5)) LIMIT 1
2021-09-06 18:54:54.908282 I [20327:4260] pact-broker -- (0.000080s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.908488 I [20327:4260] pact-broker -- (0.000073s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.908768 I [20327:4260] pact-broker -- (0.000142s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 5) ORDER BY "created_at"
2021-09-06 18:54:54.909248 I [20327:4260] pact-broker -- (0.000174s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 5) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.909483 I [20327:4260] pact-broker -- (0.000112s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 5) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.909883 I [20327:4260] pact-broker -- (0.000218s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 2))) LIMIT 1
2021-09-06 18:54:54.910032 I [20327:4260] pact-broker -- (0.000083s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.910352 I [20327:4260] pact-broker -- (0.000223s) UPDATE "pact_publications" SET "created_at" = '2021-08-30 14:54:54.905097+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.910671 I [20327:4260] pact-broker -- (0.000216s) UPDATE "latest_pact_publication_ids_for_consumer_versions" SET "created_at" = '2021-08-30 14:54:54.905097+0000' WHERE ("consumer_version_id" = 5)
2021-09-06 18:54:54.910835 I [20327:4260] pact-broker -- (0.000097s) SELECT * FROM "pact_publications" WHERE ("id" = 3) LIMIT 1
2021-09-06 18:54:54.911049 I [20327:4260] pact-broker -- (0.000097s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.911312 I [20327:4260] pact-broker -- (0.000116s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.911557 I [20327:4260] pact-broker -- (0.000111s) SELECT * FROM "versions" WHERE "id" = 5
2021-09-06 18:54:54.911872 I [20327:4260] pact-broker -- (0.000129s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 5) ORDER BY "created_at"
2021-09-06 18:54:54.912291 I [20327:4260] pact-broker -- (0.000173s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 5) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.912535 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 5) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.912671 I [20327:4260] pact-broker -- (0.000083s) SELECT * FROM "pact_versions" WHERE "id" = 2
2021-09-06 18:54:54.913133 I [20327:4260] pact-broker -- (0.000206s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 2))) LIMIT 1
2021-09-06 18:54:54.913363 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.913618 I [20327:4260] pact-broker -- (0.000140s) INSERT INTO "versions" ("number", "pacticipant_id", "branch", "build_url", "created_at", "updated_at") VALUES ('7bd4d9173522826dc3e8704fd62dde0424f4c827', 1, 'main', NULL, '2021-09-06 14:54:54.913251+0000', '2021-09-06 14:54:54.913251+0000') RETURNING *
2021-09-06 18:54:54.913927 I [20327:4260] pact-broker -- (0.000102s) SELECT * FROM "versions" WHERE ("id" = 6) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.914094 I [20327:4260] pact-broker -- (0.000051s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.914271 I [20327:4260] pact-broker -- (0.000115s) UPDATE "versions" SET "order" = 205 WHERE ("id" = 6)
2021-09-06 18:54:54.914387 I [20327:4260] pact-broker -- (0.000080s) SELECT * FROM "versions" WHERE "id" = 6
2021-09-06 18:54:54.914684 I [20327:4260] pact-broker -- (0.000150s) COMMIT
2021-09-06 18:54:54.914969 I [20327:4260] pact-broker -- (0.000202s) UPDATE "versions" SET "created_at" = '2021-09-05 14:54:54.913177+0000' WHERE ("id" = 6)
2021-09-06 18:54:54.915243 I [20327:4260] pact-broker -- (0.000197s) UPDATE "versions" SET "updated_at" = '2021-09-05 14:54:54.913177+0000' WHERE ("id" = 6)
2021-09-06 18:54:54.915410 I [20327:4260] pact-broker -- (0.000050s) BEGIN
2021-09-06 18:54:54.915708 I [20327:4260] pact-broker -- (0.000156s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('main', 6, '2021-09-06 14:54:54.915310+0000', '2021-09-06 14:54:54.915310+0000', 205, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.916020 I [20327:4260] pact-broker -- (0.000167s) COMMIT
2021-09-06 18:54:54.916368 I [20327:4260] pact-broker -- (0.000238s) UPDATE "tags" SET "created_at" = '2021-09-05 14:54:54.915254+0000' WHERE (("name" = 'main') AND ("version_id" = 6))
2021-09-06 18:54:54.916713 I [20327:4260] pact-broker -- (0.000249s) UPDATE "tags" SET "updated_at" = '2021-09-05 14:54:54.915254+0000' WHERE ("name" = 'main')
2021-09-06 18:54:54.917124 I [20327:4260] pact-broker -- (0.000091s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.917430 I [20327:4260] pact-broker -- (0.000105s) SELECT * FROM "pact_versions" WHERE (("sha" = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND ("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:54:54.917704 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.918081 I [20327:4260] pact-broker -- (0.000212s) INSERT INTO "pact_versions" ("consumer_id", "provider_id", "sha", "content", "created_at", "interactions_count", "messages_count") VALUES (1, 2, 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6', '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', '2021-09-06 14:54:54.917460+0000', 3, 0) ON CONFLICT ("consumer_id", "provider_id", "sha") DO UPDATE SET "content" = '{"consumer":{"name":"Example App"},"provider":{"name":"Example API"},"interactions":[{"_id":"ef69ceef4d7fb82af014da950a3d9028a905c4de","description":"a request for an alligator","providerState":"there is an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":200,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"name":"Mary"},"matchingRules":{"$.body.name":{"match":"type"}}}},{"_id":"4b3c23c364f420e1d1296d56a47695de0428d0af","description":"a request for an alligator","providerState":"there is not an alligator named Mary","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":404,"headers":{}}},{"_id":"e57e7ac251a8bd078fcb81cad1e577cbafebcef5","description":"a request for an alligator","providerState":"an error occurs retrieving an alligator","request":{"method":"get","path":"/alligators/Mary","headers":{"Accept":"application/json"}},"response":{"status":500,"headers":{"Content-Type":"application/json;charset=utf-8"},"body":{"error":"Argh!!!"}}}],"metadata":{"pactSpecification":{"version":"2.0.0"}}}', "messages_count" = 0, "interactions_count" = 3 RETURNING *
2021-09-06 18:54:54.918317 I [20327:4260] pact-broker -- (0.000144s) COMMIT
2021-09-06 18:54:54.918508 I [20327:4260] pact-broker -- (0.000050s) BEGIN
2021-09-06 18:54:54.918952 I [20327:4260] pact-broker -- (0.000264s) INSERT INTO "pact_publications" ("consumer_version_id", "provider_id", "consumer_id", "pact_version_id", "revision_number", "consumer_version_order", "created_at") VALUES (6, 2, 1, 3, 1, 205, '2021-09-06 14:54:54.918414+0000') ON CONFLICT ("consumer_version_id", "provider_id", "revision_number") DO UPDATE SET "pact_version_id" = 3, "consumer_id" = 1, "consumer_version_order" = 205 RETURNING *
2021-09-06 18:54:54.919151 I [20327:4260] pact-broker -- (0.000105s) COMMIT
2021-09-06 18:54:54.919340 I [20327:4260] pact-broker -- (0.000130s) SELECT * FROM "versions" WHERE "id" = 6
2021-09-06 18:54:54.919611 I [20327:4260] pact-broker -- (0.000063s) BEGIN
2021-09-06 18:54:54.920091 I [20327:4260] pact-broker -- (0.000331s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" ("consumer_version_id", "provider_id", "pact_publication_id", "consumer_id", "pact_version_id", "created_at") VALUES (6, 2, 4, 1, 3, '2021-09-05 14:54:54.913177+0000') ON CONFLICT ("provider_id", "consumer_version_id") DO UPDATE SET "consumer_id" = 1, "pact_publication_id" = 4, "pact_version_id" = 3 RETURNING *
2021-09-06 18:54:54.920385 I [20327:4260] pact-broker -- (0.000165s) COMMIT
2021-09-06 18:54:54.920628 I [20327:4260] pact-broker -- (0.000112s) SELECT * FROM "latest_pact_publication_ids_for_consumer_versions" WHERE (("provider_id" = 2) AND ("consumer_version_id" = 6)) LIMIT 1
2021-09-06 18:54:54.920819 I [20327:4260] pact-broker -- (0.000081s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.921027 I [20327:4260] pact-broker -- (0.000074s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.921352 I [20327:4260] pact-broker -- (0.000135s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 6) ORDER BY "created_at"
2021-09-06 18:54:54.921806 I [20327:4260] pact-broker -- (0.000183s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 6) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.922038 I [20327:4260] pact-broker -- (0.000108s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 6) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.922433 I [20327:4260] pact-broker -- (0.000215s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 3))) LIMIT 1
2021-09-06 18:54:54.922622 I [20327:4260] pact-broker -- (0.000085s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.922941 I [20327:4260] pact-broker -- (0.000214s) UPDATE "pact_publications" SET "created_at" = '2021-09-05 14:54:54.916809+0000' WHERE ("id" = 4)
2021-09-06 18:54:54.923233 I [20327:4260] pact-broker -- (0.000196s) UPDATE "pact_versions" SET "created_at" = '2021-09-05 14:54:54.916809+0000' WHERE ("sha" = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')
2021-09-06 18:54:54.923500 I [20327:4260] pact-broker -- (0.000189s) UPDATE "latest_pact_publication_ids_for_consumer_versions" SET "created_at" = '2021-09-05 14:54:54.916809+0000' WHERE ("consumer_version_id" = 6)
2021-09-06 18:54:54.923650 I [20327:4260] pact-broker -- (0.000088s) SELECT * FROM "pact_publications" WHERE ("id" = 4) LIMIT 1
2021-09-06 18:54:54.923827 I [20327:4260] pact-broker -- (0.000076s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.924056 I [20327:4260] pact-broker -- (0.000075s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.924257 I [20327:4260] pact-broker -- (0.000082s) SELECT * FROM "versions" WHERE "id" = 6
2021-09-06 18:54:54.924479 I [20327:4260] pact-broker -- (0.000094s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 6) ORDER BY "created_at"
2021-09-06 18:54:54.924884 I [20327:4260] pact-broker -- (0.000146s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 6) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.925098 I [20327:4260] pact-broker -- (0.000097s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 6) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.925224 I [20327:4260] pact-broker -- (0.000075s) SELECT * FROM "pact_versions" WHERE "id" = 3
2021-09-06 18:54:54.925705 I [20327:4260] pact-broker -- (0.000232s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 3))) LIMIT 1
2021-09-06 18:54:54.926029 I [20327:4260] pact-broker -- (0.000117s) SELECT * FROM "pact_versions" WHERE (("consumer_id" = 1) AND ("provider_id" = 2) AND ("sha" = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6')) LIMIT 1
2021-09-06 18:54:54.926310 I [20327:4260] pact-broker -- (0.000114s) SELECT * FROM "versions" WHERE (("number" = '4fdf20082263d4c5038355a3b734be1c0054d1e1') AND ("pacticipant_id" = 2)) LIMIT 1
2021-09-06 18:54:54.926338 I [20327:4260] PactBroker::Versions::Repository -- Upserting version 4fdf20082263d4c5038355a3b734be1c0054d1e1 for pacticipant_id=2
2021-09-06 18:54:54.926508 I [20327:4260] pact-broker -- (0.000057s) BEGIN
2021-09-06 18:54:54.926855 I [20327:4260] pact-broker -- (0.000156s) INSERT INTO "versions" ("number", "pacticipant_id", "created_at", "updated_at") VALUES ('4fdf20082263d4c5038355a3b734be1c0054d1e1', 2, '2021-09-06 14:54:54.926342+0000', '2021-09-06 14:54:54.926414+0000') ON CONFLICT ("pacticipant_id", "number") DO UPDATE SET "number" = '4fdf20082263d4c5038355a3b734be1c0054d1e1', "repository_ref" = NULL, "pacticipant_id" = 2, "updated_at" = '2021-09-06 14:54:54.926414+0000', "branch" = NULL, "build_url" = NULL RETURNING *
2021-09-06 18:54:54.927147 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "versions" WHERE ("id" = 7) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.927344 I [20327:4260] pact-broker -- (0.000065s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.927610 I [20327:4260] pact-broker -- (0.000163s) UPDATE "versions" SET "order" = 206 WHERE ("id" = 7)
2021-09-06 18:54:54.927779 I [20327:4260] pact-broker -- (0.000115s) SELECT * FROM "versions" WHERE "id" = 7
2021-09-06 18:54:54.928180 I [20327:4260] pact-broker -- (0.000269s) COMMIT
2021-09-06 18:54:54.928465 I [20327:4260] pact-broker -- (0.000142s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 7) ORDER BY "created_at"
2021-09-06 18:54:54.928675 I [20327:4260] pact-broker -- (0.000070s) BEGIN
2021-09-06 18:54:54.929150 I [20327:4260] pact-broker -- (0.000325s) INSERT INTO "verifications" ("success", "number", "wip", "execution_date", "pact_version_id", "provider_version_id", "provider_id", "consumer_id", "created_at", "test_results", "tag_names") VALUES (true, 1, false, '2021-09-05 14:54:54.925749+0000', 3, 7, 2, 1, '2021-09-06 14:54:54.928515+0000', '{"some":"results"}', '[]') RETURNING *
2021-09-06 18:54:54.929447 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.929608 I [20327:4260] pact-broker -- (0.000049s) BEGIN
2021-09-06 18:54:54.930068 I [20327:4260] pact-broker -- (0.000319s) INSERT INTO "latest_verification_id_for_pact_version_and_provider_version" ("pact_version_id", "provider_version_id", "provider_id", "verification_id", "consumer_id", "created_at") VALUES (3, 7, 2, 3, 1, '2021-09-06 14:54:54.928515+0000') ON CONFLICT ("pact_version_id", "provider_version_id") DO UPDATE SET "consumer_id" = 1, "provider_id" = 2, "verification_id" = 3 RETURNING *
2021-09-06 18:54:54.930313 I [20327:4260] pact-broker -- (0.000156s) COMMIT
2021-09-06 18:54:54.930537 I [20327:4260] pact-broker -- (0.000101s) SELECT * FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE (("pact_version_id" = 3) AND ("provider_version_id" = 7)) LIMIT 1
2021-09-06 18:54:54.930809 I [20327:4260] pact-broker -- (0.000115s) SELECT * FROM "versions" WHERE (("pacticipant_id" = 2) AND ("number" = '4fdf20082263d4c5038355a3b734be1c0054d1e1')) LIMIT 1
2021-09-06 18:54:54.931045 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.931340 I [20327:4260] pact-broker -- (0.000145s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.931065+0000', "branch" = 'main' WHERE ("id" = 7)
2021-09-06 18:54:54.931522 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.931850 I [20327:4260] pact-broker -- (0.000234s) UPDATE "verifications" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 3)
2021-09-06 18:54:54.932197 I [20327:4260] pact-broker -- (0.000244s) UPDATE "versions" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 7)
2021-09-06 18:54:54.932522 I [20327:4260] pact-broker -- (0.000232s) UPDATE "versions" SET "updated_at" = '2021-09-06 14:54:54.830168+0000' WHERE ("id" = 7)
2021-09-06 18:54:54.932805 I [20327:4260] pact-broker -- (0.000211s) SELECT * FROM "pact_publications" WHERE ("id" = 4) LIMIT 1
2021-09-06 18:54:54.933277 I [20327:4260] pact-broker -- (0.000243s) UPDATE "latest_verification_id_for_pact_version_and_provider_version" SET "created_at" = '2021-09-06 14:54:54.830168+0000' WHERE (("pact_version_id" = 3) AND ("provider_version_id" = 7))
2021-09-06 18:54:54.933592 I [20327:4260] pact-broker -- (0.000126s) SELECT * FROM "environments" WHERE ("name" = 'test') LIMIT 1
2021-09-06 18:54:54.934053 I [20327:4260] pact-broker -- (0.000187s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("version_id" = 7) AND ("environment_id" = 1) AND ("target" IS NULL)) LIMIT 1
2021-09-06 18:54:54.934200 I [20327:4260] pact-broker -- (0.000084s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.934620 I [20327:4260] pact-broker -- (0.000103s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.934434+0000' WHERE (("undeployed_at" IS NULL) AND ("pacticipant_id" = 2) AND ("environment_id" = 1) AND ("target" IS NULL) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.934848 I [20327:4260] pact-broker -- (0.000059s) BEGIN
2021-09-06 18:54:54.935210 I [20327:4260] pact-broker -- (0.000214s) INSERT INTO "deployed_versions" ("uuid", "version_id", "pacticipant_id", "environment_id", "target", "created_at", "updated_at", "target_for_index") VALUES ('fe01d6bd-1917-413e-b7f2-1036b4596206', 7, 2, 1, NULL, '2021-09-06 14:54:54.934723+0000', '2021-09-06 14:54:54.934723+0000', '') ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.935851 I [20327:4260] pact-broker -- (0.000258s) INSERT INTO "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "version_id", "target_for_index", "deployed_version_id") VALUES (2, 1, 7, '', 4) ON CONFLICT ("pacticipant_id", "environment_id", "target_for_index") DO UPDATE SET "version_id" = 7, "deployed_version_id" = 4 RETURNING *
2021-09-06 18:54:54.936078 I [20327:4260] pact-broker -- (0.000171s) COMMIT
2021-09-06 18:54:54.936407 I [20327:4260] pact-broker -- (0.000221s) UPDATE "deployed_versions" SET "created_at" = '2021-09-05 14:54:54.933307+0000' WHERE ("id" = 4)
2021-09-06 18:54:54.936693 I [20327:4260] pact-broker -- (0.000197s) UPDATE "deployed_versions" SET "updated_at" = '2021-09-05 14:54:54.933307+0000' WHERE ("id" = 4)
2021-09-06 18:54:54.936889 I [20327:4260] pact-broker -- (0.000062s) BEGIN
2021-09-06 18:54:54.937155 I [20327:4260] pact-broker -- (0.000120s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('main', 7, '2021-09-06 14:54:54.936769+0000', '2021-09-06 14:54:54.936769+0000', 206, 2) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.937440 I [20327:4260] pact-broker -- (0.000157s) COMMIT
2021-09-06 18:54:54.937908 I [20327:4260] pact-broker -- (0.000280s) UPDATE "tags" SET "created_at" = '2021-09-05 14:54:54.936704+0000' WHERE (("name" = 'main') AND ("version_id" = 7))
2021-09-06 18:54:54.938266 I [20327:4260] pact-broker -- (0.000249s) UPDATE "tags" SET "updated_at" = '2021-09-05 14:54:54.936704+0000' WHERE ("name" = 'main')
2021-09-06 18:54:54.938517 I [20327:4260] pact-broker -- (0.000057s) BEGIN
2021-09-06 18:54:54.938808 I [20327:4260] pact-broker -- (0.000161s) INSERT INTO "versions" ("number", "pacticipant_id", "branch", "build_url", "created_at", "updated_at") VALUES ('5556b8149bf8bac76bc30f50a8a2dd4c22c85f30', 1, 'main', NULL, '2021-09-06 14:54:54.938379+0000', '2021-09-06 14:54:54.938379+0000') RETURNING *
2021-09-06 18:54:54.939142 I [20327:4260] pact-broker -- (0.000129s) SELECT * FROM "versions" WHERE ("id" = 8) LIMIT 1 FOR UPDATE
2021-09-06 18:54:54.939395 I [20327:4260] pact-broker -- (0.000057s) SELECT nextval('version_order_sequence') as val
2021-09-06 18:54:54.939583 I [20327:4260] pact-broker -- (0.000119s) UPDATE "versions" SET "order" = 207 WHERE ("id" = 8)
2021-09-06 18:54:54.939704 I [20327:4260] pact-broker -- (0.000082s) SELECT * FROM "versions" WHERE "id" = 8
2021-09-06 18:54:54.939967 I [20327:4260] pact-broker -- (0.000151s) COMMIT
2021-09-06 18:54:54.940277 I [20327:4260] pact-broker -- (0.000215s) UPDATE "versions" SET "created_at" = '2021-09-06 02:54:54.938281+0000' WHERE ("id" = 8)
2021-09-06 18:54:54.940612 I [20327:4260] pact-broker -- (0.000236s) UPDATE "versions" SET "updated_at" = '2021-09-06 02:54:54.938281+0000' WHERE ("id" = 8)
2021-09-06 18:54:54.940792 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.941129 I [20327:4260] pact-broker -- (0.000126s) INSERT INTO "tags" ("name", "version_id", "created_at", "updated_at", "version_order", "pacticipant_id") VALUES ('main', 8, '2021-09-06 14:54:54.940689+0000', '2021-09-06 14:54:54.940689+0000', 207, 1) ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.941394 I [20327:4260] pact-broker -- (0.000140s) COMMIT
2021-09-06 18:54:54.941727 I [20327:4260] pact-broker -- (0.000224s) UPDATE "tags" SET "created_at" = '2021-09-06 02:54:54.940632+0000' WHERE (("name" = 'main') AND ("version_id" = 8))
2021-09-06 18:54:54.942041 I [20327:4260] pact-broker -- (0.000218s) UPDATE "tags" SET "updated_at" = '2021-09-06 02:54:54.940632+0000' WHERE ("name" = 'main')
2021-09-06 18:54:54.942300 I [20327:4260] pact-broker -- (0.000104s) SELECT * FROM "environments" WHERE ("name" = 'test') LIMIT 1
2021-09-06 18:54:54.942815 I [20327:4260] pact-broker -- (0.000206s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("version_id" = 8) AND ("environment_id" = 1) AND ("target" IS NULL)) LIMIT 1
2021-09-06 18:54:54.942976 I [20327:4260] pact-broker -- (0.000102s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.943374 I [20327:4260] pact-broker -- (0.000120s) UPDATE "deployed_versions" SET "undeployed_at" = '2021-09-06 14:54:54.943140+0000' WHERE (("undeployed_at" IS NULL) AND ("pacticipant_id" = 1) AND ("environment_id" = 1) AND ("target" IS NULL) AND ("undeployed_at" IS NULL))
2021-09-06 18:54:54.943646 I [20327:4260] pact-broker -- (0.000071s) BEGIN
2021-09-06 18:54:54.944065 I [20327:4260] pact-broker -- (0.000222s) INSERT INTO "deployed_versions" ("uuid", "version_id", "pacticipant_id", "environment_id", "target", "created_at", "updated_at", "target_for_index") VALUES ('ca7f06d7-29bc-441f-b902-def8c8873bc6', 8, 1, 1, NULL, '2021-09-06 14:54:54.943498+0000', '2021-09-06 14:54:54.943498+0000', '') ON CONFLICT DO NOTHING RETURNING *
2021-09-06 18:54:54.944608 I [20327:4260] pact-broker -- (0.000257s) INSERT INTO "currently_deployed_version_ids" ("pacticipant_id", "environment_id", "version_id", "target_for_index", "deployed_version_id") VALUES (1, 1, 8, '', 5) ON CONFLICT ("pacticipant_id", "environment_id", "target_for_index") DO UPDATE SET "version_id" = 8, "deployed_version_id" = 5 RETURNING *
2021-09-06 18:54:54.944854 I [20327:4260] pact-broker -- (0.000158s) COMMIT
2021-09-06 18:54:54.945195 I [20327:4260] pact-broker -- (0.000242s) UPDATE "deployed_versions" SET "created_at" = '2021-09-06 02:54:54.942054+0000' WHERE ("id" = 5)
2021-09-06 18:54:54.945570 I [20327:4260] pact-broker -- (0.000277s) UPDATE "deployed_versions" SET "updated_at" = '2021-09-06 02:54:54.942054+0000' WHERE ("id" = 5)
2021-09-06 18:54:54.945792 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "pact_versions" ORDER BY "id" DESC LIMIT 1
2021-09-06 18:54:54.945991 I [20327:4260] pact-broker -- (0.000085s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.946300 I [20327:4260] pact-broker -- (0.000107s) SELECT * FROM "pact_versions" WHERE (("sha" = 'cc79bbc141aa53a4fd45d155d705cbb243dec4b6') AND ("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:54:54.946560 I [20327:4260] pact-broker -- (0.000048s) BEGIN
2021-09-06 18:54:54.947000 I [20327:4260] pact-broker -- (0.000283s) INSERT INTO "pact_publications" ("consumer_version_id", "provider_id", "consumer_id", "pact_version_id", "revision_number", "consumer_version_order", "created_at") VALUES (8, 2, 1, 3, 1, 207, '2021-09-06 14:54:54.946466+0000') ON CONFLICT ("consumer_version_id", "provider_id", "revision_number") DO UPDATE SET "pact_version_id" = 3, "consumer_id" = 1, "consumer_version_order" = 207 RETURNING *
2021-09-06 18:54:54.947253 I [20327:4260] pact-broker -- (0.000152s) COMMIT
2021-09-06 18:54:54.947404 I [20327:4260] pact-broker -- (0.000093s) SELECT * FROM "versions" WHERE "id" = 8
2021-09-06 18:54:54.947741 I [20327:4260] pact-broker -- (0.000049s) BEGIN
2021-09-06 18:54:54.948142 I [20327:4260] pact-broker -- (0.000268s) INSERT INTO "latest_pact_publication_ids_for_consumer_versions" ("consumer_version_id", "provider_id", "pact_publication_id", "consumer_id", "pact_version_id", "created_at") VALUES (8, 2, 5, 1, 3, '2021-09-06 02:54:54.938281+0000') ON CONFLICT ("provider_id", "consumer_version_id") DO UPDATE SET "consumer_id" = 1, "pact_publication_id" = 5, "pact_version_id" = 3 RETURNING *
2021-09-06 18:54:54.948372 I [20327:4260] pact-broker -- (0.000145s) COMMIT
2021-09-06 18:54:54.948580 I [20327:4260] pact-broker -- (0.000097s) SELECT * FROM "latest_pact_publication_ids_for_consumer_versions" WHERE (("provider_id" = 2) AND ("consumer_version_id" = 8)) LIMIT 1
2021-09-06 18:54:54.948757 I [20327:4260] pact-broker -- (0.000076s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.948980 I [20327:4260] pact-broker -- (0.000072s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.949230 I [20327:4260] pact-broker -- (0.000113s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 8) ORDER BY "created_at"
2021-09-06 18:54:54.949800 I [20327:4260] pact-broker -- (0.000243s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 8) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.950253 I [20327:4260] pact-broker -- (0.000145s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 8) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.950735 I [20327:4260] pact-broker -- (0.000278s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 3))) LIMIT 1
2021-09-06 18:54:54.951126 I [20327:4260] pact-broker -- (0.000123s) SELECT count(*) AS "count" FROM "pact_versions" LIMIT 1
2021-09-06 18:54:54.951462 I [20327:4260] pact-broker -- (0.000212s) UPDATE "pact_publications" SET "created_at" = '2021-09-06 02:54:54.945588+0000' WHERE ("id" = 5)
2021-09-06 18:54:54.951853 I [20327:4260] pact-broker -- (0.000277s) UPDATE "latest_pact_publication_ids_for_consumer_versions" SET "created_at" = '2021-09-06 02:54:54.945588+0000' WHERE ("consumer_version_id" = 8)
2021-09-06 18:54:54.952058 I [20327:4260] pact-broker -- (0.000124s) SELECT * FROM "pact_publications" WHERE ("id" = 5) LIMIT 1
2021-09-06 18:54:54.952322 I [20327:4260] pact-broker -- (0.000135s) SELECT * FROM "pacticipants" WHERE "id" = 2
2021-09-06 18:54:54.952572 I [20327:4260] pact-broker -- (0.000093s) SELECT * FROM "pacticipants" WHERE "id" = 1
2021-09-06 18:54:54.952802 I [20327:4260] pact-broker -- (0.000095s) SELECT * FROM "versions" WHERE "id" = 8
2021-09-06 18:54:54.953064 I [20327:4260] pact-broker -- (0.000119s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 8) ORDER BY "created_at"
2021-09-06 18:54:54.953548 I [20327:4260] pact-broker -- (0.000186s) SELECT * FROM "deployed_versions" WHERE (("deployed_versions"."version_id" = 8) AND ("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids"))) ORDER BY "created_at", "id"
2021-09-06 18:54:54.953894 I [20327:4260] pact-broker -- (0.000121s) SELECT * FROM "released_versions" WHERE (("released_versions"."version_id" = 8) AND ("support_ended_at" IS NULL)) ORDER BY "created_at", "id"
2021-09-06 18:54:54.954040 I [20327:4260] pact-broker -- (0.000081s) SELECT * FROM "pact_versions" WHERE "id" = 3
2021-09-06 18:54:54.954556 I [20327:4260] pact-broker -- (0.000248s) SELECT * FROM "verifications" WHERE ("id" IN (SELECT max("verification_id") FROM "latest_verification_id_for_pact_version_and_provider_version" WHERE ("pact_version_id" = 3))) LIMIT 1
2021-09-06 18:54:54.954710 I [20327:4260] PactBroker::App -- Marking seed as done
2021-09-06 18:54:54.955326 I [20327:4260] pact-broker -- (0.000096s) SELECT * FROM "config" WHERE ("name" = 'seed_example_data') LIMIT 1
2021-09-06 18:54:54.955653 I [20327:4260] pact-broker -- (0.000054s) BEGIN
2021-09-06 18:54:54.956123 I [20327:4260] pact-broker -- (0.000302s) INSERT INTO "config" ("name", "type", "value", "created_at", "updated_at") VALUES ('seed_example_data', 'boolean', '0', '2021-09-06 14:54:54.955528+0000', '2021-09-06 14:54:54.955528+0000') RETURNING *
2021-09-06 18:54:54.956433 I [20327:4260] pact-broker -- (0.000164s) COMMIT
2021-09-06 18:54:54.956463 I [20327:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 18:54:54.956469 I [20327:4260] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 18:54:54.956540 I [20327:4260] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 18:54:54.956549 I [20327:4260] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 18:54:54.956556 I [20327:4260] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 18:54:54.956563 I [20327:4260] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 18:54:54.956568 I [20327:4260] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 18:54:54.956574 I [20327:4260] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 18:54:54.956580 I [20327:4260] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 18:54:54.956586 I [20327:4260] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 18:54:54.956592 I [20327:4260] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 18:54:54.956601 I [20327:4260] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 18:54:54.956608 I [20327:4260] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 18:54:54.956614 I [20327:4260] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 18:54:54.956620 I [20327:4260] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 18:54:54.956626 I [20327:4260] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 18:54:54.956631 I [20327:4260] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 18:54:54.956637 I [20327:4260] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 18:54:54.956643 I [20327:4260] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 18:54:54.956648 I [20327:4260] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 18:54:54.956655 I [20327:4260] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 18:54:54.956661 I [20327:4260] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 18:54:54.956667 I [20327:4260] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 18:54:54.956674 I [20327:4260] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 18:54:54.956680 I [20327:4260] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 18:54:54.956710 I [20327:4260] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 18:54:54.956717 I [20327:4260] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 18:54:54.956723 I [20327:4260] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 18:54:54.956729 I [20327:4260] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 18:54:54.956735 I [20327:4260] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 18:54:54.956740 I [20327:4260] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 18:54:54.956746 I [20327:4260] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 18:54:54.956752 I [20327:4260] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 18:54:54.956758 I [20327:4260] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 18:54:54.956764 I [20327:4260] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 18:54:54.956772 I [20327:4260] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 18:54:54.956778 I [20327:4260] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 18:54:54.956784 I [20327:4260] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 18:54:54.956790 I [20327:4260] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-postgres/log source={:type=>:defaults}
2021-09-06 18:54:54.956796 I [20327:4260] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 18:54:54.956802 I [20327:4260] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 18:54:54.956808 I [20327:4260] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 18:54:54.956816 I [20327:4260] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 18:54:54.956822 I [20327:4260] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 18:54:54.956828 I [20327:4260] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 18:54:54.956833 I [20327:4260] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 18:54:54.956839 I [20327:4260] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 18:54:54.956845 I [20327:4260] pact-broker -- seed_example_data=true source={:type=>:defaults}
2021-09-06 18:54:54.956852 I [20327:4260] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 18:54:54.956858 I [20327:4260] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 18:54:54.956864 I [20327:4260] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 18:54:54.956869 I [20327:4260] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 18:54:54.956875 I [20327:4260] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 18:54:54.956881 I [20327:4260] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 18:54:54.956887 I [20327:4260] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 18:54:54.956893 I [20327:4260] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 18:54:54.956899 I [20327:4260] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 18:54:54.956904 I [20327:4260] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 18:54:54.956912 I [20327:4260] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 18:54:54.956920 I [20327:4260] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 18:54:54.956926 I [20327:4260] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 18:54:54.956933 I [20327:4260] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 18:54:54.956940 I [20327:4260] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 18:54:54.956947 I [20327:4260] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 18:54:54.956953 I [20327:4260] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 18:54:54.956991 I [20327:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 18:54:54.957001 I [20327:4260] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 18:55:06.679899 I [20327:4260] PactBroker::App -- Mounting HAL browser
2021-09-06 18:55:06.679926 I [20327:4260] PactBroker::App -- Mounting UI
2021-09-06 18:55:07.049854 I [20327:4260] PactBroker::App -- Mounting PactBroker::API
2021-09-06 18:55:07.597405 I [20327:4260] pact-broker -- (0.000520s) SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id")
2021-09-06 18:55:07.597687 I [20327:4260] pact-broker -- (0.000140s) SELECT DISTINCT "consumer_id", "provider_id" FROM "webhooks"
2021-09-06 18:55:07.599595 I [20327:4260] pact-broker -- (0.001182s) SELECT count(*) AS "count" FROM "pact_publications" INNER JOIN "pacticipants" AS "consumers" ON ("pact_publications"."consumer_id" = "consumers"."id") INNER JOIN "pacticipants" AS "providers" ON ("pact_publications"."provider_id" = "providers"."id") INNER JOIN "versions" AS "cv" ON ("pact_publications"."consumer_version_id" = "cv"."id") WHERE ("pact_publications"."id" IN (SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id"))) LIMIT 1
2021-09-06 18:55:07.601387 I [20327:4260] pact-broker -- (0.001231s) SELECT "pact_publications".* FROM "pact_publications" INNER JOIN "pacticipants" AS "consumers" ON ("pact_publications"."consumer_id" = "consumers"."id") INNER JOIN "pacticipants" AS "providers" ON ("pact_publications"."provider_id" = "providers"."id") INNER JOIN "versions" AS "cv" ON ("pact_publications"."consumer_version_id" = "cv"."id") WHERE ("pact_publications"."id" IN (SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id"))) ORDER BY lower("consumers"."name") ASC, "cv"."order" DESC, lower("providers"."name") ASC LIMIT 100 OFFSET 0
2021-09-06 18:55:07.602009 I [20327:4260] pact-broker -- (0.000153s) SELECT * FROM "pacticipants" WHERE ("pacticipants"."id" IN (1))
2021-09-06 18:55:07.602473 I [20327:4260] pact-broker -- (0.000138s) SELECT * FROM "pacticipants" WHERE ("pacticipants"."id" IN (2))
2021-09-06 18:55:07.602929 I [20327:4260] pact-broker -- (0.000123s) SELECT * FROM "pact_versions" WHERE ("pact_versions"."id" IN (3))
2021-09-06 18:55:07.603679 I [20327:4260] pact-broker -- (0.000270s) SELECT "verifications".* FROM "verifications" LEFT JOIN "latest_verification_id_for_pact_version_and_provider_version" AS "v2" ON (("verifications"."pact_version_id" = "v2"."pact_version_id") AND ("v2"."verification_id" > "verifications"."id")) WHERE (("v2"."verification_id" IS NULL) AND ("verifications"."pact_version_id" IN (3)))
2021-09-06 18:55:07.604276 I [20327:4260] pact-broker -- (0.000192s) SELECT * FROM "versions" WHERE ("versions"."id" IN (7))
2021-09-06 18:55:07.604916 I [20327:4260] pact-broker -- (0.000245s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("deployed_versions"."version_id" IN (7))) ORDER BY "created_at", "id"
2021-09-06 18:55:07.605385 I [20327:4260] pact-broker -- (0.000139s) SELECT * FROM "environments" WHERE ("environments"."id" IN (1))
2021-09-06 18:55:07.605996 I [20327:4260] pact-broker -- (0.000171s) SELECT * FROM "released_versions" WHERE (("support_ended_at" IS NULL) AND ("released_versions"."version_id" IN (7))) ORDER BY "created_at", "id"
2021-09-06 18:55:07.606729 I [20327:4260] pact-broker -- (0.000354s) SELECT "versions".* FROM "versions" LEFT JOIN (SELECT * FROM "versions" WHERE (("versions"."pacticipant_id" = 2) AND ("versions"."branch" IN ('main')))) AS "versions_2" ON (("versions"."pacticipant_id" = "versions_2"."pacticipant_id") AND ("versions"."branch" = "versions_2"."branch") AND ("versions_2"."order" > "versions"."order")) WHERE (("versions"."pacticipant_id" = 2) AND ("versions"."branch" IN ('main')) AND ("versions_2"."order" IS NULL))
2021-09-06 18:55:07.607192 I [20327:4260] pact-broker -- (0.000153s) SELECT * FROM "tags" WHERE ("tags"."version_id" IN (7)) ORDER BY "created_at"
2021-09-06 18:55:07.608001 I [20327:4260] pact-broker -- (0.000315s) SELECT "tags".* FROM "tags" LEFT JOIN "tags" AS "tags_2" ON (("tags"."pacticipant_id" = "tags_2"."pacticipant_id") AND ("tags"."name" = "tags_2"."name") AND ("tags_2"."pacticipant_id" = 2) AND ("tags_2"."name" IN ('main')) AND ("tags_2"."version_order" > "tags"."version_order")) WHERE (("tags_2"."name" IS NULL) AND ("tags"."pacticipant_id" = 2) AND ("tags"."name" IN ('main')))
2021-09-06 18:55:07.608846 I [20327:4260] pact-broker -- (0.000425s) SELECT * FROM "integrations" WHERE (("integrations"."consumer_id", "integrations"."provider_id") IN ((1, 2)))
2021-09-06 18:55:07.609866 I [20327:4260] pact-broker -- (0.000691s) SELECT * FROM "latest_verifications_for_consumer_and_provider" WHERE (("latest_verifications_for_consumer_and_provider"."consumer_id", "latest_verifications_for_consumer_and_provider"."provider_id") IN ((1, 2)))
2021-09-06 18:55:07.610227 I [20327:4260] pact-broker -- (0.000126s) SELECT * FROM "versions" WHERE ("versions"."id" IN (7))
2021-09-06 18:55:07.611092 I [20327:4260] pact-broker -- (0.000311s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" WHERE (("triggered_webhooks"."consumer_id", "triggered_webhooks"."provider_id") IN ((1, 2)))
2021-09-06 18:55:07.611452 I [20327:4260] pact-broker -- (0.000109s) SELECT * FROM "versions" WHERE ("versions"."id" IN (8))
2021-09-06 18:55:07.611893 I [20327:4260] pact-broker -- (0.000205s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("deployed_versions"."version_id" IN (8))) ORDER BY "created_at", "id"
2021-09-06 18:55:07.612195 I [20327:4260] pact-broker -- (0.000112s) SELECT * FROM "environments" WHERE ("environments"."id" IN (1))
2021-09-06 18:55:07.612549 I [20327:4260] pact-broker -- (0.000122s) SELECT * FROM "released_versions" WHERE (("support_ended_at" IS NULL) AND ("released_versions"."version_id" IN (8))) ORDER BY "created_at", "id"
2021-09-06 18:55:07.613209 I [20327:4260] pact-broker -- (0.000313s) SELECT "versions".* FROM "versions" LEFT JOIN (SELECT * FROM "versions" WHERE (("versions"."pacticipant_id" = 1) AND ("versions"."branch" IN ('main')))) AS "versions_2" ON (("versions"."pacticipant_id" = "versions_2"."pacticipant_id") AND ("versions"."branch" = "versions_2"."branch") AND ("versions_2"."order" > "versions"."order")) WHERE (("versions"."pacticipant_id" = 1) AND ("versions"."branch" IN ('main')) AND ("versions_2"."order" IS NULL))
2021-09-06 18:55:07.613657 I [20327:4260] pact-broker -- (0.000218s) SELECT * FROM "tags" WHERE ("tags"."version_id" IN (8)) ORDER BY "created_at"
2021-09-06 18:55:07.614399 I [20327:4260] pact-broker -- (0.000295s) SELECT "tags".* FROM "tags" LEFT JOIN "tags" AS "tags_2" ON (("tags"."pacticipant_id" = "tags_2"."pacticipant_id") AND ("tags"."name" = "tags_2"."name") AND ("tags_2"."pacticipant_id" = 1) AND ("tags_2"."name" IN ('main')) AND ("tags_2"."version_order" > "tags"."version_order")) WHERE (("tags_2"."name" IS NULL) AND ("tags"."pacticipant_id" = 1) AND ("tags"."name" IN ('main')))
2021-09-06 18:55:07.615032 I [20327:4260] pact-broker -- (0.000226s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 8)
2021-09-06 18:55:07.616623 I [20327:4260] pact-broker -- (0.000692s) SELECT "pact_publications".* FROM (SELECT "pact_publications".*, "tags"."name" AS "tag_name" FROM "pact_publications" INNER JOIN "tags" ON (("pact_publications"."consumer_version_id" = "tags"."version_id") AND ("tags"."name" IN ('main'))) LEFT JOIN (SELECT "pact_publications"."consumer_id", "tags"."name" AS "tag_name", "tags"."version_order" FROM "pact_publications" INNER JOIN "tags" ON (("pact_publications"."consumer_version_id" = "tags"."version_id") AND ("tags"."name" IN ('main'))) WHERE (("pact_publications"."consumer_id" = 1) AND ("pact_publications"."provider_id" = 2) AND ("tags"."name" IN ('main')))) AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("tags"."name" = "pp2"."tag_name") AND ("pp2"."version_order" > "tags"."version_order")) WHERE (("pact_publications"."consumer_id" = 1) AND ("pact_publications"."provider_id" = 2) AND ("tags"."name" IN ('main')) AND ("pp2"."version_order" IS NULL))) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id")
2021-09-06 18:55:07.617616 I [20327:4260] pact-broker -- (0.000366s) SELECT 1 AS "one" FROM "pact_publications" INNER JOIN "versions" AS "cv" ON (("pact_publications"."consumer_version_id" = "cv"."id") AND ("cv"."branch" = 'main') AND ("cv"."order" > 207)) WHERE (("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:55:48.559257 I [20327:4260] pact-broker -- (0.000907s) SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id")
2021-09-06 18:55:48.559597 I [20327:4260] pact-broker -- (0.000188s) SELECT DISTINCT "consumer_id", "provider_id" FROM "webhooks"
2021-09-06 18:55:48.561764 I [20327:4260] pact-broker -- (0.001464s) SELECT count(*) AS "count" FROM "pact_publications" INNER JOIN "pacticipants" AS "consumers" ON ("pact_publications"."consumer_id" = "consumers"."id") INNER JOIN "pacticipants" AS "providers" ON ("pact_publications"."provider_id" = "providers"."id") INNER JOIN "versions" AS "cv" ON ("pact_publications"."consumer_version_id" = "cv"."id") WHERE ("pact_publications"."id" IN (SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id"))) LIMIT 1
2021-09-06 18:55:48.563363 I [20327:4260] pact-broker -- (0.001148s) SELECT "pact_publications".* FROM "pact_publications" INNER JOIN "pacticipants" AS "consumers" ON ("pact_publications"."consumer_id" = "consumers"."id") INNER JOIN "pacticipants" AS "providers" ON ("pact_publications"."provider_id" = "providers"."id") INNER JOIN "versions" AS "cv" ON ("pact_publications"."consumer_version_id" = "cv"."id") WHERE ("pact_publications"."id" IN (SELECT "pact_publications".* FROM (SELECT "pact_publications"."id" FROM "pact_publications" LEFT JOIN (SELECT "consumer_id", "provider_id", "consumer_version_order" FROM "pact_publications") AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("pact_publications"."provider_id" = "pp2"."provider_id") AND ("pp2"."consumer_version_order" > "pact_publications"."consumer_version_order")) WHERE ("pp2"."consumer_version_order" IS NULL)) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id"))) ORDER BY lower("consumers"."name") ASC, "cv"."order" DESC, lower("providers"."name") ASC LIMIT 100 OFFSET 0
2021-09-06 18:55:48.563763 I [20327:4260] pact-broker -- (0.000142s) SELECT * FROM "pacticipants" WHERE ("pacticipants"."id" IN (1))
2021-09-06 18:55:48.564130 I [20327:4260] pact-broker -- (0.000133s) SELECT * FROM "pacticipants" WHERE ("pacticipants"."id" IN (2))
2021-09-06 18:55:48.564586 I [20327:4260] pact-broker -- (0.000126s) SELECT * FROM "pact_versions" WHERE ("pact_versions"."id" IN (3))
2021-09-06 18:55:48.565190 I [20327:4260] pact-broker -- (0.000350s) SELECT "verifications".* FROM "verifications" LEFT JOIN "latest_verification_id_for_pact_version_and_provider_version" AS "v2" ON (("verifications"."pact_version_id" = "v2"."pact_version_id") AND ("v2"."verification_id" > "verifications"."id")) WHERE (("v2"."verification_id" IS NULL) AND ("verifications"."pact_version_id" IN (3)))
2021-09-06 18:55:48.565595 I [20327:4260] pact-broker -- (0.000132s) SELECT * FROM "versions" WHERE ("versions"."id" IN (7))
2021-09-06 18:55:48.566066 I [20327:4260] pact-broker -- (0.000231s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("deployed_versions"."version_id" IN (7))) ORDER BY "created_at", "id"
2021-09-06 18:55:48.566469 I [20327:4260] pact-broker -- (0.000146s) SELECT * FROM "environments" WHERE ("environments"."id" IN (1))
2021-09-06 18:55:48.566865 I [20327:4260] pact-broker -- (0.000149s) SELECT * FROM "released_versions" WHERE (("support_ended_at" IS NULL) AND ("released_versions"."version_id" IN (7))) ORDER BY "created_at", "id"
2021-09-06 18:55:48.567590 I [20327:4260] pact-broker -- (0.000321s) SELECT "versions".* FROM "versions" LEFT JOIN (SELECT * FROM "versions" WHERE (("versions"."pacticipant_id" = 2) AND ("versions"."branch" IN ('main')))) AS "versions_2" ON (("versions"."pacticipant_id" = "versions_2"."pacticipant_id") AND ("versions"."branch" = "versions_2"."branch") AND ("versions_2"."order" > "versions"."order")) WHERE (("versions"."pacticipant_id" = 2) AND ("versions"."branch" IN ('main')) AND ("versions_2"."order" IS NULL))
2021-09-06 18:55:48.567970 I [20327:4260] pact-broker -- (0.000140s) SELECT * FROM "tags" WHERE ("tags"."version_id" IN (7)) ORDER BY "created_at"
2021-09-06 18:55:48.568692 I [20327:4260] pact-broker -- (0.000272s) SELECT "tags".* FROM "tags" LEFT JOIN "tags" AS "tags_2" ON (("tags"."pacticipant_id" = "tags_2"."pacticipant_id") AND ("tags"."name" = "tags_2"."name") AND ("tags_2"."pacticipant_id" = 2) AND ("tags_2"."name" IN ('main')) AND ("tags_2"."version_order" > "tags"."version_order")) WHERE (("tags_2"."name" IS NULL) AND ("tags"."pacticipant_id" = 2) AND ("tags"."name" IN ('main')))
2021-09-06 18:55:48.569225 I [20327:4260] pact-broker -- (0.000278s) SELECT * FROM "integrations" WHERE (("integrations"."consumer_id", "integrations"."provider_id") IN ((1, 2)))
2021-09-06 18:55:48.569924 I [20327:4260] pact-broker -- (0.000547s) SELECT * FROM "latest_verifications_for_consumer_and_provider" WHERE (("latest_verifications_for_consumer_and_provider"."consumer_id", "latest_verifications_for_consumer_and_provider"."provider_id") IN ((1, 2)))
2021-09-06 18:55:48.570247 I [20327:4260] pact-broker -- (0.000121s) SELECT * FROM "versions" WHERE ("versions"."id" IN (7))
2021-09-06 18:55:48.570763 I [20327:4260] pact-broker -- (0.000309s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" WHERE (("triggered_webhooks"."consumer_id", "triggered_webhooks"."provider_id") IN ((1, 2)))
2021-09-06 18:55:48.571036 I [20327:4260] pact-broker -- (0.000139s) SELECT * FROM "versions" WHERE ("versions"."id" IN (8))
2021-09-06 18:55:48.571485 I [20327:4260] pact-broker -- (0.000229s) SELECT * FROM "deployed_versions" WHERE (("id" IN (SELECT "deployed_version_id" FROM "currently_deployed_version_ids")) AND ("deployed_versions"."version_id" IN (8))) ORDER BY "created_at", "id"
2021-09-06 18:55:48.571785 I [20327:4260] pact-broker -- (0.000117s) SELECT * FROM "environments" WHERE ("environments"."id" IN (1))
2021-09-06 18:55:48.572136 I [20327:4260] pact-broker -- (0.000141s) SELECT * FROM "released_versions" WHERE (("support_ended_at" IS NULL) AND ("released_versions"."version_id" IN (8))) ORDER BY "created_at", "id"
2021-09-06 18:55:48.572800 I [20327:4260] pact-broker -- (0.000274s) SELECT "versions".* FROM "versions" LEFT JOIN (SELECT * FROM "versions" WHERE (("versions"."pacticipant_id" = 1) AND ("versions"."branch" IN ('main')))) AS "versions_2" ON (("versions"."pacticipant_id" = "versions_2"."pacticipant_id") AND ("versions"."branch" = "versions_2"."branch") AND ("versions_2"."order" > "versions"."order")) WHERE (("versions"."pacticipant_id" = 1) AND ("versions"."branch" IN ('main')) AND ("versions_2"."order" IS NULL))
2021-09-06 18:55:48.573166 I [20327:4260] pact-broker -- (0.000126s) SELECT * FROM "tags" WHERE ("tags"."version_id" IN (8)) ORDER BY "created_at"
2021-09-06 18:55:48.573834 I [20327:4260] pact-broker -- (0.000236s) SELECT "tags".* FROM "tags" LEFT JOIN "tags" AS "tags_2" ON (("tags"."pacticipant_id" = "tags_2"."pacticipant_id") AND ("tags"."name" = "tags_2"."name") AND ("tags_2"."pacticipant_id" = 1) AND ("tags_2"."name" IN ('main')) AND ("tags_2"."version_order" > "tags"."version_order")) WHERE (("tags_2"."name" IS NULL) AND ("tags"."pacticipant_id" = 1) AND ("tags"."name" IN ('main')))
2021-09-06 18:55:48.574155 I [20327:4260] pact-broker -- (0.000120s) SELECT * FROM "tags" WHERE ("tags"."version_id" = 8)
2021-09-06 18:55:48.575764 I [20327:4260] pact-broker -- (0.000776s) SELECT "pact_publications".* FROM (SELECT "pact_publications".*, "tags"."name" AS "tag_name" FROM "pact_publications" INNER JOIN "tags" ON (("pact_publications"."consumer_version_id" = "tags"."version_id") AND ("tags"."name" IN ('main'))) LEFT JOIN (SELECT "pact_publications"."consumer_id", "tags"."name" AS "tag_name", "tags"."version_order" FROM "pact_publications" INNER JOIN "tags" ON (("pact_publications"."consumer_version_id" = "tags"."version_id") AND ("tags"."name" IN ('main'))) WHERE (("pact_publications"."consumer_id" = 1) AND ("pact_publications"."provider_id" = 2) AND ("tags"."name" IN ('main')))) AS "pp2" ON (("pact_publications"."consumer_id" = "pp2"."consumer_id") AND ("tags"."name" = "pp2"."tag_name") AND ("pp2"."version_order" > "tags"."version_order")) WHERE (("pact_publications"."consumer_id" = 1) AND ("pact_publications"."provider_id" = 2) AND ("tags"."name" IN ('main')) AND ("pp2"."version_order" IS NULL))) AS "pact_publications" INNER JOIN "latest_pact_publication_ids_for_consumer_versions" AS "lp" ON ("lp"."pact_publication_id" = "pact_publications"."id")
2021-09-06 18:55:48.576449 I [20327:4260] pact-broker -- (0.000235s) SELECT 1 AS "one" FROM "pact_publications" INNER JOIN "versions" AS "cv" ON (("pact_publications"."consumer_version_id" = "cv"."id") AND ("cv"."branch" = 'main') AND ("cv"."order" > 207)) WHERE (("consumer_id" = 1) AND ("provider_id" = 2)) LIMIT 1
2021-09-06 18:57:16.923910 I [20829:4260] pact-broker -- (0.000092s) SET standard_conforming_strings = ON
2021-09-06 18:57:16.924124 I [20829:4260] pact-broker -- (0.000148s) SET client_min_messages = 'WARNING'
2021-09-06 18:57:16.924239 I [20829:4260] pact-broker -- (0.000089s) SET DateStyle = 'ISO'
2021-09-06 18:57:16.926182 I [20829:4260] pact-broker -- (0.000647s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
2021-09-06 18:57:16.927875 I [20829:4260] pact-broker -- (0.001507s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 18:57:16.928525 I [20829:4260] pact-broker -- (0.000456s) SELECT * FROM "schema_migrations" ORDER BY "filename" DESC LIMIT 1
2021-09-06 18:57:16.928556 I [20829:4260] PactBroker::App -- Database schema version is 20210818
2021-09-06 18:57:16.930106 I [20829:4260] pact-broker -- (0.000124s) SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 18:57:16.930311 I [20829:4260] pact-broker -- (0.000124s) SELECT * FROM "schema_migrations" LIMIT 1
2021-09-06 18:57:16.930629 I [20829:4260] pact-broker -- (0.000228s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 18:57:16.932203 I [20829:4260] PactBroker::App -- Skipping database migrations as the latest migration has already been applied
2021-09-06 18:57:16.932213 I [20829:4260] PactBroker::App -- Migrating data
2021-09-06 18:57:16.933045 I [20829:4260] pact-broker -- (0.000746s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:57:16.937055 I [20829:4260] pact-broker -- (0.002314s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.938418 I [20829:4260] pact-broker -- (0.000161s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:57:16.938700 I [20829:4260] pact-broker -- (0.000141s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 18:57:16.939174 I [20829:4260] pact-broker -- (0.000360s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:57:16.941796 I [20829:4260] pact-broker -- (0.000885s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.942108 I [20829:4260] pact-broker -- (0.000128s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:57:16.942351 I [20829:4260] pact-broker -- (0.000127s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 18:57:16.942692 I [20829:4260] pact-broker -- (0.000283s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 18:57:16.943574 I [20829:4260] pact-broker -- (0.000788s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:57:16.946262 I [20829:4260] pact-broker -- (0.001634s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.946577 I [20829:4260] pact-broker -- (0.000131s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:57:16.947548 I [20829:4260] pact-broker -- (0.000846s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.949241 I [20829:4260] pact-broker -- (0.000963s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.949785 I [20829:4260] pact-broker -- (0.000139s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.950001 I [20829:4260] pact-broker -- (0.000163s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 18:57:16.950243 I [20829:4260] pact-broker -- (0.000139s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.951050 I [20829:4260] pact-broker -- (0.000681s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 18:57:16.953012 I [20829:4260] pact-broker -- (0.001022s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"version_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.953602 I [20829:4260] pact-broker -- (0.000432s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 18:57:16.953806 I [20829:4260] pact-broker -- (0.000121s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 18:57:16.954332 I [20829:4260] pact-broker -- (0.000410s) SELECT pg_attribute.attname AS pk FROM pg_class, pg_attribute, pg_index, pg_namespace WHERE pg_class.oid = pg_attribute.attrelid AND pg_class.relnamespace = pg_namespace.oid AND pg_class.oid = pg_index.indrelid AND pg_index.indkey[0] = pg_attribute.attnum AND pg_index.indisprimary = 't' AND pg_class.oid = CAST(CAST('"version_sequence_number"' AS regclass) AS oid)
2021-09-06 18:57:16.955198 I [20829:4260] pact-broker -- (0.000732s) INSERT INTO "version_sequence_number" ("value") VALUES (307) RETURNING NULL
2021-09-06 18:57:16.955711 I [20829:4260] pact-broker -- (0.000403s) DELETE FROM "version_sequence_number" WHERE ("value" != 307)
2021-09-06 18:57:16.956216 I [20829:4260] pact-broker -- (0.000387s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 18:57:16.958371 I [20829:4260] pact-broker -- (0.000977s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.959355 I [20829:4260] pact-broker -- (0.000163s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 18:57:16.959861 I [20829:4260] pact-broker -- (0.000385s) SELECT NULL AS "nil" FROM "webhook_executions" LIMIT 1
2021-09-06 18:57:16.962529 I [20829:4260] pact-broker -- (0.001434s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_executions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.963472 I [20829:4260] pact-broker -- (0.000149s) DELETE FROM "webhook_executions" WHERE ("triggered_webhook_id" IS NULL)
2021-09-06 18:57:16.964079 I [20829:4260] pact-broker -- (0.000535s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 18:57:16.964678 I [20829:4260] pact-broker -- (0.000515s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 18:57:16.965345 I [20829:4260] pact-broker -- (0.000547s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.967825 I [20829:4260] pact-broker -- (0.001289s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.968901 I [20829:4260] pact-broker -- (0.000158s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.969178 I [20829:4260] pact-broker -- (0.000166s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.969433 I [20829:4260] pact-broker -- (0.000162s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.969867 I [20829:4260] pact-broker -- (0.000234s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 18:57:16.970146 I [20829:4260] pact-broker -- (0.000155s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.970392 I [20829:4260] pact-broker -- (0.000153s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.971577 I [20829:4260] pact-broker -- (0.000127s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.971810 I [20829:4260] pact-broker -- (0.000148s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.973667 I [20829:4260] pact-broker -- (0.000233s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 18:57:16.974239 I [20829:4260] pact-broker -- (0.000452s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:57:16.975842 I [20829:4260] pact-broker -- (0.000999s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pacticipants"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.976271 I [20829:4260] pact-broker -- (0.000148s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:57:16.976542 I [20829:4260] pact-broker -- (0.000157s) SELECT * FROM "pacticipants" WHERE ("display_name" IS NULL)
2021-09-06 18:57:16.976833 I [20829:4260] pact-broker -- (0.000147s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:57:16.977050 I [20829:4260] pact-broker -- (0.000126s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:57:16.977255 I [20829:4260] pact-broker -- (0.000113s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 18:57:16.977498 I [20829:4260] pact-broker -- (0.000159s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.977731 I [20829:4260] pact-broker -- (0.000142s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.978000 I [20829:4260] pact-broker -- (0.000151s) SELECT "id", "name" FROM "pacticipants" WHERE ("main_branch" IS NULL)
2021-09-06 18:57:16.978904 I [20829:4260] pact-broker -- (0.000649s) SELECT "name", count(1) AS "count" FROM (SELECT "tags"."name" FROM "tags" WHERE (("tags"."name" IN ('main', 'master', 'develop')) AND ("tags"."pacticipant_id" = 1))) AS "t1" GROUP BY "name" ORDER BY 2 DESC LIMIT 1
2021-09-06 18:57:16.979675 I [20829:4260] pact-broker -- (0.000659s) UPDATE "pacticipants" SET "main_branch" = 'main' WHERE (("id" = 1) AND ("main_branch" IS NULL))
2021-09-06 18:57:16.979709 I [20829:4260] PactBroker::DB::DataMigrations::SetPacticipantMainBranch -- Setting main branch for pacticipant -- {:branch=>"main", :pacticipant_name=>"Example App"}
2021-09-06 18:57:16.980179 I [20829:4260] pact-broker -- (0.000214s) SELECT "name", count(1) AS "count" FROM (SELECT "tags"."name" FROM "tags" WHERE (("tags"."name" IN ('main', 'master', 'develop')) AND ("tags"."pacticipant_id" = 2))) AS "t1" GROUP BY "name" ORDER BY 2 DESC LIMIT 1
2021-09-06 18:57:16.980535 I [20829:4260] pact-broker -- (0.000260s) UPDATE "pacticipants" SET "main_branch" = 'main' WHERE (("id" = 2) AND ("main_branch" IS NULL))
2021-09-06 18:57:16.980553 I [20829:4260] PactBroker::DB::DataMigrations::SetPacticipantMainBranch -- Setting main branch for pacticipant -- {:branch=>"main", :pacticipant_name=>"Example API"}
2021-09-06 18:57:16.981414 I [20829:4260] pact-broker -- (0.000757s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 18:57:16.983013 I [20829:4260] pact-broker -- (0.001004s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:16.983922 I [20829:4260] pact-broker -- (0.000440s) UPDATE "triggered_webhooks" SET "uuid" = ('3a6c3a49-af24-44ff-8926-bdad1dd06c3a' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 18:57:16.984164 I [20829:4260] pact-broker -- (0.000115s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:57:16.984384 I [20829:4260] pact-broker -- (0.000131s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 18:57:16.984662 I [20829:4260] pact-broker -- (0.000175s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.984853 I [20829:4260] pact-broker -- (0.000112s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.985197 I [20829:4260] pact-broker -- (0.000181s) UPDATE "pact_publications" SET "consumer_version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "pact_publications"."consumer_version_id")) WHERE ("consumer_version_order" IS NULL)
2021-09-06 18:57:16.985377 I [20829:4260] pact-broker -- (0.000112s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.985577 I [20829:4260] pact-broker -- (0.000110s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.985810 I [20829:4260] pact-broker -- (0.000150s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.986028 I [20829:4260] pact-broker -- (0.000137s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.986375 I [20829:4260] pact-broker -- (0.000181s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 18:57:16.986553 I [20829:4260] pact-broker -- (0.000118s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.986711 I [20829:4260] pact-broker -- (0.000087s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 18:57:16.986863 I [20829:4260] pact-broker -- (0.000087s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.987006 I [20829:4260] pact-broker -- (0.000082s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 18:57:16.987290 I [20829:4260] pact-broker -- (0.000150s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 18:57:16.996015 I [20829:4260] pact-broker -- (0.001243s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags_with_latest_flag"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.003690 I [20829:4260] pact-broker -- (0.001213s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.006071 I [20829:4260] pact-broker -- (0.000854s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"labels"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.190919 I [20829:4260] pact-broker -- (0.000823s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_events"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.210697 I [20829:4260] pact-broker -- (0.001496s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.212755 I [20829:4260] pact-broker -- (0.000775s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.217373 I [20829:4260] pact-broker -- (0.000194s) SELECT "webhook_executions"."id", "triggered_webhook_id", "success", "logs", "webhook_executions"."created_at" FROM "webhook_executions" LIMIT 1
2021-09-06 18:57:17.220572 I [20829:4260] pact-broker -- (0.000379s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" LIMIT 1
2021-09-06 18:57:17.224944 I [20829:4260] pact-broker -- (0.000689s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"integrations"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.227856 I [20829:4260] pact-broker -- (0.001179s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_pact_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.236007 I [20829:4260] pact-broker -- (0.000928s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"all_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.239245 I [20829:4260] pact-broker -- (0.000772s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications_by_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.241456 I [20829:4260] pact-broker -- (0.000779s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.244409 I [20829:4260] pact-broker -- (0.001713s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_tagged_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.248720 I [20829:4260] pact-broker -- (0.001362s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_version_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.250875 I [20829:4260] pact-broker -- (0.000755s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_and_provider"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.252877 I [20829:4260] pact-broker -- (0.001034s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.258584 I [20829:4260] pact-broker -- (0.000896s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.261213 I [20829:4260] pact-broker -- (0.000765s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.293541 I [20829:4260] pact-broker -- (0.000322s) UPDATE "triggered_webhooks" SET "status" = 'failure' WHERE ("status" = 'retrying')
2021-09-06 18:57:17.296828 I [20829:4260] pact-broker -- (0.000804s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"config"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 18:57:17.298434 I [20829:4260] pact-broker -- (0.000522s) SELECT * FROM "config"
2021-09-06 18:57:17.298911 I [20829:4260] PactBroker::App -- Not seeding example data
2021-09-06 18:57:17.298922 I [20829:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 18:57:17.298926 I [20829:4260] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 18:57:17.299434 I [20829:4260] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 18:57:17.299445 I [20829:4260] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 18:57:17.299452 I [20829:4260] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 18:57:17.299459 I [20829:4260] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 18:57:17.299465 I [20829:4260] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 18:57:17.299471 I [20829:4260] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 18:57:17.299477 I [20829:4260] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 18:57:17.299483 I [20829:4260] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 18:57:17.299489 I [20829:4260] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 18:57:17.299496 I [20829:4260] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 18:57:17.299502 I [20829:4260] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 18:57:17.299509 I [20829:4260] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 18:57:17.299515 I [20829:4260] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 18:57:17.299521 I [20829:4260] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 18:57:17.299526 I [20829:4260] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 18:57:17.299532 I [20829:4260] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 18:57:17.299539 I [20829:4260] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 18:57:17.299545 I [20829:4260] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 18:57:17.299551 I [20829:4260] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 18:57:17.299557 I [20829:4260] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 18:57:17.299563 I [20829:4260] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 18:57:17.299568 I [20829:4260] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 18:57:17.299574 I [20829:4260] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 18:57:17.299580 I [20829:4260] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 18:57:17.299586 I [20829:4260] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 18:57:17.299591 I [20829:4260] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 18:57:17.299597 I [20829:4260] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 18:57:17.299603 I [20829:4260] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 18:57:17.299608 I [20829:4260] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 18:57:17.299614 I [20829:4260] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 18:57:17.299620 I [20829:4260] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 18:57:17.299625 I [20829:4260] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 18:57:17.299631 I [20829:4260] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 18:57:17.299638 I [20829:4260] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 18:57:17.299644 I [20829:4260] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 18:57:17.299650 I [20829:4260] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 18:57:17.299656 I [20829:4260] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-postgres/log source={:type=>:defaults}
2021-09-06 18:57:17.299662 I [20829:4260] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 18:57:17.299668 I [20829:4260] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 18:57:17.299674 I [20829:4260] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 18:57:17.299683 I [20829:4260] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 18:57:17.299690 I [20829:4260] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 18:57:17.300208 I [20829:4260] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 18:57:17.300219 I [20829:4260] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 18:57:17.300227 I [20829:4260] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 18:57:17.300237 I [20829:4260] pact-broker -- seed_example_data=false source={:type=>:accessor, :called_from=>"/Users/prashanthsams/.rvm/gems/ruby-2.7.0/gems/pact_broker-2.83.0/lib/pact_broker/config/load.rb:45"}
2021-09-06 18:57:17.300245 I [20829:4260] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 18:57:17.300251 I [20829:4260] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 18:57:17.300257 I [20829:4260] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 18:57:17.300263 I [20829:4260] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 18:57:17.300269 I [20829:4260] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 18:57:17.300274 I [20829:4260] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 18:57:17.300280 I [20829:4260] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 18:57:17.300286 I [20829:4260] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 18:57:17.300291 I [20829:4260] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 18:57:17.300297 I [20829:4260] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 18:57:17.300303 I [20829:4260] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 18:57:17.300310 I [20829:4260] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 18:57:17.300316 I [20829:4260] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 18:57:17.300323 I [20829:4260] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 18:57:17.300330 I [20829:4260] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 18:57:17.300337 I [20829:4260] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 18:57:17.300344 I [20829:4260] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 18:57:17.300348 I [20829:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 18:57:17.300355 I [20829:4260] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 19:03:33.156617 I [21533:4260] pact-broker -- (0.000090s) SET standard_conforming_strings = ON
2021-09-06 19:03:33.156833 I [21533:4260] pact-broker -- (0.000154s) SET client_min_messages = 'WARNING'
2021-09-06 19:03:33.156967 I [21533:4260] pact-broker -- (0.000109s) SET DateStyle = 'ISO'
2021-09-06 19:03:33.158983 I [21533:4260] pact-broker -- (0.000693s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
2021-09-06 19:03:33.160358 I [21533:4260] pact-broker -- (0.001197s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 19:03:33.160923 I [21533:4260] pact-broker -- (0.000421s) SELECT * FROM "schema_migrations" ORDER BY "filename" DESC LIMIT 1
2021-09-06 19:03:33.160955 I [21533:4260] PactBroker::App -- Database schema version is 20210818
2021-09-06 19:03:33.162550 I [21533:4260] pact-broker -- (0.000165s) SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 19:03:33.162715 I [21533:4260] pact-broker -- (0.000096s) SELECT * FROM "schema_migrations" LIMIT 1
2021-09-06 19:03:33.163056 I [21533:4260] pact-broker -- (0.000209s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 19:03:33.165080 I [21533:4260] PactBroker::App -- Skipping database migrations as the latest migration has already been applied
2021-09-06 19:03:33.165090 I [21533:4260] PactBroker::App -- Migrating data
2021-09-06 19:03:33.165791 I [21533:4260] pact-broker -- (0.000611s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:33.169624 I [21533:4260] pact-broker -- (0.001938s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.170053 I [21533:4260] pact-broker -- (0.000145s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:33.170945 I [21533:4260] pact-broker -- (0.000131s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:33.171354 I [21533:4260] pact-broker -- (0.000295s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:33.173227 I [21533:4260] pact-broker -- (0.000772s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.173602 I [21533:4260] pact-broker -- (0.000181s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:33.173844 I [21533:4260] pact-broker -- (0.000125s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:33.174879 I [21533:4260] pact-broker -- (0.000315s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 19:03:33.175336 I [21533:4260] pact-broker -- (0.000347s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:33.177676 I [21533:4260] pact-broker -- (0.001297s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.177979 I [21533:4260] pact-broker -- (0.000128s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:33.178852 I [21533:4260] pact-broker -- (0.000480s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.194851 I [21533:4260] pact-broker -- (0.015302s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.195764 I [21533:4260] pact-broker -- (0.000259s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.196753 I [21533:4260] pact-broker -- (0.000868s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 19:03:33.197152 I [21533:4260] pact-broker -- (0.000218s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.197689 I [21533:4260] pact-broker -- (0.000332s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 19:03:33.200116 I [21533:4260] pact-broker -- (0.001156s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"version_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.201082 I [21533:4260] pact-broker -- (0.000780s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 19:03:33.201322 I [21533:4260] pact-broker -- (0.000146s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 19:03:33.201873 I [21533:4260] pact-broker -- (0.000408s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 19:03:33.203985 I [21533:4260] pact-broker -- (0.000925s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.204999 I [21533:4260] pact-broker -- (0.000156s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 19:03:33.205423 I [21533:4260] pact-broker -- (0.000312s) SELECT NULL AS "nil" FROM "webhook_executions" LIMIT 1
2021-09-06 19:03:33.207756 I [21533:4260] pact-broker -- (0.001367s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_executions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.208133 I [21533:4260] pact-broker -- (0.000141s) DELETE FROM "webhook_executions" WHERE ("triggered_webhook_id" IS NULL)
2021-09-06 19:03:33.208687 I [21533:4260] pact-broker -- (0.000491s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 19:03:33.209796 I [21533:4260] pact-broker -- (0.000425s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 19:03:33.210376 I [21533:4260] pact-broker -- (0.000471s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.212719 I [21533:4260] pact-broker -- (0.001354s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.213684 I [21533:4260] pact-broker -- (0.000167s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.213921 I [21533:4260] pact-broker -- (0.000147s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.214112 I [21533:4260] pact-broker -- (0.000109s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.214483 I [21533:4260] pact-broker -- (0.000206s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:03:33.214740 I [21533:4260] pact-broker -- (0.000144s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.214975 I [21533:4260] pact-broker -- (0.000153s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.215778 I [21533:4260] pact-broker -- (0.000143s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.216003 I [21533:4260] pact-broker -- (0.000146s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.216358 I [21533:4260] pact-broker -- (0.000206s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:03:33.218827 I [21533:4260] pact-broker -- (0.000322s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:33.220143 I [21533:4260] pact-broker -- (0.000846s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pacticipants"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.220471 I [21533:4260] pact-broker -- (0.000128s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:33.220650 I [21533:4260] pact-broker -- (0.000092s) SELECT * FROM "pacticipants" WHERE ("display_name" IS NULL)
2021-09-06 19:03:33.220865 I [21533:4260] pact-broker -- (0.000112s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:33.221056 I [21533:4260] pact-broker -- (0.000120s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:33.221232 I [21533:4260] pact-broker -- (0.000105s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:33.221451 I [21533:4260] pact-broker -- (0.000136s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.221603 I [21533:4260] pact-broker -- (0.000087s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.221813 I [21533:4260] pact-broker -- (0.000096s) SELECT "id", "name" FROM "pacticipants" WHERE ("main_branch" IS NULL)
2021-09-06 19:03:33.222434 I [21533:4260] pact-broker -- (0.000526s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 19:03:33.223695 I [21533:4260] pact-broker -- (0.000795s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.224333 I [21533:4260] pact-broker -- (0.000285s) UPDATE "triggered_webhooks" SET "uuid" = ('517b88e6-2de1-40cd-93f7-64f33370c07f' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 19:03:33.224665 I [21533:4260] pact-broker -- (0.000207s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:33.224837 I [21533:4260] pact-broker -- (0.000110s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:33.225002 I [21533:4260] pact-broker -- (0.000101s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.225191 I [21533:4260] pact-broker -- (0.000104s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.225471 I [21533:4260] pact-broker -- (0.000134s) UPDATE "pact_publications" SET "consumer_version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "pact_publications"."consumer_version_id")) WHERE ("consumer_version_order" IS NULL)
2021-09-06 19:03:33.225594 I [21533:4260] pact-broker -- (0.000076s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.225717 I [21533:4260] pact-broker -- (0.000069s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.225839 I [21533:4260] pact-broker -- (0.000070s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.225956 I [21533:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.226209 I [21533:4260] pact-broker -- (0.000118s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:03:33.226319 I [21533:4260] pact-broker -- (0.000069s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.226438 I [21533:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:33.226555 I [21533:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.226670 I [21533:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:33.226886 I [21533:4260] pact-broker -- (0.000113s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:03:33.244611 I [21533:4260] pact-broker -- (0.011524s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags_with_latest_flag"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.252215 I [21533:4260] pact-broker -- (0.000806s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.254341 I [21533:4260] pact-broker -- (0.000833s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"labels"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.429171 I [21533:4260] pact-broker -- (0.001373s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_events"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.447844 I [21533:4260] pact-broker -- (0.000785s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.450134 I [21533:4260] pact-broker -- (0.000998s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.454628 I [21533:4260] pact-broker -- (0.000196s) SELECT "webhook_executions"."id", "triggered_webhook_id", "success", "logs", "webhook_executions"."created_at" FROM "webhook_executions" LIMIT 1
2021-09-06 19:03:33.457803 I [21533:4260] pact-broker -- (0.000438s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" LIMIT 1
2021-09-06 19:03:33.462575 I [21533:4260] pact-broker -- (0.001224s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"integrations"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.464945 I [21533:4260] pact-broker -- (0.000670s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_pact_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.473164 I [21533:4260] pact-broker -- (0.001138s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"all_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.476411 I [21533:4260] pact-broker -- (0.000759s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications_by_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.478731 I [21533:4260] pact-broker -- (0.000872s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.494856 I [21533:4260] pact-broker -- (0.014828s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_tagged_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.500325 I [21533:4260] pact-broker -- (0.000861s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_version_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.502801 I [21533:4260] pact-broker -- (0.000865s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_and_provider"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.504763 I [21533:4260] pact-broker -- (0.000866s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.511240 I [21533:4260] pact-broker -- (0.001087s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.514175 I [21533:4260] pact-broker -- (0.000853s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.545478 I [21533:4260] pact-broker -- (0.000270s) UPDATE "triggered_webhooks" SET "status" = 'failure' WHERE ("status" = 'retrying')
2021-09-06 19:03:33.549068 I [21533:4260] pact-broker -- (0.000824s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"config"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:33.551034 I [21533:4260] pact-broker -- (0.000272s) SELECT * FROM "config"
2021-09-06 19:03:33.551521 I [21533:4260] PactBroker::App -- Not seeding example data
2021-09-06 19:03:33.551533 I [21533:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:03:33.551537 I [21533:4260] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 19:03:33.552127 I [21533:4260] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 19:03:33.552138 I [21533:4260] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 19:03:33.552146 I [21533:4260] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 19:03:33.552153 I [21533:4260] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 19:03:33.552160 I [21533:4260] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 19:03:33.552165 I [21533:4260] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 19:03:33.552172 I [21533:4260] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 19:03:33.552178 I [21533:4260] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 19:03:33.552184 I [21533:4260] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 19:03:33.552190 I [21533:4260] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 19:03:33.552197 I [21533:4260] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 19:03:33.552203 I [21533:4260] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 19:03:33.552210 I [21533:4260] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 19:03:33.552216 I [21533:4260] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 19:03:33.552221 I [21533:4260] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 19:03:33.552227 I [21533:4260] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 19:03:33.552233 I [21533:4260] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 19:03:33.552240 I [21533:4260] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 19:03:33.552246 I [21533:4260] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 19:03:33.552252 I [21533:4260] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 19:03:33.552258 I [21533:4260] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 19:03:33.552265 I [21533:4260] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 19:03:33.552271 I [21533:4260] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 19:03:33.552276 I [21533:4260] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 19:03:33.552282 I [21533:4260] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 19:03:33.552288 I [21533:4260] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 19:03:33.552294 I [21533:4260] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 19:03:33.552300 I [21533:4260] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 19:03:33.552306 I [21533:4260] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 19:03:33.552311 I [21533:4260] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 19:03:33.552317 I [21533:4260] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 19:03:33.552324 I [21533:4260] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 19:03:33.552330 I [21533:4260] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 19:03:33.552336 I [21533:4260] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 19:03:33.552343 I [21533:4260] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 19:03:33.552349 I [21533:4260] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 19:03:33.552355 I [21533:4260] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-postgres/log source={:type=>:defaults}
2021-09-06 19:03:33.552361 I [21533:4260] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 19:03:33.552367 I [21533:4260] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 19:03:33.552373 I [21533:4260] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 19:03:33.552940 I [21533:4260] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 19:03:33.552952 I [21533:4260] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 19:03:33.552959 I [21533:4260] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 19:03:33.552966 I [21533:4260] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 19:03:33.552973 I [21533:4260] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 19:03:33.552983 I [21533:4260] pact-broker -- seed_example_data=false source={:type=>:accessor, :called_from=>"/Users/prashanthsams/.rvm/gems/ruby-2.7.0/gems/pact_broker-2.83.0/lib/pact_broker/config/load.rb:45"}
2021-09-06 19:03:33.552993 I [21533:4260] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 19:03:33.552999 I [21533:4260] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 19:03:33.553006 I [21533:4260] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 19:03:33.553012 I [21533:4260] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 19:03:33.553018 I [21533:4260] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 19:03:33.553024 I [21533:4260] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 19:03:33.553030 I [21533:4260] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 19:03:33.553037 I [21533:4260] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 19:03:33.553043 I [21533:4260] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 19:03:33.553049 I [21533:4260] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 19:03:33.553055 I [21533:4260] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 19:03:33.553062 I [21533:4260] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 19:03:33.553068 I [21533:4260] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 19:03:33.553076 I [21533:4260] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 19:03:33.553083 I [21533:4260] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 19:03:33.553090 I [21533:4260] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 19:03:33.553098 I [21533:4260] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 19:03:33.553102 I [21533:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:03:33.553110 I [21533:4260] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 19:03:46.098695 I [21556:4260] pact-broker -- (0.000210s) SET standard_conforming_strings = ON
2021-09-06 19:03:46.098963 I [21556:4260] pact-broker -- (0.000182s) SET client_min_messages = 'WARNING'
2021-09-06 19:03:46.099113 I [21556:4260] pact-broker -- (0.000113s) SET DateStyle = 'ISO'
2021-09-06 19:03:46.101355 I [21556:4260] pact-broker -- (0.000557s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
2021-09-06 19:03:46.102906 I [21556:4260] pact-broker -- (0.001330s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 19:03:46.103552 I [21556:4260] pact-broker -- (0.000457s) SELECT * FROM "schema_migrations" ORDER BY "filename" DESC LIMIT 1
2021-09-06 19:03:46.103588 I [21556:4260] PactBroker::App -- Database schema version is 20210818
2021-09-06 19:03:46.105160 I [21556:4260] pact-broker -- (0.000199s) SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 19:03:46.105342 I [21556:4260] pact-broker -- (0.000100s) SELECT * FROM "schema_migrations" LIMIT 1
2021-09-06 19:03:46.105702 I [21556:4260] pact-broker -- (0.000267s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 19:03:46.106638 I [21556:4260] PactBroker::App -- Skipping database migrations as the latest migration has already been applied
2021-09-06 19:03:46.106648 I [21556:4260] PactBroker::App -- Migrating data
2021-09-06 19:03:46.107348 I [21556:4260] pact-broker -- (0.000606s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:46.110405 I [21556:4260] pact-broker -- (0.002321s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.110927 I [21556:4260] pact-broker -- (0.000165s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:46.111245 I [21556:4260] pact-broker -- (0.000148s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:03:46.111726 I [21556:4260] pact-broker -- (0.000331s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:46.113372 I [21556:4260] pact-broker -- (0.001088s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.113707 I [21556:4260] pact-broker -- (0.000140s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:46.113983 I [21556:4260] pact-broker -- (0.000136s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:03:46.114404 I [21556:4260] pact-broker -- (0.000359s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 19:03:46.114929 I [21556:4260] pact-broker -- (0.000406s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:46.116526 I [21556:4260] pact-broker -- (0.001044s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.116851 I [21556:4260] pact-broker -- (0.000127s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:46.117440 I [21556:4260] pact-broker -- (0.000484s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.118716 I [21556:4260] pact-broker -- (0.000769s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.119029 I [21556:4260] pact-broker -- (0.000110s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.119273 I [21556:4260] pact-broker -- (0.000177s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 19:03:46.119491 I [21556:4260] pact-broker -- (0.000125s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.119744 I [21556:4260] pact-broker -- (0.000140s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 19:03:46.121627 I [21556:4260] pact-broker -- (0.001365s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"version_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.122048 I [21556:4260] pact-broker -- (0.000270s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 19:03:46.122187 I [21556:4260] pact-broker -- (0.000075s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 19:03:46.122582 I [21556:4260] pact-broker -- (0.000277s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 19:03:46.124099 I [21556:4260] pact-broker -- (0.000982s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.124486 I [21556:4260] pact-broker -- (0.000104s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 19:03:46.124808 I [21556:4260] pact-broker -- (0.000236s) SELECT NULL AS "nil" FROM "webhook_executions" LIMIT 1
2021-09-06 19:03:46.126526 I [21556:4260] pact-broker -- (0.001214s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_executions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.126835 I [21556:4260] pact-broker -- (0.000119s) DELETE FROM "webhook_executions" WHERE ("triggered_webhook_id" IS NULL)
2021-09-06 19:03:46.127237 I [21556:4260] pact-broker -- (0.000354s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 19:03:46.127590 I [21556:4260] pact-broker -- (0.000304s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 19:03:46.128025 I [21556:4260] pact-broker -- (0.000345s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.129475 I [21556:4260] pact-broker -- (0.000956s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.129756 I [21556:4260] pact-broker -- (0.000093s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.129911 I [21556:4260] pact-broker -- (0.000078s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.130044 I [21556:4260] pact-broker -- (0.000071s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.143503 I [21556:4260] pact-broker -- (0.013268s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:03:46.143770 I [21556:4260] pact-broker -- (0.000107s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.143918 I [21556:4260] pact-broker -- (0.000070s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.144053 I [21556:4260] pact-broker -- (0.000075s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.144178 I [21556:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.144561 I [21556:4260] pact-broker -- (0.000204s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:03:46.144954 I [21556:4260] pact-broker -- (0.000296s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:46.147407 I [21556:4260] pact-broker -- (0.000800s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pacticipants"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.147748 I [21556:4260] pact-broker -- (0.000078s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:46.147897 I [21556:4260] pact-broker -- (0.000070s) SELECT * FROM "pacticipants" WHERE ("display_name" IS NULL)
2021-09-06 19:03:46.148056 I [21556:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:46.148238 I [21556:4260] pact-broker -- (0.000124s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:46.148411 I [21556:4260] pact-broker -- (0.000090s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:03:46.148590 I [21556:4260] pact-broker -- (0.000104s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.148767 I [21556:4260] pact-broker -- (0.000092s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.148946 I [21556:4260] pact-broker -- (0.000087s) SELECT "id", "name" FROM "pacticipants" WHERE ("main_branch" IS NULL)
2021-09-06 19:03:46.149605 I [21556:4260] pact-broker -- (0.000525s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 19:03:46.150951 I [21556:4260] pact-broker -- (0.000775s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.151599 I [21556:4260] pact-broker -- (0.000260s) UPDATE "triggered_webhooks" SET "uuid" = ('b88be7b6-5ff6-4e4b-a771-10f4caf2e4b7' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 19:03:46.151764 I [21556:4260] pact-broker -- (0.000078s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:46.151914 I [21556:4260] pact-broker -- (0.000065s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:03:46.152044 I [21556:4260] pact-broker -- (0.000076s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.152160 I [21556:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.152441 I [21556:4260] pact-broker -- (0.000112s) UPDATE "pact_publications" SET "consumer_version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "pact_publications"."consumer_version_id")) WHERE ("consumer_version_order" IS NULL)
2021-09-06 19:03:46.152556 I [21556:4260] pact-broker -- (0.000072s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.152671 I [21556:4260] pact-broker -- (0.000064s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.152787 I [21556:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.152974 I [21556:4260] pact-broker -- (0.000066s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.153199 I [21556:4260] pact-broker -- (0.000120s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:03:46.153350 I [21556:4260] pact-broker -- (0.000096s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.153486 I [21556:4260] pact-broker -- (0.000074s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:03:46.153692 I [21556:4260] pact-broker -- (0.000098s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.153826 I [21556:4260] pact-broker -- (0.000076s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:03:46.154099 I [21556:4260] pact-broker -- (0.000133s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:03:46.161200 I [21556:4260] pact-broker -- (0.000787s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags_with_latest_flag"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.172097 I [21556:4260] pact-broker -- (0.001335s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.174863 I [21556:4260] pact-broker -- (0.000773s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"labels"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.354619 I [21556:4260] pact-broker -- (0.001035s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_events"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.370412 I [21556:4260] pact-broker -- (0.000875s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.372497 I [21556:4260] pact-broker -- (0.000782s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.376924 I [21556:4260] pact-broker -- (0.000195s) SELECT "webhook_executions"."id", "triggered_webhook_id", "success", "logs", "webhook_executions"."created_at" FROM "webhook_executions" LIMIT 1
2021-09-06 19:03:46.393746 I [21556:4260] pact-broker -- (0.013859s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" LIMIT 1
2021-09-06 19:03:46.399352 I [21556:4260] pact-broker -- (0.000927s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"integrations"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.402049 I [21556:4260] pact-broker -- (0.000662s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_pact_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.413222 I [21556:4260] pact-broker -- (0.001445s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"all_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.416710 I [21556:4260] pact-broker -- (0.000804s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications_by_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.418992 I [21556:4260] pact-broker -- (0.000753s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.421282 I [21556:4260] pact-broker -- (0.000995s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_tagged_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.424953 I [21556:4260] pact-broker -- (0.000748s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_version_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.427640 I [21556:4260] pact-broker -- (0.001306s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_and_provider"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.429299 I [21556:4260] pact-broker -- (0.000740s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.444339 I [21556:4260] pact-broker -- (0.012595s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.447189 I [21556:4260] pact-broker -- (0.000870s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.472607 I [21556:4260] pact-broker -- (0.000284s) UPDATE "triggered_webhooks" SET "status" = 'failure' WHERE ("status" = 'retrying')
2021-09-06 19:03:46.477416 I [21556:4260] pact-broker -- (0.000910s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"config"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:03:46.478406 I [21556:4260] pact-broker -- (0.000256s) SELECT * FROM "config"
2021-09-06 19:03:46.478997 I [21556:4260] PactBroker::App -- Not seeding example data
2021-09-06 19:03:46.479008 I [21556:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:03:46.479012 I [21556:4260] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 19:03:46.479095 I [21556:4260] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 19:03:46.479104 I [21556:4260] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 19:03:46.479111 I [21556:4260] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 19:03:46.479116 I [21556:4260] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 19:03:46.479122 I [21556:4260] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 19:03:46.479128 I [21556:4260] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 19:03:46.479134 I [21556:4260] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 19:03:46.479139 I [21556:4260] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 19:03:46.479145 I [21556:4260] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 19:03:46.479151 I [21556:4260] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 19:03:46.479157 I [21556:4260] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 19:03:46.479163 I [21556:4260] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 19:03:46.479168 I [21556:4260] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 19:03:46.479174 I [21556:4260] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 19:03:46.479179 I [21556:4260] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 19:03:46.479184 I [21556:4260] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 19:03:46.479190 I [21556:4260] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 19:03:46.479196 I [21556:4260] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 19:03:46.479202 I [21556:4260] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 19:03:46.479208 I [21556:4260] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 19:03:46.479213 I [21556:4260] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 19:03:46.479219 I [21556:4260] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 19:03:46.479224 I [21556:4260] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 19:03:46.479229 I [21556:4260] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 19:03:46.479235 I [21556:4260] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 19:03:46.479241 I [21556:4260] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 19:03:46.479269 I [21556:4260] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 19:03:46.479275 I [21556:4260] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 19:03:46.479281 I [21556:4260] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 19:03:46.479287 I [21556:4260] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 19:03:46.479292 I [21556:4260] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 19:03:46.479298 I [21556:4260] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 19:03:46.479304 I [21556:4260] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 19:03:46.479309 I [21556:4260] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 19:03:46.479315 I [21556:4260] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 19:03:46.479321 I [21556:4260] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 19:03:46.479327 I [21556:4260] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-postgres/log source={:type=>:defaults}
2021-09-06 19:03:46.479332 I [21556:4260] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 19:03:46.479338 I [21556:4260] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 19:03:46.479344 I [21556:4260] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 19:03:46.479352 I [21556:4260] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 19:03:46.479358 I [21556:4260] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 19:03:46.479363 I [21556:4260] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 19:03:46.479369 I [21556:4260] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 19:03:46.479374 I [21556:4260] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 19:03:46.479428 I [21556:4260] pact-broker -- seed_example_data=false source={:type=>:accessor, :called_from=>"/Users/prashanthsams/.rvm/gems/ruby-2.7.0/gems/pact_broker-2.83.0/lib/pact_broker/config/load.rb:45"}
2021-09-06 19:03:46.479437 I [21556:4260] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 19:03:46.479443 I [21556:4260] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 19:03:46.479449 I [21556:4260] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 19:03:46.479455 I [21556:4260] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 19:03:46.479461 I [21556:4260] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 19:03:46.479466 I [21556:4260] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 19:03:46.479472 I [21556:4260] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 19:03:46.479478 I [21556:4260] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 19:03:46.479484 I [21556:4260] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 19:03:46.479489 I [21556:4260] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 19:03:46.479495 I [21556:4260] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 19:03:46.479502 I [21556:4260] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 19:03:46.479508 I [21556:4260] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 19:03:46.479515 I [21556:4260] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 19:03:46.479522 I [21556:4260] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 19:03:46.479529 I [21556:4260] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 19:03:46.479553 I [21556:4260] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 19:03:46.479557 I [21556:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:03:46.479565 I [21556:4260] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

2021-09-06 19:04:10.550618 I [21598:4260] pact-broker -- (0.000092s) SET standard_conforming_strings = ON
2021-09-06 19:04:10.550820 I [21598:4260] pact-broker -- (0.000138s) SET client_min_messages = 'WARNING'
2021-09-06 19:04:10.550951 I [21598:4260] pact-broker -- (0.000105s) SET DateStyle = 'ISO'
2021-09-06 19:04:10.552706 I [21598:4260] pact-broker -- (0.000405s) SELECT CAST(current_setting('server_version_num') AS integer) AS v
2021-09-06 19:04:10.554152 I [21598:4260] pact-broker -- (0.001251s) SELECT "relname" FROM "pg_class" INNER JOIN "pg_namespace" ON ("pg_namespace"."oid" = "pg_class"."relnamespace") WHERE (("relkind" IN ('r', 'p')) AND ("pg_namespace"."nspname" = any(current_schemas(false))))
2021-09-06 19:04:10.554768 I [21598:4260] pact-broker -- (0.000422s) SELECT * FROM "schema_migrations" ORDER BY "filename" DESC LIMIT 1
2021-09-06 19:04:10.554801 I [21598:4260] PactBroker::App -- Database schema version is 20210818
2021-09-06 19:04:10.556348 I [21598:4260] pact-broker -- (0.000108s) SELECT NULL AS "nil" FROM "schema_migrations" LIMIT 1
2021-09-06 19:04:10.556513 I [21598:4260] pact-broker -- (0.000101s) SELECT * FROM "schema_migrations" LIMIT 1
2021-09-06 19:04:10.556828 I [21598:4260] pact-broker -- (0.000223s) SELECT "filename" FROM "schema_migrations" ORDER BY "filename"
2021-09-06 19:04:10.558437 I [21598:4260] PactBroker::App -- Skipping database migrations as the latest migration has already been applied
2021-09-06 19:04:10.558447 I [21598:4260] PactBroker::App -- Migrating data
2021-09-06 19:04:10.559083 I [21598:4260] pact-broker -- (0.000548s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:04:10.562681 I [21598:4260] pact-broker -- (0.001883s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"verifications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.563916 I [21598:4260] pact-broker -- (0.000149s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:04:10.564199 I [21598:4260] pact-broker -- (0.000151s) SELECT NULL AS "nil" FROM "verifications" LIMIT 1
2021-09-06 19:04:10.564612 I [21598:4260] pact-broker -- (0.000303s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:04:10.567294 I [21598:4260] pact-broker -- (0.000951s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.567605 I [21598:4260] pact-broker -- (0.000125s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:04:10.567844 I [21598:4260] pact-broker -- (0.000122s) SELECT NULL AS "nil" FROM "pact_versions" LIMIT 1
2021-09-06 19:04:10.568132 I [21598:4260] pact-broker -- (0.000233s) UPDATE verifications
                    SET consumer_id = (SELECT consumer_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id),
                     provider_id = (SELECT provider_id
                      FROM pact_versions
                      WHERE id = verifications.pact_version_id)
                    WHERE consumer_id is null
                    OR provider_id is null
2021-09-06 19:04:10.569339 I [21598:4260] pact-broker -- (0.000379s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:04:10.571417 I [21598:4260] pact-broker -- (0.000987s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.571740 I [21598:4260] pact-broker -- (0.000127s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:04:10.572320 I [21598:4260] pact-broker -- (0.000475s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.574230 I [21598:4260] pact-broker -- (0.001009s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.574569 I [21598:4260] pact-broker -- (0.000154s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.574804 I [21598:4260] pact-broker -- (0.000176s) UPDATE pact_publications
                    SET consumer_id = (SELECT pacticipant_id
                      FROM versions
                      WHERE id = pact_publications.consumer_version_id)
                    WHERE consumer_id is null
2021-09-06 19:04:10.575635 I [21598:4260] pact-broker -- (0.000731s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.575963 I [21598:4260] pact-broker -- (0.000215s) SELECT NULL AS "nil" FROM "version_sequence_number" LIMIT 1
2021-09-06 19:04:10.577902 I [21598:4260] pact-broker -- (0.001023s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"version_sequence_number"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.578323 I [21598:4260] pact-broker -- (0.000285s) SELECT max("order") AS "max" FROM "versions" LIMIT 1
2021-09-06 19:04:10.578511 I [21598:4260] pact-broker -- (0.000118s) SELECT * FROM "version_sequence_number" LIMIT 1
2021-09-06 19:04:10.579456 I [21598:4260] pact-broker -- (0.000302s) SELECT NULL AS "nil" FROM "webhooks" LIMIT 1
2021-09-06 19:04:10.598109 I [21598:4260] pact-broker -- (0.017560s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.598972 I [21598:4260] pact-broker -- (0.000537s) UPDATE "webhooks" SET "enabled" = true WHERE ("enabled" IS NULL)
2021-09-06 19:04:10.599372 I [21598:4260] pact-broker -- (0.000291s) SELECT NULL AS "nil" FROM "webhook_executions" LIMIT 1
2021-09-06 19:04:10.601347 I [21598:4260] pact-broker -- (0.000932s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_executions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.601678 I [21598:4260] pact-broker -- (0.000129s) DELETE FROM "webhook_executions" WHERE ("triggered_webhook_id" IS NULL)
2021-09-06 19:04:10.602108 I [21598:4260] pact-broker -- (0.000372s) UPDATE latest_pact_publication_ids_for_consumer_versions
                  SET created_at = (SELECT created_at
                    FROM versions
                    WHERE id = latest_pact_publication_ids_for_consumer_versions.consumer_version_id)
                  WHERE created_at IS NULL
2021-09-06 19:04:10.602481 I [21598:4260] pact-broker -- (0.000323s) UPDATE latest_verification_id_for_pact_version_and_provider_version
                  SET created_at = (SELECT created_at
                    FROM verifications
                    WHERE id = latest_verification_id_for_pact_version_and_provider_version.verification_id)
                  WHERE created_at is null
2021-09-06 19:04:10.603467 I [21598:4260] pact-broker -- (0.000437s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.605366 I [21598:4260] pact-broker -- (0.000875s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.605694 I [21598:4260] pact-broker -- (0.000151s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.605934 I [21598:4260] pact-broker -- (0.000157s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.606168 I [21598:4260] pact-broker -- (0.000159s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.607156 I [21598:4260] pact-broker -- (0.000235s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:04:10.607403 I [21598:4260] pact-broker -- (0.000143s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.607628 I [21598:4260] pact-broker -- (0.000149s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.607854 I [21598:4260] pact-broker -- (0.000150s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.608088 I [21598:4260] pact-broker -- (0.000157s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.609197 I [21598:4260] pact-broker -- (0.000196s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:04:10.610622 I [21598:4260] pact-broker -- (0.001330s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:04:10.611921 I [21598:4260] pact-broker -- (0.000825s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"pacticipants"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.612260 I [21598:4260] pact-broker -- (0.000139s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:04:10.612494 I [21598:4260] pact-broker -- (0.000104s) SELECT * FROM "pacticipants" WHERE ("display_name" IS NULL)
2021-09-06 19:04:10.612747 I [21598:4260] pact-broker -- (0.000145s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:04:10.612944 I [21598:4260] pact-broker -- (0.000129s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:04:10.613108 I [21598:4260] pact-broker -- (0.000092s) SELECT NULL AS "nil" FROM "pacticipants" LIMIT 1
2021-09-06 19:04:10.613264 I [21598:4260] pact-broker -- (0.000090s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.613432 I [21598:4260] pact-broker -- (0.000107s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.613609 I [21598:4260] pact-broker -- (0.000091s) SELECT "id", "name" FROM "pacticipants" WHERE ("main_branch" IS NULL)
2021-09-06 19:04:10.614251 I [21598:4260] pact-broker -- (0.000541s) SELECT NULL AS "nil" FROM "triggered_webhooks" LIMIT 1
2021-09-06 19:04:10.615505 I [21598:4260] pact-broker -- (0.000784s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"triggered_webhooks"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.616164 I [21598:4260] pact-broker -- (0.000305s) UPDATE "triggered_webhooks" SET "uuid" = ('b890413a-8fd9-4c12-9e98-c61d67f5ef3f' || '-' || "id") WHERE ("uuid" IS NULL)
2021-09-06 19:04:10.616366 I [21598:4260] pact-broker -- (0.000102s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:04:10.616528 I [21598:4260] pact-broker -- (0.000097s) SELECT NULL AS "nil" FROM "pact_publications" LIMIT 1
2021-09-06 19:04:10.616689 I [21598:4260] pact-broker -- (0.000094s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.616832 I [21598:4260] pact-broker -- (0.000077s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.617087 I [21598:4260] pact-broker -- (0.000124s) UPDATE "pact_publications" SET "consumer_version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "pact_publications"."consumer_version_id")) WHERE ("consumer_version_order" IS NULL)
2021-09-06 19:04:10.617208 I [21598:4260] pact-broker -- (0.000074s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.617328 I [21598:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.617449 I [21598:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.617566 I [21598:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.617790 I [21598:4260] pact-broker -- (0.000117s) UPDATE "tags" SET "pacticipant_id" = (SELECT "pacticipant_id" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("pacticipant_id" IS NULL)
2021-09-06 19:04:10.617900 I [21598:4260] pact-broker -- (0.000069s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.618018 I [21598:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "tags" LIMIT 1
2021-09-06 19:04:10.618136 I [21598:4260] pact-broker -- (0.000068s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.618253 I [21598:4260] pact-broker -- (0.000067s) SELECT NULL AS "nil" FROM "versions" LIMIT 1
2021-09-06 19:04:10.618475 I [21598:4260] pact-broker -- (0.000113s) UPDATE "tags" SET "version_order" = (SELECT "order" FROM "versions" WHERE ("versions"."id" = "tags"."version_id")) WHERE ("version_order" IS NULL)
2021-09-06 19:04:10.625413 I [21598:4260] pact-broker -- (0.000672s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"tags_with_latest_flag"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.647762 I [21598:4260] pact-broker -- (0.017348s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.649866 I [21598:4260] pact-broker -- (0.000722s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"labels"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.825293 I [21598:4260] pact-broker -- (0.001022s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"webhook_events"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.848234 I [21598:4260] pact-broker -- (0.004854s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_pact_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.850518 I [21598:4260] pact-broker -- (0.000746s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verification_id_for_pact_version_and_provider_version"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.854989 I [21598:4260] pact-broker -- (0.000124s) SELECT "webhook_executions"."id", "triggered_webhook_id", "success", "logs", "webhook_executions"."created_at" FROM "webhook_executions" LIMIT 1
2021-09-06 19:04:10.858612 I [21598:4260] pact-broker -- (0.000728s) SELECT * FROM (SELECT "triggered_webhooks".* FROM "triggered_webhooks" LEFT JOIN "triggered_webhooks" AS "triggered_webhooks_2" ON (("triggered_webhooks"."webhook_uuid" = "triggered_webhooks_2"."webhook_uuid") AND ("triggered_webhooks"."consumer_id" = "triggered_webhooks_2"."consumer_id") AND ("triggered_webhooks"."provider_id" = "triggered_webhooks_2"."provider_id") AND ("triggered_webhooks"."event_name" = "triggered_webhooks_2"."event_name") AND ("triggered_webhooks_2"."id" > "triggered_webhooks"."id")) WHERE (("triggered_webhooks"."event_name" IS NOT NULL) AND ("triggered_webhooks_2"."id" IS NULL))) AS "triggered_webhooks" LIMIT 1
2021-09-06 19:04:10.862991 I [21598:4260] pact-broker -- (0.000717s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"integrations"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.865721 I [21598:4260] pact-broker -- (0.000942s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_pact_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.874492 I [21598:4260] pact-broker -- (0.001468s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"all_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.877876 I [21598:4260] pact-broker -- (0.000799s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications_by_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.880039 I [21598:4260] pact-broker -- (0.000724s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.898884 I [21598:4260] pact-broker -- (0.017527s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_tagged_pact_publications"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.904423 I [21598:4260] pact-broker -- (0.000937s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_version_tags"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.907210 I [21598:4260] pact-broker -- (0.001062s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_verifications_for_consumer_and_provider"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.909307 I [21598:4260] pact-broker -- (0.000929s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.916152 I [21598:4260] pact-broker -- (0.001125s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"head_matrix"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.919272 I [21598:4260] pact-broker -- (0.000919s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"latest_pact_publication_ids_for_consumer_versions"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.954706 I [21598:4260] pact-broker -- (0.000332s) UPDATE "triggered_webhooks" SET "status" = 'failure' WHERE ("status" = 'retrying')
2021-09-06 19:04:10.958684 I [21598:4260] pact-broker -- (0.001433s) SELECT "pg_attribute"."attname" AS "name", CAST("pg_attribute"."atttypid" AS integer) AS "oid", CAST("basetype"."oid" AS integer) AS "base_oid", format_type("basetype"."oid", "pg_type"."typtypmod") AS "db_base_type", format_type("pg_type"."oid", "pg_attribute"."atttypmod") AS "db_type", pg_get_expr("pg_attrdef"."adbin", "pg_class"."oid") AS "default", NOT "pg_attribute"."attnotnull" AS "allow_null", COALESCE(("pg_attribute"."attnum" = ANY("pg_index"."indkey")), false) AS "primary_key", "pg_attribute"."attidentity", ("pg_attribute"."attgenerated" != '') AS "generated" FROM "pg_class" INNER JOIN "pg_attribute" ON ("pg_attribute"."attrelid" = "pg_class"."oid") INNER JOIN "pg_type" ON ("pg_type"."oid" = "pg_attribute"."atttypid") LEFT OUTER JOIN "pg_type" AS "basetype" ON ("basetype"."oid" = "pg_type"."typbasetype") LEFT OUTER JOIN "pg_attrdef" ON (("pg_attrdef"."adrelid" = "pg_class"."oid") AND ("pg_attrdef"."adnum" = "pg_attribute"."attnum")) LEFT OUTER JOIN "pg_index" ON (("pg_index"."indrelid" = "pg_class"."oid") AND ("pg_index"."indisprimary" IS TRUE)) WHERE (("pg_attribute"."attisdropped" IS FALSE) AND ("pg_attribute"."attnum" > 0) AND ("pg_class"."oid" = CAST(CAST('"config"' AS regclass) AS oid))) ORDER BY "pg_attribute"."attnum"
2021-09-06 19:04:10.960091 I [21598:4260] pact-broker -- (0.000300s) SELECT * FROM "config"
2021-09-06 19:04:10.960567 I [21598:4260] PactBroker::App -- Not seeding example data
2021-09-06 19:04:10.960578 I [21598:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:04:10.960582 I [21598:4260] pact-broker -- PACT BROKER CONFIGURATION:
2021-09-06 19:04:10.961109 I [21598:4260] pact-broker -- allow_dangerous_contract_modification=true source={:type=>:defaults}
2021-09-06 19:04:10.961119 I [21598:4260] pact-broker -- allow_missing_migration_files=true source={:type=>:defaults}
2021-09-06 19:04:10.961127 I [21598:4260] pact-broker -- allow_public_read=false source={:type=>:defaults}
2021-09-06 19:04:10.961133 I [21598:4260] pact-broker -- auto_detect_main_branch=true source={:type=>:defaults}
2021-09-06 19:04:10.961140 I [21598:4260] pact-broker -- auto_migrate_db=true source={:type=>:defaults}
2021-09-06 19:04:10.961146 I [21598:4260] pact-broker -- auto_migrate_db_data=true source={:type=>:defaults}
2021-09-06 19:04:10.961153 I [21598:4260] pact-broker -- badge_provider_mode=redirect source={:type=>:defaults}
2021-09-06 19:04:10.961159 I [21598:4260] pact-broker -- base_equality_only_on_content_that_affects_verification_results=true source={:type=>:defaults}
2021-09-06 19:04:10.961165 I [21598:4260] pact-broker -- base_url= source={:type=>:defaults}
2021-09-06 19:04:10.961171 I [21598:4260] pact-broker -- base_urls=[] source={:type=>:defaults}
2021-09-06 19:04:10.961176 I [21598:4260] pact-broker -- basic_auth_enabled=false source={:type=>:defaults}
2021-09-06 19:04:10.961183 I [21598:4260] pact-broker -- basic_auth_password= source={:type=>:defaults}
2021-09-06 19:04:10.961188 I [21598:4260] pact-broker -- basic_auth_read_only_password= source={:type=>:defaults}
2021-09-06 19:04:10.961194 I [21598:4260] pact-broker -- basic_auth_read_only_username= source={:type=>:defaults}
2021-09-06 19:04:10.961200 I [21598:4260] pact-broker -- basic_auth_username= source={:type=>:defaults}
2021-09-06 19:04:10.961206 I [21598:4260] pact-broker -- check_for_potential_duplicate_pacticipant_names=true source={:type=>:defaults}
2021-09-06 19:04:10.961212 I [21598:4260] pact-broker -- create_deployed_versions_for_tags=true source={:type=>:defaults}
2021-09-06 19:04:10.961218 I [21598:4260] pact-broker -- database_adapter=postgres source={:type=>:defaults}
2021-09-06 19:04:10.961224 I [21598:4260] pact-broker -- database_connect_max_retries=0 source={:type=>:defaults}
2021-09-06 19:04:10.961231 I [21598:4260] pact-broker -- database_connection_validation_timeout=-1 source={:type=>:defaults}
2021-09-06 19:04:10.961237 I [21598:4260] pact-broker -- database_host= source={:type=>:defaults}
2021-09-06 19:04:10.961243 I [21598:4260] pact-broker -- database_max_connections= source={:type=>:defaults}
2021-09-06 19:04:10.961249 I [21598:4260] pact-broker -- database_name= source={:type=>:defaults}
2021-09-06 19:04:10.961255 I [21598:4260] pact-broker -- database_password= source={:type=>:defaults}
2021-09-06 19:04:10.961261 I [21598:4260] pact-broker -- database_pool_timeout=5 source={:type=>:defaults}
2021-09-06 19:04:10.961266 I [21598:4260] pact-broker -- database_port= source={:type=>:defaults}
2021-09-06 19:04:10.961272 I [21598:4260] pact-broker -- database_sslmode= source={:type=>:defaults}
2021-09-06 19:04:10.961278 I [21598:4260] pact-broker -- database_statement_timeout=15 source={:type=>:defaults}
2021-09-06 19:04:10.961284 I [21598:4260] pact-broker -- database_url= source={:type=>:defaults}
2021-09-06 19:04:10.961289 I [21598:4260] pact-broker -- database_username= source={:type=>:defaults}
2021-09-06 19:04:10.961295 I [21598:4260] pact-broker -- disable_ssl_verification=false source={:type=>:defaults}
2021-09-06 19:04:10.961301 I [21598:4260] pact-broker -- enable_diagnostic_endpoints=true source={:type=>:defaults}
2021-09-06 19:04:10.961306 I [21598:4260] pact-broker -- enable_public_badge_access=false source={:type=>:defaults}
2021-09-06 19:04:10.961313 I [21598:4260] pact-broker -- features=[] source={:type=>:defaults}
2021-09-06 19:04:10.961319 I [21598:4260] pact-broker -- hide_pactflow_messages=false source={:type=>:defaults}
2021-09-06 19:04:10.961325 I [21598:4260] pact-broker -- log_configuration_on_startup=true source={:type=>:defaults}
2021-09-06 19:04:10.961330 I [21598:4260] pact-broker -- log_dir=/Users/prashanthsams/Documents/pact_broker_service/ruby-postgres/log source={:type=>:defaults}
2021-09-06 19:04:10.961336 I [21598:4260] pact-broker -- log_format= source={:type=>:defaults}
2021-09-06 19:04:10.961343 I [21598:4260] pact-broker -- log_level=info source={:type=>:defaults}
2021-09-06 19:04:10.961348 I [21598:4260] pact-broker -- log_stream=file source={:type=>:defaults}
2021-09-06 19:04:10.961886 I [21598:4260] pact-broker -- main_branch_candidates=["develop", "main", "master"] source={:type=>:defaults}
2021-09-06 19:04:10.961897 I [21598:4260] pact-broker -- metrics_sql_statement_timeout=30 source={:type=>:defaults}
2021-09-06 19:04:10.961904 I [21598:4260] pact-broker -- order_versions_by_date=true source={:type=>:defaults}
2021-09-06 19:04:10.961911 I [21598:4260] pact-broker -- port=9292 source={:type=>:defaults}
2021-09-06 19:04:10.961917 I [21598:4260] pact-broker -- public_heartbeat=false source={:type=>:defaults}
2021-09-06 19:04:10.961927 I [21598:4260] pact-broker -- seed_example_data=false source={:type=>:accessor, :called_from=>"/Users/prashanthsams/.rvm/gems/ruby-2.7.0/gems/pact_broker-2.83.0/lib/pact_broker/config/load.rb:45"}
2021-09-06 19:04:10.961935 I [21598:4260] pact-broker -- semver_formats=["%M.%m.%p%s%d", "%M.%m", "%M"] source={:type=>:defaults}
2021-09-06 19:04:10.961941 I [21598:4260] pact-broker -- shields_io_base_url=https://img.shields.io source={:type=>:defaults}
2021-09-06 19:04:10.961947 I [21598:4260] pact-broker -- sql_log_level=debug source={:type=>:defaults}
2021-09-06 19:04:10.961953 I [21598:4260] pact-broker -- sql_log_warn_duration=5 source={:type=>:defaults}
2021-09-06 19:04:10.961958 I [21598:4260] pact-broker -- use_case_sensitive_resource_names=true source={:type=>:defaults}
2021-09-06 19:04:10.961964 I [21598:4260] pact-broker -- use_first_tag_as_branch=true source={:type=>:defaults}
2021-09-06 19:04:10.961970 I [21598:4260] pact-broker -- use_first_tag_as_branch_time_limit=10 source={:type=>:defaults}
2021-09-06 19:04:10.961976 I [21598:4260] pact-broker -- use_hal_browser=true source={:type=>:defaults}
2021-09-06 19:04:10.961982 I [21598:4260] pact-broker -- use_rack_protection=true source={:type=>:defaults}
2021-09-06 19:04:10.961987 I [21598:4260] pact-broker -- user_agent=Pact Broker v2.83.0 source={:type=>:defaults}
2021-09-06 19:04:10.961993 I [21598:4260] pact-broker -- validate_database_connection_config=true source={:type=>:defaults}
2021-09-06 19:04:10.962000 I [21598:4260] pact-broker -- warning_error_class_names=["Sequel::ForeignKeyConstraintViolation"] source={:type=>:defaults}
2021-09-06 19:04:10.962005 I [21598:4260] pact-broker -- webhook_host_whitelist=[] source={:type=>:defaults}
2021-09-06 19:04:10.962014 I [21598:4260] pact-broker -- webhook_http_code_success=[200, 201, 202, 203, 204, 205, 206] source={:type=>:defaults}
2021-09-06 19:04:10.962020 I [21598:4260] pact-broker -- webhook_http_method_whitelist=["POST"] source={:type=>:defaults}
2021-09-06 19:04:10.962027 I [21598:4260] pact-broker -- webhook_retry_schedule=[10, 60, 120, 300, 600, 1200] source={:type=>:defaults}
2021-09-06 19:04:10.962035 I [21598:4260] pact-broker -- webhook_scheme_whitelist=["https"] source={:type=>:defaults}
2021-09-06 19:04:10.962038 I [21598:4260] pact-broker -- ------------------------------------------------------------------------
2021-09-06 19:04:10.962046 I [21598:4260] PactBroker::App -- 

********************************************************************************

Want someone to manage your Pact Broker for you? Check out https://pactflow.io/oss for a hardened, fully supported SaaS version of the Pact Broker with an improved UI + more.

********************************************************************************

